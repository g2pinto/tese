{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!/home/gustavo/Documents/tese/loomio/vue/src/components/inbox/page.vue?vue&type=script&lang=coffee&","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/components/inbox/page.vue","mtime":1706724415800},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js","mtime":1706724499784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zb3J0QnkgZnJvbSAibG9kYXNoL3NvcnRCeSI7CmltcG9ydCBfdmFsdWVzIGZyb20gImxvZGFzaC92YWx1ZXMiOwppbXBvcnQgX3N1bSBmcm9tICJsb2Rhc2gvc3VtIjsKaW1wb3J0IF9lYWNoIGZyb20gImxvZGFzaC9lYWNoIjsKaW1wb3J0IEFwcENvbmZpZyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9hcHBfY29uZmlnJzsKaW1wb3J0IFNlc3Npb24gZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvc2Vzc2lvbic7CmltcG9ydCBSZWNvcmRzIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL3JlY29yZHMnOwppbXBvcnQgRXZlbnRCdXMgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvZXZlbnRfYnVzJzsKaW1wb3J0IFRocmVhZEZpbHRlciBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy90aHJlYWRfZmlsdGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIC8vIGNvbXBvbmVudHM6CiAgLy8gICBTdHJhbmRXYWxsOiBTdHJhbmRXYWxsCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgdGhyZWFkTGltaXQ6IDUwLAogICAgICB2aWV3czoge30sCiAgICAgIGdyb3VwczogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB1bnJlYWRDb3VudDogMCwKICAgICAgZmlsdGVyczogWydvbmx5X3RocmVhZHNfaW5fbXlfZ3JvdXBzJywgJ3Nob3dfdW5yZWFkJywgJ3Nob3dfcmVjZW50JywgJ2hpZGVfbXV0ZWQnLCAnaGlkZV9kaXNtaXNzZWQnXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgcmV0dXJuIEV2ZW50QnVzLiRvbignc2lnbmVkSW4nLCAoKSA9PiB7CiAgICAgIHJldHVybiB0aGlzLmluaXQoKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgc3RhcnRHcm91cDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gRXZlbnRCdXMuJGVtaXQoJ29wZW5Nb2RhbCcsIHsKICAgICAgICBjb21wb25lbnQ6ICdHcm91cE5ld0Zvcm0nLAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBncm91cDogUmVjb3Jkcy5ncm91cHMuYnVpbGQoKQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgogICAgICBpZiAoU2Vzc2lvbi5pc1NpZ25lZEluKCkpIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIFJlY29yZHMuZGlzY3Vzc2lvbnMuZmV0Y2hJbmJveChvcHRpb25zKS50aGVuKCgpID0+IHsKICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgRXZlbnRCdXMuJGVtaXQoJ2N1cnJlbnRDb21wb25lbnQnLCB7CiAgICAgICAgdGl0bGVLZXk6ICdpbmJveF9wYWdlLnVucmVhZF90aHJlYWRzJywKICAgICAgICBwYWdlOiAnaW5ib3hQYWdlJwogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMud2F0Y2hSZWNvcmRzKHsKICAgICAgICBjb2xsZWN0aW9uczogWydkaXNjdXNzaW9ucycsICdncm91cHMnXSwKICAgICAgICBxdWVyeTogc3RvcmUgPT4gewogICAgICAgICAgdGhpcy5ncm91cHMgPSBfc29ydEJ5KFNlc3Npb24udXNlcigpLmluYm94R3JvdXBzKCksICduYW1lJyk7CiAgICAgICAgICB0aGlzLnZpZXdzID0ge307CgogICAgICAgICAgX2VhY2godGhpcy5ncm91cHMsIGdyb3VwID0+IHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3NbZ3JvdXAua2V5XSA9IFRocmVhZEZpbHRlcih7CiAgICAgICAgICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLAogICAgICAgICAgICAgIGdyb3VwOiBncm91cAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHJldHVybiB0aGlzLnVucmVhZENvdW50ID0gX3N1bShfdmFsdWVzKHRoaXMudmlld3MpLCBmdW5jdGlvbiAodikgewogICAgICAgICAgICByZXR1cm4gdi5sZW5ndGg7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/components/inbox/page.vue"],"names":[],"mappings":";;;;AACA,OAAA,SAAA,MAAA,8BAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,OAAA,QAAA,MAAA,6BAAA;AACA,OAAA,YAAA,MAAA,iCAAA;AAIA,eAIE;;;AAAA,EAAA,IAAA,EAAM,YAAA;WACJ;AAAA,MAAA,WAAA,EAAA,EAAA;AACA,MAAA,KAAA,EADA,EAAA;AAEA,MAAA,MAAA,EAFA,EAAA;AAGA,MAAA,OAAA,EAHA,KAAA;AAIA,MAAA,WAAA,EAJA,CAAA;AAKA,MAAA,OAAA,EAAS,CAAA,2BAAA,EAAA,aAAA,EAAA,aAAA,EAAA,YAAA,EAAA,gBAAA;AALT,K;AADF,GAAA;AAcA,EAAA,OAAA,EAAS,YAAA;AACP,SAAA,IAAA;WACA,QAAQ,CAAR,GAAA,CAAA,UAAA,EAAyB,MAAA;aAAG,KAAA,IAAA,E;AAA5B,KAAA,C;AAhBF,GAAA;AAkBA,EAAA,OAAA,EACE;AAAA,IAAA,UAAA,EAAY,YAAA;aACV,QAAQ,CAAR,KAAA,CAAA,WAAA,EACE;AAAA,QAAA,SAAA,EAAA,cAAA;AACA,QAAA,KAAA,EAAO;AAAE,UAAA,KAAA,EAAO,OAAO,CAAC,MAAR,CAAA,KAAA;AAAT;AADP,OADF,C;AADF,KAAA;AAKA,IAAA,IAAA,EAAM,YAAA;AAAA,UAAC,OAAD,uEAAA,EAAA;;AACJ,UAAG,OAAO,CAAV,UAAG,EAAH,EAAA;AACE,aAAA,OAAA,GAAW,IAAX;AACA,QAAA,OAAO,CAAC,WAAR,CAAA,UAAA,CAAA,OAAA,EAAA,IAAA,CAA6C,MAAA;iBAAG,KAAA,OAAA,GAAW,K;AAF7D,SAEE;;;AAEF,MAAA,QAAQ,CAAR,KAAA,CAAA,kBAAA,EACE;AAAA,QAAA,QAAA,EAAA,2BAAA;AACA,QAAA,IAAA,EAAM;AADN,OADF;aAIA,KAAA,YAAA,CACE;AAAA,QAAA,WAAA,EAAa,CAAA,aAAA,EAAb,QAAa,CAAb;AACA,QAAA,KAAA,EAAO,KAAA,IAAA;AACL,eAAA,MAAA,GAAU,QAAO,OAAO,CAAP,IAAA,GAAP,WAAO,EAAP,EAAA,MAAA,CAAV;AACA,eAAA,KAAA,GAAS,EAAT;;AACA,gBAAK,KAAL,MAAA,EAAc,KAAA,IAAA;mBACZ,KAAC,KAAD,CAAO,KAAK,CAAZ,GAAA,IAAoB,YAAA,CAAa;AAAA,cAAA,OAAA,EAAS,KAAT,OAAA;AAAmB,cAAA,KAAA,EAAO;AAA1B,aAAb,C;AADtB,WAAA;;iBAEA,KAAA,WAAA,GAAe,KAAI,QAAO,KAAX,KAAI,CAAJ,EAAoB,UAAA,CAAA,EAAA;mBAAO,CAAC,CAAC,M;AAA7B,WAAA,C;AALV;AADP,OADF,C;AATI;AALN;AAnBF,CAJF","sourcesContent":["\nimport AppConfig     from '@/shared/services/app_config'\nimport Session       from '@/shared/services/session'\nimport Records       from '@/shared/services/records'\nimport EventBus      from '@/shared/services/event_bus'\nimport ThreadFilter from '@/shared/services/thread_filter'\n# import StrandWall from '@/components/strand/wall'\nimport {each, keys, sum, values, sortBy} from 'lodash'\n\nexport default\n  # components:\n  #   StrandWall: StrandWall\n\n  data: ->\n    threadLimit: 50\n    views: {}\n    groups: []\n    loading: false\n    unreadCount: 0\n    filters: [\n      'only_threads_in_my_groups',\n      'show_unread',\n      'show_recent',\n      'hide_muted',\n      'hide_dismissed'\n    ]\n\n  created: ->\n    @init()\n    EventBus.$on 'signedIn', => @init()\n\n  methods:\n    startGroup: ->\n      EventBus.$emit 'openModal',\n        component: 'GroupNewForm',\n        props: { group: Records.groups.build() }\n\n    init: (options = {}) ->\n      if Session.isSignedIn()\n        @loading = true\n        Records.discussions.fetchInbox(options).then => @loading = false\n\n      EventBus.$emit 'currentComponent',\n        titleKey: 'inbox_page.unread_threads'\n        page: 'inboxPage'\n\n      @watchRecords\n        collections: ['discussions', 'groups']\n        query: (store) =>\n          @groups = sortBy Session.user().inboxGroups(), 'name'\n          @views = {}\n          each @groups, (group) =>\n            @views[group.key] = ThreadFilter(filters: @filters, group: group)\n          @unreadCount = sum values(@views), (v) -> v.length\n\n"],"sourceRoot":""}]}