{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!/home/gustavo/Documents/tese/loomio/vue/src/components/poll_template/form_page.vue?vue&type=script&lang=coffee&","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/components/poll_template/form_page.vue","mtime":1706724415804},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js","mtime":1706724499784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlY29yZHMgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvcmVjb3Jkcyc7CmltcG9ydCBFdmVudEJ1cyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9ldmVudF9idXMnOwppbXBvcnQgU2Vzc2lvbiBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9zZXNzaW9uJzsKaW1wb3J0IEZsYXNoIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2ZsYXNoJzsKaW1wb3J0IFBvbGxUZW1wbGF0ZUZvcm0gZnJvbSAnQC9jb21wb25lbnRzL3BvbGxfdGVtcGxhdGUvZm9ybSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBQb2xsVGVtcGxhdGVGb3JtCiAgfSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBwb2xsVGVtcGxhdGU6IG51bGwsCiAgICAgIGdyb3VwOiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gKCkgewogICAgdmFyIGdyb3VwSWQsIHBvbGxUZW1wbGF0ZUlkOwoKICAgIGlmIChwb2xsVGVtcGxhdGVJZCA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkpIHsKICAgICAgcmV0dXJuIFJlY29yZHMucG9sbFRlbXBsYXRlcy5maW5kT3JGZXRjaEJ5SWQocG9sbFRlbXBsYXRlSWQpLnRoZW4ocG9sbFRlbXBsYXRlID0+IHsKICAgICAgICByZXR1cm4gdGhpcy5wb2xsVGVtcGxhdGUgPSBwb2xsVGVtcGxhdGU7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKGdyb3VwSWQgPSBwYXJzZUludCh0aGlzLiRyb3V0ZS5xdWVyeS5ncm91cF9pZCkpIHsKICAgICAgICByZXR1cm4gUmVjb3Jkcy5ncm91cHMuZmluZE9yRmV0Y2hCeUlkKGdyb3VwSWQpLnRoZW4oZ3JvdXAgPT4gewogICAgICAgICAgdmFyIGtleTsKICAgICAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDsKCiAgICAgICAgICBpZiAoa2V5ID0gdGhpcy4kcm91dGUucXVlcnkudGVtcGxhdGVfa2V5KSB7CiAgICAgICAgICAgIHJldHVybiBSZWNvcmRzLnJlbW90ZS5mZXRjaCh7CiAgICAgICAgICAgICAgcGF0aDogInBvbGxfdGVtcGxhdGVzIiwKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIGdyb3VwX2lkOiB0aGlzLmdyb3VwLmlkCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLnBvbGxUZW1wbGF0ZSA9IFJlY29yZHMucG9sbFRlbXBsYXRlcy5maW5kKGtleSk7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9sbFRlbXBsYXRlLmdyb3VwSWQgPSB0aGlzLmdyb3VwLmlkOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvbGxUZW1wbGF0ZSA9IFJlY29yZHMucG9sbFRlbXBsYXRlcy5idWlsZCh7CiAgICAgICAgICAgICAgcG9sbFR5cGU6ICdwcm9wb3NhbCcsCiAgICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy5ncm91cC5pZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcigibm8gZ3JvdXAgb3IgdGVtcGxhdGUgaWQgZm91bmQiKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/components/poll_template/form_page.vue"],"names":[],"mappings":"AACA,OAAA,OAAA,MAAA,2BAAA;AACA,OAAA,QAAA,MAAA,6BAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,OAAA,KAAA,MAAA,yBAAA;AACA,OAAA,gBAAA,MAAA,iCAAA;AAEA,eACE;AAAA,EAAA,UAAA,EAAY;AAAZ,IAAA;AAAY,GAAZ;AAEA,EAAA,IAAA,EAAM,YAAA;WACJ;AAAA,MAAA,YAAA,EAAA,IAAA;AACA,MAAA,KAAA,EAAO;AADP,K;AAHF,GAAA;AAMA,EAAA,OAAA,EAAS,YAAA;AACX,QAAA,OAAA,EAAA,cAAA;;AAAI,QAAG,cAAA,GAAiB,QAAA,CAAS,KAAC,MAAD,CAAQ,MAAR,CAA7B,EAAoB,CAApB,EAAA;aACE,OAAO,CAAC,aAAR,CAAA,eAAA,CAAA,cAAA,EAAA,IAAA,CAA2D,YAAA,IAAA;eACzD,KAAA,YAAA,GAAgB,Y;AAFpB,OACE,C;AADF,KAAA,MAAA;AAIE,UAAG,OAAA,GAAU,QAAA,CAAS,KAAC,MAAD,CAAQ,KAAR,CAAtB,QAAa,CAAb,EAAA;eACE,OAAO,CAAC,MAAR,CAAA,eAAA,CAAA,OAAA,EAAA,IAAA,CAA6C,KAAA,IAAA;AACrD,cAAA,GAAA;AAAU,eAAA,KAAA,GAAS,KAAT;;AAEA,cAAG,GAAA,GAAM,KAAC,MAAD,CAAQ,KAAR,CAAT,YAAA,EAAA;mBACE,OAAO,CAAC,MAAR,CAAA,KAAA,CAAqB;AAAA,cAAA,IAAA,EAAA,gBAAA;AAAwB,cAAA,MAAA,EAAQ;AAAC,gBAAA,QAAA,EAAU,KAAC,KAAD,CAAO;AAAlB;AAAhC,aAArB,EAAA,IAAA,CAAkF,MAAA;AAChF,mBAAA,YAAA,GAAgB,OAAO,CAAC,aAAR,CAAA,IAAA,CAAA,GAAA,CAAhB;qBACA,KAAC,YAAD,CAAA,OAAA,GAAwB,KAAC,KAAD,CAAO,E;AAHnC,aACE,C;AADF,WAAA,MAAA;mBAKE,KAAA,YAAA,GAAgB,OAAO,CAAC,aAAR,CAAA,KAAA,CAA4B;AAAA,cAAA,QAAA,EAAA,UAAA;AAAsB,cAAA,OAAA,EAAS,KAAC,KAAD,CAAO;AAAtC,aAA5B,C;;AATtB,SACE,C;AADF,OAAA,MAAA;eAWE,OAAO,CAAP,KAAA,CAXF,+BAWE,C;AAfJ;;AADO;AANT,CADF","sourcesContent":["\nimport Records from '@/shared/services/records'\nimport EventBus from '@/shared/services/event_bus'\nimport Session from '@/shared/services/session'\nimport Flash  from '@/shared/services/flash'\nimport PollTemplateForm from '@/components/poll_template/form'\n\nexport default\n  components: {PollTemplateForm}\n\n  data: ->\n    pollTemplate: null\n    group: null\n\n  created: ->\n    if pollTemplateId = parseInt(@$route.params.id)\n      Records.pollTemplates.findOrFetchById(pollTemplateId).then (pollTemplate) =>\n        @pollTemplate = pollTemplate\n    else\n      if groupId = parseInt(@$route.query.group_id)\n        Records.groups.findOrFetchById(groupId).then (group) =>\n          @group = group\n\n          if key = @$route.query.template_key\n            Records.remote.fetch(path: \"poll_templates\", params: {group_id: @group.id} ).then =>\n              @pollTemplate = Records.pollTemplates.find(key)\n              @pollTemplate.groupId = @group.id\n          else\n            @pollTemplate = Records.pollTemplates.build(pollType: 'proposal', groupId: @group.id)\n      else\n        console.error(\"no group or template id found\")\n\n"],"sourceRoot":""}]}