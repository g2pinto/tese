{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/src/shared/models/notification_model.coffee","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/shared/models/notification_model.coffee","mtime":1706724415808},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIE5vdGlmaWNhdGlvbk1vZGVsOwppbXBvcnQgQmFzZU1vZGVsIGZyb20gJ0Avc2hhcmVkL3JlY29yZF9zdG9yZS9iYXNlX21vZGVsJzsKaW1wb3J0IEFwcENvbmZpZyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9hcHBfY29uZmlnJzsKaW1wb3J0IHsgY29sb25Ub1VuaWNvZGUgfSBmcm9tICdAL3NoYXJlZC9oZWxwZXJzL2Vtb2ppcyc7CmltcG9ydCBBbm9ueW1vdXNVc2VyTW9kZWwgZnJvbSAnQC9zaGFyZWQvbW9kZWxzL2Fub255bW91c191c2VyX21vZGVsJzsKZXhwb3J0IGRlZmF1bHQgTm90aWZpY2F0aW9uTW9kZWwgPSBmdW5jdGlvbiAoKSB7CiAgY2xhc3MgTm90aWZpY2F0aW9uTW9kZWwgZXh0ZW5kcyBCYXNlTW9kZWwgewogICAgZGVmYXVsdFZhbHVlcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0aXRsZTogbnVsbCwKICAgICAgICBtb2RlbDogbnVsbCwKICAgICAgICBwb2xsVHlwZTogbnVsbCwKICAgICAgICBuYW1lOiBudWxsLAogICAgICAgIHJlYWN0aW9uOiBudWxsCiAgICAgIH07CiAgICB9CgogICAgcmVsYXRpb25zaGlwcygpIHsKICAgICAgdGhpcy5iZWxvbmdzVG8oJ2V2ZW50Jyk7CiAgICAgIHRoaXMuYmVsb25nc1RvKCd1c2VyJyk7CiAgICAgIHJldHVybiB0aGlzLmJlbG9uZ3NUbygnYWN0b3InLCB7CiAgICAgICAgZnJvbTogJ3VzZXJzJwogICAgICB9KTsKICAgIH0KCiAgICBhY3Rpb25QYXRoKCkgewogICAgICBzd2l0Y2ggKHRoaXMua2luZCgpKSB7CiAgICAgICAgY2FzZSAnaW52aXRhdGlvbl9hY2NlcHRlZCc6CiAgICAgICAgICByZXR1cm4gdGhpcy5hY3RvcigpLnVzZXJuYW1lOwogICAgICB9CiAgICB9CgogICAgaHJlZigpIHsKICAgICAgaWYgKCF0aGlzLnVybCkgewogICAgICAgIHJldHVybiAnLyc7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmtpbmQgPT09ICdtZW1iZXJzaGlwX3JlcXVlc3RlZCcpIHsKICAgICAgICByZXR1cm4gIi8iICsgdGhpcy51cmwuc3BsaXQoJy8nKVsxXSArICIvbWVtYmVycy9yZXF1ZXN0cyI7CiAgICAgIH0gZWxzZSBpZiAodGhpcy51cmwuc3RhcnRzV2l0aChBcHBDb25maWcuYmFzZVVybCkpIHsKICAgICAgICByZXR1cm4gIi8iICsgdGhpcy51cmwucmVwbGFjZShBcHBDb25maWcuYmFzZVVybCwgJycpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiLyIgKyB0aGlzLnVybDsKICAgICAgfQogICAgfQoKICAgIGFyZ3MoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYWN0b3I6IHRoaXMubmFtZSwKICAgICAgICByZWFjdGlvbjogdGhpcy5raW5kID09PSAicmVhY3Rpb25fY3JlYXRlZCIgPyBjb2xvblRvVW5pY29kZSh0aGlzLnJlYWN0aW9uKSA6IHZvaWQgMCwKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICBwb2xsX3R5cGU6IHRoaXMucG9sbFR5cGUsCiAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwKICAgICAgfTsKICAgIH0KCiAgICBhY3RvcigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0b3IoKSB8fCB0aGlzLm1lbWJlcnNoaXBSZXF1ZXN0QWN0b3IoKTsKICAgIH0KCiAgICBtZW1iZXJzaGlwUmVxdWVzdEFjdG9yKCkgewogICAgICB2YXIgbmFtZTsKICAgICAgbmFtZSA9ICh0aGlzLm5hbWUgfHwgJycpLnRvU3RyaW5nKCk7CiAgICAgIHJldHVybiBSZWNvcmRzLnVzZXJzLmJ1aWxkKHsKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIGF2YXRhckluaXRpYWxzOiBuYW1lLnNwbGl0KCcgJykubWFwKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICByZXR1cm4gblswXTsKICAgICAgICB9KS5qb2luKCcnKSwKICAgICAgICBhdmF0YXJLaW5kOiAnaW5pdGlhbHMnCiAgICAgIH0pOwogICAgfQoKICAgIGlzUm91dGVyTGluaygpIHsKICAgICAgcmV0dXJuICF0aGlzLnVybC5pbmNsdWRlcygiL2ludml0YXRpb25zLyIpOwogICAgfQoKICB9CgogIDsKICBOb3RpZmljYXRpb25Nb2RlbC5zaW5ndWxhciA9ICdub3RpZmljYXRpb24nOwogIE5vdGlmaWNhdGlvbk1vZGVsLnBsdXJhbCA9ICdub3RpZmljYXRpb25zJzsKICBOb3RpZmljYXRpb25Nb2RlbC51bmlxdWVJbmRpY2VzID0gWydpZCddOwogIE5vdGlmaWNhdGlvbk1vZGVsLmluZGljZXMgPSBbJ2V2ZW50SWQnLCAndXNlcklkJ107CiAgcmV0dXJuIE5vdGlmaWNhdGlvbk1vZGVsOwp9LmNhbGwodGhpcyk7"},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/shared/models/notification_model.coffee"],"names":[],"mappings":"AAAA,IAAA,iBAAA;AAAA,OAAA,SAAA,MAAA,kCAAA;AACA,OAAA,SAAA,MAAA,8BAAA;AACA,SAAA,cAAA,QAAA,yBAAA;AACA,OAAA,kBAAA,MAAA,sCAAA;AAEA,eAAqB,iBAAA,GAAA,YAAA;AAAN,QAAA,iBAAA,SAAgC,SAAhC,CAAA;AAMb,IAAA,aAAe,GAAA;aACb;AAAA,QAAA,KAAA,EAAA,IAAA;AACA,QAAA,KAAA,EADA,IAAA;AAEA,QAAA,QAAA,EAFA,IAAA;AAGA,QAAA,IAAA,EAHA,IAAA;AAIA,QAAA,QAAA,EAAU;AAJV,O;AADa;;AAOf,IAAA,aAAe,GAAA;AACb,WAAA,SAAA,CAAA,OAAA;AACA,WAAA,SAAA,CAAA,MAAA;aACA,KAAA,SAAA,CAAA,OAAA,EAAoB;AAAA,QAAA,IAAA,EAAM;AAAN,OAApB,C;AAHa;;AAKf,IAAA,UAAY,GAAA;AACV,cAAO,KAAP,IAAO,EAAP;AAAA,aAAA,qBAAA;iBACkC,KAAA,KAAA,GAAS,Q;AAD3C;AADU;;AAIZ,IAAA,IAAM,GAAA;AACJ,UAAA,CAAkB,KAAlB,GAAA,EAAA;AAAA,eAAA,GAAA;;;AACA,UAAG,KAAA,IAAA,KAAH,sBAAA,EAAA;eACE,MAAM,KAAC,GAAD,CAAA,KAAA,CAAA,GAAA,EAAN,CAAM,CAAN,GADF,mB;AAAA,OAAA,MAEK,IAAG,KAAC,GAAD,CAAA,UAAA,CAAgB,SAAS,CAA5B,OAAG,CAAH,EAAA;eACH,MAAM,KAAC,GAAD,CAAA,OAAA,CAAa,SAAS,CAAtB,OAAA,EADH,EACG,C;AADH,OAAA,MAAA;eAGH,MAAM,KAHH,G;;AAJD;;AASN,IAAA,IAAM,GAAA;aACJ;AAAA,QAAA,KAAA,EAAO,KAAP,IAAA;AACA,QAAA,QAAA,EAAuC,KAAA,IAAA,KAA7B,kBAA6B,GAA7B,cAAA,CAAe,KAAf,QAAA,CAA6B,GAA7B,KADV,CAAA;AAEA,QAAA,KAAA,EAAO,KAFP,KAAA;AAGA,QAAA,SAAA,EAAW,KAHX,QAAA;AAIA,QAAA,KAAA,EAAO,KAAC;AAJR,O;AADI;;AAON,IAAA,KAAO,GAAA;aACL,KAAA,KAAA,MAAY,KAAA,sBAAA,E;AADP;;AAGP,IAAA,sBAAwB,GAAA;AAC1B,UAAA,IAAA;AAAI,MAAA,IAAA,GAAO,CAAC,KAAA,IAAA,IAAD,EAAA,EAAA,QAAA,EAAP;aACA,OAAO,CAAC,KAAR,CAAA,KAAA,CACE;AAAA,QAAA,IAAA,EAAA,IAAA;AACA,QAAA,cAAA,EAAgB,IAAI,CAAJ,KAAA,CAAA,GAAA,EAAA,GAAA,CAAoB,UAAA,CAAA,EAAA;iBAAO,CAAC,CAAA,CAAA,C;AAA5B,SAAA,EAAA,IAAA,CADhB,EACgB,CADhB;AAEA,QAAA,UAAA,EAAY;AAFZ,OADF,C;AAFsB;;AAOxB,IAAA,YAAc,GAAA;aACZ,CAAC,KAAC,GAAD,CAAA,QAAA,CAAA,eAAA,C;AADW;;AAhDD;;AAAA;AACb,EAAA,iBAAC,CAAD,QAAA,GAAW,cAAX;AACA,EAAA,iBAAC,CAAD,MAAA,GAAS,eAAT;AACA,EAAA,iBAAC,CAAD,aAAA,GAAgB,CAAA,IAAA,CAAhB;AACA,EAAA,iBAAC,CAAD,OAAA,GAAU,CAAA,SAAA,EAAA,QAAA,CAAV;;CAJmB,C,IAAA,C,IAAA,CAArB","sourcesContent":["import BaseModel from '@/shared/record_store/base_model'\nimport AppConfig from '@/shared/services/app_config'\nimport { colonToUnicode } from '@/shared/helpers/emojis'\nimport AnonymousUserModel   from '@/shared/models/anonymous_user_model'\n\nexport default class NotificationModel extends BaseModel\n  @singular: 'notification'\n  @plural: 'notifications'\n  @uniqueIndices: ['id']\n  @indices: ['eventId', 'userId']\n\n  defaultValues: ->\n    title: null\n    model: null\n    pollType: null\n    name: null \n    reaction: null\n\n  relationships: ->\n    @belongsTo 'event'\n    @belongsTo 'user'\n    @belongsTo 'actor', from: 'users'\n\n  actionPath: ->\n    switch @kind()\n      when 'invitation_accepted' then @actor().username\n\n  href: ->\n    return '/' unless @url\n    if @kind == 'membership_requested'\n      \"/\" + @url.split('/')[1] + \"/members/requests\"\n    else if @url.startsWith(AppConfig.baseUrl)\n      \"/\" + @url.replace(AppConfig.baseUrl, '')\n    else\n      \"/\" + @.url\n\n  args: ->\n    actor: @name\n    reaction: colonToUnicode(@reaction) if @kind == \"reaction_created\"\n    title: @title\n    poll_type: @pollType\n    model: @model\n\n  actor: ->\n    @actor() || @membershipRequestActor()\n\n  membershipRequestActor: ->\n    name = (@name || '').toString()\n    Records.users.build\n      name: name\n      avatarInitials: name.split(' ').map((n) -> n[0]).join('')\n      avatarKind: 'initials'\n\n  isRouterLink: ->\n    !@url.includes(\"/invitations/\")\n"],"sourceRoot":""}]}