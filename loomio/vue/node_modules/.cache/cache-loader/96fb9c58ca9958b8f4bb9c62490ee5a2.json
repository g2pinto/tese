{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!/home/gustavo/Documents/tese/loomio/vue/src/components/strand/page.vue?vue&type=script&lang=coffee&","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/components/strand/page.vue","mtime":1706724415804},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js","mtime":1706724499784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlY29yZHMgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvcmVjb3Jkcyc7CmltcG9ydCBTZXNzaW9uIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL3Nlc3Npb24nOwppbXBvcnQgRXZlbnRCdXMgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvZXZlbnRfYnVzJzsKaW1wb3J0IEFiaWxpdHlTZXJ2aWNlIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2FiaWxpdHlfc2VydmljZSc7CmltcG9ydCBUaHJlYWRMb2FkZXIgZnJvbSAnQC9zaGFyZWQvbG9hZGVycy90aHJlYWRfbG9hZGVyJzsKaW1wb3J0IERlbW9CYW5uZXIgZnJvbSAnQC9jb21wb25lbnRzL2dyb3VwL2RlbW9fYmFubmVyJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIERlbW9CYW5uZXIKICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpc2N1c3Npb246IG51bGwsCiAgICAgIGxvYWRlcjogbnVsbCwKICAgICAgcG9zaXRpb246IDAsCiAgICAgIGdyb3VwOiBudWxsLAogICAgICBkaXNjdXNzaW9uRmV0Y2hFcnJvcjogbnVsbCwKICAgICAgbGFzdEZvY3VzOiBudWxsCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuaW5pdCgpOwogIH0sCiAgd2F0Y2g6IHsKICAgICckcm91dGUucGFyYW1zLmtleSc6ICdpbml0JywKICAgICckcm91dGUucGFyYW1zLmNvbW1lbnRfaWQnOiAnaW5pdCcsCiAgICAnJHJvdXRlLnBhcmFtcy5zZXF1ZW5jZV9pZCc6ICdyZXNwb25kVG9Sb3V0ZScsCiAgICAnJHJvdXRlLnBhcmFtcy5jb21tZW50X2lkJzogJ3Jlc3BvbmRUb1JvdXRlJywKICAgICckcm91dGUucXVlcnkucCc6ICdyZXNwb25kVG9Sb3V0ZScsCiAgICAnJHJvdXRlLnF1ZXJ5LmsnOiAncmVzcG9uZFRvUm91dGUnCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBSZWNvcmRzLmRpc2N1c3Npb25zLmZpbmRPckZldGNoQnlJZCh0aGlzLiRyb3V0ZS5wYXJhbXMua2V5LCB7CiAgICAgICAgZXhjbHVkZV90eXBlczogJ3BvbGwgb3V0Y29tZScKICAgICAgfSkudGhlbihkaXNjdXNzaW9uID0+IHsKICAgICAgICBpZiAoZGlzY3Vzc2lvbi5ncm91cCgpLm5ld0hvc3QpIHsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0ID0gZGlzY3Vzc2lvbi5ncm91cCgpLm5ld0hvc3Q7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmRpc2N1c3Npb24gPSBkaXNjdXNzaW9uOwogICAgICAgIHRoaXMubG9hZGVyID0gbmV3IFRocmVhZExvYWRlcih0aGlzLmRpc2N1c3Npb24pOwogICAgICAgIHRoaXMucmVzcG9uZFRvUm91dGUoKTsKICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY3VycmVudENvbXBvbmVudCcsIHsKICAgICAgICAgIGZvY3VzSGVhZGluZzogZmFsc2UsCiAgICAgICAgICBwYWdlOiAndGhyZWFkUGFnZScsCiAgICAgICAgICBkaXNjdXNzaW9uOiB0aGlzLmRpc2N1c3Npb24sCiAgICAgICAgICBncm91cDogdGhpcy5kaXNjdXNzaW9uLmdyb3VwKCksCiAgICAgICAgICB0aXRsZTogdGhpcy5kaXNjdXNzaW9uLnRpdGxlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRoaXMud2F0Y2hSZWNvcmRzKHsKICAgICAgICAgIGtleTogJ3N0cmFuZCcgKyB0aGlzLmRpc2N1c3Npb24uaWQsCiAgICAgICAgICBjb2xsZWN0aW9uczogWydldmVudHMnXSwKICAgICAgICAgIHF1ZXJ5OiAoKSA9PiB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRlci51cGRhdGVDb2xsZWN0aW9uKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdwYWdlRXJyb3InLCBlcnJvcik7CgogICAgICAgIGlmIChlcnJvci5zdGF0dXMgPT09IDQwMyAmJiAhU2Vzc2lvbi5pc1NpZ25lZEluKCkpIHsKICAgICAgICAgIHJldHVybiBFdmVudEJ1cy4kZW1pdCgnb3BlbkF1dGhNb2RhbCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8gLmNhdGNoIChlcnJvcikgPT4KICAgIC8vICAgRXZlbnRCdXMuJGVtaXQgJ3BhZ2VFcnJvcicsIGVycm9yCiAgICAvLyAgIEV2ZW50QnVzLiRlbWl0ICdvcGVuQXV0aE1vZGFsJyBpZiBlcnJvci5zdGF0dXMgPT0gNDAzICYmICFTZXNzaW9uLmlzU2lnbmVkSW4oKQogICAgZm9jdXNTZWxlY3RvcjogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5sb2FkZXIuZm9jdXNBdHRycy5uZXdlc3QpIHsKICAgICAgICBpZiAodGhpcy5kaXNjdXNzaW9uLmxhc3RTZXF1ZW5jZUlkKCkpIHsKICAgICAgICAgIHJldHVybiBgLnNlcXVlbmNlSWQtJHt0aGlzLmRpc2N1c3Npb24ubGFzdFNlcXVlbmNlSWQoKX1gOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gIiNhZGQtY29tbWVudCI7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5sb2FkZXIuZm9jdXNBdHRycy51bnJlYWQpIHsKICAgICAgICBpZiAodGhpcy5sb2FkZXIuZmlyc3RVbnJlYWRTZXF1ZW5jZUlkKCkpIHsKICAgICAgICAgIHJldHVybiBgLnNlcXVlbmNlSWQtJHt0aGlzLmxvYWRlci5maXJzdFVucmVhZFNlcXVlbmNlSWQoKX1gOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJy5jb250ZXh0LXBhbmVsJzsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmxvYWRlci5mb2N1c0F0dHJzLm9sZGVzdCkgewogICAgICAgIHJldHVybiAnLmNvbnRleHQtcGFuZWwnOwogICAgICB9CgogICAgICBpZiAodGhpcy5sb2FkZXIuZm9jdXNBdHRycy5jb21tZW50SWQpIHsKICAgICAgICByZXR1cm4gYCNjb21tZW50LSR7dGhpcy5sb2FkZXIuZm9jdXNBdHRycy5jb21tZW50SWR9YDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubG9hZGVyLmZvY3VzQXR0cnMuc2VxdWVuY2VJZCkgewogICAgICAgIHJldHVybiBgLnNlcXVlbmNlSWQtJHt0aGlzLmxvYWRlci5mb2N1c0F0dHJzLnNlcXVlbmNlSWR9YDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubG9hZGVyLmZvY3VzQXR0cnMucG9zaXRpb24pIHsKICAgICAgICByZXR1cm4gYC5wb3NpdGlvbi0ke3RoaXMubG9hZGVyLmZvY3VzQXR0cnMucG9zaXRpb259YDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubG9hZGVyLmZvY3VzQXR0cnMucG9zaXRpb25LZXkpIHsKICAgICAgICByZXR1cm4gYC5wb3NpdGlvbktleS0ke3RoaXMubG9hZGVyLmZvY3VzQXR0cnMucG9zaXRpb25LZXl9YDsKICAgICAgfQogICAgfSwKICAgIHNjcm9sbFRvRm9jdXNJZlByZXNlbnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNlbGVjdG9yOwogICAgICBzZWxlY3RvciA9IHRoaXMuZm9jdXNTZWxlY3RvcigpOwoKICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpKSB7CiAgICAgICAgdGhpcy5zY3JvbGxUbyhzZWxlY3Rvcik7CiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEZvY3VzID0gc2VsZWN0b3I7CiAgICAgIH0KICAgIH0sCiAgICBzY3JvbGxUb0ZvY3VzVW5sZXNzRm9jdXNlZDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2VsZWN0b3I7CiAgICAgIHNlbGVjdG9yID0gdGhpcy5mb2N1c1NlbGVjdG9yKCk7CgogICAgICBpZiAodGhpcy5sYXN0Rm9jdXMgIT09IHNlbGVjdG9yKSB7CiAgICAgICAgdGhpcy5zY3JvbGxUbyhzZWxlY3Rvcik7CiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEZvY3VzID0gc2VsZWN0b3I7CiAgICAgIH0KICAgIH0sCiAgICBlbGVtZW50SW5WaWV3OiBmdW5jdGlvbiAoZWwpIHsKICAgICAgdmFyIHJlY3Q7CiAgICAgIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgcmV0dXJuIHJlY3QudG9wID49IDAgJiYgcmVjdC5sZWZ0ID49IDAgJiYgcmVjdC5ib3R0b20gPD0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSAmJiByZWN0LnJpZ2h0IDw9ICh3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpOwogICAgfSwKICAgIHJlZm9jdXNJZk9mZnNjcmVlbjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgZWw7CgogICAgICBpZiAodGhpcy5sYXN0Rm9jdXMgJiYgKGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmxhc3RGb2N1cykgJiYgIXRoaXMuZWxlbWVudEluVmlldyhlbCkpKSB7CiAgICAgICAgY29uc29sZS5sb2coYHJlZm9jdXNpbmcgJHt0aGlzLmxhc3RGb2N1c31gKTsKICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxUbyh0aGlzLmxhc3RGb2N1cyk7CiAgICAgIH0KICAgIH0sCiAgICByZXNwb25kVG9Sb3V0ZTogZnVuY3Rpb24gKCkgewogICAgICBpZiAoIXRoaXMuZGlzY3Vzc2lvbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGlzY3Vzc2lvbi5rZXkgIT09IHRoaXMuJHJvdXRlLnBhcmFtcy5rZXkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRpc2N1c3Npb24uY3JlYXRlZEV2ZW50LmNoaWxkQ291bnQgPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5rKSB7CiAgICAgICAgdGhpcy5sb2FkZXIuYWRkTG9hZFBvc2l0aW9uS2V5UnVsZSh0aGlzLiRyb3V0ZS5xdWVyeS5rKTsKICAgICAgICB0aGlzLmxvYWRlci5mb2N1c0F0dHJzID0gewogICAgICAgICAgcG9zaXRpb25LZXk6IHRoaXMuJHJvdXRlLnF1ZXJ5LmsKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkucCkgewogICAgICAgIHRoaXMubG9hZGVyLmFkZExvYWRQb3NpdGlvblJ1bGUocGFyc2VJbnQodGhpcy4kcm91dGUucGFyYW1zLnApKTsKICAgICAgICB0aGlzLmxvYWRlci5mb2N1c0F0dHJzID0gewogICAgICAgICAgcG9zaXRpb246IHRoaXMuJHJvdXRlLnF1ZXJ5LnAKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLnNlcXVlbmNlX2lkKSB7CiAgICAgICAgdGhpcy5sb2FkZXIuYWRkTG9hZFNlcXVlbmNlSWRSdWxlKHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5zZXF1ZW5jZV9pZCkpOwogICAgICAgIHRoaXMubG9hZGVyLmZvY3VzQXR0cnMgPSB7CiAgICAgICAgICBzZXF1ZW5jZUlkOiBwYXJzZUludCh0aGlzLiRyb3V0ZS5wYXJhbXMuc2VxdWVuY2VfaWQpCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5jb21tZW50X2lkKSB7CiAgICAgICAgdGhpcy5sb2FkZXIuYWRkTG9hZENvbW1lbnRSdWxlKHBhcnNlSW50KHRoaXMuJHJvdXRlLnBhcmFtcy5jb21tZW50X2lkKSk7CiAgICAgICAgdGhpcy5sb2FkZXIuYWRkTG9hZE5ld2VzdFJ1bGUoKTsKICAgICAgICB0aGlzLmxvYWRlci5mb2N1c0F0dHJzID0gewogICAgICAgICAgY29tbWVudElkOiBwYXJzZUludCh0aGlzLiRyb3V0ZS5wYXJhbXMuY29tbWVudF9pZCkKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodGhpcy5sb2FkZXIucnVsZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgaWYgKHRoaXMuZGlzY3Vzc2lvbi5uZXdlc3RGaXJzdCkgewogICAgICAgICAgdGhpcy5sb2FkZXIuYWRkTG9hZE5ld2VzdFJ1bGUoKTsKICAgICAgICAgIHRoaXMubG9hZGVyLmZvY3VzQXR0cnMgPSB7CiAgICAgICAgICAgIG5ld2VzdDogMQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHRoaXMuZGlzY3Vzc2lvbi5sYXN0UmVhZEF0KSB7CiAgICAgICAgICAgIGlmICh0aGlzLmRpc2N1c3Npb24udW5yZWFkSXRlbXNDb3VudCgpID09PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5sb2FkZXIuYWRkTG9hZE5ld2VzdFJ1bGUoKTsKICAgICAgICAgICAgICB0aGlzLmxvYWRlci5mb2N1c0F0dHJzID0gewogICAgICAgICAgICAgICAgbmV3ZXN0OiAxCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmxvYWRlci5hZGRMb2FkVW5yZWFkUnVsZSgpOwogICAgICAgICAgICAgIHRoaXMubG9hZGVyLmZvY3VzQXR0cnMgPSB7CiAgICAgICAgICAgICAgICB1bnJlYWQ6IDEKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmxvYWRlci5hZGRMb2FkT2xkZXN0UnVsZSgpOwogICAgICAgICAgICB0aGlzLmxvYWRlci5mb2N1c0F0dHJzID0gewogICAgICAgICAgICAgIG9sZGVzdDogMQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5sb2FkZXIuYWRkQ29udGV4dFJ1bGUoKTsKICAgICAgdGhpcy5zY3JvbGxUb0ZvY3VzSWZQcmVzZW50KCk7CiAgICAgIHJldHVybiB0aGlzLmxvYWRlci5mZXRjaCgpLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHJldHVybiB0aGlzLnNjcm9sbFRvRm9jdXNVbmxlc3NGb2N1c2VkKCk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdwcm9taXNlcyBmYWlsZWQnLCByZXMpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/components/strand/page.vue"],"names":[],"mappings":"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","sourcesContent":["\nimport Records           from '@/shared/services/records'\nimport Session           from '@/shared/services/session'\nimport EventBus          from '@/shared/services/event_bus'\nimport AbilityService    from '@/shared/services/ability_service'\nimport ThreadLoader      from '@/shared/loaders/thread_loader'\nimport DemoBanner from '@/components/group/demo_banner'\n\nexport default\n  components: {DemoBanner}\n  data: ->\n    discussion: null\n    loader: null\n    position: 0\n    group: null\n    discussionFetchError: null\n    lastFocus: null\n\n  mounted: -> @init()\n\n  watch:\n    '$route.params.key': 'init'\n    '$route.params.comment_id': 'init'\n    '$route.params.sequence_id': 'respondToRoute'\n    '$route.params.comment_id': 'respondToRoute'\n    '$route.query.p': 'respondToRoute'\n    '$route.query.k': 'respondToRoute'\n\n  methods:\n    init: ->\n      Records.discussions.findOrFetchById(@$route.params.key, exclude_types: 'poll outcome')\n      .then (discussion) =>\n        window.location.host = discussion.group().newHost if discussion.group().newHost\n        @discussion = discussion\n        @loader = new ThreadLoader(@discussion)\n        @respondToRoute()\n        EventBus.$emit 'currentComponent',\n          focusHeading: false\n          page: 'threadPage'\n          discussion: @discussion\n          group: @discussion.group()\n          title: @discussion.title\n\n        @watchRecords\n          key: 'strand'+@discussion.id\n          collections: ['events']\n          query: => @loader.updateCollection()\n      .catch (error) ->\n        EventBus.$emit 'pageError', error\n        EventBus.$emit 'openAuthModal' if error.status == 403 && !Session.isSignedIn()\n\n      # .catch (error) =>\n      #   EventBus.$emit 'pageError', error\n      #   EventBus.$emit 'openAuthModal' if error.status == 403 && !Session.isSignedIn()\n\n    focusSelector: ->\n      if @loader.focusAttrs.newest\n        if @discussion.lastSequenceId()\n          return \".sequenceId-#{@discussion.lastSequenceId()}\"\n        else\n          return \"#add-comment\"\n\n      if @loader.focusAttrs.unread\n        if @loader.firstUnreadSequenceId()\n          return \".sequenceId-#{@loader.firstUnreadSequenceId()}\"\n        else\n          return '.context-panel'\n\n      if @loader.focusAttrs.oldest\n        return '.context-panel'\n\n      if @loader.focusAttrs.commentId\n        return \"#comment-#{@loader.focusAttrs.commentId}\"\n\n      if @loader.focusAttrs.sequenceId\n        return \".sequenceId-#{@loader.focusAttrs.sequenceId}\"\n\n      if @loader.focusAttrs.position\n        return \".position-#{@loader.focusAttrs.position}\"\n\n      if @loader.focusAttrs.positionKey\n        return \".positionKey-#{@loader.focusAttrs.positionKey}\"\n\n    scrollToFocusIfPresent: ->\n      selector = @focusSelector()\n      if document.querySelector(selector)\n        @scrollTo(selector)\n        @lastFocus = selector\n\n    scrollToFocusUnlessFocused: ->\n      selector = @focusSelector()\n      unless @lastFocus == selector\n        @scrollTo(selector)\n        @lastFocus = selector\n\n    elementInView: (el) ->\n      rect = el.getBoundingClientRect()\n      (rect.top >= 0 && rect.left >= 0 &&\n       rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n       rect.right <= (window.innerWidth || document.documentElement.clientWidth))\n\n    refocusIfOffscreen: ->\n      if @lastFocus &&\n         el = document.querySelector(@lastFocus) &&\n         !@elementInView(el)\n        console.log \"refocusing #{@lastFocus}\"\n        @scrollTo(@lastFocus)\n\n    respondToRoute: ->\n      return unless @discussion\n      return if @discussion.key != @$route.params.key\n      return if @discussion.createdEvent.childCount == 0\n\n      if @$route.query.k\n        @loader.addLoadPositionKeyRule(@$route.query.k)\n        @loader.focusAttrs = {positionKey: @$route.query.k}\n\n      if @$route.query.p\n        @loader.addLoadPositionRule(parseInt(@$route.params.p))\n        @loader.focusAttrs = {position: @$route.query.p}\n\n      if @$route.params.sequence_id\n        @loader.addLoadSequenceIdRule(parseInt(@$route.params.sequence_id))\n        @loader.focusAttrs = {sequenceId: parseInt(@$route.params.sequence_id)}\n\n      if @$route.params.comment_id\n        @loader.addLoadCommentRule(parseInt(@$route.params.comment_id))\n        @loader.addLoadNewestRule()\n        @loader.focusAttrs = {commentId: parseInt(@$route.params.comment_id)}\n\n      if @loader.rules.length == 0\n        if @discussion.newestFirst\n          @loader.addLoadNewestRule()\n          @loader.focusAttrs = {newest: 1}\n        else\n          if @discussion.lastReadAt\n            if @discussion.unreadItemsCount() == 0\n              @loader.addLoadNewestRule()\n              @loader.focusAttrs = {newest: 1}\n            else\n              @loader.addLoadUnreadRule()\n              @loader.focusAttrs = {unread: 1}\n          else\n            @loader.addLoadOldestRule()\n            @loader.focusAttrs = {oldest: 1}\n\n      @loader.addContextRule()\n\n      @scrollToFocusIfPresent()\n\n      @loader.fetch().finally =>\n        setTimeout => @scrollToFocusUnlessFocused()\n      .catch (res) =>\n        console.log 'promises failed', res\n\n"],"sourceRoot":""}]}