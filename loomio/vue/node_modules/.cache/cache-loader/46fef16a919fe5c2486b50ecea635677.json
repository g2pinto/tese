{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/src/shared/services/record_loader.coffee","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/shared/services/record_loader.coffee","mtime":1706724415812},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZhdWx0cyBmcm9tICJsb2Rhc2gvZGVmYXVsdHMiOwppbXBvcnQgX2NhbWVsQ2FzZSBmcm9tICJsb2Rhc2gvY2FtZWxDYXNlIjsKaW1wb3J0IF9tZXJnZSBmcm9tICJsb2Rhc2gvbWVyZ2UiOwp2YXIgUmVjb3JkTG9hZGVyOwppbXBvcnQgUmVjb3JkcyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9yZWNvcmRzJzsKZXhwb3J0IGRlZmF1bHQgUmVjb3JkTG9hZGVyID0gY2xhc3MgUmVjb3JkTG9hZGVyIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIGxldCBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgIHRoaXMuZXhoYXVzdGVkID0gZmFsc2U7CiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIHRoaXMuY29sbGVjdGlvbiA9IG9wdHMuY29sbGVjdGlvbjsKICAgIHRoaXMucGFyYW1zID0gX21lcmdlKHsKICAgICAgZnJvbTogMCwKICAgICAgcGVyOiAyNSwKICAgICAgb3JkZXI6ICdpZCcKICAgIH0sIG9wdHMucGFyYW1zKTsKICAgIHRoaXMucGF0aCA9IG9wdHMucGF0aDsgLy8gQG51bUxvYWRlZCAgICA9IG9wdHMubnVtTG9hZGVkIG9yIDAKCiAgICB0aGlzLnRvdGFsID0gMDsKICAgIHRoaXMuZXJyID0gbnVsbDsKICAgIHRoaXMuc3RhdHVzID0gbnVsbDsKICB9CgogIHJlc2V0KCkgewogICAgcmV0dXJuIHRoaXMucGFyYW1zWydmcm9tJ10gPSAwOwogIH0gLy8gQG51bUxvYWRlZCA9IDAKCgogIGZldGNoUmVjb3JkcygpIHsKICAgIGxldCBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICB0aGlzLnBhcmFtcyA9IF9kZWZhdWx0cyh7fSwgb3B0cywgdGhpcy5wYXJhbXMpOwogICAgcmV0dXJuIFJlY29yZHNbX2NhbWVsQ2FzZSh0aGlzLmNvbGxlY3Rpb24pXS5mZXRjaCh7CiAgICAgIHBhdGg6IHRoaXMucGF0aCwKICAgICAgcGFyYW1zOiB0aGlzLnBhcmFtcwogICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgdGhpcy50b3RhbCA9IGRhdGEubWV0YS50b3RhbDsKICAgICAgdGhpcy5wYXJhbXMuZnJvbSA9IHRoaXMucGFyYW1zLmZyb20gKyB0aGlzLnBhcmFtcy5wZXI7CiAgICAgIHRoaXMuZXhoYXVzdGVkID0gdGhpcy5wYXJhbXMuZnJvbSA+PSB0aGlzLnRvdGFsOwogICAgICByZXR1cm4gZGF0YTsKICAgIH0pLmZpbmFsbHkoKCkgPT4gewogICAgICByZXR1cm4gdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICB0aGlzLmVyciA9IGVycjsKICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID0gZXJyLnN0YXR1czsKICAgIH0pOwogIH0KCn07"},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/shared/services/record_loader.coffee"],"names":[],"mappings":";;;AAAA,IAAA,YAAA;AAAA,OAAA,OAAA,MAAA,2BAAA;AAGA,eAAqB,YAAA,GAAN,MAAA,YAAA,CAAA;AACb,EAAA,WAAa,GAAA;AAAA,QAAC,IAAD,uEAAA,EAAA;AACX,SAAA,SAAA,GAAa,KAAb;AACA,SAAA,OAAA,GAAW,KAAX;AACA,SAAA,UAAA,GAAgB,IAAI,CAAC,UAArB;AACA,SAAA,MAAA,GAAgB,OAAM;AAAC,MAAA,IAAA,EAAD,CAAA;AAAU,MAAA,GAAA,EAAV,EAAA;AAAmB,MAAA,KAAA,EAAO;AAA1B,KAAN,EAAuC,IAAI,CAA3C,MAAA,CAAhB;AACA,SAAA,IAAA,GAAgB,IAAI,CAJxB,IAII,CALW,C;;AAOX,SAAA,KAAA,GAAgB,CAAhB;AACA,SAAA,GAAA,GAAO,IAAP;AACA,SAAA,MAAA,GAAU,IAAV;AATW;;AAWb,EAAA,KAAO,GAAA;WACL,KAAC,MAAD,CAAA,MAAA,IAAkB,C;AAZtB,GADe,C;;;AAgBb,EAAA,YAAc,GAAA;AAAA,QAAC,IAAD,uEAAA,EAAA;AACZ,SAAA,OAAA,GAAW,IAAX;AACA,SAAA,MAAA,GAAU,UAAA,EAAA,EAAA,IAAA,EAAmB,KAAnB,MAAA,CAAV;WACA,OAAO,CAAC,WAAU,KAAX,UAAC,CAAD,CAAP,CAAA,KAAA,CACE;AAAA,MAAA,IAAA,EAAM,KAAN,IAAA;AACA,MAAA,MAAA,EAAQ,KAAC;AADT,KADF,EAAA,IAAA,CAGM,IAAA,IAAA;AACJ,WAAA,KAAA,GAAS,IAAI,CAAC,IAAL,CAAU,KAAnB;AACA,WAAC,MAAD,CAAA,IAAA,GAAe,KAAC,MAAD,CAAA,IAAA,GAAe,KAAC,MAAD,CAAQ,GAAtC;AACA,WAAA,SAAA,GAAa,KAAC,MAAD,CAAA,IAAA,IAAgB,KAAC,KAA9B;aACA,I;AAPF,KAAA,EAAA,OAAA,CAQS,MAAA;aACP,KAAA,OAAA,GAAW,K;AATb,KAAA,EAAA,KAAA,CAUO,GAAA,IAAA;AACL,WAAA,GAAA,GAAO,GAAP;aACA,KAAA,MAAA,GAAU,GAAG,CAAC,M;AAZhB,KAAA,C;AAHY;;AAhBD,CAAf","sourcesContent":["import Records from '@/shared/services/records'\nimport {merge, camelCase, defaults, max } from 'lodash'\n\nexport default class RecordLoader\n  constructor: (opts = {}) ->\n    @exhausted = false\n    @loading = false\n    @collection   = opts.collection\n    @params       = merge({from: 0, per: 25, order: 'id'}, opts.params)\n    @path         = opts.path\n    # @numLoaded    = opts.numLoaded or 0\n    @total        = 0\n    @err = null\n    @status = null\n\n  reset: ->\n    @params['from'] = 0\n    # @numLoaded = 0\n\n  fetchRecords: (opts = {}) ->\n    @loading = true\n    @params = defaults({}, opts, @params)\n    Records[camelCase(@collection)].fetch\n      path: @path\n      params: @params\n    .then (data) =>\n      @total = data.meta.total\n      @params.from = @params.from + @params.per\n      @exhausted = @params.from >= @total\n      data\n    .finally =>\n      @loading = false\n    .catch (err) =>\n      @err = err\n      @status = err.status\n"],"sourceRoot":""}]}