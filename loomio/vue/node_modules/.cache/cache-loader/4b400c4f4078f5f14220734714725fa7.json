{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/src/shared/services/rescue_unsaved_edits_service.coffee","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/shared/services/rescue_unsaved_edits_service.coffee","mtime":1706724415812},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9pbnRlcnNlY3Rpb24gZnJvbSAibG9kYXNoL2ludGVyc2VjdGlvbiI7CmltcG9ydCBfc29tZSBmcm9tICJsb2Rhc2gvc29tZSI7CnZhciBSZXNjdWVVbnNhdmVkRWRpdHNTZXJ2aWNlOwppbXBvcnQgSTE4biBmcm9tICdAL2kxOG4nOwpleHBvcnQgZGVmYXVsdCBuZXcgKFJlc2N1ZVVuc2F2ZWRFZGl0c1NlcnZpY2UgPSBjbGFzcyBSZXNjdWVVbnNhdmVkRWRpdHNTZXJ2aWNlIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHRoaXMubW9kZWxzID0gW107CiAgfQoKICBva1RvTGVhdmUobW9kZWwpIHsKICAgIHZhciBhdHRycywgbW9kZWxzOwogICAgYXR0cnMgPSBbJ2Rlc2NyaXB0aW9uJywgJ3RpdGxlJywgJ2JvZHknLCAnZGV0YWlscycsICduYW1lJywgJ3JlYXNvbicsICdzdGF0ZW1lbnQnXTsKICAgIG1vZGVscyA9IG1vZGVsICYmIFttb2RlbF0gfHwgdGhpcy5tb2RlbHM7CiAgICBtb2RlbHMuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICByZXR1cm4gbS5iZWZvcmVTYXZlKCk7CiAgICB9KTsKCiAgICBpZiAoX3NvbWUobW9kZWxzLCBmdW5jdGlvbiAobSkgewogICAgICByZXR1cm4gX2ludGVyc2VjdGlvbihhdHRycywgbS5tb2RpZmllZEF0dHJpYnV0ZXMoKSkubGVuZ3RoID4gMDsKICAgIH0pKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nICdzb21lIG1vZGlmaWVkJywgQG1vZGVscy5tYXAgKG0pIC0+CiAgICAgIC8vICAgbW9kaWZpZWRBdHRycyA9IGludGVyc2VjdGlvbihhdHRycywgbS5tb2RpZmllZEF0dHJpYnV0ZXMoKSkKICAgICAgLy8gICBpZiBtb2RpZmllZEF0dHJzLmxlbmd0aCA+IDAKICAgICAgLy8gICAgIG8gPSB7fQogICAgICAvLyAgICAgb1snbmV3J10gPSBwaWNrKG0sIG1vZGlmaWVkQXR0cnMpCiAgICAgIC8vICAgICBvWydvbGQnXSA9IHBpY2sobS51bm1vZGlmaWVkLCBtb2RpZmllZEF0dHJzKQogICAgICAvLyAgICAgbwogICAgICAvLyAgIGVsc2UKICAgICAgLy8gICAgIG51bGwKICAgICAgaWYgKGNvbmZpcm0oSTE4bi50KCdjb21tb24uY29uZmlybV9kaXNjYXJkX2NoYW5nZXMnKSkpIHsKICAgICAgICByZXR1cm4gbW9kZWwgJiYgbW9kZWwuZGlzY2FyZENoYW5nZXMoKSB8fCB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy5tb2RlbHMgPSBbXTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQoKICBhZGQobW9kZWwpIHsKICAgIHJldHVybiB0aGlzLm1vZGVscy5wdXNoKG1vZGVsKTsKICB9CgogIGNsZWFyKCkgewogICAgcmV0dXJuIHRoaXMubW9kZWxzID0gW107CiAgfQoKfSkoKTs="},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/shared/services/rescue_unsaved_edits_service.coffee"],"names":[],"mappings":";;AAAA,IAAA,yBAAA;AACA,OAAA,IAAA,MAAA,QAAA;AAEA,eAAe,KAAU,yBAAA,GAAN,MAAA,yBAAA,CAAA;AACjB,EAAA,WAAa,GAAA;AACX,SAAA,MAAA,GAAU,EAAV;AADW;;AAGb,EAAA,SAAW,CAAA,KAAA,EAAA;AACb,QAAA,KAAA,EAAA,MAAA;AAAI,IAAA,KAAA,GAAQ,CAAA,aAAA,EAAA,OAAA,EAAA,MAAA,EAAA,SAAA,EAAA,MAAA,EAAA,QAAA,EAAA,WAAA,CAAR;AACA,IAAA,MAAA,GAAW,KAAA,IAAS,CAAV,KAAU,CAAV,IAAsB,KAAC,MAAjC;AACA,IAAA,MAAM,CAAN,OAAA,CAAe,UAAA,CAAA,EAAA;aAAO,CAAC,CAAD,UAAA,E;AAAtB,KAAA;;AACA,QAAG,MAAA,MAAA,EAAa,UAAA,CAAA,EAAA;aAAO,cAAA,KAAA,EAAoB,CAAC,CAArB,kBAAoB,EAApB,EAAA,MAAA,GAAqD,C;AAA5E,KAAG,CAAH,EAAA;;;;;;;;;;AAWE,UAAG,OAAA,CAAQ,IAAI,CAAJ,CAAA,CAAX,gCAAW,CAAR,CAAH,EAAA;eACG,KAAA,IAAS,KAAK,CAAf,cAAU,EAAV,IADF,I;AAAA,OAAA,MAAA;eAAA,K;AAXF;AAAA,KAAA,MAAA;AAgBE,WAAA,MAAA,GAAU,EAAV;aAhBF,I;;AAJS;;AAuBX,EAAA,GAAK,CAAA,KAAA,EAAA;WACH,KAAC,MAAD,CAAA,IAAA,CAAA,KAAA,C;AADG;;AAGL,EAAA,KAAO,GAAA;WACL,KAAA,MAAA,GAAU,E;AADL;;AA9BU,CAAJ,GAAf","sourcesContent":["import {some, intersection, pick} from 'lodash'\nimport I18n from '@/i18n'\n\nexport default new class RescueUnsavedEditsService\n  constructor: ->\n    @models = []\n\n  okToLeave: (model) ->\n    attrs = ['description', 'title', 'body', 'details', 'name', 'reason', 'statement']\n    models = ((model && [model]) || @models)\n    models.forEach (m) -> m.beforeSave()\n    if some(models, (m) -> intersection(attrs, m.modifiedAttributes()).length > 0)\n      # console.log 'some modified', @models.map (m) ->\n      #   modifiedAttrs = intersection(attrs, m.modifiedAttributes())\n      #   if modifiedAttrs.length > 0\n      #     o = {}\n      #     o['new'] = pick(m, modifiedAttrs)\n      #     o['old'] = pick(m.unmodified, modifiedAttrs)\n      #     o\n      #   else\n      #     null\n\n      if confirm(I18n.t('common.confirm_discard_changes'))\n        (model && model.discardChanges()) || true\n      else\n        false\n    else\n      @models = []\n      true\n\n  add: (model) ->\n    @models.push model\n\n  clear: ->\n    @models = []\n"],"sourceRoot":""}]}