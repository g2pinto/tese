{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/src/shared/models/poll_option_model.coffee","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/shared/models/poll_option_model.coffee","mtime":1706724415808},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIFBvbGxPcHRpb25Nb2RlbDsKaW1wb3J0IEJhc2VNb2RlbCBmcm9tICdAL3NoYXJlZC9yZWNvcmRfc3RvcmUvYmFzZV9tb2RlbCc7CmltcG9ydCBSZWNvcmRzIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL3JlY29yZHMnOwppbXBvcnQgeyBleGFjdCB9IGZyb20gJ0Avc2hhcmVkL2hlbHBlcnMvZm9ybWF0X3RpbWUnOwppbXBvcnQgeyBwYXJzZUlTTyB9IGZyb20gJ2RhdGUtZm5zJzsKaW1wb3J0IEkxOG4gZnJvbSAnQC9pMThuJzsKZXhwb3J0IGRlZmF1bHQgUG9sbE9wdGlvbk1vZGVsID0gZnVuY3Rpb24gKCkgewogIGNsYXNzIFBvbGxPcHRpb25Nb2RlbCBleHRlbmRzIEJhc2VNb2RlbCB7CiAgICBkZWZhdWx0VmFsdWVzKCkgewogICAgICByZXR1cm4gewogICAgICAgIHZvdGVyU2NvcmVzOiB7fSwKICAgICAgICBuYW1lOiBudWxsLAogICAgICAgIGljb246IG51bGwsCiAgICAgICAgbWVhbmluZzogbnVsbCwKICAgICAgICBwcm9tcHQ6IG51bGwsCiAgICAgICAgcHJpb3JpdHk6IG51bGwsCiAgICAgICAgX2Rlc3Ryb3k6IG51bGwKICAgICAgfTsKICAgIH0KCiAgICByZWxhdGlvbnNoaXBzKCkgewogICAgICByZXR1cm4gdGhpcy5iZWxvbmdzVG8oJ3BvbGwnKTsKICAgIH0KCiAgICBzdGFuY2VzKCkgewogICAgICByZXR1cm4gdGhpcy5wb2xsKCkubGF0ZXN0U3RhbmNlcygpLmZpbHRlcihzID0+IHsKICAgICAgICByZXR1cm4gcy5wb2xsT3B0aW9uSWRzKCkuaW5jbHVkZXModGhpcy5pZCk7CiAgICAgIH0pOwogICAgfQoKICAgIGJlZm9yZVJlbW92ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RhbmNlcygpLmZvckVhY2goZnVuY3Rpb24gKHN0YW5jZSkgewogICAgICAgIHJldHVybiBzdGFuY2UucmVtb3ZlKCk7CiAgICAgIH0pOwogICAgfQoKICAgIG9wdGlvbk5hbWUoKSB7CiAgICAgIHZhciBwb2xsOwogICAgICBwb2xsID0gdGhpcy5wb2xsKCk7CgogICAgICBzd2l0Y2ggKHBvbGwucG9sbE9wdGlvbk5hbWVGb3JtYXQpIHsKICAgICAgICBjYXNlICdwbGFpbic6CiAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lOwoKICAgICAgICBjYXNlICdpMThuJzoKICAgICAgICAgIHJldHVybiBJMThuLnQoJ3BvbGxfJyArIHBvbGwucG9sbFR5cGUgKyAnX29wdGlvbnMuJyArIHRoaXMubmFtZSk7CgogICAgICAgIGNhc2UgJ2lzbzg2MDEnOgogICAgICAgICAgcmV0dXJuIGV4YWN0KHBhcnNlSVNPKHRoaXMubmFtZSkpOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ3Vuc3VwcG9ydGVkIG9wdGlvbiBmb3JtYXQnLCBwb2xsLnBvbGxPcHRpb25OYW1lRm9ybWF0KTsKICAgICAgfQogICAgfQoKICB9CgogIDsKICBQb2xsT3B0aW9uTW9kZWwuc2luZ3VsYXIgPSAncG9sbE9wdGlvbic7CiAgUG9sbE9wdGlvbk1vZGVsLnBsdXJhbCA9ICdwb2xsT3B0aW9ucyc7CiAgUG9sbE9wdGlvbk1vZGVsLmluZGljZXMgPSBbJ3BvbGxJZCddOwogIFBvbGxPcHRpb25Nb2RlbC51bmlxdWVJbmRpY2VzID0gWydpZCddOwogIFBvbGxPcHRpb25Nb2RlbC5zZXJpYWxpemFibGVBdHRyaWJ1dGVzID0gWydpZCcsICduYW1lJywgJ2ljb24nLCAncHJpb3JpdHknLCAnbWVhbmluZycsICdwcm9tcHQnXTsKICByZXR1cm4gUG9sbE9wdGlvbk1vZGVsOwp9LmNhbGwodGhpcyk7"},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/shared/models/poll_option_model.coffee"],"names":[],"mappings":"AAAA,IAAA,eAAA;AAAA,OAAA,SAAA,MAAA,kCAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AAEA,SAAA,KAAA,QAAA,8BAAA;AACA,SAAA,QAAA,QAAA,UAAA;AACA,OAAA,IAAA,MAAA,QAAA;AAEA,eAAqB,eAAA,GAAA,YAAA;AAAN,QAAA,eAAA,SAA8B,SAA9B,CAAA;AAOb,IAAA,aAAe,GAAA;aACb;AAAA,QAAA,WAAA,EAAA,EAAA;AACA,QAAA,IAAA,EADA,IAAA;AAEA,QAAA,IAAA,EAFA,IAAA;AAGA,QAAA,OAAA,EAHA,IAAA;AAIA,QAAA,MAAA,EAJA,IAAA;AAKA,QAAA,QAAA,EALA,IAAA;AAMA,QAAA,QAAA,EAAU;AANV,O;AADa;;AASf,IAAA,aAAe,GAAA;aACb,KAAA,SAAA,CAAA,MAAA,C;AADa;;AAGf,IAAA,OAAS,GAAA;aACP,KAAA,IAAA,GAAA,aAAA,GAAA,MAAA,CAA+B,CAAA,IAAA;eAAO,CAAC,CAAD,aAAA,GAAA,QAAA,CAA2B,KAA3B,EAAA,C;AAAtC,OAAA,C;AADO;;AAGT,IAAA,YAAc,GAAA;aACZ,KAAA,OAAA,GAAA,OAAA,CAAmB,UAAA,MAAA,EAAA;eAAY,MAAM,CAAN,MAAA,E;AAA/B,OAAA,C;AADY;;AAGd,IAAA,UAAY,GAAA;AACd,UAAA,IAAA;AAAI,MAAA,IAAA,GAAO,KAAA,IAAA,EAAP;;AACA,cAAO,IAAI,CAAX,oBAAA;AAAA,aAAA,OAAA;iBACoB,KAAC,I;;AADrB,aAAA,MAAA;iBAEmB,IAAI,CAAJ,CAAA,CAAO,UAAU,IAAI,CAAd,QAAA,GAAA,WAAA,GAAwC,KAA/C,IAAA,C;;AAFnB,aAAA,SAAA;iBAGsB,KAAA,CAAM,QAAA,CAAS,KAAf,IAAM,CAAN,C;;AAHtB;iBAKI,OAAO,CAAP,KAAA,CAAA,2BAAA,EAA2C,IAAI,CAA/C,oBAAA,C;AALJ;AAFU;;AAzBC;;AAAA;AACb,EAAA,eAAC,CAAD,QAAA,GAAW,YAAX;AACA,EAAA,eAAC,CAAD,MAAA,GAAS,aAAT;AACA,EAAA,eAAC,CAAD,OAAA,GAAU,CAAA,QAAA,CAAV;AACA,EAAA,eAAC,CAAD,aAAA,GAAgB,CAAA,IAAA,CAAhB;AACA,EAAA,eAAC,CAAD,sBAAA,GAAyB,CAAA,IAAA,EAAA,MAAA,EAAA,MAAA,EAAA,UAAA,EAAA,SAAA,EAAA,QAAA,CAAzB;;CALmB,C,IAAA,C,IAAA,CAArB","sourcesContent":["import BaseModel  from  '@/shared/record_store/base_model'\nimport Records  from  '@/shared/services/records'\nimport {map, parseInt, slice, max} from 'lodash'\nimport { exact } from '@/shared/helpers/format_time'\nimport { parseISO } from 'date-fns'\nimport I18n from '@/i18n'\n\nexport default class PollOptionModel extends BaseModel\n  @singular: 'pollOption'\n  @plural: 'pollOptions'\n  @indices: ['pollId']\n  @uniqueIndices: ['id']\n  @serializableAttributes: ['id', 'name', 'icon', 'priority', 'meaning', 'prompt']\n\n  defaultValues: ->\n    voterScores: {}\n    name: null\n    icon: null\n    meaning: null\n    prompt: null\n    priority: null\n    _destroy: null\n\n  relationships: ->\n    @belongsTo 'poll'\n\n  stances: ->\n    @poll().latestStances().filter((s) => s.pollOptionIds().includes(@id))\n\n  beforeRemove: ->\n    @stances().forEach (stance) -> stance.remove()\n\n  optionName: ->\n    poll = @poll()\n    switch poll.pollOptionNameFormat\n      when 'plain' then @name\n      when 'i18n' then I18n.t('poll_' + poll.pollType + '_options.' + @name)\n      when 'iso8601' then exact(parseISO(@name))\n      else\n        console.error 'unsupported option format', poll.pollOptionNameFormat\n"],"sourceRoot":""}]}