{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/src/shared/mixins/has_documents.coffee","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/shared/mixins/has_documents.coffee","mtime":1706724415808},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9pbmNsdWRlcyBmcm9tICJsb2Rhc2gvaW5jbHVkZXMiOwppbXBvcnQgX21hcCBmcm9tICJsb2Rhc2gvbWFwIjsKaW1wb3J0IF9maWx0ZXIgZnJvbSAibG9kYXNoL2ZpbHRlciI7CmltcG9ydCBfdW5pb24gZnJvbSAibG9kYXNoL3VuaW9uIjsKaW1wb3J0IF91bmlxIGZyb20gImxvZGFzaC91bmlxIjsKaW1wb3J0IF9jYXBpdGFsaXplIGZyb20gImxvZGFzaC9jYXBpdGFsaXplIjsKdmFyIEhhc0RvY3VtZW50czsKZXhwb3J0IGRlZmF1bHQgbmV3IChIYXNEb2N1bWVudHMgPSBjbGFzcyBIYXNEb2N1bWVudHMgewogIGFwcGx5KG1vZGVsKSB7CiAgICBsZXQgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICBtb2RlbC5uZXdEb2N1bWVudElkcyA9IG1vZGVsLm5ld0RvY3VtZW50SWRzIHx8IFtdOwogICAgbW9kZWwucmVtb3ZlZERvY3VtZW50SWRzID0gbW9kZWwucmVtb3ZlZERvY3VtZW50SWRzIHx8IFtdOwoKICAgIG1vZGVsLmRvY3VtZW50cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG1vZGVsLnJlY29yZFN0b3JlLmRvY3VtZW50cy5maW5kKHsKICAgICAgICBtb2RlbElkOiBtb2RlbC5pZCwKICAgICAgICBtb2RlbFR5cGU6IF9jYXBpdGFsaXplKG1vZGVsLmNvbnN0cnVjdG9yLnNpbmd1bGFyKQogICAgICB9KTsKICAgIH07CgogICAgbW9kZWwubmV3RG9jdW1lbnRzID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbW9kZWwucmVjb3JkU3RvcmUuZG9jdW1lbnRzLmZpbmQobW9kZWwubmV3RG9jdW1lbnRJZHMpOwogICAgfTsKCiAgICBtb2RlbC5uZXdBbmRQZXJzaXN0ZWREb2N1bWVudHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdW5pcShfZmlsdGVyKF91bmlvbihtb2RlbC5kb2N1bWVudHMoKSwgbW9kZWwubmV3RG9jdW1lbnRzKCkpLCBmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgcmV0dXJuICFfaW5jbHVkZXMobW9kZWwucmVtb3ZlZERvY3VtZW50SWRzLCBkb2MuaWQpOwogICAgICB9KSk7CiAgICB9OwoKICAgIG1vZGVsLmhhc0RvY3VtZW50cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG1vZGVsLm5ld0FuZFBlcnNpc3RlZERvY3VtZW50cygpLmxlbmd0aCA+IDA7CiAgICB9OwoKICAgIG1vZGVsLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGRhdGEsIHJvb3Q7CiAgICAgIGRhdGEgPSB0aGlzLmJhc2VTZXJpYWxpemUoKTsKICAgICAgcm9vdCA9IG1vZGVsLmNvbnN0cnVjdG9yLnNlcmlhbGl6YXRpb25Sb290IHx8IG1vZGVsLmNvbnN0cnVjdG9yLnNpbmd1bGFyOwogICAgICBkYXRhW3Jvb3RdLmRvY3VtZW50X2lkcyA9IF9tYXAobW9kZWwubmV3QW5kUGVyc2lzdGVkRG9jdW1lbnRzKCksICdpZCcpOwogICAgICByZXR1cm4gZGF0YTsKICAgIH07CgogICAgbW9kZWwuc2hvd0RvY3VtZW50VGl0bGUgPSBvcHRzLnNob3dUaXRsZTsKICAgIHJldHVybiBtb2RlbC5kb2N1bWVudHNBcHBsaWVkID0gdHJ1ZTsKICB9Cgp9KSgpOw=="},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/shared/mixins/has_documents.coffee"],"names":[],"mappings":";;;;;;AAAA,IAAA,YAAA;AAEA,eAAe,KAAU,YAAA,GAAN,MAAA,YAAA,CAAA;AACjB,EAAA,KAAO,CAAA,KAAA,EAAA;AAAA,QAAQ,IAAR,uEAAA,EAAA;AACL,IAAA,KAAK,CAAL,cAAA,GAA2B,KAAK,CAAL,cAAA,IAAwB,EAAnD;AACA,IAAA,KAAK,CAAL,kBAAA,GAA2B,KAAK,CAAL,kBAAA,IAA4B,EAAvD;;AAEA,IAAA,KAAK,CAAL,SAAA,GAAkB,YAAA;aAChB,KAAK,CAAC,WAAN,CAAkB,SAAlB,CAAA,IAAA,CACE;AAAA,QAAA,OAAA,EAAS,KAAK,CAAd,EAAA;AACA,QAAA,SAAA,EAAW,YAAW,KAAK,CAAC,WAAN,CAAX,QAAA;AADX,OADF,C;AADgB,KAAlB;;AAKA,IAAA,KAAK,CAAL,YAAA,GAAqB,YAAA;aACnB,KAAK,CAAC,WAAN,CAAkB,SAAlB,CAAA,IAAA,CAAiC,KAAK,CAAtC,cAAA,C;AADmB,KAArB;;AAGA,IAAA,KAAK,CAAL,wBAAA,GAAiC,YAAA;aAC/B,MAAK,QAAO,OAAM,KAAK,CAAX,SAAM,EAAN,EAAyB,KAAK,CAArC,YAAgC,EAAzB,CAAP,EAAuD,UAAA,GAAA,EAAA;eAC1D,CAAC,UAAS,KAAK,CAAd,kBAAA,EAAmC,GAAG,CAAtC,EAAA,C;AADH,OAAK,CAAL,C;AAD+B,KAAjC;;AAIA,IAAA,KAAK,CAAL,YAAA,GAAqB,YAAA;aACnB,KAAK,CAAL,wBAAA,GAAA,MAAA,GAA0C,C;AADvB,KAArB;;AAGA,IAAA,KAAK,CAAL,SAAA,GAAkB,YAAA;AACtB,UAAA,IAAA,EAAA,IAAA;AAAM,MAAA,IAAA,GAAO,KAAA,aAAA,EAAP;AACA,MAAA,IAAA,GAAO,KAAK,CAAC,WAAN,CAAA,iBAAA,IAAuC,KAAK,CAAC,WAAN,CAAkB,QAAhE;AACA,MAAA,IAAI,CAAA,IAAA,CAAJ,CAAA,YAAA,GAA0B,KAAI,KAAK,CAAT,wBAAI,EAAJ,EAAA,IAAA,CAA1B;aACA,I;AAJgB,KAAlB;;AAMA,IAAA,KAAK,CAAL,iBAAA,GAA0B,IAAI,CAAC,SAA/B;WACA,KAAK,CAAL,gBAAA,GAAyB,I;AA1BpB;;AADU,CAAJ,GAAf","sourcesContent":["import {capitalize, uniq, union, filter, map, includes } from 'lodash'\n\nexport default new class HasDocuments\n  apply: (model, opts = {}) ->\n    model.newDocumentIds     = model.newDocumentIds or []\n    model.removedDocumentIds = model.removedDocumentIds or []\n\n    model.documents = ->\n      model.recordStore.documents.find\n        modelId: model.id\n        modelType: capitalize(model.constructor.singular)\n\n    model.newDocuments = ->\n      model.recordStore.documents.find(model.newDocumentIds)\n\n    model.newAndPersistedDocuments = ->\n      uniq filter union(model.documents(), model.newDocuments()), (doc) ->\n        !includes model.removedDocumentIds, doc.id\n\n    model.hasDocuments = ->\n      model.newAndPersistedDocuments().length > 0\n\n    model.serialize = ->\n      data = @baseSerialize()\n      root = model.constructor.serializationRoot or model.constructor.singular\n      data[root].document_ids = map model.newAndPersistedDocuments(), 'id'\n      data\n\n    model.showDocumentTitle = opts.showTitle\n    model.documentsApplied = true\n"],"sourceRoot":""}]}