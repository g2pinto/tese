{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!/home/gustavo/Documents/tese/loomio/vue/src/components/email_settings/page.vue?vue&type=script&lang=coffee&","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/components/email_settings/page.vue","mtime":1706724415800},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js","mtime":1706724499784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9waWNrIGZyb20gImxvZGFzaC9waWNrIjsKaW1wb3J0IF9zb3J0QnkgZnJvbSAibG9kYXNoL3NvcnRCeSI7CmltcG9ydCBTZXNzaW9uIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL3Nlc3Npb24nOwppbXBvcnQgUmVjb3JkcyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9yZWNvcmRzJzsKaW1wb3J0IEV2ZW50QnVzIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2V2ZW50X2J1cyc7CmltcG9ydCBBYmlsaXR5U2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9hYmlsaXR5X3NlcnZpY2UnOwppbXBvcnQgQXBwQ29uZmlnIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2FwcF9jb25maWcnOwppbXBvcnQgTG1vVXJsU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9sbW9fdXJsX3NlcnZpY2UnOwppbXBvcnQgQ2hhbmdlVm9sdW1lTW9kYWxNaXhpbiBmcm9tICdAL21peGlucy9jaGFuZ2Vfdm9sdW1lX21vZGFsJzsKaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL3VzZXJfc2VydmljZSc7CmltcG9ydCBGbGFzaCBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9mbGFzaCc7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtDaGFuZ2VWb2x1bWVNb2RhbE1peGluXSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBuZXdzbGV0dGVyRW5hYmxlZDogQXBwQ29uZmlnLm5ld3NsZXR0ZXJFbmFibGVkLAogICAgICB1c2VyOiBudWxsLAogICAgICBncm91cHM6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gKCkgewogICAgdGhpcy5pbml0KCk7CiAgICBFdmVudEJ1cy4kb24oJ3NpZ25lZEluJywgdGhpcy5pbml0KTsKICAgIHJldHVybiB0aGlzLndhdGNoUmVjb3Jkcyh7CiAgICAgIGNvbGxlY3Rpb25zOiBbJ2dyb3VwcycsICdtZW1iZXJzaGlwcyddLAogICAgICBxdWVyeTogc3RvcmUgPT4gewogICAgICAgIHZhciBncm91cHMsIHVzZXI7CiAgICAgICAgZ3JvdXBzID0gU2Vzc2lvbi51c2VyKCkuZ3JvdXBzKCk7CiAgICAgICAgdXNlciA9IFNlc3Npb24udXNlcigpOwogICAgICAgIHJldHVybiB0aGlzLmdyb3VwcyA9IF9zb3J0QnkoZ3JvdXBzLCAnZnVsbE5hbWUnKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gRXZlbnRCdXMuJG9mZignc2lnbmVkSW4nLCB0aGlzLmluaXQpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIEV2ZW50QnVzLiRlbWl0KCdjdXJyZW50Q29tcG9uZW50JywgewogICAgICB0aXRsZUtleTogJ2VtYWlsX3NldHRpbmdzX3BhZ2UuaGVhZGVyJywKICAgICAgcGFnZTogJ2VtYWlsU2V0dGluZ3NQYWdlJwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFJlY29yZHMudXNlcnMudXBkYXRlUHJvZmlsZSh0aGlzLnVzZXIpLnRoZW4oKCkgPT4gewogICAgICAgIHJldHVybiBGbGFzaC5zdWNjZXNzKCdlbWFpbF9zZXR0aW5nc19wYWdlLm1lc3NhZ2VzLnVwZGF0ZWQnKTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgIH0sCiAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghKFNlc3Npb24uaXNTaWduZWRJbigpIHx8IFNlc3Npb24udXNlcigpLnJlc3RyaWN0ZWQgIT0gbnVsbCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIFNlc3Npb24udXNlcigpLmF0dHJpYnV0ZU5hbWVzLnB1c2goJ3Vuc3Vic2NyaWJlVG9rZW4nKTsKICAgICAgdGhpcy5vcmlnaW5hbFVzZXIgPSBTZXNzaW9uLnVzZXIoKTsKICAgICAgcmV0dXJuIHRoaXMudXNlciA9IFNlc3Npb24udXNlcigpLmNsb25lKCk7CiAgICB9LAogICAgZ3JvdXBWb2x1bWU6IGZ1bmN0aW9uIChncm91cCkgewogICAgICByZXR1cm4gZ3JvdXAubWVtYmVyc2hpcEZvcihTZXNzaW9uLnVzZXIoKSkudm9sdW1lOwogICAgfSwKICAgIGNoYW5nZURlZmF1bHRNZW1iZXJzaGlwVm9sdW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLm9wZW5DaGFuZ2VWb2x1bWVNb2RhbChTZXNzaW9uLnVzZXIoKSk7CiAgICB9LAogICAgZWRpdFNwZWNpZmljR3JvdXBWb2x1bWU6IGZ1bmN0aW9uIChncm91cCkgewogICAgICByZXR1cm4gdGhpcy5vcGVuQ2hhbmdlVm9sdW1lTW9kYWwoU2Vzc2lvbi51c2VyKCkpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGVtYWlsRGF5czogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gW3sKICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdlbWFpbF9zZXR0aW5nc19wYWdlLm5ldmVyJykKICAgICAgfSwgewogICAgICAgIHZhbHVlOiA3LAogICAgICAgIHRleHQ6IHRoaXMuJHQoJ2VtYWlsX3NldHRpbmdzX3BhZ2UuZXZlcnlfZGF5JykKICAgICAgfSwgewogICAgICAgIHZhbHVlOiA4LAogICAgICAgIHRleHQ6IHRoaXMuJHQoJ2VtYWlsX3NldHRpbmdzX3BhZ2UuZXZlcnlfc2Vjb25kX2RheScpCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMSwKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdlbWFpbF9zZXR0aW5nc19wYWdlLm1vbmRheScpCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMiwKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdlbWFpbF9zZXR0aW5nc19wYWdlLnR1ZXNkYXknKQogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IDMsCiAgICAgICAgdGV4dDogdGhpcy4kdCgnZW1haWxfc2V0dGluZ3NfcGFnZS53ZWRuZXNkYXknKQogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IDQsCiAgICAgICAgdGV4dDogdGhpcy4kdCgnZW1haWxfc2V0dGluZ3NfcGFnZS50aHVyc2RheScpCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogNSwKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdlbWFpbF9zZXR0aW5nc19wYWdlLmZyaWRheScpCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogNiwKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdlbWFpbF9zZXR0aW5nc19wYWdlLnNhdHVyZGF5JykKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAwLAogICAgICAgIHRleHQ6IHRoaXMuJHQoJ2VtYWlsX3NldHRpbmdzX3BhZ2Uuc3VuZGF5JykKICAgICAgfV07CiAgICB9LAogICAgYWN0aW9uczogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3BpY2soVXNlclNlcnZpY2UuYWN0aW9ucyhTZXNzaW9uLnVzZXIoKSwgdGhpcyksIFsncmVhY3RpdmF0ZV91c2VyJywgJ2RlYWN0aXZhdGVfdXNlciddKTsKICAgIH0sCiAgICBkZWZhdWx0U2V0dGluZ3NEZXNjcmlwdGlvbjogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gYGVtYWlsX3NldHRpbmdzX3BhZ2UuZGVmYXVsdF9zZXR0aW5ncy4ke1Nlc3Npb24udXNlcigpLmRlZmF1bHRNZW1iZXJzaGlwVm9sdW1lfV9kZXNjcmlwdGlvbmA7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/components/email_settings/page.vue"],"names":[],"mappings":"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","sourcesContent":["\nimport Session        from '@/shared/services/session'\nimport Records        from '@/shared/services/records'\nimport EventBus       from '@/shared/services/event_bus'\nimport AbilityService from '@/shared/services/ability_service'\nimport AppConfig      from '@/shared/services/app_config'\nimport LmoUrlService  from '@/shared/services/lmo_url_service'\nimport ChangeVolumeModalMixin from '@/mixins/change_volume_modal'\nimport { uniq, compact, concat, sortBy, map, pick } from 'lodash'\nimport UserService from '@/shared/services/user_service'\nimport Flash from '@/shared/services/flash'\n\nexport default\n  mixins: [ChangeVolumeModalMixin]\n  data: ->\n    newsletterEnabled: AppConfig.newsletterEnabled\n    user: null\n    groups: []\n  created: ->\n    @init()\n    EventBus.$on 'signedIn', @init\n    @watchRecords\n      collections: ['groups', 'memberships']\n      query: (store) =>\n        groups = Session.user().groups()\n        user = Session.user()\n        @groups = sortBy groups, 'fullName'\n  beforeDestroy: ->\n    EventBus.$off 'signedIn', @init\n\n  mounted: ->\n    EventBus.$emit 'currentComponent', { titleKey: 'email_settings_page.header', page: 'emailSettingsPage'}\n\n  methods:\n    submit: ->\n      Records.users.updateProfile(@user)\n      .then =>\n        Flash.success 'email_settings_page.messages.updated'\n      .catch (error) => true\n\n    init: ->\n      return unless Session.isSignedIn() or Session.user().restricted?\n      Session.user().attributeNames.push('unsubscribeToken')\n      @originalUser = Session.user()\n      @user = Session.user().clone()\n\n    groupVolume: (group) ->\n      group.membershipFor(Session.user()).volume\n\n    changeDefaultMembershipVolume: ->\n      @openChangeVolumeModal(Session.user())\n\n    editSpecificGroupVolume: (group) ->\n      @openChangeVolumeModal(Session.user())\n  computed:\n    emailDays: ->\n      [\n        {value: null, text: @$t('email_settings_page.never')}\n        {value: 7, text: @$t('email_settings_page.every_day')}\n        {value: 8, text: @$t('email_settings_page.every_second_day')}\n        {value: 1, text: @$t('email_settings_page.monday')}\n        {value: 2, text: @$t('email_settings_page.tuesday')}\n        {value: 3, text: @$t('email_settings_page.wednesday')}\n        {value: 4, text: @$t('email_settings_page.thursday')}\n        {value: 5, text: @$t('email_settings_page.friday')}\n        {value: 6, text: @$t('email_settings_page.saturday')}\n        {value: 0, text: @$t('email_settings_page.sunday')}\n      ]\n    actions: -> pick UserService.actions(Session.user(), @), ['reactivate_user', 'deactivate_user']\n\n    defaultSettingsDescription: ->\n      \"email_settings_page.default_settings.#{Session.user().defaultMembershipVolume}_description\"\n"],"sourceRoot":""}]}