{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!/home/gustavo/Documents/tese/loomio/vue/src/components/explore/page.vue?vue&type=script&lang=coffee&","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/components/explore/page.vue","mtime":1706724415800},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js","mtime":1706724499784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vcmRlckJ5IGZyb20gImxvZGFzaC9vcmRlckJ5IjsKaW1wb3J0IF9jYW1lbENhc2UgZnJvbSAibG9kYXNoL2NhbWVsQ2FzZSI7CmltcG9ydCBfZGVib3VuY2UgZnJvbSAibG9kYXNoL2RlYm91bmNlIjsKaW1wb3J0IEFwcENvbmZpZyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9hcHBfY29uZmlnJzsKaW1wb3J0IFJlY29yZHMgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvcmVjb3Jkcyc7CmltcG9ydCBFdmVudEJ1cyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9ldmVudF9idXMnOwppbXBvcnQgVXJsRm9yIGZyb20gJ0AvbWl4aW5zL3VybF9mb3InOwppbXBvcnQgX3RydW5jYXRlIGZyb20gJ2xvZGFzaC90cnVuY2F0ZSc7CmltcG9ydCBfbWFwIGZyb20gJ2xvZGFzaC9tYXAnOwppbXBvcnQgeyBtYXJrZWQgfSBmcm9tICdtYXJrZWQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbVXJsRm9yXSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBncm91cElkczogW10sCiAgICAgIHJlc3VsdHNDb3VudDogMCwKICAgICAgcGVyUGFnZTogNTAsCiAgICAgIGNhbkxvYWRNb3JlR3JvdXBzOiB0cnVlLAogICAgICBxdWVyeTogIiIsCiAgICAgIHNlYXJjaGluZzogdHJ1ZSwKICAgICAgb3JkZXI6IG51bGwsCiAgICAgIG9yZGVyT3B0aW9uczogW3sKICAgICAgICBuYW1lOiB0aGlzLiR0KCdleHBsb3JlX3BhZ2UubmV3ZXN0X2ZpcnN0JyksCiAgICAgICAgdmFsOiAiY3JlYXRlZF9hdCIKICAgICAgfSwgewogICAgICAgIG5hbWU6IHRoaXMuJHQoJ2V4cGxvcmVfcGFnZS5iaWdnZXN0X2ZpcnN0JyksCiAgICAgICAgdmFsOiAibWVtYmVyc2hpcHNfY291bnQiCiAgICAgIH1dCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5Lm9yZGVyKSB7CiAgICAgIHJldHVybiB0aGlzLm9yZGVyID0gdGhpcy4kcm91dGUucXVlcnkub3JkZXI7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gdGhpcy4kcm91dGVyLnJlcGxhY2UodGhpcy5tZXJnZVF1ZXJ5KHsKICAgICAgICBvcmRlcjogIm1lbWJlcnNoaXBzX2NvdW50IgogICAgICB9KSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICBFdmVudEJ1cy4kZW1pdCgnY3VycmVudENvbXBvbmVudCcsIHsKICAgICAgdGl0bGVLZXk6ICdleHBsb3JlX3BhZ2UuaGVhZGVyJywKICAgICAgcGFnZTogJ2V4cGxvcmVQYWdlJwogICAgfSk7CiAgICByZXR1cm4gdGhpcy5zZWFyY2goKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdyb3VwczogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gUmVjb3Jkcy5ncm91cHMuZmluZCh0aGlzLmdyb3VwSWRzKTsKICAgIH0sCiAgICBoYW5kbGVTZWFyY2hSZXN1bHRzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgUmVjb3Jkcy5ncm91cHMuZ2V0RXhwbG9yZVJlc3VsdHNDb3VudCh0aGlzLnF1ZXJ5KS50aGVuKGRhdGEgPT4gewogICAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNDb3VudCA9IGRhdGEuY291bnQ7CiAgICAgIH0pOwogICAgICB0aGlzLmdyb3VwSWRzID0gdGhpcy5ncm91cElkcy5jb25jYXQoX21hcChyZXNwb25zZS5ncm91cHMsICdpZCcpKTsKICAgICAgdGhpcy5jYW5Mb2FkTW9yZUdyb3VwcyA9IChyZXNwb25zZS5ncm91cHMgfHwgW10pLmxlbmd0aCA9PT0gdGhpcy5wZXJQYWdlOwogICAgICByZXR1cm4gdGhpcy5zZWFyY2hpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBzZWFyY2g6IF9kZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuZ3JvdXBJZHMgPSBbXTsKICAgICAgcmV0dXJuIFJlY29yZHMuZ3JvdXBzLmZldGNoRXhwbG9yZUdyb3Vwcyh0aGlzLnF1ZXJ5LCB7CiAgICAgICAgcGVyOiB0aGlzLnBlclBhZ2UsCiAgICAgICAgb3JkZXI6IHRoaXMub3JkZXIKICAgICAgfSkudGhlbih0aGlzLmhhbmRsZVNlYXJjaFJlc3VsdHMpOwogICAgfSwgMjUwKSwKICAgIGxvYWRNb3JlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuc2VhcmNoaW5nID0gdHJ1ZTsKICAgICAgcmV0dXJuIFJlY29yZHMuZ3JvdXBzLmZldGNoRXhwbG9yZUdyb3Vwcyh0aGlzLnF1ZXJ5LCB7CiAgICAgICAgZnJvbTogdGhpcy5ncm91cElkcy5sZW5ndGgsCiAgICAgICAgcGVyOiB0aGlzLnBlclBhZ2UsCiAgICAgICAgb3JkZXI6IHRoaXMub3JkZXIKICAgICAgfSkudGhlbih0aGlzLmhhbmRsZVNlYXJjaFJlc3VsdHMpOwogICAgfSwKICAgIGdyb3VwQ292ZXI6IGZ1bmN0aW9uIChncm91cCkgewogICAgICByZXR1cm4gewogICAgICAgICdiYWNrZ3JvdW5kLWltYWdlJzogYHVybCgke2dyb3VwLmNvdmVyVXJsfSlgCiAgICAgIH07CiAgICB9LAogICAgZ3JvdXBEZXNjcmlwdGlvbjogZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgIHZhciBkZXNjcmlwdGlvbiwgZG9jLCBwYXJzZXI7CiAgICAgIGRlc2NyaXB0aW9uID0gZ3JvdXAuZGVzY3JpcHRpb24gfHwgJyc7CgogICAgICBpZiAoZ3JvdXAuZGVzY3JpcHRpb25Gb3JtYXQgPT09ICdtZCcpIHsKICAgICAgICBkZXNjcmlwdGlvbiA9IG1hcmtlZChkZXNjcmlwdGlvbik7CiAgICAgIH0KCiAgICAgIHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTsKICAgICAgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhkZXNjcmlwdGlvbiwgJ3RleHQvaHRtbCcpOwogICAgICByZXR1cm4gX3RydW5jYXRlKGRvYy5ib2R5LnRleHRDb250ZW50LCB7CiAgICAgICAgbGVuZ3RoOiAxMDAKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlT3JkZXJDaGFuZ2U6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlci5yZXBsYWNlKHRoaXMubWVyZ2VRdWVyeSh7CiAgICAgICAgb3JkZXI6IHZhbAogICAgICB9KSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc2hvd01lc3NhZ2U6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICF0aGlzLnNlYXJjaGluZyAmJiB0aGlzLnF1ZXJ5Lmxlbmd0aCA+IDAgJiYgdGhpcy5ncm91cHMoKS5sZW5ndGggPiAwOwogICAgfSwKICAgIHNlYXJjaFJlc3VsdHNNZXNzYWdlOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLmdyb3VwcygpLmxlbmd0aCA9PT0gMSkgewogICAgICAgIHJldHVybiAnZXhwbG9yZV9wYWdlLnNpbmdsZV9zZWFyY2hfcmVzdWx0JzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJ2V4cGxvcmVfcGFnZS5tdWx0aXBsZV9zZWFyY2hfcmVzdWx0cyc7CiAgICAgIH0KICAgIH0sCiAgICBub1Jlc3VsdHNGb3VuZDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gIXRoaXMuc2VhcmNoaW5nICYmIHRoaXMuZ3JvdXBzKCkubGVuZ3RoID09PSAwOwogICAgfSwKICAgIG9yZGVyZWRHcm91cHM6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF9vcmRlckJ5KHRoaXMuZ3JvdXBzKCksIFtfY2FtZWxDYXNlKHRoaXMub3JkZXIpXSwgWydkZXNjJ10pOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICdxdWVyeSc6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zZWFyY2hpbmcgPSB0cnVlOwogICAgICByZXR1cm4gdGhpcy5zZWFyY2goKTsKICAgIH0sCiAgICAnJHJvdXRlLnF1ZXJ5Lm9yZGVyJzogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLm9yZGVyID0gdGhpcy4kcm91dGUucXVlcnkub3JkZXI7CiAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoKCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/components/explore/page.vue"],"names":[],"mappings":"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","sourcesContent":["\nimport AppConfig from '@/shared/services/app_config'\nimport Records   from '@/shared/services/records'\nimport EventBus  from '@/shared/services/event_bus'\nimport UrlFor    from '@/mixins/url_for'\nimport _truncate from 'lodash/truncate'\nimport _map      from 'lodash/map'\nimport {marked}    from 'marked'\n\nimport { debounce, camelCase, orderBy } from 'lodash'\n\nexport default\n  mixins: [UrlFor]\n  data: ->\n    groupIds: []\n    resultsCount: 0\n    perPage: 50\n    canLoadMoreGroups: true\n    query: \"\"\n    searching: true\n    order: null\n    orderOptions: [\n      {name: @$t('explore_page.newest_first'), val: \"created_at\"},\n      {name: @$t('explore_page.biggest_first'), val: \"memberships_count\"}\n    ]\n  created: ->\n    if @$route.query.order\n      @order = @$route.query.order\n    else\n      @$router.replace(@mergeQuery({ order: \"memberships_count\" }))\n  mounted: ->\n    EventBus.$emit 'currentComponent', { titleKey: 'explore_page.header', page: 'explorePage'}\n    @search()\n\n  methods:\n    groups: ->\n      Records.groups.find(@groupIds)\n\n    handleSearchResults: (response) ->\n      Records.groups.getExploreResultsCount(@query).then (data) =>\n        @resultsCount = data.count\n      @groupIds = @groupIds.concat _map(response.groups, 'id')\n      @canLoadMoreGroups = (response.groups || []).length == @perPage\n      @searching = false\n\n    search: debounce ->\n      @groupIds = []\n      Records.groups.fetchExploreGroups(@query, per: @perPage, order: @order).then(@handleSearchResults)\n    , 250\n\n    loadMore: ->\n      @searching = true\n      Records.groups.fetchExploreGroups(@query, from: @groupIds.length, per: @perPage, order: @order).then(@handleSearchResults)\n\n    groupCover: (group) ->\n      { 'background-image': \"url(#{group.coverUrl})\" }\n\n    groupDescription: (group) ->\n      description = group.description || ''\n      if group.descriptionFormat == 'md'\n        description = marked(description)\n      parser = new DOMParser()\n      doc = parser.parseFromString(description, 'text/html')\n      _truncate doc.body.textContent, {length: 100}\n\n    handleOrderChange: (val) ->\n      @$router.replace(@mergeQuery({ order: val }))\n  computed:\n    showMessage: ->\n      !@searching && @query.length > 0 && @groups().length > 0\n\n    searchResultsMessage: ->\n      if @groups().length == 1\n        'explore_page.single_search_result'\n      else\n        'explore_page.multiple_search_results'\n\n    noResultsFound: ->\n      !@searching && (@groups().length == 0)\n\n    orderedGroups: ->\n      orderBy @groups(), [camelCase(@order)], ['desc']\n\n  watch:\n    'query': ->\n      @searching = true\n      @search()\n    '$route.query.order':\n      immediate: true\n      handler: ->\n        @order = @$route.query.order\n        @search()\n"],"sourceRoot":""}]}