{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/src/shared/models/poll_template_model.coffee","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/shared/models/poll_template_model.coffee","mtime":1706724415808},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIFBvbGxUZW1wbGF0ZU1vZGVsOwppbXBvcnQgQmFzZU1vZGVsIGZyb20gJ0Avc2hhcmVkL3JlY29yZF9zdG9yZS9iYXNlX21vZGVsJzsKaW1wb3J0IEFwcENvbmZpZyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9hcHBfY29uZmlnJzsKaW1wb3J0IFNlc3Npb24gZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvc2Vzc2lvbic7CmltcG9ydCBJMThuIGZyb20gJ0AvaTE4bic7CmltcG9ydCB7IHN0YXJ0T2ZIb3VyLCBhZGREYXlzIH0gZnJvbSAnZGF0ZS1mbnMnOwpleHBvcnQgZGVmYXVsdCBQb2xsVGVtcGxhdGVNb2RlbCA9IGZ1bmN0aW9uICgpIHsKICBjbGFzcyBQb2xsVGVtcGxhdGVNb2RlbCBleHRlbmRzIEJhc2VNb2RlbCB7CiAgICBjb25maWcoKSB7CiAgICAgIHJldHVybiBBcHBDb25maWcucG9sbFR5cGVzW3RoaXMucG9sbFR5cGVdOwogICAgfQoKICAgIGRlZmF1bHRWYWx1ZXMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYW5vbnltb3VzOiBmYWxzZSwKICAgICAgICBncm91cElkOiBudWxsLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBkZXRhaWxzOiAnJywKICAgICAgICBkZXRhaWxzRm9ybWF0OiAnaHRtbCcsCiAgICAgICAgZGVmYXVsdER1cmF0aW9uSW5EYXlzOiA3LAogICAgICAgIHNwZWNpZmllZFZvdGVyc09ubHk6IGZhbHNlLAogICAgICAgIHBvbGxUeXBlOiBudWxsLAogICAgICAgIGNoYXJ0VHlwZTogbnVsbCwKICAgICAgICBtaW5TY29yZTogbnVsbCwKICAgICAgICBtYXhTY29yZTogbnVsbCwKICAgICAgICBtaW5pbXVtU3RhbmNlQ2hvaWNlczogbnVsbCwKICAgICAgICBtYXhpbXVtU3RhbmNlQ2hvaWNlczogbnVsbCwKICAgICAgICBkb3RzUGVyUGVyc29uOiBudWxsLAogICAgICAgIGNhblJlc3BvbmRNYXliZTogdHJ1ZSwKICAgICAgICBtZWV0aW5nRHVyYXRpb246IG51bGwsCiAgICAgICAgbGltaXRSZWFzb25MZW5ndGg6IHRydWUsCiAgICAgICAgc3RhbmNlUmVhc29uUmVxdWlyZWQ6ICdvcHRpb25hbCcsCiAgICAgICAgdGFnczogW10sCiAgICAgICAgZmlsZXM6IFtdLAogICAgICAgIGltYWdlRmlsZXM6IFtdLAogICAgICAgIGF0dGFjaG1lbnRzOiBbXSwKICAgICAgICBsaW5rUHJldmlld3M6IFtdLAogICAgICAgIG5vdGlmeU9uQ2xvc2luZ1Nvb246ICd1bmRlY2lkZWRfdm90ZXJzJywKICAgICAgICByZWFzb25Qcm9tcHQ6IG51bGwsCiAgICAgICAgcHJvY2Vzc05hbWU6IG51bGwsCiAgICAgICAgcHJvY2Vzc1N1YnRpdGxlOiBudWxsLAogICAgICAgIHByb2Nlc3NJbnRyb2R1Y3Rpb246IG51bGwsCiAgICAgICAgcHJvY2Vzc0ludHJvZHVjdGlvbkZvcm1hdDogJ2h0bWwnLAogICAgICAgIHByb2Nlc3NVcmw6IG51bGwsCiAgICAgICAgcG9sbE9wdGlvbnM6IFtdLAogICAgICAgIHBvbGxPcHRpb25OYW1lRm9ybWF0OiAncGxhaW4nLAogICAgICAgIHNodWZmbGVPcHRpb25zOiBmYWxzZSwKICAgICAgICBoaWRlUmVzdWx0czogJ29mZicsCiAgICAgICAgcG9zaXRpb246IDAKICAgICAgfTsKICAgIH0KCiAgICByZWxhdGlvbnNoaXBzKCkgewogICAgICB0aGlzLmJlbG9uZ3NUbygnYXV0aG9yJywgewogICAgICAgIGZyb206ICd1c2VycycKICAgICAgfSk7CiAgICAgIHJldHVybiB0aGlzLmJlbG9uZ3NUbygnZ3JvdXAnKTsKICAgIH0KCiAgICBidWlsZFBvbGwoKSB7CiAgICAgIHZhciBwb2xsOwogICAgICBwb2xsID0gdGhpcy5yZWNvcmRTdG9yZS5wb2xscy5idWlsZCgpOwogICAgICBPYmplY3Qua2V5cyh0aGlzLmRlZmF1bHRWYWx1ZXMoKSkuZm9yRWFjaChhdHRyID0+IHsKICAgICAgICBpZiAoYXR0ciA9PT0gJ3RpdGxlJykgewogICAgICAgICAgcmV0dXJuIHBvbGxbJ3RpdGxlUGxhY2Vob2xkZXInXSA9IHRoaXNbYXR0cl07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBwb2xsW2F0dHJdID0gdGhpc1thdHRyXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBwb2xsLnBvbGxUZW1wbGF0ZUlkID0gdGhpcy5pZDsKICAgICAgcG9sbC5wb2xsVGVtcGxhdGVLZXkgPSB0aGlzLmtleTsKICAgICAgcG9sbC5hdXRob3JJZCA9IFNlc3Npb24udXNlcigpLmlkOwogICAgICBwb2xsLmNsb3NpbmdBdCA9IHN0YXJ0T2ZIb3VyKGFkZERheXMobmV3IERhdGUoKSwgdGhpcy5kZWZhdWx0RHVyYXRpb25JbkRheXMpKTsKICAgICAgcG9sbC5wb2xsT3B0aW9uc0F0dHJpYnV0ZXMgPSB0aGlzLnBvbGxPcHRpb25zQXR0cmlidXRlcygpOwogICAgICByZXR1cm4gcG9sbDsKICAgIH0KCiAgICBwb2xsT3B0aW9uc0F0dHJpYnV0ZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLnBvbGxPcHRpb25zLm1hcChmdW5jdGlvbiAobykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBuYW1lOiBvLm5hbWUsCiAgICAgICAgICBtZWFuaW5nOiBvLm1lYW5pbmcsCiAgICAgICAgICBwcm9tcHQ6IG8ucHJvbXB0LAogICAgICAgICAgaWNvbjogby5pY29uCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CgogIH0KCiAgOwogIFBvbGxUZW1wbGF0ZU1vZGVsLnNpbmd1bGFyID0gJ3BvbGxUZW1wbGF0ZSc7CiAgUG9sbFRlbXBsYXRlTW9kZWwucGx1cmFsID0gJ3BvbGxUZW1wbGF0ZXMnOwogIFBvbGxUZW1wbGF0ZU1vZGVsLnVuaXF1ZUluZGljZXMgPSBbJ2lkJywgJ2tleSddOwogIFBvbGxUZW1wbGF0ZU1vZGVsLmluZGljZXMgPSBbJ2dyb3VwSWQnXTsKICByZXR1cm4gUG9sbFRlbXBsYXRlTW9kZWw7Cn0uY2FsbCh0aGlzKTs="},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/shared/models/poll_template_model.coffee"],"names":[],"mappings":"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","sourcesContent":["import BaseModel        from '@/shared/record_store/base_model'\nimport AppConfig        from '@/shared/services/app_config'\nimport Session          from '@/shared/services/session'\nimport {map, camelCase, cloneDeep }            from 'lodash'\nimport I18n             from '@/i18n'\nimport { startOfHour, addDays } from 'date-fns'\n\nexport default class PollTemplateModel extends BaseModel\n  @singular: 'pollTemplate'\n  @plural: 'pollTemplates'\n  @uniqueIndices: ['id', 'key']\n  @indices: ['groupId']\n\n  config: ->\n    AppConfig.pollTypes[@pollType]\n\n  defaultValues: ->\n    anonymous: false\n    groupId: null\n    title: ''\n    details: ''\n    detailsFormat: 'html'\n    defaultDurationInDays: 7\n    specifiedVotersOnly: false\n    pollType: null\n    chartType: null\n    minScore: null\n    maxScore: null\n    minimumStanceChoices: null\n    maximumStanceChoices: null\n    dotsPerPerson: null\n    canRespondMaybe: true\n    meetingDuration: null\n    limitReasonLength: true\n    stanceReasonRequired: 'optional'\n    tags: []\n    files: []\n    imageFiles: []\n    attachments: []\n    linkPreviews: []\n    notifyOnClosingSoon: 'undecided_voters'\n    reasonPrompt: null\n    processName: null\n    processSubtitle: null\n    processIntroduction: null\n    processIntroductionFormat: 'html'\n    processUrl: null\n    pollOptions: []\n    pollOptionNameFormat: 'plain'\n    shuffleOptions: false\n    hideResults: 'off'\n    position: 0\n\n  relationships: ->\n    @belongsTo 'author', from: 'users'\n    @belongsTo 'group'\n\n  buildPoll: ->\n    poll = @recordStore.polls.build()\n\n    Object.keys(@defaultValues()).forEach (attr) =>\n      if attr == 'title'\n        poll['titlePlaceholder'] = @[attr]\n      else\n        poll[attr] = @[attr]\n      \n\n    poll.pollTemplateId = @id\n    poll.pollTemplateKey = @key\n    poll.authorId = Session.user().id\n    poll.closingAt = startOfHour(addDays(new Date(), @defaultDurationInDays))\n    poll.pollOptionsAttributes = @pollOptionsAttributes()\n    poll\n\n  pollOptionsAttributes: ->\n    @pollOptions.map (o) ->\n      name: o.name\n      meaning: o.meaning\n      prompt: o.prompt\n      icon: o.icon\n\n\n"],"sourceRoot":""}]}