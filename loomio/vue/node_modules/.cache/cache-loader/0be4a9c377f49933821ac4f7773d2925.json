{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!/home/gustavo/Documents/tese/loomio/vue/src/components/poll/form_page.vue?vue&type=script&lang=coffee&","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/components/poll/form_page.vue","mtime":1706724415804},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js","mtime":1706724499784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlY29yZHMgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvcmVjb3Jkcyc7CmltcG9ydCBFdmVudEJ1cyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9ldmVudF9idXMnOwppbXBvcnQgU2Vzc2lvbiBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9zZXNzaW9uJzsKaW1wb3J0IEZsYXNoIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2ZsYXNoJzsKaW1wb3J0IFBvbGxDb21tb25Gb3JtIGZyb20gJ0AvY29tcG9uZW50cy9wb2xsL2NvbW1vbi9mb3JtJzsKaW1wb3J0IFBvbGxDb21tb25DaG9vc2VUZW1wbGF0ZSBmcm9tICdAL2NvbXBvbmVudHMvcG9sbC9jb21tb24vY2hvb3NlX3RlbXBsYXRlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFBvbGxDb21tb25Gb3JtLAogICAgUG9sbENvbW1vbkNob29zZVRlbXBsYXRlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcG9sbDogbnVsbCwKICAgICAgZ3JvdXA6IG51bGwsCiAgICAgIGRpc2N1c3Npb246IG51bGwKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgZGlzY3Vzc2lvbklkLCBncm91cElkLCB0ZW1wbGF0ZUlkOyAvLyBTb3JyeSBldmVyeW9uZSwgdGVtcGxhdGVfaWQgaXMgYSBwb2xsX2lkIGluIHRoaXMgY2FzZS4KICAgIC8vIEFmdGVyIHRoZSBmaXJzdCByZWxlYXNlIG9mIHBvbGxfdGVtcGxhdGVzIHdlIGNhbiBzdGFydCB0byBtb2RpZnkgdGhpcyBzdHVmZgoKICAgIGlmICh0ZW1wbGF0ZUlkID0gcGFyc2VJbnQodGhpcy4kcm91dGUucXVlcnkudGVtcGxhdGVfaWQpKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIFJlY29yZHMucG9sbHMuZmluZE9yRmV0Y2hCeUlkKHRlbXBsYXRlSWQpLnRoZW4ocG9sbCA9PiB7CiAgICAgICAgdGhpcy5wb2xsID0gcG9sbC5jbG9uZVBvbGwoKTsKCiAgICAgICAgaWYgKFNlc3Npb24udXNlcigpLmdyb3VwSWRzKCkuaW5jbHVkZXMocG9sbC5ncm91cElkKSkgewogICAgICAgICAgdGhpcy5wb2xsLmdyb3VwSWQgPSBwb2xsLmdyb3VwSWQ7CiAgICAgICAgICB0aGlzLmdyb3VwID0gdGhpcy5wb2xsLmdyb3VwKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQoKICAgIGlmIChkaXNjdXNzaW9uSWQgPSBwYXJzZUludCh0aGlzLiRyb3V0ZS5xdWVyeS5kaXNjdXNzaW9uX2lkKSkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBSZWNvcmRzLmRpc2N1c3Npb25zLmZpbmRPckZldGNoQnlJZChkaXNjdXNzaW9uSWQpLnRoZW4oZGlzY3Vzc2lvbiA9PiB7CiAgICAgICAgdGhpcy5kaXNjdXNzaW9uID0gZGlzY3Vzc2lvbjsKICAgICAgICB0aGlzLmdyb3VwID0gZGlzY3Vzc2lvbi5ncm91cCgpOwogICAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CgogICAgaWYgKGdyb3VwSWQgPSBwYXJzZUludCh0aGlzLiRyb3V0ZS5xdWVyeS5ncm91cF9pZCkpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgUmVjb3Jkcy5ncm91cHMuZmluZE9yRmV0Y2hCeUlkKGdyb3VwSWQpLnRoZW4oZ3JvdXAgPT4gewogICAgICAgIHRoaXMuZ3JvdXAgPSBncm91cDsKICAgICAgICByZXR1cm4gdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQoKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMua2V5KSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHJldHVybiBSZWNvcmRzLnBvbGxzLmZpbmRPckZldGNoQnlJZCh0aGlzLiRyb3V0ZS5wYXJhbXMua2V5KS50aGVuKHBvbGwgPT4gewogICAgICAgIHRoaXMucG9sbCA9IHBvbGwuY2xvbmUoKTsKICAgICAgICBFdmVudEJ1cy4kZW1pdCgnY3VycmVudENvbXBvbmVudCcsIHsKICAgICAgICAgIGdyb3VwOiBwb2xsLmdyb3VwKCksCiAgICAgICAgICBwb2xsOiBwb2xsLAogICAgICAgICAgdGl0bGU6IHBvbGwudGl0bGUsCiAgICAgICAgICBwYWdlOiAncG9sbEZvcm1QYWdlJwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3BhZ2VFcnJvcicsIGVycm9yKTsKCiAgICAgICAgaWYgKGVycm9yLnN0YXR1cyA9PT0gNDAzICYmICFTZXNzaW9uLmlzU2lnbmVkSW4oKSkgewogICAgICAgICAgcmV0dXJuIEV2ZW50QnVzLiRlbWl0KCdvcGVuQXV0aE1vZGFsJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNldFBvbGw6IGZ1bmN0aW9uIChwb2xsKSB7CiAgICAgIHJldHVybiB0aGlzLnBvbGwgPSBwb2xsOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/components/poll/form_page.vue"],"names":[],"mappings":"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","sourcesContent":["\nimport Records from '@/shared/services/records'\nimport EventBus from '@/shared/services/event_bus'\nimport Session from '@/shared/services/session'\nimport Flash  from '@/shared/services/flash'\nimport PollCommonForm from '@/components/poll/common/form'\nimport PollCommonChooseTemplate from '@/components/poll/common/choose_template'\n\nexport default\n  components: {PollCommonForm, PollCommonChooseTemplate}\n\n  data: ->\n    loading: false\n    poll: null\n    group: null\n    discussion: null\n\n  created: ->\n    # Sorry everyone, template_id is a poll_id in this case.\n    # After the first release of poll_templates we can start to modify this stuff\n    if templateId = parseInt(@$route.query.template_id)\n      @loading = true\n      Records.polls.findOrFetchById(templateId).then (poll) =>\n        @poll = poll.clonePoll()\n        if Session.user().groupIds().includes(poll.groupId)\n          @poll.groupId = poll.groupId\n          @group = @poll.group()\n        @loading = false\n\n    if discussionId = parseInt(@$route.query.discussion_id)\n      @loading = true\n      Records.discussions.findOrFetchById(discussionId).then (discussion) =>\n        @discussion = discussion\n        @group = discussion.group()\n        @loading = false\n\n    if groupId = parseInt(@$route.query.group_id)\n      @loading = true\n      Records.groups.findOrFetchById(groupId).then (group) =>\n        @group = group\n        @loading = false\n\n    if @$route.params.key\n      @loading = true\n      Records.polls.findOrFetchById(@$route.params.key)\n      .then (poll) =>\n        @poll = poll.clone()\n        EventBus.$emit 'currentComponent',\n          group: poll.group()\n          poll:  poll\n          title: poll.title\n          page: 'pollFormPage'\n        @loading = false\n      .catch (error) ->\n        EventBus.$emit 'pageError', error\n        if error.status == 403 && !Session.isSignedIn()\n          EventBus.$emit 'openAuthModal'\n\n  methods:\n    setPoll: (poll) ->\n      @poll = poll\n\n"],"sourceRoot":""}]}