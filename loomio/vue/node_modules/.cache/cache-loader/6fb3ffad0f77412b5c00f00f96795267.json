{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/src/shared/models/version_model.coffee","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/shared/models/version_model.coffee","mtime":1706724415808},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9pbmNsdWRlcyBmcm9tICJsb2Rhc2gvaW5jbHVkZXMiOwppbXBvcnQgX2tleXMgZnJvbSAibG9kYXNoL2tleXMiOwppbXBvcnQgX2ZpbHRlciBmcm9tICJsb2Rhc2gvZmlsdGVyIjsKdmFyIFZlcnNpb25Nb2RlbDsKaW1wb3J0IEJhc2VNb2RlbCBmcm9tICdAL3NoYXJlZC9yZWNvcmRfc3RvcmUvYmFzZV9tb2RlbCc7CmV4cG9ydCBkZWZhdWx0IFZlcnNpb25Nb2RlbCA9IGZ1bmN0aW9uICgpIHsKICBjbGFzcyBWZXJzaW9uTW9kZWwgZXh0ZW5kcyBCYXNlTW9kZWwgewogICAgcmVsYXRpb25zaGlwcygpIHsKICAgICAgdGhpcy5iZWxvbmdzVG8oJ2Rpc2N1c3Npb24nKTsKICAgICAgdGhpcy5iZWxvbmdzVG8oJ2NvbW1lbnQnKTsKICAgICAgdGhpcy5iZWxvbmdzVG8oJ3BvbGwnKTsKICAgICAgcmV0dXJuIHRoaXMuYmVsb25nc1RvKCdhdXRob3InLCB7CiAgICAgICAgZnJvbTogJ3VzZXJzJywKICAgICAgICBieTogJ3dob2R1bm5pdCcKICAgICAgfSk7CiAgICB9CgogICAgZWRpdGVkQXR0cmlidXRlTmFtZXMoKSB7CiAgICAgIHJldHVybiBfZmlsdGVyKF9rZXlzKHRoaXMuY2hhbmdlcykuc29ydCgpLCBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuIF9pbmNsdWRlcyhbJ3RpdGxlJywgJ25hbWUnLCAnZGVzY3JpcHRpb24nLCAnY2xvc2luZ19hdCcsICdwcml2YXRlJywgJ2RvY3VtZW50X2lkcyddLCBrZXkpOwogICAgICB9KTsKICAgIH0KCiAgICBhdHRyaWJ1dGVFZGl0ZWQobmFtZSkgewogICAgICByZXR1cm4gX2luY2x1ZGVzKF9rZXlzKHRoaXMuY2hhbmdlcyksIG5hbWUpOwogICAgfQoKICAgIGF1dGhvck5hbWUoKSB7CiAgICAgIGlmICh0aGlzLmF1dGhvcigpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aG9yKCkubmFtZVdpdGhUaXRsZSh0aGlzLm1vZGVsKCkuZ3JvdXAoKSk7CiAgICAgIH0KICAgIH0KCiAgICBtb2RlbCgpIHsKICAgICAgcmV0dXJuIHRoaXMucmVjb3JkU3RvcmVbYCR7dGhpcy5pdGVtVHlwZS50b0xvd2VyQ2FzZSgpfXNgXS5maW5kKHRoaXMuaXRlbUlkKTsKICAgIH0KCiAgICBpc0N1cnJlbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmluZGV4ID09PSB0aGlzLm1vZGVsKCkudmVyc2lvbnNDb3VudCAtIDE7CiAgICB9CgogICAgaXNPcmlnaW5hbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5kZXggPT09IDA7CiAgICB9CgogICAgYXV0aG9yT3JFZGl0b3JOYW1lKCkgewogICAgICBpZiAodGhpcy5pc09yaWdpbmFsKCkpIHsKICAgICAgICByZXR1cm4gdGhpcy5tb2RlbCgpLmF1dGhvck5hbWUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5hdXRob3JOYW1lKCk7CiAgICAgIH0KICAgIH0KCiAgfQoKICA7CiAgVmVyc2lvbk1vZGVsLnNpbmd1bGFyID0gJ3ZlcnNpb24nOwogIFZlcnNpb25Nb2RlbC5wbHVyYWwgPSAndmVyc2lvbnMnOwogIFZlcnNpb25Nb2RlbC5pbmRpY2VzID0gWydkaXNjdXNzaW9uSWQnXTsKICByZXR1cm4gVmVyc2lvbk1vZGVsOwp9LmNhbGwodGhpcyk7"},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/shared/models/version_model.coffee"],"names":[],"mappings":";;;AAAA,IAAA,YAAA;AAAA,OAAA,SAAA,MAAA,kCAAA;AAGA,eAAqB,YAAA,GAAA,YAAA;AAAN,QAAA,YAAA,SAA2B,SAA3B,CAAA;AAKb,IAAA,aAAe,GAAA;AACb,WAAA,SAAA,CAAA,YAAA;AACA,WAAA,SAAA,CAAA,SAAA;AACA,WAAA,SAAA,CAAA,MAAA;aACA,KAAA,SAAA,CAAA,QAAA,EAAqB;AAAA,QAAA,IAAA,EAAA,OAAA;AAAe,QAAA,EAAA,EAAI;AAAnB,OAArB,C;AAJa;;AAMf,IAAA,oBAAsB,GAAA;aACpB,QAAO,MAAK,KAAL,OAAA,EAAP,IAAO,EAAP,EAA8B,UAAA,GAAA,EAAA;eAC5B,UAAS,CAAA,OAAA,EAAA,MAAA,EAAA,aAAA,EAAA,YAAA,EAAA,SAAA,EAAT,cAAS,CAAT,EAAA,GAAA,C;AADF,OAAA,C;AADoB;;AAItB,IAAA,eAAiB,CAAA,IAAA,EAAA;aACd,UAAS,MAAK,KAAd,OAAS,CAAT,EAAA,IAAA,C;AADc;;AAGjB,IAAA,UAAY,GAAA;AACV,UAA6C,KAA7C,MAA6C,EAA7C,EAAA;eAAA,KAAA,MAAA,GAAA,aAAA,CAAwB,KAAA,KAAA,GAAxB,KAAwB,EAAxB,C;;AADU;;AAGZ,IAAA,KAAO,GAAA;aACL,KAAC,WAAD,CAAa,GAAG,KAAC,QAAD,CAAH,WAAG,EAAJ,GAAZ,EAAA,IAAA,CAAiD,KAAjD,MAAA,C;AADK;;AAGP,IAAA,SAAW,GAAA;aACT,KAAA,KAAA,KAAU,KAAA,KAAA,GAAA,aAAA,GAAyB,C;AAD1B;;AAGX,IAAA,UAAY,GAAA;aACV,KAAA,KAAA,KAAU,C;AADA;;AAGZ,IAAA,kBAAoB,GAAA;AAClB,UAAG,KAAH,UAAG,EAAH,EAAA;eACE,KAAA,KAAA,GADF,UACE,E;AADF,OAAA,MAAA;eAGE,KAHF,UAGE,E;;AAJgB;;AA9BP;;AAAA;AACb,EAAA,YAAC,CAAD,QAAA,GAAW,SAAX;AACA,EAAA,YAAC,CAAD,MAAA,GAAS,UAAT;AACA,EAAA,YAAC,CAAD,OAAA,GAAU,CAAA,cAAA,CAAV;;CAHmB,C,IAAA,C,IAAA,CAArB","sourcesContent":["import BaseModel from '@/shared/record_store/base_model'\nimport {filter, keys, includes} from 'lodash'\n\nexport default class VersionModel extends BaseModel\n  @singular: 'version'\n  @plural: 'versions'\n  @indices: ['discussionId']\n\n  relationships: ->\n    @belongsTo 'discussion'\n    @belongsTo 'comment'\n    @belongsTo 'poll'\n    @belongsTo 'author', from: 'users', by: 'whodunnit'\n\n  editedAttributeNames: ->\n    filter keys(@changes).sort(), (key) ->\n      includes ['title', 'name', 'description', 'closing_at', 'private', 'document_ids'], key\n\n  attributeEdited: (name) ->\n     includes(keys(@changes), name)\n\n  authorName: ->\n    @author().nameWithTitle(@model().group()) if @author()\n\n  model: ->\n    @recordStore[\"#{@itemType.toLowerCase()}s\"].find(@itemId)\n\n  isCurrent: ->\n    @index == @model().versionsCount - 1\n\n  isOriginal: ->\n    @index == 0\n\n  authorOrEditorName: ->\n    if @isOriginal()\n      @model().authorName()\n    else\n      @authorName()\n"],"sourceRoot":""}]}