{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!/home/gustavo/Documents/tese/loomio/vue/src/components/thread/form_page.vue?vue&type=script&lang=coffee&","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/components/thread/form_page.vue","mtime":1706724415808},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js","mtime":1706724499784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlY29yZHMgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvcmVjb3Jkcyc7CmltcG9ydCBTZXNzaW9uIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL3Nlc3Npb24nOwppbXBvcnQgTG1vVXJsU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9sbW9fdXJsX3NlcnZpY2UnOwppbXBvcnQgRXZlbnRCdXMgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvZXZlbnRfYnVzJzsKaW1wb3J0IEFiaWxpdHlTZXJ2aWNlIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2FiaWxpdHlfc2VydmljZSc7CmltcG9ydCBDaG9vc2VUZW1wbGF0ZSBmcm9tICdAL2NvbXBvbmVudHMvdGhyZWFkL2Nob29zZV90ZW1wbGF0ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDaG9vc2VUZW1wbGF0ZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlzY3Vzc2lvbjogbnVsbCwKICAgICAgaXNEaXNhYmxlZDogZmFsc2UsCiAgICAgIGdyb3VwSWQ6IG51bGwsCiAgICAgIHVzZXI6IG51bGwKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5pbml0KCk7CiAgfSwKICB3YXRjaDogewogICAgJyRyb3V0ZS5xdWVyeS5ncm91cF9pZCc6ICdpbml0JywKICAgICckcm91dGUucXVlcnkuYmxhbmtfdGVtcGxhdGUnOiAnaW5pdCcsCiAgICAnJHJvdXRlLnF1ZXJ5Lm5ld190ZW1wbGF0ZSc6ICdpbml0JywKICAgICckcm91dGUucXVlcnkudGVtcGxhdGVfaWQnOiAnaW5pdCcsCiAgICAnJHJvdXRlLnBhcmFtcy5rZXknOiAnaW5pdCcKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGRpc2N1c3Npb25JZCwgdXNlcklkOwogICAgICB0aGlzLmRpc2N1c3Npb24gPSBudWxsOwoKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5rZXkpIHsKICAgICAgICByZXR1cm4gUmVjb3Jkcy5kaXNjdXNzaW9ucy5maW5kT3JGZXRjaEJ5SWQodGhpcy4kcm91dGUucGFyYW1zLmtleSkudGhlbihkaXNjdXNzaW9uID0+IHsKICAgICAgICAgIHJldHVybiB0aGlzLmRpc2N1c3Npb24gPSBkaXNjdXNzaW9uLmNsb25lKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoZGlzY3Vzc2lvbklkID0gcGFyc2VJbnQodGhpcy4kcm91dGUucXVlcnkudGVtcGxhdGVfaWQpKSB7CiAgICAgICAgcmV0dXJuIFJlY29yZHMuZGlzY3Vzc2lvbnMuZmluZE9yRmV0Y2hCeUlkKGRpc2N1c3Npb25JZCkudGhlbihkaXNjdXNzaW9uID0+IHsKICAgICAgICAgIHRoaXMuZGlzY3Vzc2lvbiA9IGRpc2N1c3Npb24uY2xvbmVUZW1wbGF0ZSgpOwoKICAgICAgICAgIGlmIChkaXNjdXNzaW9uLmdyb3VwSWQgJiYgQWJpbGl0eVNlcnZpY2UuY2FuU3RhcnRUaHJlYWQoZGlzY3Vzc2lvbi5ncm91cCgpKSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNjdXNzaW9uLmdyb3VwSWQgPSBkaXNjdXNzaW9uLmdyb3VwSWQ7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cElkID0gcGFyc2VJbnQodGhpcy4kcm91dGUucXVlcnkuZ3JvdXBfaWQpKSB7CiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmJsYW5rX3RlbXBsYXRlKSB7CiAgICAgICAgICByZXR1cm4gUmVjb3Jkcy5ncm91cHMuZmluZE9yRmV0Y2hCeUlkKHRoaXMuZ3JvdXBJZCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2N1c3Npb24gPSBSZWNvcmRzLmRpc2N1c3Npb25zLmJ1aWxkKHsKICAgICAgICAgICAgICB0aXRsZTogdGhpcy4kcm91dGUucXVlcnkudGl0bGUsCiAgICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy5ncm91cElkLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uRm9ybWF0OiBTZXNzaW9uLmRlZmF1bHRGb3JtYXQoKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUucXVlcnkubmV3X3RlbXBsYXRlKSB7CiAgICAgICAgICByZXR1cm4gUmVjb3Jkcy5ncm91cHMuZmluZE9yRmV0Y2hCeUlkKHRoaXMuZ3JvdXBJZCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2N1c3Npb24gPSBSZWNvcmRzLmRpc2N1c3Npb25zLmJ1aWxkKHsKICAgICAgICAgICAgICB0aXRsZTogdGhpcy4kcm91dGUucXVlcnkudGl0bGUsCiAgICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy5ncm91cElkLAogICAgICAgICAgICAgIHRlbXBsYXRlOiB0cnVlLAogICAgICAgICAgICAgIGRlc2NyaXB0aW9uRm9ybWF0OiBTZXNzaW9uLmRlZmF1bHRGb3JtYXQoKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBkaXNwbGF5IHRlbXBsYXRlcyBmb3IgdGhlIGdyb3VwCiAgICAgICAgICByZXR1cm4gdGhpcy5kaXNjdXNzaW9uID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodXNlcklkID0gcGFyc2VJbnQodGhpcy4kcm91dGUucXVlcnkudXNlcl9pZCkpIHsKICAgICAgICByZXR1cm4gUmVjb3Jkcy51c2Vycy5maW5kT3JGZXRjaEJ5SWQodXNlcklkKS50aGVuKHVzZXIgPT4gewogICAgICAgICAgdGhpcy51c2VyID0gdXNlcjsKICAgICAgICAgIHJldHVybiB0aGlzLmRpc2N1c3Npb24gPSBSZWNvcmRzLmRpc2N1c3Npb25zLmJ1aWxkKHsKICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHJvdXRlLnF1ZXJ5LnRpdGxlLAogICAgICAgICAgICBncm91cElkOiBudWxsLAogICAgICAgICAgICBkZXNjcmlwdGlvbkZvcm1hdDogU2Vzc2lvbi5kZWZhdWx0Rm9ybWF0KCkKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLmRpc2N1c3Npb24gPSBSZWNvcmRzLmRpc2N1c3Npb25zLmJ1aWxkKHsKICAgICAgICAgIHRpdGxlOiB0aGlzLiRyb3V0ZS5xdWVyeS50aXRsZSwKICAgICAgICAgIGRlc2NyaXB0aW9uRm9ybWF0OiBTZXNzaW9uLmRlZmF1bHRGb3JtYXQoKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/components/thread/form_page.vue"],"names":[],"mappings":"AACA,OAAA,OAAA,MAAA,2BAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,OAAA,aAAA,MAAA,mCAAA;AACA,OAAA,QAAA,MAAA,6BAAA;AACA,OAAA,cAAA,MAAA,mCAAA;AACA,OAAA,cAAA,MAAA,qCAAA;AAEA,eACE;AAAA,EAAA,UAAA,EAAY;AAAZ,IAAA;AAAY,GAAZ;AACA,EAAA,IAAA,EAAM,YAAA;WACJ;AAAA,MAAA,UAAA,EAAA,IAAA;AACA,MAAA,UAAA,EADA,KAAA;AAEA,MAAA,OAAA,EAFA,IAAA;AAGA,MAAA,IAAA,EAAM;AAHN,K;AAFF,GAAA;AAOA,EAAA,OAAA,EAAS,YAAA;WACP,KAAA,IAAA,E;AARF,GAAA;AAUA,EAAA,KAAA,EACE;AAAA,6BAAA,MAAA;AACA,mCADA,MAAA;AAEA,iCAFA,MAAA;AAGA,gCAHA,MAAA;AAIA,yBAAqB;AAJrB,GAXF;AAiBA,EAAA,OAAA,EACE;AAAA,IAAA,IAAA,EAAM,YAAA;AACV,UAAA,YAAA,EAAA,MAAA;AAAM,WAAA,UAAA,GAAc,IAAd;;AAEA,UAAG,KAAC,MAAD,CAAQ,MAAR,CAAH,GAAA,EAAA;eACE,OAAO,CAAC,WAAR,CAAA,eAAA,CAAoC,KAAC,MAAD,CAAQ,MAAR,CAApC,GAAA,EAAA,IAAA,CAA6D,UAAA,IAAA;iBAC3D,KAAA,UAAA,GAAc,UAAU,CAAV,KAAA,E;AAFlB,SACE,C;AADF,OAAA,MAGK,IAAG,YAAA,GAAe,QAAA,CAAS,KAAC,MAAD,CAAQ,KAAR,CAA3B,WAAkB,CAAlB,EAAA;eACH,OAAO,CAAC,WAAR,CAAA,eAAA,CAAA,YAAA,EAAA,IAAA,CAAuD,UAAA,IAAA;AACrD,eAAA,UAAA,GAAc,UAAU,CAAV,aAAA,EAAd;;AACA,cAAG,UAAU,CAAV,OAAA,IAAsB,cAAc,CAAd,cAAA,CAA8B,UAAU,CAAjE,KAAuD,EAA9B,CAAzB,EAAA;mBACE,KAAC,UAAD,CAAA,OAAA,GAAsB,UAAU,CADlC,O;;AAHC,SACH,C;AADG,OAAA,MAKA,IAAG,KAAA,OAAA,GAAW,QAAA,CAAS,KAAC,MAAD,CAAQ,KAAR,CAAvB,QAAc,CAAd,EAAA;AACH,YAAG,KAAC,MAAD,CAAQ,KAAR,CAAH,cAAA,EAAA;iBACE,OAAO,CAAC,MAAR,CAAA,eAAA,CAA+B,KAA/B,OAAA,EAAA,IAAA,CAA8C,MAAA;mBAC5C,KAAA,UAAA,GAAc,OAAO,CAAC,WAAR,CAAA,KAAA,CACZ;AAAA,cAAA,KAAA,EAAO,KAAC,MAAD,CAAQ,KAAR,CAAP,KAAA;AACA,cAAA,OAAA,EAAS,KADT,OAAA;AAEA,cAAA,iBAAA,EAAmB,OAAO,CAAP,aAAA;AAFnB,aADY,C;AAFlB,WACE,C;AADF,SAAA,MAMK,IAAG,KAAC,MAAD,CAAQ,KAAR,CAAH,YAAA,EAAA;iBACH,OAAO,CAAC,MAAR,CAAA,eAAA,CAA+B,KAA/B,OAAA,EAAA,IAAA,CAA8C,MAAA;mBAC5C,KAAA,UAAA,GAAc,OAAO,CAAC,WAAR,CAAA,KAAA,CACZ;AAAA,cAAA,KAAA,EAAO,KAAC,MAAD,CAAQ,KAAR,CAAP,KAAA;AACA,cAAA,OAAA,EAAS,KADT,OAAA;AAEA,cAAA,QAAA,EAFA,IAAA;AAGA,cAAA,iBAAA,EAAmB,OAAO,CAAP,aAAA;AAHnB,aADY,C;AAFb,WACH,C;AADG,SAAA,MAAA;;iBASH,KAAA,UAAA,GATG,I;AAPF;AAAA,OAAA,MAiBA,IAAG,MAAA,GAAS,QAAA,CAAS,KAAC,MAAD,CAAQ,KAAR,CAArB,OAAY,CAAZ,EAAA;eACH,OAAO,CAAC,KAAR,CAAA,eAAA,CAAA,MAAA,EAAA,IAAA,CAA2C,IAAA,IAAA;AACzC,eAAA,IAAA,GAAQ,IAAR;iBACA,KAAA,UAAA,GAAc,OAAO,CAAC,WAAR,CAAA,KAAA,CACZ;AAAA,YAAA,KAAA,EAAO,KAAC,MAAD,CAAQ,KAAR,CAAP,KAAA;AACA,YAAA,OAAA,EADA,IAAA;AAEA,YAAA,iBAAA,EAAmB,OAAO,CAAP,aAAA;AAFnB,WADY,C;AAHb,SACH,C;AADG,OAAA,MAAA;eAQH,KAAA,UAAA,GAAc,OAAO,CAAC,WAAR,CAAA,KAAA,CACZ;AAAA,UAAA,KAAA,EAAO,KAAC,MAAD,CAAQ,KAAR,CAAP,KAAA;AACA,UAAA,iBAAA,EAAmB,OAAO,CAAP,aAAA;AADnB,SADY,C;;AApCZ;AAAN;AAlBF,CADF","sourcesContent":["\nimport Records       from '@/shared/services/records'\nimport Session       from '@/shared/services/session'\nimport LmoUrlService from '@/shared/services/lmo_url_service'\nimport EventBus      from '@/shared/services/event_bus'\nimport AbilityService from '@/shared/services/ability_service'\nimport ChooseTemplate from '@/components/thread/choose_template'\n\nexport default\n  components: {ChooseTemplate}\n  data: ->\n    discussion: null\n    isDisabled: false\n    groupId: null\n    user: null\n\n  mounted: ->\n    @init()\n\n  watch:\n    '$route.query.group_id': 'init'\n    '$route.query.blank_template': 'init'\n    '$route.query.new_template': 'init'\n    '$route.query.template_id': 'init'\n    '$route.params.key': 'init'\n\n  methods:\n    init: ->\n      @discussion = null\n\n      if @$route.params.key\n        Records.discussions.findOrFetchById(@$route.params.key).then (discussion) =>\n          @discussion = discussion.clone()\n      else if discussionId = parseInt(@$route.query.template_id)\n        Records.discussions.findOrFetchById(discussionId).then (discussion) =>\n          @discussion = discussion.cloneTemplate()\n          if discussion.groupId && AbilityService.canStartThread(discussion.group())\n            @discussion.groupId = discussion.groupId\n      else if @groupId = parseInt(@$route.query.group_id)\n        if @$route.query.blank_template\n          Records.groups.findOrFetchById(@groupId).then =>\n            @discussion = Records.discussions.build\n              title: @$route.query.title\n              groupId: @groupId\n              descriptionFormat: Session.defaultFormat()\n        else if @$route.query.new_template\n          Records.groups.findOrFetchById(@groupId).then =>\n            @discussion = Records.discussions.build\n              title: @$route.query.title\n              groupId: @groupId\n              template: true\n              descriptionFormat: Session.defaultFormat()\n        else\n          # display templates for the group\n          @discussion = null\n      else if userId = parseInt(@$route.query.user_id)\n        Records.users.findOrFetchById(userId).then (user) =>\n          @user = user\n          @discussion = Records.discussions.build\n            title: @$route.query.title\n            groupId: null\n            descriptionFormat: Session.defaultFormat()\n      else\n        @discussion = Records.discussions.build\n          title: @$route.query.title\n          descriptionFormat: Session.defaultFormat()\n\n"],"sourceRoot":""}]}