{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/src/shared/services/attachment_service.coffee","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/shared/services/attachment_service.coffee","mtime":1706724415812},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIEF0dGFjaG1lbnRTZXJ2aWNlOwppbXBvcnQgRXZlbnRCdXMgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvZXZlbnRfYnVzJzsKaW1wb3J0IEFiaWxpdHlTZXJ2aWNlIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2FiaWxpdHlfc2VydmljZSc7CmltcG9ydCBTZXNzaW9uIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL3Nlc3Npb24nOwppbXBvcnQgUmVjb3JkcyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9yZWNvcmRzJzsKaW1wb3J0IG9wZW5Nb2RhbCBmcm9tICdAL3NoYXJlZC9oZWxwZXJzL29wZW5fbW9kYWwnOwppbXBvcnQgRmxhc2ggZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvZmxhc2gnOwpleHBvcnQgZGVmYXVsdCBuZXcgKEF0dGFjaG1lbnRTZXJ2aWNlID0gY2xhc3MgQXR0YWNobWVudFNlcnZpY2UgewogIGFjdGlvbnMoYXR0YWNobWVudCkgewogICAgcmV0dXJuIHsKICAgICAgZGVsZXRlX2F0dGFjaG1lbnQ6IHsKICAgICAgICBpY29uOiAnbWRpLWRlbGV0ZScsCiAgICAgICAgbmFtZTogJ2NvbW1vbi5hY3Rpb24uZGVsZXRlJywKICAgICAgICBjYW5QZXJmb3JtOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gYXR0YWNobWVudC5pc0EoJ2F0dGFjaG1lbnQnKSAmJiBBYmlsaXR5U2VydmljZS5jYW5BZG1pbmlzdGVyKGF0dGFjaG1lbnQuZ3JvdXAoKSk7CiAgICAgICAgfSwKICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gRXZlbnRCdXMuJGVtaXQoJ29wZW5Nb2RhbCcsIHsKICAgICAgICAgICAgY29tcG9uZW50OiAnQ29uZmlybU1vZGFsJywKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBjb25maXJtOiB7CiAgICAgICAgICAgICAgICBzdWJtaXQ6IGF0dGFjaG1lbnQuZGVzdHJveSwKICAgICAgICAgICAgICAgIHRleHQ6IHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICdjb21tZW50X2Zvcm0uYXR0YWNobWVudHMucmVtb3ZlX2F0dGFjaG1lbnQnLAogICAgICAgICAgICAgICAgICBoZWxwdGV4dDogJ2dyb3VwX2ZpbGVzX3BhbmVsLmRlbGV0ZV9jb25maXJtYXRpb24nLAogICAgICAgICAgICAgICAgICBzdWJtaXQ6ICdjb21tb24uYWN0aW9uLmRlbGV0ZScsCiAgICAgICAgICAgICAgICAgIGZsYXNoOiAncG9sbF9jb21tb25fZGVsZXRlX21vZGFsLnN1Y2Nlc3MnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlbGV0ZV9kb2N1bWVudDogewogICAgICAgIGljb246ICdtZGktZGVsZXRlJywKICAgICAgICBuYW1lOiAnY29tbW9uLmFjdGlvbi5kZWxldGUnLAogICAgICAgIGNhblBlcmZvcm06IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBhdHRhY2htZW50LmlzQSgnZG9jdW1lbnQnKSAmJiBBYmlsaXR5U2VydmljZS5jYW5BZG1pbmlzdGVyKGF0dGFjaG1lbnQuZ3JvdXAoKSk7CiAgICAgICAgfSwKICAgICAgICBwZXJmb3JtOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gRXZlbnRCdXMuJGVtaXQoJ29wZW5Nb2RhbCcsIHsKICAgICAgICAgICAgY29tcG9uZW50OiAnQ29uZmlybU1vZGFsJywKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBjb25maXJtOiB7CiAgICAgICAgICAgICAgICBzdWJtaXQ6IGF0dGFjaG1lbnQuZGVzdHJveSwKICAgICAgICAgICAgICAgIHRleHQ6IHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICdjb21tZW50X2Zvcm0uYXR0YWNobWVudHMucmVtb3ZlX2F0dGFjaG1lbnQnLAogICAgICAgICAgICAgICAgICBoZWxwdGV4dDogJ2dyb3VwX2ZpbGVzX3BhbmVsLmRlbGV0ZV9jb25maXJtYXRpb24nLAogICAgICAgICAgICAgICAgICBzdWJtaXQ6ICdjb21tb24uYWN0aW9uLmRlbGV0ZScsCiAgICAgICAgICAgICAgICAgIGZsYXNoOiAncG9sbF9jb21tb25fZGVsZXRlX21vZGFsLnN1Y2Nlc3MnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfQoKfSkoKTs="},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/shared/services/attachment_service.coffee"],"names":[],"mappings":"AAAA,IAAA,iBAAA;AAAA,OAAA,QAAA,MAAA,6BAAA;AACA,OAAA,cAAA,MAAA,mCAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,OAAA,SAAA,MAAA,6BAAA;AACA,OAAA,KAAA,MAAA,yBAAA;AAEA,eAAe,KAAU,iBAAA,GAAN,MAAA,iBAAA,CAAA;AACjB,EAAA,OAAS,CAAA,UAAA,EAAA;WACP;AAAA,MAAA,iBAAA,EACE;AAAA,QAAA,IAAA,EAAA,YAAA;AACA,QAAA,IAAA,EADA,sBAAA;AAEA,QAAA,UAAA,EAAY,YAAA;iBACV,UAAU,CAAV,GAAA,CAAA,YAAA,KAAgC,cAAc,CAAd,aAAA,CAA6B,UAAU,CAAvC,KAA6B,EAA7B,C;AAHlC,SAAA;AAIA,QAAA,OAAA,EAAS,YAAA;iBACP,QAAQ,CAAR,KAAA,CAAA,WAAA,EACE;AAAA,YAAA,SAAA,EAAA,cAAA;AACA,YAAA,KAAA,EACE;AAAA,cAAA,OAAA,EACE;AAAA,gBAAA,MAAA,EAAQ,UAAU,CAAlB,OAAA;AACA,gBAAA,IAAA,EACE;AAAA,kBAAA,KAAA,EAAA,4CAAA;AACA,kBAAA,QAAA,EADA,uCAAA;AAEA,kBAAA,MAAA,EAFA,sBAAA;AAGA,kBAAA,KAAA,EAAO;AAHP;AAFF;AADF;AAFF,WADF,C;AADO;AAJT,OADF;AAiBA,MAAA,eAAA,EACE;AAAA,QAAA,IAAA,EAAA,YAAA;AACA,QAAA,IAAA,EADA,sBAAA;AAEA,QAAA,UAAA,EAAY,YAAA;iBACV,UAAU,CAAV,GAAA,CAAA,UAAA,KAA8B,cAAc,CAAd,aAAA,CAA6B,UAAU,CAAvC,KAA6B,EAA7B,C;AAHhC,SAAA;AAIA,QAAA,OAAA,EAAS,YAAA;iBACP,QAAQ,CAAR,KAAA,CAAA,WAAA,EACE;AAAA,YAAA,SAAA,EAAA,cAAA;AACA,YAAA,KAAA,EACE;AAAA,cAAA,OAAA,EACE;AAAA,gBAAA,MAAA,EAAQ,UAAU,CAAlB,OAAA;AACA,gBAAA,IAAA,EACE;AAAA,kBAAA,KAAA,EAAA,4CAAA;AACA,kBAAA,QAAA,EADA,uCAAA;AAEA,kBAAA,MAAA,EAFA,sBAAA;AAGA,kBAAA,KAAA,EAAO;AAHP;AAFF;AADF;AAFF,WADF,C;AADO;AAJT;AAlBF,K;AADO;;AADQ,CAAJ,GAAf","sourcesContent":["import EventBus from '@/shared/services/event_bus'\nimport AbilityService from '@/shared/services/ability_service'\nimport Session from '@/shared/services/session'\nimport Records from '@/shared/services/records'\nimport openModal from '@/shared/helpers/open_modal'\nimport Flash from '@/shared/services/flash'\n\nexport default new class AttachmentService\n  actions: (attachment) ->\n    delete_attachment:\n      icon: 'mdi-delete'\n      name: 'common.action.delete'\n      canPerform: ->\n        attachment.isA('attachment') && AbilityService.canAdminister(attachment.group())\n      perform: ->\n        EventBus.$emit 'openModal',\n          component: 'ConfirmModal'\n          props:\n            confirm:\n              submit: attachment.destroy\n              text:\n                title: 'comment_form.attachments.remove_attachment'\n                helptext: 'group_files_panel.delete_confirmation'\n                submit: 'common.action.delete'\n                flash: 'poll_common_delete_modal.success'\n\n    delete_document:\n      icon: 'mdi-delete'\n      name: 'common.action.delete'\n      canPerform: ->\n        attachment.isA('document') && AbilityService.canAdminister(attachment.group())\n      perform: ->\n        EventBus.$emit 'openModal',\n          component: 'ConfirmModal'\n          props:\n            confirm:\n              submit: attachment.destroy\n              text:\n                title: 'comment_form.attachments.remove_attachment'\n                helptext: 'group_files_panel.delete_confirmation'\n                submit: 'common.action.delete'\n                flash: 'poll_common_delete_modal.success'\n"],"sourceRoot":""}]}