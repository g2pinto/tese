{"remainingRequest":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js!/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!/home/gustavo/Documents/tese/loomio/vue/src/components/profile/page.vue?vue&type=script&lang=coffee&","dependencies":[{"path":"/home/gustavo/Documents/tese/loomio/vue/src/components/profile/page.vue","mtime":1706724415804},{"path":"/home/gustavo/Documents/tese/loomio/vue/.babelrc","mtime":1706724415792},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/cache-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/babel-loader/lib/index.js","mtime":1706724500796},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/vue-cli-plugin-coffee/node_modules/coffee-loader/dist/cjs.js","mtime":1706724497848},{"path":"/home/gustavo/Documents/tese/loomio/vue/node_modules/@vue/vue-loader-v15/lib/index.js","mtime":1706724499784}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWJvdW5jZSBmcm9tICJsb2Rhc2gvZGVib3VuY2UiOwppbXBvcnQgX3VuaXEgZnJvbSAibG9kYXNoL3VuaXEiOwppbXBvcnQgX2luY2x1ZGVzIGZyb20gImxvZGFzaC9pbmNsdWRlcyI7CmltcG9ydCBBcHBDb25maWcgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvYXBwX2NvbmZpZyc7CmltcG9ydCBTZXNzaW9uIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL3Nlc3Npb24nOwppbXBvcnQgUmVjb3JkcyBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9yZWNvcmRzJzsKaW1wb3J0IEV2ZW50QnVzIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2V2ZW50X2J1cyc7CmltcG9ydCBBYmlsaXR5U2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9hYmlsaXR5X3NlcnZpY2UnOwppbXBvcnQgTG1vVXJsU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9sbW9fdXJsX3NlcnZpY2UnOwppbXBvcnQgb3Blbk1vZGFsIGZyb20gJ0Avc2hhcmVkL2hlbHBlcnMvb3Blbl9tb2RhbCc7CmltcG9ydCBVc2VyU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy91c2VyX3NlcnZpY2UnOwppbXBvcnQgRmxhc2ggZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvZmxhc2gnOwppbXBvcnQgeyBleGFjdCB9IGZyb20gJ0Avc2hhcmVkL2hlbHBlcnMvZm9ybWF0X3RpbWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogbnVsbCwKICAgICAgb3JpZ2luYWxVc2VyOiBudWxsLAogICAgICBleGlzdGluZ0VtYWlsczogW10sCiAgICAgIGN1cnJlbnRUaW1lOiBuZXcgRGF0ZSgpCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gKCkgewogICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50VGltZSA9IG5ldyBEYXRlKCk7CiAgICB9LCAxMDAwMCk7CiAgICB0aGlzLmluaXQoKTsKICAgIEV2ZW50QnVzLiRlbWl0KCdjdXJyZW50Q29tcG9uZW50JywgewogICAgICB0aXRsZUtleTogJ3Byb2ZpbGVfcGFnZS5lZGl0X3Byb2ZpbGUnLAogICAgICBwYWdlOiAncHJvZmlsZVBhZ2UnCiAgICB9KTsKICAgIEV2ZW50QnVzLiRvbigndXBkYXRlUHJvZmlsZScsIHRoaXMuaW5pdCk7CiAgICByZXR1cm4gRXZlbnRCdXMuJG9uKCdzaWduZWRJbicsIHRoaXMuaW5pdCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiAoKSB7CiAgICBFdmVudEJ1cy4kb2ZmKCd1cGRhdGVQcm9maWxlJywgdGhpcy5pbml0KTsKICAgIHJldHVybiBFdmVudEJ1cy4kb2ZmKCdzaWduZWRJbicsIHRoaXMuaW5pdCk7CiAgfSwKICBjb21wdXRlZDogewogICAgc2hvd0hlbHBUcmFuc2xhdGU6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIEFwcENvbmZpZy5mZWF0dXJlcy5hcHAuaGVscF9saW5rOwogICAgfSwKICAgIGF2YWlsYWJsZUxvY2FsZXM6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIEFwcENvbmZpZy5sb2NhbGVzOwogICAgfSwKICAgIGRhdGVUaW1lRm9ybWF0czogZnVuY3Rpb24gKCkgewogICAgICB2YXIgb2JzZXJ2ZUxvY2FsZTsKICAgICAgb2JzZXJ2ZUxvY2FsZSA9IHRoaXMudXNlci5zZWxlY3RlZExvY2FsZTsgLy8gdGVsbCB2dWUgdGhpcyBtYXR0ZXJzCgogICAgICByZXR1cm4gJ2lzbyBkYXlfaXNvIGFiYnIgZGF5X2FiYnInLnNwbGl0KCcgJykubWFwKHByZWYgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogcHJlZiwKICAgICAgICAgIHRleHQ6IGV4YWN0KHRoaXMuY3VycmVudFRpbWUsIHRoaXMudXNlci50aW1lWm9uZSwgcHJlZikKICAgICAgICB9OwogICAgICB9KTsKICAgIH0sCiAgICBhY3Rpb25zOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBVc2VyU2VydmljZS5hY3Rpb25zKFNlc3Npb24udXNlcigpLCB0aGlzKTsKICAgIH0sCiAgICBlbWFpbEV4aXN0czogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX2luY2x1ZGVzKHRoaXMuZXhpc3RpbmdFbWFpbHMsIHRoaXMudXNlci5lbWFpbCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghU2Vzc2lvbi5pc1NpZ25lZEluKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMub3JpZ2luYWxVc2VyID0gU2Vzc2lvbi51c2VyKCk7CiAgICAgIHRoaXMudXNlciA9IHRoaXMub3JpZ2luYWxVc2VyLmNsb25lKCk7CiAgICAgIHJldHVybiBTZXNzaW9uLnVwZGF0ZUxvY2FsZSh0aGlzLnVzZXIubG9jYWxlKTsKICAgIH0sCiAgICBjaGFuZ2VQaWN0dXJlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBvcGVuTW9kYWwoewogICAgICAgIGNvbXBvbmVudDogJ0NoYW5nZVBpY3R1cmVGb3JtJwogICAgICB9KTsKICAgIH0sCiAgICBjaGFuZ2VQYXNzd29yZDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5vcGVuQ2hhbmdlUGFzc3dvcmRNb2RhbCh0aGlzLnVzZXIpOwogICAgfSwKICAgIG9wZW5EZWxldGVVc2VyTW9kYWw6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNEZWxldGVVc2VyTW9kYWxPcGVuID0gdHJ1ZTsKICAgIH0sCiAgICBjbG9zZURlbGV0ZVVzZXJNb2RhbDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5pc0RlbGV0ZVVzZXJNb2RhbE9wZW4gPSBmYWxzZTsKICAgIH0sCiAgICBvcGVuU2VuZFZlcmlmaWNhdGlvbk1vZGFsOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBvcGVuTW9kYWwoewogICAgICAgIGNvbXBvbmVudDogJ0NvbmZpcm1Nb2RhbCcsCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIGNvbmZpcm06IHsKICAgICAgICAgICAgc3VibWl0OiAoKSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIFJlY29yZHMudXNlcnMuc2VuZE1lcmdlVmVyaWZpY2F0aW9uRW1haWwodGhpcy51c2VyLmVtYWlsKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGV4dDogewogICAgICAgICAgICAgIHRpdGxlOiAnbWVyZ2VfYWNjb3VudHMubW9kYWwudGl0bGUnLAogICAgICAgICAgICAgIHJhd19oZWxwdGV4dDogdGhpcy4kdCgnbWVyZ2VfYWNjb3VudHMubW9kYWwuaGVscHRleHQnLCB7CiAgICAgICAgICAgICAgICBzb3VyY2VFbWFpbDogdGhpcy5vcmlnaW5hbFVzZXIuZW1haWwsCiAgICAgICAgICAgICAgICB0YXJnZXRFbWFpbDogdGhpcy51c2VyLmVtYWlsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgc3VibWl0OiAnbWVyZ2VfYWNjb3VudHMubW9kYWwuc3VibWl0JywKICAgICAgICAgICAgICBmbGFzaDogJ21lcmdlX2FjY291bnRzLm1vZGFsLmZsYXNoJwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGVja0VtYWlsRXhpc3RlbmNlOiBfZGVib3VuY2UoZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5vcmlnaW5hbFVzZXIuZW1haWwgPT09IHRoaXMudXNlci5lbWFpbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmV0dXJuIFJlY29yZHMudXNlcnMuY2hlY2tFbWFpbEV4aXN0ZW5jZSh0aGlzLnVzZXIuZW1haWwpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmV4aXN0cykgewogICAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RpbmdFbWFpbHMgPSBfdW5pcSh0aGlzLmV4aXN0aW5nRW1haWxzLmNvbmNhdChbcmVzLmVtYWlsXSkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LCAyNTApLAogICAgc3VibWl0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBSZWNvcmRzLnVzZXJzLnVwZGF0ZVByb2ZpbGUodGhpcy51c2VyKS50aGVuKCgpID0+IHsKICAgICAgICBGbGFzaC5zdWNjZXNzKCdwcm9maWxlX3BhZ2UubWVzc2FnZXMudXBkYXRlZCcpOwogICAgICAgIHJldHVybiB0aGlzLmluaXQoKTsKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/gustavo/Documents/tese/loomio/vue/src/components/profile/page.vue"],"names":[],"mappings":"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","sourcesContent":["\nimport AppConfig      from '@/shared/services/app_config'\nimport Session        from '@/shared/services/session'\nimport Records        from '@/shared/services/records'\nimport EventBus       from '@/shared/services/event_bus'\nimport AbilityService from '@/shared/services/ability_service'\nimport LmoUrlService  from '@/shared/services/lmo_url_service'\nimport openModal      from '@/shared/helpers/open_modal'\nimport UserService    from '@/shared/services/user_service'\nimport Flash   from '@/shared/services/flash'\nimport { includes, uniq, debounce } from 'lodash'\nimport {exact} from '@/shared/helpers/format_time'\n\nexport default\n  data: ->\n    user: null\n    originalUser: null\n    existingEmails: []\n    currentTime: new Date()\n\n  created: ->\n    setInterval((=> @currentTime = new Date()), 10000)\n    @init()\n    EventBus.$emit 'currentComponent', { titleKey: 'profile_page.edit_profile', page: 'profilePage'}\n    EventBus.$on 'updateProfile', @init\n    EventBus.$on 'signedIn', @init\n\n  beforeDestroy: ->\n    EventBus.$off 'updateProfile', @init\n    EventBus.$off 'signedIn', @init\n\n  computed:\n    showHelpTranslate: -> AppConfig.features.app.help_link\n    availableLocales: -> AppConfig.locales\n    dateTimeFormats: ->\n      observeLocale = @user.selectedLocale # tell vue this matters\n      'iso day_iso abbr day_abbr'.split(' ').map (pref) =>\n        {value: pref, text: exact(@currentTime, @user.timeZone, pref)}\n    actions: -> UserService.actions(Session.user(), @)\n    emailExists: -> includes(@existingEmails, @user.email)\n\n  methods:\n    init: ->\n      return unless Session.isSignedIn()\n      @originalUser = Session.user()\n      @user = @originalUser.clone()\n      Session.updateLocale(@user.locale)\n\n    changePicture: ->\n      openModal\n        component: 'ChangePictureForm'\n\n    changePassword: ->\n      @openChangePasswordModal(@user)\n\n    openDeleteUserModal: ->\n      @isDeleteUserModalOpen = true\n\n    closeDeleteUserModal: ->\n      @isDeleteUserModalOpen = false\n\n    openSendVerificationModal: ->\n      openModal\n        component: 'ConfirmModal'\n        props:\n          confirm:\n            submit: => Records.users.sendMergeVerificationEmail(@user.email)\n            text:\n              title:    'merge_accounts.modal.title'\n              raw_helptext: @$t('merge_accounts.modal.helptext', sourceEmail: @originalUser.email, targetEmail: @user.email)\n              submit:   'merge_accounts.modal.submit'\n              flash:    'merge_accounts.modal.flash'\n\n    checkEmailExistence: debounce ->\n      return if @originalUser.email == @user.email\n      Records.users.checkEmailExistence(@user.email).then (res) =>\n        if res.exists\n          @existingEmails = uniq(@existingEmails.concat([res.email]))\n    , 250\n\n    submit: ->\n      Records.users.updateProfile(@user)\n      .then =>\n        Flash.success 'profile_page.messages.updated'\n        @init()\n      .catch => true\n\n"],"sourceRoot":""}]}