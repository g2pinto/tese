{"ast":null,"code":"import { Node, nodeInputRule, mergeAttributes } from '@tiptap/core';\nexport const inputRegex = /!\\[(.+|:?)]\\((\\S+)(?:(?:\\s+)[\"'](\\S+)[\"'])?\\)/;\nexport const Iframe = Node.create({\n  name: 'iframe',\n  group: 'block',\n  selectable: false,\n  addOptions() {\n    return {\n      HTMLAttributes: {}\n    };\n  },\n  addAttributes() {\n    return {\n      src: {\n        default: null\n      },\n      allowfullscreen: {\n        default: true\n      }\n    };\n  },\n  parseHTML() {\n    return [{\n      tag: 'iframe[src]'\n    }];\n  },\n  renderHTML({\n    HTMLAttributes\n  }) {\n    return ['div', {\n      'data-iframe-container': '1'\n    }, ['iframe', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)]];\n  },\n  renderText({\n    node\n  }) {\n    return node.attrs.src;\n  },\n  addCommands() {\n    return {\n      setIframe: options => ({\n        tr,\n        dispatch\n      }) => {\n        const {\n          selection\n        } = tr;\n        const node = this.type.create(options);\n        if (dispatch) {\n          tr.replaceRangeWith(selection.from, selection.to, node);\n        }\n        return true;\n      }\n    };\n  },\n  addInputRules() {\n    return [nodeInputRule({\n      find: inputRegex,\n      type: this.type,\n      getAttributes: match => {\n        const [, src] = match;\n        return {\n          src\n        };\n      }\n    })];\n  }\n});","map":{"version":3,"names":["Node","nodeInputRule","mergeAttributes","inputRegex","Iframe","create","name","group","selectable","addOptions","HTMLAttributes","addAttributes","src","default","allowfullscreen","parseHTML","tag","renderHTML","options","renderText","node","attrs","addCommands","setIframe","tr","dispatch","selection","type","replaceRangeWith","from","to","addInputRules","find","getAttributes","match"],"sources":["/home/gustavo/Documents/tese/loomio/vue/src/components/lmo_textarea/extension_iframe.js"],"sourcesContent":["import {\n  Node,\n  nodeInputRule,\n  mergeAttributes,\n} from '@tiptap/core'\n\nexport const inputRegex = /!\\[(.+|:?)]\\((\\S+)(?:(?:\\s+)[\"'](\\S+)[\"'])?\\)/\n\nexport const Iframe = Node.create({\n  name: 'iframe',\n  group: 'block',\n  selectable: false,\n\n  addOptions() {\n    return {\n      HTMLAttributes: {}\n    }\n  },\n\n  addAttributes() {\n    return {\n      src: {\n        default: null,\n      },\n      allowfullscreen: {\n        default: true\n      }\n    }\n  },\n\n  parseHTML() {\n    return [\n      { tag: 'iframe[src]' },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['div', {'data-iframe-container': '1'}, ['iframe', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)]]\n  },\n\n  renderText({ node }) {\n    return node.attrs.src\n  },\n\n  addCommands() {\n    return {\n      setIframe: options => ({ tr, dispatch }) => {\n        const { selection } = tr\n        const node = this.type.create(options)\n\n        if (dispatch) {\n          tr.replaceRangeWith(selection.from, selection.to, node)\n        }\n\n        return true\n      },\n    }\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: inputRegex,\n        type: this.type,\n        getAttributes: match => {\n          const [, src] = match\n          return { src }\n        }\n      }),\n    ]\n  },\n});\n"],"mappings":"AAAA,SACEA,IAAI,EACJC,aAAa,EACbC,eAAe,QACV,cAAc;AAErB,OAAO,MAAMC,UAAU,GAAG,+CAA+C;AAEzE,OAAO,MAAMC,MAAM,GAAGJ,IAAI,CAACK,MAAM,CAAC;EAChCC,IAAI,EAAE,QAAQ;EACdC,KAAK,EAAE,OAAO;EACdC,UAAU,EAAE,KAAK;EAEjBC,UAAUA,CAAA,EAAG;IACX,OAAO;MACLC,cAAc,EAAE,CAAC;IACnB,CAAC;EACH,CAAC;EAEDC,aAAaA,CAAA,EAAG;IACd,OAAO;MACLC,GAAG,EAAE;QACHC,OAAO,EAAE;MACX,CAAC;MACDC,eAAe,EAAE;QACfD,OAAO,EAAE;MACX;IACF,CAAC;EACH,CAAC;EAEDE,SAASA,CAAA,EAAG;IACV,OAAO,CACL;MAAEC,GAAG,EAAE;IAAc,CAAC,CACvB;EACH,CAAC;EAEDC,UAAUA,CAAC;IAAEP;EAAe,CAAC,EAAE;IAC7B,OAAO,CAAC,KAAK,EAAE;MAAC,uBAAuB,EAAE;IAAG,CAAC,EAAE,CAAC,QAAQ,EAAER,eAAe,CAAC,IAAI,CAACgB,OAAO,CAACR,cAAc,EAAEA,cAAc,CAAC,CAAC,CAAC;EAC1H,CAAC;EAEDS,UAAUA,CAAC;IAAEC;EAAK,CAAC,EAAE;IACnB,OAAOA,IAAI,CAACC,KAAK,CAACT,GAAG;EACvB,CAAC;EAEDU,WAAWA,CAAA,EAAG;IACZ,OAAO;MACLC,SAAS,EAAEL,OAAO,IAAI,CAAC;QAAEM,EAAE;QAAEC;MAAS,CAAC,KAAK;QAC1C,MAAM;UAAEC;QAAU,CAAC,GAAGF,EAAE;QACxB,MAAMJ,IAAI,GAAG,IAAI,CAACO,IAAI,CAACtB,MAAM,CAACa,OAAO,CAAC;QAEtC,IAAIO,QAAQ,EAAE;UACZD,EAAE,CAACI,gBAAgB,CAACF,SAAS,CAACG,IAAI,EAAEH,SAAS,CAACI,EAAE,EAAEV,IAAI,CAAC;QACzD;QAEA,OAAO,IAAI;MACb;IACF,CAAC;EACH,CAAC;EAEDW,aAAaA,CAAA,EAAG;IACd,OAAO,CACL9B,aAAa,CAAC;MACZ+B,IAAI,EAAE7B,UAAU;MAChBwB,IAAI,EAAE,IAAI,CAACA,IAAI;MACfM,aAAa,EAAEC,KAAK,IAAI;QACtB,MAAM,GAAGtB,GAAG,CAAC,GAAGsB,KAAK;QACrB,OAAO;UAAEtB;QAAI,CAAC;MAChB;IACF,CAAC,CAAC,CACH;EACH;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}