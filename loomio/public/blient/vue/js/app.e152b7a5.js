(function(){var e={725:function(e,t,o){var s={"./client.an.yml":[58628,58628],"./client.ar.yml":[53561,53561],"./client.be_BY.yml":[84165,84165],"./client.bg_BG.yml":[58113,58113],"./client.br.yml":[6222,6222],"./client.ca.yml":[31976,31976],"./client.cmn.yml":[9430,9430],"./client.cs.yml":[37284,37284],"./client.da.yml":[89717,89717],"./client.de.yml":[80385,80385],"./client.el.yml":[16078,16078],"./client.en.yml":[73491],"./client.eo.yml":[14301,14301],"./client.es.yml":[31959,31959],"./client.fa_IR.yml":[46946,46946],"./client.fi.yml":[54914,54914],"./client.fr.yml":[13062,13062],"./client.ga_IE.yml":[523,523],"./client.gl.yml":[57238,57238],"./client.he.yml":[59893,59893],"./client.hr.yml":[72449,72449],"./client.hu.yml":[43373,43373],"./client.id.yml":[6737,6737],"./client.it.yml":[20371,20371],"./client.ja.yml":[29750,29750],"./client.km.yml":[97004,97004],"./client.ko.yml":[1634,1634],"./client.lt.yml":[85459,85459],"./client.mi.yml":[72561,72561],"./client.mk.yml":[22952,22952],"./client.nb_NO.yml":[75509,75509],"./client.nl_NL.yml":[74890,74890],"./client.pl.yml":[31398,31398],"./client.pt_BR.yml":[48867,48867],"./client.pt_PT.yml":[3501,3501],"./client.ro.yml":[52016,52016],"./client.ru.yml":[88624,88624],"./client.sk.yml":[28039,28039],"./client.sl.yml":[49810,49810],"./client.sr.yml":[40601,40601],"./client.sv.yml":[74212,74212],"./client.te.yml":[14812,14812],"./client.tr.yml":[77973,77973],"./client.uk.yml":[68310,68310],"./client.ur_PK.yml":[89618,89618],"./client.vi.yml":[91699,91699],"./client.zh_TW.yml":[98036,98036]};function n(e){if(!o.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return Promise.all(t.slice(1).map(o.e)).then((function(){return o.t(n,23)}))}n.keys=function(){return Object.keys(s)},n.id=725,e.exports=n},44132:function(){"serviceWorker"in navigator&&(navigator.serviceWorker.getRegistrations().then((function(e){for(let t of e)t.unregister()})),caches.keys().then((function(e){e.forEach((function(e){caches.delete(e)}))})))},63787:function(e,t,o){"use strict";var s=o(20144);window.Loomio=s.ZP.prototype.$loomio=s.ZP.observable({});var n,i=window.Loomio,r=o(45533),a=function(){class e{constructor({name:e,recordStore:t,collections:o,query:s}){this.name=e,this.recordStore=t,this.collectionNames=o,this.query=s,this.query(this.recordStore)}}return e.prototype.collectionNames=[],e.prototype.name="unnamedView",e}.call(void 0),l=o(96486),c=function(e){return(0,l.map)((0,l.keys)(e),(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")};n=function(){var e;return decodeURIComponent((null!=(e=document.cookie.match("(^|;)\\s*csrftoken\\s*=\\s*([^;]+)"))?e.pop():void 0)||"")};var u,d,p=function(){class e{onPrepare(e){return e}onCleanup(e){return e}onResponse(e){return e.ok?e.json().then(this.onSuccess):this.onFailure(e)}onSuccess(e){return e}onFailure(e){if(e.json)return e.json().then((function(t){throw t.status=e.status,t.statusText=e.statusText,t.ok=e.ok,t}));throw e}onUploadSuccess(e){return e}constructor(e=null){this.onResponse=this.onResponse.bind(this),this.defaultParams.unsubscribe_token=new URLSearchParams(location.search).get("unsubscribe_token"),this.defaultParams.membership_token=new URLSearchParams(location.search).get("membership_token"),this.defaultParams.stance_token=new URLSearchParams(location.search).get("stance_token"),this.defaultParams.discussion_reader_token=new URLSearchParams(location.search).get("discussion_reader_token"),this.defaultParams=(0,l.omitBy)(this.defaultParams,l.isNil),this.processing=[],e&&(this.resourcePlural=(0,l.snakeCase)(e))}buildUrl(e,t){return e=(0,l.compact)([this.apiPrefix,this.resourcePlural,e]).join("/"),null==t?e:e+"?"+c(t)}memberPath(e,t){return(0,l.compact)([e,t]).join("/")}fetchById(e,t={}){return this.getMember(e,"",t)}fetch({params:e,path:t}){return this.get(t||"",e)}post(e,t){return this.request(this.buildUrl(e),"POST",this.paramsFor(t))}patch(e,t){return this.request(this.buildUrl(e),"PATCH",this.paramsFor(t))}delete(e,t){return this.request(this.buildUrl(e),"DELETE",this.paramsFor(t))}get(e,t){return this.request(this.buildUrl(e,this.paramsFor(t)),"GET")}request(e,t,o={}){var s;return s={method:t,credentials:"same-origin",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n()},body:JSON.stringify(o)},"GET"===t&&delete s.body,this.onPrepare(),fetch(e,s).then(this.onResponse,this.onFailure).finally(this.onCleanup)}postMember(e,t,o){return this.post(this.memberPath(e,t),o)}patchMember(e,t,o){return this.patch(this.memberPath(e,t),o)}getMember(e,t="",o){return this.get(this.memberPath(e,t),o)}create(e){return this.post("",e)}update(e,t){return this.patch(e,t)}destroy(e,t){return this.delete(e,t)}discard(e,t){return this.delete(e+"/discard",t)}undiscard(e,t){return this.post(e+"/undiscard",t)}upload(e,t,o={},s){if(t)return new Promise(((i,r)=>{var a;return a=new FormData,a.append(o.fileField||"file",t),a.append(o.filenameField||"filename",t.name.replace(/[^a-z0-9_\-\.]/gi,"_")),this.currentUpload=new XMLHttpRequest,this.currentUpload.open("POST",this.buildUrl(e),!0),this.currentUpload.setRequestHeader("X-CSRF-TOKEN",n()),this.currentUpload.responseType="json",this.currentUpload.addEventListener("load",(()=>{if(this.currentUpload.status>=200&&this.currentUpload.status<300)return(0,l.isString)(this.currentUpload.response)&&(this.currentUpload.response=JSON.parse(this.currentUpload.response)),this.onUploadSuccess(this.currentUpload.response),i(this.currentUpload.response),this.currentUpload=null})),s&&this.currentUpload.upload.addEventListener("progress",s),this.currentUpload.addEventListener("error",r),this.currentUpload.addEventListener("abort",r),this.currentUpload.send(a)}))}abort(){if(this.currentUpload)return this.currentUpload.abort()}paramsFor(e){return(0,l.defaults)({},this.defaultParams,(0,l.pickBy)(e,(function(e){return!(0,l.isNil)(e)})))}}return e.prototype.defaultParams={},e.prototype.currentUpload=null,e.prototype.apiPrefix="/api/v1",e}.call(void 0),m=o(23855);d=function(e,t){var o;return o={},(0,l.each)((0,l.keys)(e),(function(s){return o[t(s)]=e[s],!0})),o},u=function(e){return/At$/.test(e)};var h=new class{deserialize(e){var t,o;return o={},t=d(e,l.camelCase),(0,l.each)((0,l.keys)(t),(e=>(0,l.isArray)(t[e])?o[e]=(0,l.map)(t[e],this.parseJSON):o[e]=t[e])),o}parseJSON(e){var t;return t=d(e,l.camelCase),(0,l.each)((0,l.keys)(t),(function(e){return null!=t[e]&&(u(e)?t[e]=(0,m.Z)(t[e]):t[e]=t[e]),!0})),t}isTimeAttribute(e){return u(e)}},_=function(){class e{constructor(e){this.db=e,this.collectionNames=[],this.views={},this.remote=new p,this.remote.onSuccess=e=>(this.importJSON(e),e)}fetch(e){return this.remote.fetch(e)}post({path:e,params:t}){return this.remote.post(e,t)}addRecordsInterface(e){var t,o;return o=new e(this),t=(0,l.camelCase)(o.model.plural),this[t]=o,this.collectionNames.push(t)}importJSON(e){var t;return t=(0,l.pick)(e,(0,l.map)(this.collectionNames,l.snakeCase).concat(["parent_groups","parent_events"])),this.importREADY(h.deserialize(t))}importREADY(e){return(0,l.isEmpty)(e)?[]:(null!=e["parentGroups"]&&(0,l.each)(e["parentGroups"],(e=>(this.groups.importRecord(e),!0))),null!=e["parentEvents"]&&(0,l.each)(e["parentEvents"],(e=>(this.events.importRecord(e),!0))),(0,l.each)(this.collectionNames,(t=>{if(null!=e[t])return(0,l.each)(e[t],(e=>(this[t].importRecord(e),!0)))})),(0,l.each)(this.views,(t=>((0,l.intersection)((0,l.map)(t.collectionNames,l.camelCase),(0,l.map)((0,l.keys)(e),l.camelCase))&&t.query(this),!0))),e)}view({name:e,collections:t,query:o}){return this.views[e]||(this.views[e]=new a({name:e,recordStore:this,collections:t,query:o})),this.views[e].query(this),this.views[e]}}return e.prototype.eventTypeMap={Group:"groups",Discussion:"discussions",Poll:"polls",Outcome:"outcomes",Stance:"stances",Comment:"comments",CommentVote:"comments",Membership:"memberships",MembershipRequest:"membershipRequests"},e}.call(void 0),f=o(3050),g=o.n(f),v=function(e,t){return e==t?0:e<t?-1:1};g().Comparators.aeq=function(e,t){return 0===v(e,t)},g().Comparators.lt=function(e,t,o){var s=v(e,t);switch(s){case-1:return!0;case 0:return o;case 1:return!1}},g().Comparators.gt=function(e,t,o){var s=v(e,t);switch(s){case-1:return!1;case 0:return o;case 1:return!0}};var b,y=g(),w=function(){class e{addMissing(e){return this.missingIds.push(e),this.fetchMissing()}fetchAnyMissingById(e){var t;return t=this.collection.chain().find({id:{$in:e}}).data().map((function(e){return e.id})),this.missingIds=(0,l.uniq)(this.missingIds.concat((0,l.difference)(e,t))),this.fetchMissing()}nullModel(){return null}constructor(e){this.baseConstructor(e)}baseConstructor(e){return this.recordStore=e,this.collection=this.recordStore.db.addCollection(this.collectionName||this.model.plural,{indices:this.model.indices}),(0,l.each)(this.model.uniqueIndices,(e=>this.collection.ensureUniqueIndex(e))),this.remote=new p(this.apiEndPoint||this.model.plural),this.remote.onSuccess=e=>(this.recordStore.importJSON(e),e),this.remote.onUploadSuccess=e=>(this.recordStore.importJSON(e),e)}all(){return this.collection.data}build(e={}){var t;return t=new this.model(this,e),s.ZP.observable(t)}create(e={}){var t;return t=this.build(e),this.collection.insert(t),t}fetch(e){return this.remote.fetch(e)}importRecord(e){var t;return null!=e.key&&(t=this.find(e.key)),null!=e.id&&null==t&&(t=this.find(e.id)),t?t.update(e):t=this.create(e),t}findOrFetchById(e,t={}){var o;return o=this.find(e),o?(this.remote.fetchById(e,t),Promise.resolve(o)):this.remote.fetchById(e,t).then((t=>this.find(e)))}find(e){var t;if(null!==e&&void 0!==e)return(0,l.isNumber)(e)?this.findById(e):(0,l.isString)(e)?this.findByKey(e):(0,l.isArray)(e)?0===e.length?[]:(0,l.isString)(e[0])?this.findByKeys(e):(0,l.isNumber)(e[0])?this.findByIds(e):void 0:(t=this.collection.chain(),(0,l.each)((0,l.keys)(e),(function(o){return t.find({[`${o}`]:e[o]}),!0})),t.data())}findOrNull(e){var t;return t=this.find(e),(0,l.isArray)(t)&&0===t.length?null:t}findById(e){return this.collection.by("id",e)}findByKey(e){return null!=this.collection.constraints.unique["key"]?this.collection.by("key",e):this.collection.findOne({key:e})}findByIds(e){return this.collection.find({id:{$in:e}})}findByKeys(e){return this.collection.find({key:{$in:e}})}}return e.prototype.views=[],e.prototype.model="undefinedModel",e.prototype.missingIds=[],e.prototype.fetchedIds=[],e.prototype.fetchMissing=(0,l.debounce)((function(){var e;if(e=(0,l.difference)(this.missingIds,this.fetchedIds).join("x"),0!==e.length)return this.fetch({path:"",params:{xids:e}}),this.fetchedIds=(0,l.uniq)(this.fetchedIds.concat(this.missingIds)),this.missingIds=[]}),500),e.prototype.apiEndPoint=null,e}.call(void 0),x=o(96843),k=function(){class e{constructor(e,t={}){this.inCollection=this.inCollection.bind(this),this.remove=this.remove.bind(this),this.destroy=this.destroy.bind(this),this.beforeDestroy=this.beforeDestroy.bind(this),this.beforeRemove=this.beforeRemove.bind(this),this.discard=this.discard.bind(this),this.undiscard=this.undiscard.bind(this),this.save=this.save.bind(this),this.saveSuccess=this.saveSuccess.bind(this),this.saveError=this.saveError.bind(this),this.processing=!1,this._version=0,this.attributeNames=[],this.unmodified={},this.afterUpdateFns=[],this.saveDisabled=!1,this.saveFailed=!1,this.setErrors(),Object.defineProperty(this,"recordsInterface",{value:e,enumerable:!1}),Object.defineProperty(this,"recordStore",{value:e.recordStore,enumerable:!1}),Object.defineProperty(this,"remote",{value:e.remote,enumerable:!1}),null!=this.relationships&&this.buildRelationships(),this.update(this.defaultValues()),this.update(t),this.afterConstruction()}bumpVersion(){return this._version=this._version+1}afterConstruction(){}defaultValues(){return{}}clone(){var e;return e={},(0,l.each)(this.attributeNames,(t=>((0,l.isArray)(this[t])?e[t]=this[t].slice(0):e[t]=this[t],!0))),new this.constructor(this.recordsInterface,e)}inCollection(){return this["$loki"]}update(e){return this.baseUpdate(e)}afterUpdate(e){return this.afterUpdateFns.push(e)}baseUpdate(e){return this.bumpVersion(),this.attributeNames=(0,l.union)(this.attributeNames,(0,l.keys)(e)),(0,l.each)(e,((e,t)=>(this.unmodified[t]=e,s.ZP.set(this,t,e),!0))),this.inCollection()&&this.recordsInterface.collection.update(this),this.afterUpdateFns.forEach((e=>e(this)))}attributeIsModified(e){var t,o;return o=this.unmodified[e],t=this[e],h.isTimeAttribute(e)?!(o===t||(0,x.Z)(o,t)):o!==t&&null!==o&&""!==t}modifiedAttributes(){return(0,l.filter)(this.attributeNames,(e=>this.attributeIsModified(e)))}isModified(){return this.modifiedAttributes().length>0}serialize(){return this.baseSerialize()}baseSerialize(){var e,t,o;return o={},e={},t=(0,l.snakeCase)(this.constructor.serializationRoot||this.constructor.singular),this._destroy&&(e._destroy=this._destroy),(0,l.each)(this.constructor.serializableAttributes||this.attributeNames,(t=>{var o,s;return s=(0,l.snakeCase)(t),o=(0,l.camelCase)(t),h.isTimeAttribute(o)&&this[o]?e[s]=this[o].toISOString():e[s]=this[o],!0})),o[t]=e,o}relationships(){}buildRelationships(){return this.views={},this.relationships()}hasMany(e,t={}){var o;return o=(0,l.defaults)(t,{from:e,with:this.constructor.singular+"Id",of:"id",find:{}}),this[e]=()=>{var e;return e=Object.assign({},{[`${o.with}`]:this[o.of]},o.find),t.orderBy?(0,l.orderBy)(this.recordStore[o.from].find(e),t.orderBy):this.recordStore[o.from].find(e)}}belongsTo(e,t){var o,s;return s={from:e+"s",by:e+"Id"},o=(0,l.assign)(s,t),this[e]=()=>{var e;if(this[o.by]){if(e=this.recordStore[o.from].find(this[o.by]))return e;if(this.constructor.lazyLoad)return e=this.recordStore[o.from].create({id:this[o.by]}),this.recordStore[o.from].addMissing(this[o.by]),e}return this.recordStore[o.from].nullModel()},this[e+"Is"]=e=>this.recordStore[o.from].find(this[o.by])===e}belongsToPolymorphic(e){var t;return t={Group:"groups",Discussion:"discussions",Poll:"polls",Outcome:"outcomes",Stance:"stances",Comment:"comments",CommentVote:"comments",Membership:"memberships",MembershipRequest:"membershipRequests"},this[e]=()=>{var o,s;return s=`${e}Type`,o=`${e}Id`,this.recordStore[t[this[s]]].find(this[o])}}translationOptions(){}isA(...e){return(0,l.includes)(e,this.constructor.singular)}namedId(){return{[`${this.constructor.singular}_id`]:this.id}}bestNamedId(){return this.namedId()}isNew(){return null==this.id}keyOrId(){return null!=this.key?this.key:this.id}remove(){if(this.beforeRemove(),this.inCollection())return this.recordsInterface.collection.remove(this)}destroy(){return this.processing=!0,this.beforeDestroy(),this.remove(),this.remote.destroy(this.keyOrId()).finally((()=>this.processing=!1))}beforeDestroy(){}beforeRemove(){}discard(){return this.processing=!0,this.remote.discard(this.keyOrId()).finally((()=>this.processing=!1))}undiscard(){return this.processing=!0,this.remote.undiscard(this.keyOrId()).finally((()=>this.processing=!1))}beforeSave(){return!0}save(){return this.processing=!0,this.beforeSave(),this.beforeSaves.forEach((e=>e())),this.isNew()?this.remote.create(this.serialize()).then(this.saveSuccess,this.saveError).finally((()=>this.processing=!1)):this.remote.update(this.keyOrId(),this.serialize()).then(this.saveSuccess,this.saveError).finally((()=>this.processing=!1))}saveSuccess(e){return this.saveFailed=!1,this.unmodified=(0,l.pick)(this,this.attributeNames),e}saveError(e){throw this.saveFailed=!0,this.setErrors(e.errors),e}discardChanges(){return this.attributeNames.forEach((e=>s.ZP.set(this,e,this.unmodified[e])))}setErrors(e=[]){return s.ZP.set(this,"errors",{}),(0,l.each)(e,((e,t)=>s.ZP.set(this.errors,(0,l.camelCase)(t),e)))}isValid(){return this.errors.length>0}edited(){return this.versionsCount>1}}return e.singular="undefinedSingular",e.plural="undefinedPlural",e.uniqueIndices=["id"],e.indices=[],e.searchableFields=[],e.serializableAttributes=null,e.serializationRoot=null,e.prototype.beforeSaves=[],e}.call(void 0),C=new class{apply(e,t={}){return e.newDocumentIds=e.newDocumentIds||[],e.removedDocumentIds=e.removedDocumentIds||[],e.documents=function(){return e.recordStore.documents.find({modelId:e.id,modelType:(0,l.capitalize)(e.constructor.singular)})},e.newDocuments=function(){return e.recordStore.documents.find(e.newDocumentIds)},e.newAndPersistedDocuments=function(){return(0,l.uniq)((0,l.filter)((0,l.union)(e.documents(),e.newDocuments()),(function(t){return!(0,l.includes)(e.removedDocumentIds,t.id)})))},e.hasDocuments=function(){return e.newAndPersistedDocuments().length>0},e.serialize=function(){var t,o;return t=this.baseSerialize(),o=e.constructor.serializationRoot||e.constructor.singular,t[o].document_ids=(0,l.map)(e.newAndPersistedDocuments(),"id"),t},e.showDocumentTitle=t.showTitle,e.documentsApplied=!0}},Z=new class{apply(e){return e.translate=function(t){return e.recordStore.translations.fetchTranslation(e,t).then((function(t){return e.translation=t.translations[0].fields}))},e.translation={}}},I=function(){class e extends k{afterConstruction(){return C.apply(this),Z.apply(this)}defaultValues(){return{discussionId:null,files:[],imageFiles:[],attachments:[],linkPreviews:[],body:"",bodyFormat:"html",mentionedUsernames:[]}}relationships(){return this.belongsTo("author",{from:"users"}),this.belongsTo("discussion")}createdEvent(){return this.recordStore.events.find({kind:"new_comment",eventableId:this.id})[0]}reactions(){return this.recordStore.reactions.find({reactableId:this.id,reactableType:(0,l.capitalize)(this.constructor.singular)})}group(){return this.discussion().group()}memberIds(){return this.discussion().memberIds()}participantIds(){return this.discussion().participantIds()}isReply(){return null!=this.parentId}isBlank(){return""===this.body||null===this.body||"<p></p>"===this.body}parent(){return this.recordStore[this.recordStore.eventTypeMap[this.parentType]].find(this.parentId)}reactors(){return this.recordStore.users.find((0,l.map)(this.reactions(),"userId"))}authorName(){if(this.author())return this.author().nameWithTitle(this.discussion().group())}authorUsername(){return this.author().username}authorAvatar(){return this.author().avatarOrInitials()}beforeDestroy(){return(0,l.invokeMap)(this.recordStore.events.find({kind:"new_comment",eventableId:this.id}),"remove")}}return e.singular="comment",e.plural="comments",e.indices=["discussionId","authorId"],e.uniqueIndices=["id"],e}.call(void 0),A=function(){class e extends w{}return e.prototype.model=I,e}.call(void 0),$=function(){class e extends k{defaultValues(){return{groupId:null,name:null,server:null,accessToken:null,eventKinds:[],kind:null,webhookKind:null,errors:{},notificationOnly:!1}}relationships(){return this.belongsTo("group")}}return e.singular="chatbot",e.plural="chatbots",e}.call(void 0),S=function(){class e extends w{}return e.prototype.model=$,e}.call(void 0),N=new class{parse(e){return(0,l.map)(e.split(","),(function(e){return(0,l.map)(e.split("-"),(function(e){return parseInt(e)}))}))}serialize(e){return(0,l.map)(e,(function(e){return e.join("-")})).join(",")}reduce(e){var t;return e=(0,l.sortBy)(e,(function(e){return e[0]})),t=(0,l.compact)([e.shift()]),(0,l.each)(e,(function(e){var o;return o=(0,l.last)(t),o[1]>=e[0]-1?(t.pop(),t.push([o[0],(0,l.max)([e[1],o[1]])])):t.push(e)})),t}length(e){return(0,l.sum)((0,l.map)(e,(function(e){return e[1]-e[0]+1})))}arrayToRanges(e){return this.reduce(e.map((function(e){return[e,e]})))}intersectRanges(e,t){return this.arrayToRanges(this.rangesToArray(e).filter((e=>this.includesValue(t,e))))}rangesToArray(e){var t;return t=[],e.forEach((e=>t=t.concat(this.rangeToArray(e[0],e[1],1)))),t}rangeToArray(e,t,o){return Array.from({length:(t-e)/o+1},(function(t,s){return e+s*o}))}overlaps(e,t){var o;return o=(0,l.sortBy)([e,t],(function(e){return e[0]})),o[0][1]>=o[1][0]}includesValue(e,t){return(0,l.some)(e,(function(e){return(0,l.inRange)(t,e[0],e[1]+1)}))}subtractRange(e,t){return 0===t.length||t[0]>e[1]||t[1]<e[0]?[e]:t[0]<=e[0]&&t[1]>=e[1]?[]:t[0]>e[0]&&t[1]<e[1]?[[e[0],t[0]-1],[t[1]+1,e[1]]]:t[0]===e[0]&&t[1]<e[1]?[[t[1]+1,e[1]]]:t[0]>e[0]&&t[1]===e[1]?[[e[0],t[0]-1]]:void 0}subtractRanges(e,t){return e=this.reduce(e),t=this.reduce(t),t.forEach((t=>{var o;return o=[],e.forEach((e=>o=o.concat(this.subtractRange(e,t)))),e=this.reduce(o)})),e}selfTest(){return{length1:1===this.length([[1,1]]),length2:2===this.length([[1,2]]),serialize:"1-2,4-5"===this.serialize([[1,2],[4,5]]),parse:(0,l.isEqual)(this.parse("1-2,4-5"),[[1,2],[4,5]]),reduceSimple:(0,l.isEqual)(this.reduce([[1,1]]),[[1,1]]),reduceMerge:(0,l.isEqual)(this.reduce([[1,2],[3,4]]),[[1,4]]),reduceEmpty:(0,l.isEqual)(this.reduce([]),[]),subtractWhole:(0,l.isEqual)(this.subtractRange([1,1],[1,1]),[]),subtractNone:(0,l.isEqual)(this.subtractRange([1,1],[2,2]),[[1,1]]),subtractLeft:(0,l.isEqual)(this.subtractRange([1,2],[1,1]),[[2,2]]),subtractRight:(0,l.isEqual)(this.subtractRange([1,2],[2,2]),[[1,1]]),subtractMiddle:(0,l.isEqual)(this.subtractRange([1,3],[2,2]),[[1,1],[3,3]]),overlapsNone:!1===this.overlaps([1,2],[3,4]),overlapsPart:!0===this.overlaps([1,2],[2,3]),overlapsWhole:!0===this.overlaps([1,2],[1,2]),subtractRanges1:(0,l.isEqual)(this.subtractRanges([[1,1]],[[1,1]]),[]),subtractRanges2:(0,l.isEqual)(this.subtractRanges([[1,2]],[[1,1]]),[[2,2]]),subtractRanges3:(0,l.isEqual)(this.subtractRanges([[1,2],[4,6]],[[1,1],[5,5]]),[[2,2],[4,4],[6,6]]),subtractRanges4:(0,l.isEqual)(this.subtractRanges([[1,2],[4,8]],[[5,6],[7,8]]),[[1,2],[4,4]])}}hardTest(){return{subtractRanges5:(0,l.isEqual)(this.subtractRanges)}}},T=o(42699),j=o(17152),P=o(73491);s.ZP.use(j.Z),b=new j.Z({locale:"en",fallbackLocale:"en",messages:{en:P.en},silentTranslationWarn:!0}),s.ZP.prototype.$lt=function(e){var t,o;return"string"===typeof e?this.$t(e):(o=e.path,e.locale,t=e.args,e.choice,this.$t(o,t))};var O,R,q,M=b,E=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},L=function(){class e extends k{constructor(){super(...arguments),this.privateDefaultValue=this.privateDefaultValue.bind(this),this.saveVolume=this.saveVolume.bind(this),this.move=this.move.bind(this),this.savePin=this.savePin.bind(this),this.saveUnpin=this.saveUnpin.bind(this),this.close=this.close.bind(this),this.reopen=this.reopen.bind(this),this.fork=this.fork.bind(this),this.moveComments=this.moveComments.bind(this)}afterConstruction(){return this.isNew()&&(this.private=this.privateDefaultValue()),C.apply(this,{showTitle:!0}),Z.apply(this)}defaultValues(){return{id:null,key:null,private:!0,lastItemAt:null,title:"",description:"",descriptionFormat:"html",forkedEventIds:[],ranges:[],readRanges:[],newestFirst:!1,files:[],imageFiles:[],attachments:[],linkPreviews:[],tags:[],recipientMessage:null,recipientAudience:null,recipientUserIds:[],recipientChatbotIds:[],recipientEmails:[],notifyRecipients:!0,groupId:null,usersNotifiedCount:null,discussionReaderUserId:null,pinnedAt:null,template:!1}}cloneTemplate(){var e;return e=this.clone(),e.id=null,e.key=null,e.title=M.t("templates.copy_of_title",{title:e.title}),e.sourceTemplateId=this.id,e.authorId=Rt.user().id,e.pinnedAt=null,e.forkedEventIds=[],e.groupId=null,e.closedAt=null,e.createdAt=null,e.updatedAt=null,e.template=!1,e}audienceValues(){return{name:this.group().name}}privateDefaultValue(){return E(this,e),"public_only"!==this.group().discussionPrivacyOptions}relationships(){return this.hasMany("polls",{sortBy:"createdAt",sortDesc:!0,find:{discardedAt:null}}),this.belongsTo("group"),this.belongsTo("author",{from:"users"}),this.hasMany("discussionReaders")}discussion(){return this}sourceTemplate(){return this.recordStore.discussions.find(this.sourceTemplateId)}tags(){return this.recordStore.tags.collection.chain().find({id:{$in:this.tagIds}}).simplesort("priority").data()}members(){return this.recordStore.users.find(this.group().memberIds().concat((0,l.map)(this.discussionReaders(),"userId")))}membersInclude(e){return this.inviterId&&!this.revokedAt&&Rt.user().id===e.id||this.group().membersInclude(e)}adminsInclude(e){return this.authorId===e.id||this.inviterId&&this.admin&&!this.revokedAt&&i.currentUserId===e.id||this.group().adminsInclude(e)}participantIds(){return(0,l.compact)((0,l.flatten)((0,l.map)(this.recordStore.comments.find({discussionId:this.id}),"authorId"),(0,l.map)(this.recordStore.polls.find({discussionId:this.id}),(function(e){return e.participantIds()})),[this.authorId]))}bestNamedId(){return(this.id&&this||this.groupId&&this.group()||{namedId:function(){}}).namedId()}createdEvent(){var e;if(e=this.recordStore.events.find({kind:"new_discussion",eventableId:this.id}),!(0,l.isEmpty)(e))return e[0]}forkedEvent(){var e;if(e=this.recordStore.events.find({kind:"discussion_forked",eventableId:this.id}),!(0,l.isEmpty)(e))return e[0]}reactions(){return this.recordStore.reactions.find({reactableId:this.id,reactableType:"Discussion"})}translationOptions(){return{title:this.title,groupName:this.groupName()}}authorName(){return this.author().nameWithTitle(this.group())}isBlank(){return""===this.description||null===this.description||"<p></p>"===this.description}groupName(){return(this.group()||{}).name}activePolls(){return(0,l.filter)(this.polls(),(function(e){return e.isVotable()}))}hasActivePoll(){return(0,l.some)(this.activePolls())}hasDecision(){return this.hasActivePoll()}closedPolls(){return(0,l.filter)(this.polls(),(function(e){return!e.isVotable()}))}activePoll(){return(0,l.head)(this.activePolls())}isUnread(){return!this.isDismissed()&&(null==this.lastReadAt||this.unreadItemsCount()>0)}isDismissed(){return null!=this.discussionReaderId&&null!=this.dismissedAt&&((0,x.Z)(this.dismissedAt,this.lastActivityAt)||(0,T.Z)(this.dismissedAt,this.lastActivityAt))}hasUnreadActivity(){return this.isUnread()&&this.unreadItemsCount()>0}membership(){return this.recordStore.memberships.find({userId:i.currentUserId,groupId:this.groupId})[0]}volume(){return this.discussionReaderVolume}saveVolume(t,o=!1){return E(this,e),this.processing=!0,o?this.membership().saveVolume(t).finally((()=>this.processing=!1)):(null!=t&&(this.discussionReaderVolume=t),this.remote.patchMember(this.keyOrId(),"set_volume",{volume:this.discussionReaderVolume}).finally((()=>this.processing=!1)))}isMuted(){return"mute"===this.volume()}markAsSeen(){if(!this.lastReadAt)return this.remote.patchMember(this.keyOrId(),"mark_as_seen"),this.update({lastReadAt:new Date})}markAsRead(e){if(!this.hasRead(e))return this.readRanges.push([e,e]),this.readRanges=N.reduce(this.readRanges),this.updateReadRanges()}update(e){return(0,l.isArray)(this.readRanges)&&(0,l.isArray)(e.readRanges)&&!(0,l.isEqual)(e.readRanges,this.readRanges)&&(e.readRanges=N.reduce(this.readRanges.concat(e.readRanges))),this.baseUpdate(e),this.readRanges=N.intersectRanges(this.readRanges,this.ranges)}hasRead(e){return N.includesValue(this.readRanges,e)}unreadItemsCount(){return this.itemsCount-this.readItemsCount()}readItemsCount(){return N.length(this.readRanges)}firstSequenceId(){return((0,l.head)(this.ranges)||[])[0]}lastSequenceId(){return((0,l.last)(this.ranges)||[])[1]}lastReadSequenceId(){return((0,l.last)(this.readRanges)||[])[1]}firstUnreadSequenceId(){return(this.unreadRanges()[0]||[])[0]}readSequenceIds(){return N.rangesToArray(this.readRanges)}unreadRanges(){return N.subtractRanges(this.ranges,this.readRanges)}unreadSequenceIds(){return N.rangesToArray(this.unreadRanges())}dismiss(){return this.update({dismissedAt:new Date}),this.processing=!0,this.remote.patchMember(this.keyOrId(),"dismiss").finally((()=>this.processing=!1))}recall(){return this.update({dismissedAt:null}),this.processing=!0,this.remote.patchMember(this.keyOrId(),"recall").finally((()=>this.processing=!1))}move(){return E(this,e),this.processing=!0,this.remote.patchMember(this.keyOrId(),"move",{group_id:this.groupId}).finally((()=>this.processing=!1))}savePin(){return E(this,e),this.processing=!0,this.remote.patchMember(this.keyOrId(),"pin").finally((()=>this.processing=!1))}saveUnpin(){return E(this,e),this.processing=!0,this.remote.patchMember(this.keyOrId(),"unpin").finally((()=>this.processing=!1))}close(){return E(this,e),this.processing=!0,this.remote.patchMember(this.keyOrId(),"close").finally((()=>this.processing=!1))}reopen(){return E(this,e),this.processing=!0,this.remote.patchMember(this.keyOrId(),"reopen").finally((()=>this.processing=!1))}fork(){return E(this,e),this.processing=!0,this.remote.post("fork",this.serialize()).finally((()=>this.processing=!1))}moveComments(){return E(this,e),this.processing=!0,this.remote.patchMember(this.keyOrId(),"move_comments",{forked_event_ids:this.forkedEventIds}).finally((()=>this.processing=!1))}fetchUsersNotifiedCount(){return this.recordStore.fetch({path:"announcements/users_notified_count",params:{discussion_id:this.id}}).then((e=>this.usersNotifiedCount=e.count))}forkedEvents(){return(0,l.sortBy)(this.recordStore.events.find(this.forkedEventIds),"sequenceId")}forkTarget(){if((0,l.some)(this.forkedEvents()))return this.forkedEvents()[0].model()}}return e.singular="discussion",e.plural="discussions",e.uniqueIndices=["id","key"],e.indices=["groupId","authorId"],e.prototype.updateReadRanges=(0,l.throttle)((function(){return this.remote.patchMember(this.keyOrId(),"mark_as_read",{ranges:N.serialize(this.readRanges)})}),2e3),e}.call(void 0),D=new s.ZP,F=function(){class e{constructor(){var e;e={parentId:null,name:M.t("discussion.invite_only"),description:"",descriptionFormat:"html",groupPrivacy:"closed",handle:null,discussionPrivacyOptions:"public_or_private",membershipGrantedUpon:"approval",membersCanAnnounce:!0,membersCanAddMembers:!0,membersCanEditDiscussions:!0,membersCanEditComments:!0,membersCanDeleteComments:!0,membersCanRaiseMotions:!0,membersCanStartDiscussions:!0,membersCanCreateSubgroups:!1,motionsCanBeEdited:!1,files:[],imageFiles:[],attachments:[],linkPreviews:[],subscription:{active:!0},specifiedVotersOnly:!1,isNullGroup:!0,categorizePollTemplates:!0},(0,l.each)(e,((e,t)=>(s.ZP.set(this,t,e),!0)))}chatbots(){return[]}poll(){return[]}discussions(){return[]}memberships(){return[]}membershipRequests(){return[]}subgroups(){return[]}parent(){return null}parentOrSelf(){return this}parentsAndSelf(){return[this]}selfAndSubgroups(){return[this]}group(){return this}hasSubgroups(){return!1}tags(){return[]}organisationIds(){return[]}membershipFor(){return null}members(){return[]}membersInclude(){return!1}adminsInclude(){return!1}adminMemberships(){return[]}admins(){return[]}memberIds(){return[]}adminIds(){return[]}parentName(){return null}privacyIsOpen(){return!1}privacyIsClosed(){return!1}privacyIsSecret(){return!0}isArchived(){return!1}isParent(){return!0}hasSubscription(){return!1}isSubgroupOfSecretParent(){return!1}hasPendingMembershipRequestFrom(){return!1}}return e.singular="group",e.plural="groups",e.prototype.subscription={},e}.call(void 0),U=function(){class e{constructor(){var e;e={id:null,title:"No thread",description:"",descriptionFormat:"html",key:null,private:!0,lastItemAt:null,forkedEventIds:[],ranges:[],readRanges:[],isForking:!1,newestFirst:!1,files:[],imageFiles:[],attachments:[],linkPreviews:[],recipientMessage:null,recipientAudience:null,recipientUserIds:[],recipientChatbotIds:[],recipientEmails:[],notifyRecipients:!0,groupId:null},(0,l.each)(e,((e,t)=>(s.ZP.set(this,t,e),!0)))}polls(){return[]}discussion(){return this}group(){return new F}markAsRead(){return!1}}return e.singular="discussion",e.plural="discussions",e}.call(void 0),z=function(){class e extends w{nullModel(){return new U}search(e,t,o={}){return o.group_id=e,o.q=t,this.fetch({path:"search",params:o})}fetchInbox(e={}){return this.fetch({path:"dashboard",params:{exclude_types:"group",per:50}})}}return e.prototype.model=L,e}.call(void 0),B=function(){class e extends k{defaultValues(){return{discussionId:null,userId:null}}relationships(){return this.belongsTo("user",{from:"users"}),this.belongsTo("discussion")}}return e.singular="discussionReader",e.plural="discussionReaders",e.indices=["discussionId","userId"],e.uniqueIndices=["id"],e}.call(void 0),V=function(){class e extends w{}return e.prototype.model=B,e}.call(void 0),H=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},G=function(){class e extends k{constructor(){super(...arguments),this.removeFromThread=this.removeFromThread.bind(this)}relationships(){return this.belongsTo("parent",{from:"events"}),this.belongsTo("actor",{from:"users"}),this.belongsTo("discussion"),this.hasMany("notifications")}defaultValues(){return{pinned:!1,eventableId:null,eventableType:null,discussionId:null,sequenceId:null,positition:0,showReplyForm:!0}}parentOrSelf(){return this.parentId?this.parent():this}isNested(){return this.depth>1}isSurface(){return 1===this.depth}surfaceOrSelf(){return this.isNested()?this.parent():this}children(){return this.recordStore.events.find({parentId:this.id})}delete(){return this.deleted=!0}actorName(){return this.actor()?this.actor().nameWithTitle(this.discussion().group()):M.t("common.anonymous")}actorUsername(){if(this.actor())return this.actor().username}model(){return this.recordStore[this.recordStore.eventTypeMap[this.eventableType]].find(this.eventableId)}isUnread(){return!this.discussion().hasRead(this.sequenceId)}markAsRead(){return this.discussion().markAsRead(this.sequenceId)}beforeRemove(){return(0,l.invokeMap)(this.notifications(),"remove")}removeFromThread(){return H(this,e),this.remote.patchMember(this.id,"remove_from_thread").then((()=>this.remove()))}pin(e){return this.remote.patchMember(this.id,"pin",{pinned_title:e})}fillPinnedTitle(){return this.pinnedTitle=this.suggestedTitle()}suggestedTitle(){var e,t,o,s;return o=this.model(),o?o.title?o.title.replace(/<[^>]*>?/gm,""):(s=new DOMParser,e=s.parseFromString(o.statement||o.body,"text/html"),(t=e.querySelector("h1,h2,h3"))?t.textContent:this.actor().name):""}unpin(){return this.remote.patchMember(this.id,"unpin")}isForking(){return this.discussion()&&(this.discussion().forkedEventIds.includes(this.id)||this.parentIsForking())}parentIsForking(){return this.parent()&&this.parent().isForking()}forkingDisabled(){return this.parentIsForking()||this.parent()&&"poll_created"===this.parent().kind}toggleForking(){return this.isForking()?this.discussion().update({forkedEventIds:(0,l.without)(this.discussion().forkedEventIds,this.id)}):this.discussion().forkedEventIds.push(this.id)}next(){return this.recordStore.events.find({parentId:this.parentId,position:this.position+1})[0]}previous(){return this.recordStore.events.find({parentId:this.parentId,position:this.position-1})[0]}}return e.singular="event",e.plural="events",e.indices=["discussionId","sequenceId","position","depth","parentId","positionKey"],e.uniqueIndices=["id"],e}.call(void 0),W=function(){class e extends w{fetchByDiscussion(e,t={}){return t["discussion_key"]=e,this.fetch({params:t})}findByDiscussionAndSequenceId(e,t){return this.collection.chain().find({discussionId:e.id}).find({sequenceId:t}).data()[0]}}return e.prototype.model=G,e}.call(void 0),K=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},Y=function(){class e extends k{constructor(){super(...arguments),this.archive=this.archive.bind(this),this.export=this.export.bind(this),this.uploadLogo=this.uploadLogo.bind(this),this.uploadCover=this.uploadCover.bind(this)}defaultValues(){return{parentId:null,name:"",description:"",descriptionFormat:"html",groupPrivacy:"secret",handle:null,discussionPrivacyOptions:"private_only",membershipGrantedUpon:"approval",membersCanAnnounce:!0,membersCanAddMembers:!0,membersCanEditDiscussions:!0,membersCanEditComments:!0,membersCanDeleteComments:!0,membersCanRaiseMotions:!0,membersCanStartDiscussions:!0,membersCanCreateSubgroups:!1,motionsCanBeEdited:!1,parentMembersCanSeeDiscussions:!1,files:[],imageFiles:[],attachments:[],linkPreviews:[],subscription:{},specifiedVotersOnly:!1,recipientMessage:null,recipientAudience:null,recipientUserIds:[],recipientChatbotIds:[],recipientEmails:[],notifyRecipients:!0,isMember:!1,isAdmin:!1}}afterConstruction(){return this.privacyIsClosed()&&(this.allowPublicThreads="public_or_private"===this.discussionPrivacyOptions),C.apply(this,{showTitle:!0}),Z.apply(this)}relationships(){return this.hasMany("discussions",{find:{discardedAt:null}}),this.hasMany("polls",{find:{discardedAt:null}}),this.hasMany("membershipRequests"),this.hasMany("memberships"),this.hasMany("chatbots"),this.hasMany("allDocuments",{from:"documents",with:"groupId",of:"id"}),this.hasMany("subgroups",{from:"groups",with:"parentId",of:"id",orderBy:"name"}),this.belongsTo("parent",{from:"groups"}),this.belongsTo("creator",{from:"users"})}author(){return this.creator()}isBlank(){return""===this.description||null===this.description||"<p></p>"===this.description}tags(){return this.recordStore.tags.collection.chain().find({groupId:this.id}).simplesort("priority").data()}parentOrSelf(){return this.parentId?this.parent():this}group(){return this}fetchToken(){return this.remote.getMember(this.id,"token").then((()=>this.token))}resetToken(){return this.remote.postMember(this.id,"reset_token").then((()=>this.token))}pendingMembershipRequests(){return(0,l.filter)(this.membershipRequests(),(function(e){return e.isPending()}))}hasPendingMembershipRequests(){return(0,l.some)(this.pendingMembershipRequests())}hasPendingMembershipRequestFrom(e){return(0,l.some)(this.pendingMembershipRequests(),(function(t){return t.requestorId===e.id}))}previousMembershipRequests(){return(0,l.filter)(this.membershipRequests(),(function(e){return!e.isPending()}))}hasPreviousMembershipRequests(){return(0,l.some)(this.previousMembershipRequests())}pendingInvitations(){return(0,l.filter)(this.invitations(),(function(e){return e.isPending()&&e.singleUse}))}hasPendingInvitations(){return(0,l.some)(this.pendingInvitations())}hasSubgroups(){return this.isParent()&&this.subgroups().length}publicOrganisationIds(){return(0,l.map)((0,l.filter)(this.subgroups().concat(this),(function(e){return"open"===e.groupPrivacy})),"id")}organisationIds(){return(0,l.map)(this.subgroups(),"id").concat(this.id)}selfAndSubgroups(){return this.recordStore.groups.find(this.selfAndSubgroupIds())}selfAndSubgroupIds(){return[this.id].concat(this.recordStore.groups.find({parentId:this.id}).map((function(e){return e.id})))}membershipFor(e){return this.recordStore.memberships.find({groupId:this.id,userId:e.id})[0]}members(){return this.recordStore.users.collection.find({id:{$in:this.memberIds()}})}parentsAndSelf(){return this.selfAndParents().reverse()}selfAndParents(){return(0,l.compact)([this].concat(this.parentId&&this.parent().parentsAndSelf()))}parentAndSelfMemberships(){return this.recordStore.memberships.collection.find({groupId:{$in:this.parentOrSelf().selfAndSubgroupIds()}})}parentAndSelfMembershipIds(){return this.parentAndSelfMemberships().map((function(e){return e.id}))}parentAndSelfMembers(){return this.recordStore.users.collection.find({id:{$in:this.parentAndSelfMemberships().map((function(e){return e.userId}))}})}parentAndSelfMemberIds(){return this.parentAndSelfMembers().map((function(e){return e.id}))}membersInclude(e){return this.membershipFor(e)||!1}adminsInclude(e){return this.recordStore.memberships.find({groupId:this.id,userId:e.id,admin:!0})[0]||!1}adminMemberships(){return this.recordStore.memberships.find({groupId:this.id,admin:!0})}admins(){return this.recordStore.users.find({id:{$in:this.adminIds()}})}memberIds(){return(0,l.map)(this.memberships(),"userId")}adminIds(){return(0,l.map)(this.adminMemberships(),"userId")}parentName(){if(null!=this.parent())return this.parent().name}privacyIsOpen(){return"open"===this.groupPrivacy}privacyIsClosed(){return"closed"===this.groupPrivacy}privacyIsSecret(){return"secret"===this.groupPrivacy}isArchived(){return null!=this.archivedAt}isParent(){return null==this.parentId}archive(){return K(this,e),this.remote.patchMember(this.key,"archive").then((()=>(this.remove(),(0,l.each)(this.memberships(),(function(e){return e.remove()})))))}export(){return K(this,e),this.remote.postMember(this.id,"export")}uploadLogo(t){return K(this,e),this.remote.upload(`${this.key}/upload_photo/logo`,t,{},(function(){}))}uploadCover(t){return K(this,e),this.remote.upload(`${this.key}/upload_photo/cover_photo`,t,{},(function(){}))}hasSubscription(){return null!=this.subscriptionKind}isSubgroupOfSecretParent(){return this.parent()&&this.parent().privacyIsSecret()}}return e.singular="group",e.plural="groups",e.uniqueIndices=["id","key"],e.indices=["parentId"],e}.call(void 0),Q=function(){class e extends w{nullModel(){return new F}fuzzyFind(e){return this.find(e)||(0,l.head)(this.find({handle:`${e}`.toLowerCase()}))}findOrFetch(e,t={}){var o;return o=this.fuzzyFind(e),o?(this.remote.fetchById(e,t),Promise.resolve(o)):this.remote.fetchById(e,t).then((()=>this.fuzzyFind(e)))}fetchByParent(e){return this.fetch({path:`${e.id}/subgroups`})}fetchExploreGroups(e,t={}){return t["q"]=e,this.fetch({params:t})}getExploreResultsCount(e,t={}){return t["q"]=e,this.fetch({path:"count_explore_results",params:t})}getHandle({name:e,parentHandle:t}){return this.fetch({path:"suggest_handle",params:{name:e,parent_handle:t}})}}return e.prototype.model=Y,e}.call(void 0),J=function(){class e extends k{defaultValues(){return{userId:null,groupId:null,archivedAt:null,inviterId:null,volume:null}}relationships(){return this.belongsTo("group"),this.belongsTo("user"),this.belongsTo("inviter",{from:"users"})}userName(){return this.user().nameWithTitle(this.group())}userUsername(){return this.user().username}userEmail(){return this.user().email}groupName(){return this.group().name}saveVolume(e,t=!1){return this.processing=!0,this.remote.patchMember(this.keyOrId(),"set_volume",{volume:e,apply_to_all:t,unsubscribe_token:this.user().unsubscribeToken}).then((()=>t?(this.recordStore.discussions.collection.find({groupId:{$in:this.group().organisationIds()}}).forEach((function(e){return e.update({discussionReaderVolume:null})})),(0,l.each)(this.user().memberships(),(function(t){return t.update({volume:e})}))):(0,l.each)(this.group().discussions(),(function(e){return e.update({discussionReaderVolume:null})})))).finally((()=>this.processing=!1))}resend(){return this.remote.postMember(this.keyOrId(),"resend").then((()=>this.resent=!0))}isMuted(){return"mute"===this.volume}beforeRemove(){return(0,l.invokeMap)(this.recordStore.events.find({eventableType:"membership",eventableId:this.id}),"remove")}}return e.singular="membership",e.plural="memberships",e.indices=["userId","groupId"],e.uniqueIndices=["id"],e.searchableFields=["userName","userUsername"],e}.call(void 0),X=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},ee=function(){class e extends w{constructor(){super(...arguments),this.saveExperience=this.saveExperience.bind(this)}forUser(e){return this.collection.find({userId:e.id})}forModel(e){return this.collection.find({groupId:{$in:e.groupIds()}})}forGroup(e){return this.collection.find({groupId:e.id})}joinGroup(e){return this.remote.post("join_group",{group_id:e.id})}fetchMyMemberships(){return this.fetch({path:"my_memberships"})}fetchByNameFragment(e,t,o=5){return this.fetch({path:"autocomplete",params:{q:e,group_key:t,per:o}})}fetchByUser(e,t={}){return this.fetch({path:"for_user",params:{user_id:e.id,per:t["per"]||30}})}makeAdmin(e){return this.remote.postMember(e.id,"make_admin")}removeAdmin(e){return this.remote.postMember(e.id,"remove_admin")}saveExperience(t,o){return X(this,e),this.remote.postMember(o.id,"save_experience",{experience:t})}}return e.prototype.model=J,e}.call(void 0),te=function(){class e extends k{defaultValues(){return{introduction:null,groupId:null}}relationships(){return this.belongsTo("group"),this.belongsTo("requestor",{from:"users"}),this.belongsTo("responder",{from:"users"})}afterConstruction(){var e;return e=this.name||this.email||"",this.fakeUser={name:e,email:this.email,avatarKind:"initials",constructor:{singular:"user"},avatarInitials:e.split(" ").map((function(e){return e[0]})).join("")}}nameAndEmail(){return this.actor().email?`${this.actor().name} <${this.actor().email}>`:this.actor().name}actor(){return this.byExistingUser()?this.requestor():this.fakeUser}byExistingUser(){return null!=this.requestorId}isPending(){return null==this.respondedAt}formattedResponse(){return(0,l.capitalize)(this.response)}}return e.singular="membershipRequest",e.plural="membershipRequests",e.indices=["id","groupId"],e}.call(void 0),oe=function(){class e extends w{fetchMyPendingByGroup(e,t={}){return t["group_key"]=e,this.remote.get("my_pending",t)}fetchPendingByGroup(e,t={}){return t["group_key"]=e,this.remote.get("pending",t)}fetchPreviousByGroup(e,t={}){return t["group_key"]=e,this.remote.get("previous",t)}approve(e){return this.remote.postMember(e.id,"approve",{group_key:e.group().key})}ignore(e){return this.remote.postMember(e.id,"ignore",{group_key:e.group().key})}}return e.prototype.model=te,e}.call(void 0),se=o(99241),ne=o.n(se),ie={common:{slight_smile:"ğŸ™‚",heart:"â¤ï¸",tada:"ğŸ‰",thumbsup:"ğŸ‘"},hands:{raised_hands:"ğŸ™Œ",pray:"ğŸ™",fingers_crossed:"ğŸ¤",clap:"ğŸ‘",v:"âœŒï¸",metal:"ğŸ¤˜",ok_hand:"ğŸ‘Œ",wave:"ğŸ‘‹",call_me:"ğŸ¤™",thumbs_up:"ğŸ‘",thumbsdown:"ğŸ‘",ok_hand:"ğŸ‘Œ",punch:"ğŸ‘Š",fist:"âœŠ",wave:"ğŸ‘‹",hand:"âœ‹",open_hands:"ğŸ‘",muscle:"ğŸ’ª",ok_hand:"ğŸ‘Œ"},expressions:{simple_smile:"ğŸ™‚",grinning:"ğŸ˜€",laughing:"ğŸ˜†",hugging:"ğŸ¤—",sunglasses:"ğŸ˜",wink:"ğŸ˜‰",nerd:"ğŸ¤“",relieved:"ğŸ˜Œ",worried:"ğŸ˜Ÿ",confused:"ğŸ˜•",confounded:"ğŸ˜–",neutral_face:"ğŸ˜",slight_frown:"â˜¹ï¸",disappointed:"ğŸ˜",angry:"ğŸ˜¡",weary:"ğŸ˜©",astonished:"ğŸ˜²",rolling_eyes:"ğŸ™„",cry:"ğŸ˜¢",scream:"ğŸ˜±",thinking:"ğŸ¤”",neutral_face:"ğŸ˜",slight_frown:"â˜¹ï¸",disappointed:"ğŸ˜",scream:"ğŸ˜±",sleeping:"ğŸ˜´",smile:"ğŸ˜„",smiley:"ğŸ˜ƒ",grinning:"ğŸ˜€",blush:"ğŸ˜Š",heart_eyes:"ğŸ˜",kissing_heart:"ğŸ˜˜",kissing_closed_eyes:"ğŸ˜š",kissing:"ğŸ˜—",kissing_smiling_eyes:"ğŸ˜™",stuck_out_tongue_winking_eye:"ğŸ˜œ",stuck_out_tongue_closed_eyes:"ğŸ˜",stuck_out_tongue:"ğŸ˜›",flushed:"ğŸ˜³",grin:"ğŸ˜",pensive:"ğŸ˜”",relieved:"ğŸ˜Œ",unamused:"ğŸ˜’",disappointed:"ğŸ˜",persevere:"ğŸ˜£",cry:"ğŸ˜¢",joy:"ğŸ˜‚",sob:"ğŸ˜­",sleepy:"ğŸ˜ª",disappointed_relieved:"ğŸ˜¥",cold_sweat:"ğŸ˜°",sweat_smile:"ğŸ˜…",sweat:"ğŸ˜“",weary:"ğŸ˜©",tired_face:"ğŸ˜«",fearful:"ğŸ˜¨",scream:"ğŸ˜±",angry:"ğŸ˜ ",rage:"ğŸ˜¡",triumph:"ğŸ˜¤",confounded:"ğŸ˜–",yum:"ğŸ˜‹",mask:"ğŸ˜·",sunglasses:"ğŸ˜",sleeping:"ğŸ˜´",dizzy_face:"ğŸ˜µ",frowning:"ğŸ˜¦",anguished:"ğŸ˜§",imp:"ğŸ‘¿",open_mouth:"ğŸ˜®",grimacing:"ğŸ˜¬",neutral_face:"ğŸ˜",hushed:"ğŸ˜¯",smirk:"ğŸ˜",expressionless:"ğŸ˜‘"},people:{man_with_gua_pi_mao:"ğŸ‘²",man_with_turban:"ğŸ‘³",cop:"ğŸ‘®",construction_worker:"ğŸ‘·",guardsman:"ğŸ’‚",baby:"ğŸ‘¶",boy:"ğŸ‘¦",girl:"ğŸ‘§",man:"ğŸ‘¨",woman:"ğŸ‘©",older_man:"ğŸ‘´",older_woman:"ğŸ‘µ",person_with_blond_hair:"ğŸ‘±",angel:"ğŸ‘¼",princess:"ğŸ‘¸",smiley_cat:"ğŸ˜º",smile_cat:"ğŸ˜¸",heart_eyes_cat:"ğŸ˜»",kissing_cat:"ğŸ˜½",smirk_cat:"ğŸ˜¼",scream_cat:"ğŸ™€",crying_cat_face:"ğŸ˜¿",joy_cat:"ğŸ˜¹",pouting_cat:"ğŸ˜¾",japanese_ogre:"ğŸ‘¹",japanese_goblin:"ğŸ‘º",see_no_evil:"ğŸ™ˆ",hear_no_evil:"ğŸ™‰",speak_no_evil:"ğŸ™Š",skull:"ğŸ’€",alien:"ğŸ‘½",hankey:"ğŸ’©",ear:"ğŸ‘‚",eyes:"ğŸ‘€",nose:"ğŸ‘ƒ",tongue:"ğŸ‘…",lips:"ğŸ‘„",walking:"ğŸš¶",runner:"ğŸƒ",dancer:"ğŸ’ƒ",couple:"ğŸ‘«",family:"ğŸ‘ª",couplekiss:"ğŸ’",couple_with_heart:"ğŸ’‘",dancers:"ğŸ‘¯",ok_woman:"ğŸ™†",no_good:"ğŸ™…",information_desk_person:"ğŸ’",raising_hand:"ğŸ™‹",massage:"ğŸ’†",haircut:"ğŸ’‡",nail_care:"ğŸ’…",bride_with_veil:"ğŸ‘°",person_with_pouting_face:"ğŸ™",person_frowning:"ğŸ™",bow:"ğŸ™‡"},nature:{dog:"ğŸ¶",wolf:"ğŸº",cat:"ğŸ±",mouse:"ğŸ­",hamster:"ğŸ¹",rabbit:"ğŸ°",frog:"ğŸ¸",tiger:"ğŸ¯",koala:"ğŸ¨",bear:"ğŸ»",pig:"ğŸ·",pig_nose:"ğŸ½",cow:"ğŸ®",boar:"ğŸ—",monkey_face:"ğŸµ",monkey:"ğŸ’",horse:"ğŸ´",sheep:"ğŸ‘",elephant:"ğŸ˜",panda_face:"ğŸ¼",penguin:"ğŸ§",bird:"ğŸ¦",baby_chick:"ğŸ¤",hatched_chick:"ğŸ¥",hatching_chick:"ğŸ£",chicken:"ğŸ”",snake:"ğŸ",turtle:"ğŸ¢",bug:"ğŸ›",bee:"ğŸ",ant:"ğŸœ",beetle:"ğŸ",snail:"ğŸŒ",octopus:"ğŸ™",shell:"ğŸš",tropical_fish:"ğŸ ",fish:"ğŸŸ",dolphin:"ğŸ¬",whale:"ğŸ³",racehorse:"ğŸ",dragon_face:"ğŸ²",blowfish:"ğŸ¡",camel:"ğŸ«",poodle:"ğŸ©",feet:"ğŸ¾",bouquet:"ğŸ’",cherry_blossom:"ğŸŒ¸",tulip:"ğŸŒ·",four_leaf_clover:"ğŸ€",rose:"ğŸŒ¹",sunflower:"ğŸŒ»",hibiscus:"ğŸŒº",maple_leaf:"ğŸ",leaves:"ğŸƒ",fallen_leaf:"ğŸ‚",herb:"ğŸŒ¿",ear_of_rice:"ğŸŒ¾",mushroom:"ğŸ„",cactus:"ğŸŒµ",palm_tree:"ğŸŒ´",chestnut:"ğŸŒ°",seedling:"ğŸŒ±",blossom:"ğŸŒ¼",new_moon:"ğŸŒ‘",first_quarter_moon:"ğŸŒ“",moon:"ğŸŒ”",full_moon:"ğŸŒ•",first_quarter_moon_with_face:"ğŸŒ›",crescent_moon:"ğŸŒ™",earth_asia:"ğŸŒ",volcano:"ğŸŒ‹",milky_way:"ğŸŒŒ",stars:"ğŸŒ ",partly_sunny:"â›…",snowman:"â›„",cyclone:"ğŸŒ€",foggy:"ğŸŒ",rainbow:"ğŸŒˆ",ocean:"ğŸŒŠ"},objects:{tophat:"ğŸ©",crown:"ğŸ‘‘",womans_hat:"ğŸ‘’",athletic_shoe:"ğŸ‘Ÿ",mans_shoe:"ğŸ‘",sandal:"ğŸ‘¡",high_heel:"ğŸ‘ ",boot:"ğŸ‘¢",shirt:"ğŸ‘•",necktie:"ğŸ‘”",womans_clothes:"ğŸ‘š",dress:"ğŸ‘—",running_shirt_with_sash:"ğŸ½",jeans:"ğŸ‘–",kimono:"ğŸ‘˜",bikini:"ğŸ‘™",briefcase:"ğŸ’¼",handbag:"ğŸ‘œ",pouch:"ğŸ‘",purse:"ğŸ‘›",eyeglasses:"ğŸ‘“",ribbon:"ğŸ€",closed_umbrella:"ğŸŒ‚",fire:"ğŸ”¥",sparkles:"âœ¨",star:"â­",star2:"ğŸŒŸ",dizzy:"ğŸ’«",boom:"ğŸ’¥",anger:"ğŸ’¢",sweat_drops:"ğŸ’¦",droplet:"ğŸ’§",zzz:"ğŸ’¤",dash:"ğŸ’¨",lipstick:"ğŸ’„",yellow_heart:"ğŸ’›",blue_heart:"ğŸ’™",purple_heart:"ğŸ’œ",green_heart:"ğŸ’š",broken_heart:"ğŸ’”",heartpulse:"ğŸ’—",heartbeat:"ğŸ’“",two_hearts:"ğŸ’•",sparkling_heart:"ğŸ’–",revolving_hearts:"ğŸ’",cupid:"ğŸ’˜",love_letter:"ğŸ’Œ",kiss:"ğŸ’‹",ring:"ğŸ’",gem:"ğŸ’",speech_balloon:"ğŸ’¬",footprints:"ğŸ‘£",bamboo:"ğŸ",gift_heart:"ğŸ’",dolls:"ğŸ",school_satchel:"ğŸ’",mortar_board:"ğŸ“",flags:"ğŸ",fireworks:"ğŸ†",sparkler:"ğŸ‡",wind_chime:"ğŸ",rice_scene:"ğŸ‘",jack_o_lantern:"ğŸƒ",ghost:"ğŸ‘»",santa:"ğŸ…",christmas_tree:"ğŸ„",gift:"ğŸ",tanabata_tree:"ğŸ‹",confetti_ball:"ğŸŠ",balloon:"ğŸˆ",crossed_flags:"ğŸŒ",crystal_ball:"ğŸ”®",movie_camera:"ğŸ¥",camera:"ğŸ“·",video_camera:"ğŸ“¹",vhs:"ğŸ“¼",cd:"ğŸ’¿",dvd:"ğŸ“€",minidisc:"ğŸ’½",floppy_disk:"ğŸ’¾",computer:"ğŸ’»",iphone:"ğŸ“±",telephone_receiver:"ğŸ“",pager:"ğŸ“Ÿ",fax:"ğŸ“ ",satellite:"ğŸ“¡",tv:"ğŸ“º",radio:"ğŸ“»",loud_sound:"ğŸ”Š",bell:"ğŸ””",loudspeaker:"ğŸ“¢",mega:"ğŸ“£",hourglass_flowing_sand:"â³",hourglass:"âŒ›",alarm_clock:"â°",watch:"âŒš",unlock:"ğŸ”“",lock:"ğŸ”’",lock_with_ink_pen:"ğŸ”",closed_lock_with_key:"ğŸ”",key:"ğŸ”‘",mag_right:"ğŸ”",bulb:"ğŸ’¡",flashlight:"ğŸ”¦",electric_plug:"ğŸ”Œ",battery:"ğŸ”‹",mag:"ğŸ”",bath:"ğŸ›€",toilet:"ğŸš½",wrench:"ğŸ”§",nut_and_bolt:"ğŸ”©",hammer:"ğŸ”¨",door:"ğŸšª",smoking:"ğŸš¬",bomb:"ğŸ’£",gun:"ğŸ”«",hocho:"ğŸ”ª",pill:"ğŸ’Š",syringe:"ğŸ’‰",moneybag:"ğŸ’°",yen:"ğŸ’´",dollar:"ğŸ’µ",credit_card:"ğŸ’³",money_with_wings:"ğŸ’¸",calling:"ğŸ“²","e-mail":"ğŸ“§",inbox_tray:"ğŸ“¥",outbox_tray:"ğŸ“¤",envelope_with_arrow:"ğŸ“©",incoming_envelope:"ğŸ“¨",mailbox:"ğŸ“«",mailbox_closed:"ğŸ“ª",postbox:"ğŸ“®",package:"ğŸ“¦",memo:"ğŸ“",page_facing_up:"ğŸ“„",page_with_curl:"ğŸ“ƒ",bookmark_tabs:"ğŸ“‘",bar_chart:"ğŸ“Š",chart_with_upwards_trend:"ğŸ“ˆ",chart_with_downwards_trend:"ğŸ“‰",scroll:"ğŸ“œ",clipboard:"ğŸ“‹",date:"ğŸ“…",calendar:"ğŸ“†",card_index:"ğŸ“‡",file_folder:"ğŸ“",open_file_folder:"ğŸ“‚",pushpin:"ğŸ“Œ",paperclip:"ğŸ“",straight_ruler:"ğŸ“",triangular_ruler:"ğŸ“",closed_book:"ğŸ“•",green_book:"ğŸ“—",blue_book:"ğŸ“˜",orange_book:"ğŸ“™",notebook:"ğŸ““",notebook_with_decorative_cover:"ğŸ“”",ledger:"ğŸ“’",books:"ğŸ“š",book:"ğŸ“–",bookmark:"ğŸ”–",name_badge:"ğŸ“›",newspaper:"ğŸ“°",art:"ğŸ¨",clapper:"ğŸ¬",microphone:"ğŸ¤",headphones:"ğŸ§",musical_score:"ğŸ¼",musical_note:"ğŸµ",notes:"ğŸ¶",musical_keyboard:"ğŸ¹",violin:"ğŸ»",trumpet:"ğŸº",saxophone:"ğŸ·",guitar:"ğŸ¸",space_invader:"ğŸ‘¾",video_game:"ğŸ®",black_joker:"ğŸƒ",flower_playing_cards:"ğŸ´",mahjong:"ğŸ€„",game_die:"ğŸ²",dart:"ğŸ¯",football:"ğŸˆ",basketball:"ğŸ€",soccer:"âš½",baseball:"âš¾",tennis:"ğŸ¾","8ball":"ğŸ±",bowling:"ğŸ³",golf:"â›³",checkered_flag:"ğŸ",trophy:"ğŸ†",ski:"ğŸ¿",snowboarder:"ğŸ‚",swimmer:"ğŸŠ",surfer:"ğŸ„",fishing_pole_and_fish:"ğŸ£",tea:"ğŸµ",sake:"ğŸ¶",beer:"ğŸº",beers:"ğŸ»",cocktail:"ğŸ¸",tropical_drink:"ğŸ¹",wine_glass:"ğŸ·",fork_and_knife:"ğŸ´",pizza:"ğŸ•",hamburger:"ğŸ”",fries:"ğŸŸ",poultry_leg:"ğŸ—",meat_on_bone:"ğŸ–",spaghetti:"ğŸ",curry:"ğŸ›",fried_shrimp:"ğŸ¤",bento:"ğŸ±",sushi:"ğŸ£",fish_cake:"ğŸ¥",rice_ball:"ğŸ™",rice_cracker:"ğŸ˜",rice:"ğŸš",ramen:"ğŸœ",stew:"ğŸ²",oden:"ğŸ¢",dango:"ğŸ¡",egg:"ğŸ³",bread:"ğŸ",doughnut:"ğŸ©",custard:"ğŸ®",icecream:"ğŸ¦",ice_cream:"ğŸ¨",shaved_ice:"ğŸ§",birthday:"ğŸ‚",cake:"ğŸ°",cookie:"ğŸª",chocolate_bar:"ğŸ«",candy:"ğŸ¬",lollipop:"ğŸ­",honey_pot:"ğŸ¯",apple:"ğŸ",green_apple:"ğŸ",tangerine:"ğŸŠ",cherries:"ğŸ’",grapes:"ğŸ‡",watermelon:"ğŸ‰",strawberry:"ğŸ“",peach:"ğŸ‘",melon:"ğŸˆ",banana:"ğŸŒ",pineapple:"ğŸ",sweet_potato:"ğŸ ",eggplant:"ğŸ†",tomato:"ğŸ…",corn:"ğŸŒ½",arrow_right:"â¡ï¸",arrow_left:"â¬…ï¸",arrow_up:"â¬†ï¸",arrow_down:"â¬‡ï¸"},places:{house:"ğŸ ",house_with_garden:"ğŸ¡",school:"ğŸ«",office:"ğŸ¢",post_office:"ğŸ£",hospital:"ğŸ¥",bank:"ğŸ¦",convenience_store:"ğŸª",love_hotel:"ğŸ©",hotel:"ğŸ¨",wedding:"ğŸ’’",church:"â›ª",department_store:"ğŸ¬",city_sunrise:"ğŸŒ‡",city_sunset:"ğŸŒ†",japanese_castle:"ğŸ¯",european_castle:"ğŸ°",tent:"â›º",factory:"ğŸ­",tokyo_tower:"ğŸ—¼",japan:"ğŸ—¾",mount_fuji:"ğŸ—»",sunrise_over_mountains:"ğŸŒ„",sunrise:"ğŸŒ…",night_with_stars:"ğŸŒƒ",statue_of_liberty:"ğŸ—½",bridge_at_night:"ğŸŒ‰",carousel_horse:"ğŸ ",ferris_wheel:"ğŸ¡",fountain:"â›²",roller_coaster:"ğŸ¢",ship:"ğŸš¢",boat:"â›µ",speedboat:"ğŸš¤",rocket:"ğŸš€",seat:"ğŸ’º",station:"ğŸš‰",bullettrain_side:"ğŸš„",bullettrain_front:"ğŸš…",metro:"ğŸš‡",railway_car:"ğŸšƒ",bus:"ğŸšŒ",blue_car:"ğŸš™",car:"ğŸš—",taxi:"ğŸš•",truck:"ğŸšš",rotating_light:"ğŸš¨",police_car:"ğŸš“",fire_engine:"ğŸš’",ambulance:"ğŸš‘",bike:"ğŸš²",barber:"ğŸ’ˆ",busstop:"ğŸš",ticket:"ğŸ«",traffic_light:"ğŸš¥",construction:"ğŸš§",beginner:"ğŸ”°",fuelpump:"â›½",izakaya_lantern:"ğŸ®",slot_machine:"ğŸ°",moyai:"ğŸ—¿",circus_tent:"ğŸª",performing_arts:"ğŸ­",round_pushpin:"ğŸ“",triangular_flag_on_post:"ğŸš©",no_smoking:"ğŸš­",100:"ğŸ’¯",no_entry_sign:"ğŸš«",white_check_mark:"âœ…"}};q=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935)/g,R={},(0,l.each)(ie,(function(e,t){return(0,l.each)(e,(function(e,t){return R[t]=e}))})),O=/\:[a-zA-Z0-9-_+]+\:/g;var re=function(e){return e&&":"===e[0]&&":"===e[e.length-1]?e.substring(1,e.length-1):e},ae=function(e){return le(re(e))},le=function(e){return R[ce(e)]||`:${ce(e)}:`},ce=function(e){var t;return t={"+1":"thumbsup","-1":"thumbsdown",thinking_face:"thinking",crossed_fingers:"fingers_crossed",nerd_face:"nerd",hugging_face:"hugging",slightly_frowning_face:"slight_frown"},null!=t[e]?t[e]:e},ue=function(e){return e.replace(O,ae)},de=function(e,t){var o,s;return e=e.match(q)[0],o="/img/emojis/",s=".png",o+ne()(e).toLowerCase().replace(" ","-")+s},pe=function(e){return'<img class="emoji" src="'+de(e)+'">'},me=function(){var e,t;return t=document.createElement("canvas"),!(!t.getContext||!t.getContext("2d")||"function"!==typeof t.getContext("2d").fillText)&&(e=t.getContext("2d"),e.textBaseline="top",e.font="32px Arial",e.fillText("ğŸ˜ƒ",0,0),0!==e.getImageData(16,16,1,1).data[0])}(),he=function(e){return me?e:e.replace(q,(function(e){return pe(e)}))},_e=function(){class e{nameWithTitle(){return this.name}}return e.singular="group",e.plural="groups",e.prototype.name=M.t("common.anonymous"),e.prototype.username=null,e}.call(void 0),fe=function(){class e extends k{defaultValues(){return{title:null,model:null,pollType:null,name:null,reaction:null}}relationships(){return this.belongsTo("event"),this.belongsTo("user"),this.belongsTo("actor",{from:"users"})}actionPath(){switch(this.kind()){case"invitation_accepted":return this.actor().username}}href(){return this.url?"membership_requested"===this.kind?"/"+this.url.split("/")[1]+"/members/requests":this.url.startsWith(i.baseUrl)?"/"+this.url.replace(i.baseUrl,""):"/"+this.url:"/"}args(){return{actor:this.name,reaction:"reaction_created"===this.kind?ae(this.reaction):void 0,title:this.title,poll_type:this.pollType,model:this.model}}actor(){return this.actor()||this.membershipRequestActor()}membershipRequestActor(){var e;return e=(this.name||"").toString(),Records.users.build({name:e,avatarInitials:e.split(" ").map((function(e){return e[0]})).join(""),avatarKind:"initials"})}isRouterLink(){return!this.url.includes("/invitations/")}}return e.singular="notification",e.plural="notifications",e.uniqueIndices=["id"],e.indices=["eventId","userId"],e}.call(void 0),ge=function(){class e extends w{fetchNotifications(e,t={}){return this.fetch({params:t})}viewed(){var e;if(e=!1,this.collection.find({viewed:{$ne:!0}}).forEach((t=>(e=!0,t.update({viewed:!0})))),e)return this.remote.post("viewed")}}return e.prototype.model=fe,e}.call(void 0),ve=function(){class e extends k{relationships(){return this.hasMany("memberships")}defaultValues(){return{shortBio:"",shortBioFormat:"html",files:[],imageFiles:[],attachments:[],linkPreviews:[],locale:i.defaultLocale,experiences:[],dateTimePref:"day_iso"}}nameOrEmail(){return this.name||this.email||this.placeholderName}simpleBio(){return(0,l.truncate)((this.shortBio||"").replace(/<\/?[^>]+(>|$)/g,""),{length:70})}localeName(){return((0,l.find)(i.locales,(e=>e.key===this.locale))||{}).name}adminMemberships(){return this.recordStore.memberships.find({userId:this.id,admin:!0})}groupIds(){return(0,l.map)(this.memberships(),"groupId")}groups(){return this.recordStore.groups.collection.chain().find({id:{$in:this.groupIds()},archivedAt:null}).simplesort("fullName").data()}participantIds(){return[]}parentGroups(){return(0,l.filter)(this.groups(),(function(e){return!e.parentId}))}inboxGroups(){return(0,l.flatten)([this.parentGroups(),this.orphanSubgroups()])}allThreads(){return(0,l.flatten)(this.groups().map((function(e){return e.discussions()})))}orphanSubgroups(){return(0,l.filter)(this.groups(),(e=>e.parentId&&!e.parent().membersInclude(this)))}orphanParents(){return(0,l.uniq)((0,l.compact)(this.orphanSubgroups().map((function(e){return e.parentId&&e.parent()}))))}membershipFor(e){if(e)return this.recordStore.memberships.find({groupId:e.id,userId:this.id})[0]}firstName(){if(this.name)return(0,l.head)(this.name.split(" "))}saveVolume(e,t){return this.processing=!0,this.remote.post("set_volume",{volume:e,apply_to_all:t,unsubscribe_token:this.unsubscribeToken}).then((()=>{if(t)return this.allThreads().forEach((function(e){return e.update({discussionReaderVolume:null})})),this.memberships().forEach((function(t){return t.update({volume:e})}))})).finally((()=>this.processing=!1))}hasExperienced(e,t){return t&&this.isMemberOf(t)?this.membershipFor(t).experiences[e]:this.experiences[e]}title(e){return this.titles[e.id]||this.titles[e.parentId]}nameWithTitle(e){var t,o;return t=this.nameOrEmail(),e?(o=this.titles||{},(0,l.compact)([t,o[e.id]||o[e.parentId]]).join(" Â· ")):t}}return e.singular="user",e.plural="users",e.lazyLoad=!0,e.uniqueIndices=["id"],e}.call(void 0),be=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},ye=function(){class e extends w{constructor(){super(...arguments),this.fetchMentionable=this.fetchMentionable.bind(this),this.updateProfile=this.updateProfile.bind(this),this.uploadAvatar=this.uploadAvatar.bind(this),this.changePassword=this.changePassword.bind(this),this.destroy=this.destroy.bind(this),this.saveExperience=this.saveExperience.bind(this)}nullModel(){return new _e}fetchTimeZones(){return this.remote.fetch({path:"time_zones"})}fetchGroups(){return this.fetch({path:"groups",params:{exclude_types:"user"}})}fetchMentionable(t,o){return be(this,e),null==o.id&&o.discussionId&&(o=o.discussion()),null!=o.id||o.discussionId||(o=o.group()),this.fetch({path:"mentionable_users",params:{q:t,[`${o.constructor.singular}_id`]:o.id}})}updateProfile(t){return be(this,e),t.processing=!0,t.beforeSave(),this.remote.post("update_profile",(0,l.merge)(t.serialize(),{unsubscribe_token:t.unsubscribeToken})).catch((e=>{throw e.errors&&t.setErrors(e.errors),e})).finally((function(){return t.processing=!1}))}uploadAvatar(t){return be(this,e),this.remote.upload("upload_avatar",t)}changePassword(t){return be(this,e),t.processing=!0,this.remote.post("change_password",t.serialize()).finally((function(){return t.processing=!1}))}destroy(){return be(this,e),this.remote.delete("/")}saveExperience(t,o=!0){return be(this,e),this.remote.post("save_experience",{experience:t,value:o})}emailStatus(e,t){return this.fetch({path:"email_status",params:(0,l.pickBy)({email:e,token:t},l.identity)})}checkEmailExistence(e){return this.fetch({path:"email_exists",params:{email:e}})}sendMergeVerificationEmail(e){return this.fetch({path:"send_merge_verification_email",params:{target_email:e}})}}return e.prototype.model=ve,e.prototype.apiEndPoint="profile",e}.call(void 0),we=function(){class e extends k{}return e.singular="searchResult",e.plural="searchResults",e.indicies=["groupId"],e}.call(void 0),xe=function(){class e extends w{}return e.prototype.model=we,e.prototype.apiEndPoint="search",e}.call(void 0),ke=function(){class e extends k{relationships(){return this.belongsTo("discussion"),this.belongsTo("comment"),this.belongsTo("poll"),this.belongsTo("author",{from:"users",by:"whodunnit"})}editedAttributeNames(){return(0,l.filter)((0,l.keys)(this.changes).sort(),(function(e){return(0,l.includes)(["title","name","description","closing_at","private","document_ids"],e)}))}attributeEdited(e){return(0,l.includes)((0,l.keys)(this.changes),e)}authorName(){if(this.author())return this.author().nameWithTitle(this.model().group())}model(){return this.recordStore[`${this.itemType.toLowerCase()}s`].find(this.itemId)}isCurrent(){return this.index===this.model().versionsCount-1}isOriginal(){return 0===this.index}authorOrEditorName(){return this.isOriginal()?this.model().authorName():this.authorName()}}return e.singular="version",e.plural="versions",e.indices=["discussionId"],e}.call(void 0),Ce=function(){class e extends w{fetchVersion(e,t,o={}){var s;return s=e.constructor.singular,this.fetch({params:{[`${s}_id`]:e.id,index:t}})}}return e.prototype.model=ke,e}.call(void 0),Ze=function(){class e extends k{}return e.singular="translation",e.plural="translations",e.indices=["id"],e}.call(void 0),Ie=function(){class e extends w{fetchTranslation(e,t){return this.fetch({path:"inline",params:{model:e.constructor.singular,id:e.id,to:t}})}}return e.prototype.model=Ze,e}.call(void 0),Ae=function(){class e extends k{}return e.singular="session",e.plural="sessions",e.serializableAttributes=["type","code","email","password","rememberMe"],e.serializationRoot="user",e}.call(void 0),$e=function(){class e extends w{}return e.prototype.model=Ae,e}.call(void 0),Se=function(){class e extends k{}return e.singular="registration",e.plural="registrations",e.serializableAttributes=["name","email","password","passwordConfirmation","recaptcha","legalAccepted","emailNewsletter"],e.serializationRoot="user",e}.call(void 0),Ne=function(){class e extends w{}return e.prototype.model=Se,e}.call(void 0),Te=o(12383),je=o(77349),Pe=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},Oe=function(){class e extends k{constructor(){super(...arguments),this.close=this.close.bind(this),this.reopen=this.reopen.bind(this),this.addToThread=this.addToThread.bind(this),this.addOption=this.addOption.bind(this)}afterConstruction(){return C.apply(this,{showTitle:!0}),Z.apply(this)}config(){return i.pollTypes[this.pollType]}i18n(){return i.pollTypes[this.pollType].i18n}pollTypeKey(){return`poll_types.${this.pollType}`}poll(){return this}defaultValues(){return{discussionId:null,title:"",titlePlaceholder:null,closingAt:null,customize:!1,details:"",detailsFormat:"html",decidedVotersCount:0,defaultDurationInDays:null,specifiedVotersOnly:!1,pollOptionNames:[],pollType:"proposal",chartColumn:null,chartType:null,minScore:null,maxScore:null,minimumStanceChoices:null,maximumStanceChoices:null,dotsPerPerson:null,canRespondMaybe:!0,meetingDuration:null,limitReasonLength:!0,stanceReasonRequired:"optional",reasonPrompt:null,files:[],imageFiles:[],attachments:[],linkPreviews:[],notifyOnClosingSoon:"undecided_voters",results:[],pollOptionIds:[],pollOptionNameFormat:null,recipientMessage:null,recipientAudience:null,recipientUserIds:[],recipientChatbotIds:[],recipientEmails:[],notifyRecipients:!0,shuffleOptions:!1,tags:[],hideResults:"off",stanceCounts:[]}}clonePoll(){var e;return e=this.clone(),e.id=null,e.key=null,e.sourceTemplateId=this.id,e.authorId=Rt.user().id,e.groupId=null,e.discussionId=null,e.template=!1,e.closingAt=(0,Te.Z)((0,je.Z)(new Date,this.defaultDurationInDays||7)),this.pollOptionsAttributes?e.pollOptionsAttributes=this.pollOptionsAttributes:e.pollOptionsAttributes=this.pollOptions().map((e=>({name:e.name,meaning:e.meaning,prompt:e.prompt,icon:e.icon}))),e.closedAt=null,e.createdAt=null,e.updatedAt=null,e.decidedVotersCount=null,e.undecidedVotersCount=null,e}clonePollOptions(){return this.pollOptions().map((e=>({id:e.id,name:e.name,meaning:e.meaning,prompt:e.prompt,icon:e.icon})))}defaulted(e){return null===this[e]?i.pollTypes[this.pollType].defaults[(0,l.snakeCase)(e)]:this[e]}audienceValues(){return{name:this.group().name}}relationships(){return this.belongsTo("author",{from:"users"}),this.belongsTo("discussion"),this.belongsTo("group"),this.hasMany("stances"),this.hasMany("versions")}pieSlices(){var e,t,o;return o=[],"count"===this.pollType?(e=this.results.find((e=>"agree"===e.icon)),e.score<this.agreeTarget?(t=parseFloat(e.score)/parseFloat(this.agreeTarget)*100,o.push({value:t,color:e.color}),o.push({value:100-t,color:"#ddd"})):o.push({value:100,color:e.color})):o=this.results.filter((e=>e[this.chartColumn])).map((e=>({value:e[this.chartColumn],color:e.color}))),o}pollOptions(){var e;return e=this.recordStore.pollOptions.collection.chain().find({pollId:this.id,id:{$in:this.pollOptionIds}}).data(),(0,l.orderBy)(e,"priority")}pollOptionsForVoting(){return this.shuffleOptions?(0,l.shuffle)(this.pollOptions()):this.pollOptions()}bestNamedId(){return(this.id&&this||this.discusionId&&this.discussion()||this.groupId&&this.group()||{namedId:function(){}}).namedId()}voters(){return this.latestStances().map((function(e){return e.participant()}))}members(){return(this.group()&&this.group().members()||[]).concat(this.voters())}participantIds(){return(0,l.compact)((0,l.flatten)([this.authorId],(0,l.map)(this.stances(),"participantId")))}adminsInclude(e){var t;return t=this.stanceFor(e),this.authorId===e.id&&!this.groupId||this.authorId===e.id&&this.groupId&&this.group().membersInclude(e)||this.authorId===e.id&&this.discussionId&&this.discussion().membersInclude(e)||t&&t.admin||this.discussionId&&this.discussion().adminsInclude(e)||this.group().adminsInclude(e)}votersInclude(e){return specifiedVotersOnly?this.stanceFor(e):this.membersInclude(e)}membersInclude(e){return this.stanceFor(e)||this.discussionId&&this.discussion().membersInclude(e)||this.group().membersInclude(e)}stanceFor(e){return e.id===i.currentUserId?this.myStance():(0,l.head)((0,l.orderBy)(this.recordStore.stances.find({pollId:this.id,participantId:e.id,latest:!0,revokedAt:null}),"createdAt","desc"))}myStance(){return this.recordStore.stances.find({id:this.myStanceId,revokedAt:null})[0]}iHaveVoted(){return this.myStanceId&&this.myStance()&&this.myStance().castAt}showResults(){return!!this.closingAt&&function(){switch(this.hideResults){case"until_closed":return this.closedAt;case"until_vote":return this.closedAt||this.iHaveVoted();default:return!0}}.call(this)}optionsDiffer(e){return!(0,l.isEqual)((0,l.sortBy)(this.pollOptionNames),(0,l.sortBy)((0,l.map)(e,"name")))}iCanVote(){return this.isVotable()&&(this.myStance()||!this.specifiedVotersOnly&&this.membersInclude(Rt.user()))}isBlank(){return""===this.details||null===this.details||"<p></p>"===this.details}authorName(){return this.author().nameWithTitle(this.group())}reactions(){return this.recordStore.reactions.find({reactableId:this.id,reactableType:"Poll"})}decidedVoterIds(){return(0,l.uniq)((0,l.flatten)(this.results.map((function(e){return e.voter_ids}))))}decidedVoters(){return this.recordStore.users.find(this.decidedVoterIds())}outcome(){return this.recordStore.outcomes.find({pollId:this.id,latest:!0})[0]}createdEvent(){return this.recordStore.events.find({eventableId:this.id,kind:"poll_created"})[0]}latestStances(e="-createdAt",t){return(0,l.slice)((0,l.sortBy)(this.recordStore.stances.find({pollId:this.id,latest:!0,revokedAt:null}),e),0,t)}latestCastStances(){return this.recordStore.stances.collection.chain().find({pollId:this.id,latest:!0,revokedAt:null,castAt:{$ne:null}}).data()}isVotable(){return!this.discardedAt&&this.closingAt&&null==this.closedAt}isClosed(){return null!=this.closedAt}close(){return Pe(this,e),this.processing=!0,this.remote.postMember(this.key,"close").finally((()=>this.processing=!1))}reopen(){return Pe(this,e),this.processing=!0,this.remote.postMember(this.key,"reopen",{poll:{closing_at:this.closingAt}}).finally((()=>this.processing=!1))}addToThread(t){return Pe(this,e),this.processing=!0,this.remote.patchMember(this.keyOrId(),"add_to_thread",{discussion_id:t}).finally((()=>this.processing=!1))}notifyAction(){return this.isNew()?"publish":"edit"}translatedPollType(){return M.t(`poll_types.${this.pollType}`)}translatedPollTypeCaps(){return M.t(`decision_tools_card.${this.pollType}_title`)}addOption(t){return Pe(this,e),!(this.pollOptionNames.includes(t)||!t)&&(this.pollOptionNames.push(t),"meeting"===this.pollType&&this.pollOptionNames.sort(),t)}hasVariableScore(){return this.defaulted("minScore")!==this.defaulted("maxScore")}singleChoice(){var e;return this.defaulted("minimumStanceChoices")===(e=this.defaulted("maximumStanceChoices"))&&1===e}hasOptionIcon(){return this.config().has_option_icon}datesAsOptions(){return"iso8601"===this.pollOptionNameFormat}removeOrphanOptions(){return this.pollOptions().forEach((e=>{if(!this.pollOptionNames.includes(e.name))return e.remove()}))}}return e.singular="poll",e.plural="polls",e.uniqueIndices=["id","key"],e.indices=["discussionId","authorId","groupId"],e}.call(void 0),Re=function(){class e extends w{fetchFor(e,t={}){return t[`${e.constructor.singular}_key`]=e.key,this.search(t)}search(e={}){return this.fetch({path:"search",params:e})}searchResultsCount(e={}){return this.fetch({path:"search_results_count",params:e})}}return e.prototype.model=Oe,e}.call(void 0),qe=function(){class e extends k{config(){return i.pollTypes[this.pollType]}defaultValues(){return{anonymous:!1,groupId:null,title:"",details:"",detailsFormat:"html",defaultDurationInDays:7,specifiedVotersOnly:!1,pollType:null,chartType:null,minScore:null,maxScore:null,minimumStanceChoices:null,maximumStanceChoices:null,dotsPerPerson:null,canRespondMaybe:!0,meetingDuration:null,limitReasonLength:!0,stanceReasonRequired:"optional",tags:[],files:[],imageFiles:[],attachments:[],linkPreviews:[],notifyOnClosingSoon:"undecided_voters",reasonPrompt:null,processName:null,processSubtitle:null,processIntroduction:null,processIntroductionFormat:"html",processUrl:null,pollOptions:[],pollOptionNameFormat:"plain",shuffleOptions:!1,hideResults:"off",position:0}}relationships(){return this.belongsTo("author",{from:"users"}),this.belongsTo("group")}buildPoll(){var e;return e=this.recordStore.polls.build(),Object.keys(this.defaultValues()).forEach((t=>"title"===t?e["titlePlaceholder"]=this[t]:e[t]=this[t])),e.pollTemplateId=this.id,e.pollTemplateKey=this.key,e.authorId=Rt.user().id,e.closingAt=(0,Te.Z)((0,je.Z)(new Date,this.defaultDurationInDays)),e.pollOptionsAttributes=this.pollOptionsAttributes(),e}pollOptionsAttributes(){return this.pollOptions.map((function(e){return{name:e.name,meaning:e.meaning,prompt:e.prompt,icon:e.icon}}))}}return e.singular="pollTemplate",e.plural="pollTemplates",e.uniqueIndices=["id","key"],e.indices=["groupId"],e}.call(void 0),Me=function(){class e extends w{}return e.prototype.model=qe,e}.call(void 0),Ee=o(61436),Le=o(76972),De=o(12195),Fe=o(60792),Ue=o(34117),ze=o(69599),Be=o(35077);M.dateLocale=Be.Z;var Ve,He=function(e,t=i.timeZone,o=Rt.user().dateTimePref){var s,n;if(!(0,Ee.Z)(e))throw{"invalid date":"invalid date",date:e};if(s=function(o){return(0,Ue.Z)((0,ze.Z)(e,t),o,{timeZone:t,locale:M.dateLocale})},n=new Date,(0,Le.Z)(n,e)<24)return(0,De.Z)(e,new Date,{addSuffix:!0,locale:M.dateLocale});if((0,Fe.Z)(e,n))return(0,Ue.Z)(e,"MMMM d",{locale:M.dateLocale});switch(o){case"day_iso":case"iso":return s("yyyy-MM-dd");case"abbr":case"day_abbr":return s("d LLL yyyy");default:return console.error("unknown date pref")}},Ge=function(e,t=i.timeZone,o=Rt.user().dateTimePref){var s,n,r;if(!(0,Ee.Z)(e))throw{"invalid date":"invalid date",date:e};switch(r=function(){var o;return o=parseInt((0,Ue.Z)((0,ze.Z)(e,t),"h",{timeZone:t,locale:M.dateLocale}))<10,o?" ":""},n=function(){var o;return o=parseInt((0,Ue.Z)((0,ze.Z)(e,t),"d",{timeZone:t,locale:M.dateLocale}))<10,o?" ":""},s=function(o){return(0,Ue.Z)((0,ze.Z)(e,t),o,{timeZone:t,locale:M.dateLocale})},o){case"day_iso":return s("E yyyy-MM-dd HH:mm");case"abbr":return s(`${n()}d LLL yyyy ${r()}h:mma`);case"day_abbr":return s(`E ${n()}d LLL yyyy ${r()}h:mma`);case"iso":return s("yyyy-MM-dd HH:mm");default:return console.error("unknown date pref")}},We=function(){return["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","23:59"]},Ke=function(e){return(0,Ue.Z)(e,"yyyy-MM-dd")},Ye=function(){return Rt.user().dateTimePref.includes("abbr")?"h:mm a":"HH:mm"},Qe=function(){class e extends k{defaultValues(){return{voterScores:{},name:null,icon:null,meaning:null,prompt:null,priority:null,_destroy:null}}relationships(){return this.belongsTo("poll")}stances(){return this.poll().latestStances().filter((e=>e.pollOptionIds().includes(this.id)))}beforeRemove(){return this.stances().forEach((function(e){return e.remove()}))}optionName(){var e;switch(e=this.poll(),e.pollOptionNameFormat){case"plain":return this.name;case"i18n":return M.t("poll_"+e.pollType+"_options."+this.name);case"iso8601":return Ge((0,m.Z)(this.name));default:return console.error("unsupported option format",e.pollOptionNameFormat)}}}return e.singular="pollOption",e.plural="pollOptions",e.indices=["pollId"],e.uniqueIndices=["id"],e.serializableAttributes=["id","name","icon","priority","meaning","prompt"],e}.call(void 0),Je=function(){class e extends w{}return e.prototype.model=Qe,e}.call(void 0);Ve=new Date("2020-08-11");var Xe,et=function(){class e extends k{afterConstruction(){return Z.apply(this)}defaultValues(){return{reason:"",reasonFormat:"html",files:[],imageFiles:[],attachments:[],linkPreviews:[],revokedAt:null,participantId:null,pollId:null,optionScores:{},castAt:null}}relationships(){return this.belongsTo("poll"),this.belongsTo("participant",{from:"users"})}edited(){return this.createdAt>Ve?this.versionsCount>2:this.versionsCount>1}discussion(){return this.poll().discussion()}participantName(){return this.participant()?this.participant().nameWithTitle(this.poll().group()):M.t("common.anonymous")}reactions(){return this.recordStore.reactions.find({reactableId:this.id,reactableType:"Stance"})}singleChoice(){return this.poll().singleChoice()}hasOptionIcon(){return this.poll().config().has_option_icon}participantIds(){return this.poll().participantIds()}memberIds(){return this.poll().memberIds()}group(){return this.poll().group()}isBlank(){return""===this.reason||null===this.reason||"<p></p>"===this.reason}author(){return this.participant()}stanceChoice(){return(0,l.head)(this.sortedChoices())}pollOption(){if(this.pollOptionId())return this.recordStore.pollOptions.find(this.pollOptionId())}pollOptionId(){return this.pollOptionIds()[0]}pollOptionIds(){return(0,l.map)(Object.keys(this.optionScores),l.parseInt)}pollOptions(){return this.recordStore.pollOptions.find(this.pollOptionIds())}choose(e){return this.optionScores={},(0,l.compact)((0,l.flatten)([e])).forEach((function(e){return this.optionScores[e]=1})),this}sortedChoices(){var e,t,o;return t={},this.pollOptions().forEach((function(e){return t[e.id]=e})),o=this.poll(),e=(0,l.map)(this.optionScores,((e,s)=>({score:e,rank:"ranked_choice"===o.pollType&&o.minimumStanceChoices-e+1,show:e>0||"score"===o.pollType,pollOption:t[s]}))),e=e.filter((function(e){return e.pollOption})),"meeting"===o.pollType?(0,l.sortBy)(e,(function(e){return e.pollOption.priority})):(0,l.sortBy)(e,"-score")}votedFor(e){return(0,l.includes)((0,l.map)(this.pollOptions(),"id"),e.id)}scoreFor(e){return this.optionScores[e.id]||0}totalScore(){return(0,l.sumBy)(this.sortedChoices(),"score")}}return e.singular="stance",e.plural="stances",e.indices=["pollId","latest","participantId"],e.uniqueIndices=["id"],e}.call(void 0),tt=function(){class e extends w{}return e.prototype.model=et,e}.call(void 0),ot=function(){class e extends k{defaultValues(){return{statement:"",statementFormat:"html",calendarInvite:!1,eventSummary:null,eventDescription:null,includeActor:!1,files:[],imageFiles:[],attachments:[],linkPreviews:[],recipientUserIds:[],recipientChatbotIds:[],recipientEmails:[],recipientAudience:null,notifyRecipients:!0,groupId:null,reviewOn:null}}afterConstruction(){return C.apply(this),Z.apply(this)}relationships(){return this.belongsTo("author",{from:"users"}),this.belongsTo("poll"),this.belongsTo("group"),this.belongsTo("pollOption")}reactions(){return this.recordStore.reactions.find({reactableId:this.id,reactableType:(0,l.capitalize)(this.constructor.singular)})}authorName(){return this.author().nameWithTitle(this.poll().group())}isBlank(){return""===this.statement||null===this.statement||"<p></p>"===this.statement}members(){return this.poll().members()}membersInclude(e){return this.poll().membersInclude(e)}adminsInclude(e){return this.poll().adminsInclude(e)}participantIds(){return this.poll().participantIds()}memberIds(){return this.poll().memberIds()}announcementSize(){return this.poll().announcementSize(this.notifyAction())}discussion(){return this.poll().discussion()}notifyAction(){return"publish"}bestNamedId(){return(this.id&&this||this.pollId&&this.poll()||this.groupId&&this.group()||{namedId:function(){}}).namedId()}}return e.singular="outcome",e.plural="outcomes",e.indices=["pollId","authorId"],e.uniqueIndices=["id"],e}.call(void 0),st=function(){class e extends w{}return e.prototype.model=ot,e}.call(void 0),nt=function(){class e extends k{}return e.singular="contactMessage",e.plural="contactMessages",e.serializableAttributes=["email","subject","user_id","message","name"],e}.call(void 0),it=function(){class e extends w{}return e.prototype.model=nt,e}.call(void 0),rt=function(){class e extends k{relationships(){return this.belongsTo("user")}model(){return this.recordStore[`${this.reactableType.toLowerCase()}s`].find(this.reactableId)}}return e.singular="reaction",e.plural="reactions",e.indices=["userId","reactableId","reactableType"],e.lazyLoad=!0,e}.call(void 0),at=function(){class e extends w{}return e.prototype.model=rt,e}.call(void 0),lt=function(){class e extends k{defaultValues(){return{message:""}}}return e.singular="contactRequest",e.plural="contactRequests",e}.call(void 0),ct=function(){class e extends w{}return e.prototype.model=lt,e}.call(void 0),ut=function(){class e extends k{relationships(){return this.belongsTo("author",{from:"users",by:"authorId"}),this.belongsTo("group")}model(){return this.recordStore[`${this.modelType.toLowerCase()}s`].find(this.modelId)}modelTitle(){switch(this.modelType){case"Group":return this.model().name;case"Discussion":return this.model().title;case"Outcome":return this.model().poll().title;case"Comment":return this.model().discussion().title;case"Poll":return this.model().title}}authorName(){if(this.author())return this.author().nameWithTitle(this.model().group())}isAnImage(){return"image"===this.icon}}return e.singular="document",e.plural="documents",e.indices=["modelId","authorId"],e}.call(void 0),dt=function(){class e extends w{fetchByModel(e){return this.fetch({params:{[`${e.constructor.singular}_id`]:e.id}})}fetchByDiscussion(e){return this.fetch({path:"for_discussion",params:{discussion_key:e.key}})}}return e.prototype.model=ut,e}.call(void 0),pt=function(){class e extends k{model(){return this.recordStore[this.constructor.eventTypeMap[this.recordType]].find(this.recordId)}group(){return this.model().group()}relationships(){return this.belongsTo("author",{from:"users"})}isAnImage(){return"image"===this.icon}}return e.singular="attachment",e.plural="attachments",e.indices=["recordType","recordId"],e.eventTypeMap={Group:"groups",Discussion:"discussions",Poll:"polls",Outcome:"outcomes",Stance:"stances",Comment:"comments",CommentVote:"comments",Membership:"memberships",MembershipRequest:"membershipRequests"},e}.call(void 0),mt=function(){class e extends w{}return e.prototype.model=pt,e}.call(void 0),ht=function(){class e extends w{fetchToken(e){return this.remote.post("",{email:e})}}return e.prototype.model={singular:"login_token",plural:"login_tokens"},e}.call(void 0),_t=function(){class e extends w{}return e.prototype.apiEndpoint="message_channel",e.prototype.model={singular:"message_channel",plural:"message_channel"},e}.call(void 0),ft=o(56403);Xe=Object.keys(ft.Z).filter((function(e){return"shades"!==e})).map((function(e){return ft.Z[e]["base"]}));var gt,vt,bt=function(){class e extends k{defaultValues(){return{color:Xe[Math.floor(Math.random()*Xe.length)]}}relationships(){return this.belongsTo("group")}}return e.singular="tag",e.plural="tags",e.uniqueIndices=["id"],e.indices=["groupId"],e.serializableAttributes=["groupId","color","name"],e.colors=Xe,e}.call(void 0),yt=function(){class e extends w{}return e.prototype.model=bt,e}.call(void 0),wt=function(){class e extends k{relationships(){return this.belongsToPolymorphic("record")}toggleDone(){return this.done?this.remote.postMember(this.id,"mark_as_not_done"):this.remote.postMember(this.id,"mark_as_done")}}return e.singular="task",e.plural="tasks",e.indices=["authorId"],e}.call(void 0),xt=function(){class e extends w{}return e.prototype.model=wt,e}.call(void 0),kt=function(){class e extends k{defaultValues(){return{id:null,name:null,description:null,groupId:null,demoHandle:null}}relationships(){return this.belongsTo("group"),this.belongsTo("author",{from:"users"})}}return e.singular="demo",e.plural="demos",e.uniqueIndices=["id"],e.indices=["groupId","authorId"],e}.call(void 0),Ct=function(){class e extends w{}return e.prototype.model=kt,e}.call(void 0),Zt=function(){class e extends k{defaultValues(){return{name:null,url:null,format:"markdown",eventKinds:[],permissions:[],includeBody:!0,errors:{}}}relationships(){return this.belongsTo("group")}}return e.singular="webhook",e.plural="webhooks",e}.call(void 0),It=function(){class e extends w{}return e.prototype.model=Zt,e}.call(void 0);gt=new y("default.db"),vt=new _(gt),vt.addRecordsInterface(A),vt.addRecordsInterface(S),vt.addRecordsInterface(Ct),vt.addRecordsInterface(z),vt.addRecordsInterface(V),vt.addRecordsInterface(W),vt.addRecordsInterface(Q),vt.addRecordsInterface(ee),vt.addRecordsInterface(oe),vt.addRecordsInterface(ge),vt.addRecordsInterface(ye),vt.addRecordsInterface(xe),vt.addRecordsInterface(Ce),vt.addRecordsInterface(Ie),vt.addRecordsInterface($e),vt.addRecordsInterface(Ne),vt.addRecordsInterface(Re),vt.addRecordsInterface(Me),vt.addRecordsInterface(Je),vt.addRecordsInterface(tt),vt.addRecordsInterface(st),vt.addRecordsInterface(it),vt.addRecordsInterface(at),vt.addRecordsInterface(ct),vt.addRecordsInterface(dt),vt.addRecordsInterface(mt),vt.addRecordsInterface(ht),vt.addRecordsInterface(_t),vt.addRecordsInterface(yt),vt.addRecordsInterface(xt),vt.addRecordsInterface(It),i.records=vt;var At,$t,St,Nt,Tt,jt=vt,Pt=class{static shareableLink(e){return e.isA("group")?this.buildModelRoute("",e.token,"",{},{namespace:"join/group",absolute:!0}):this.route({model:e,options:{absolute:!0}})}static route({model:e,action:t,params:o,options:s}){return null!=e&&null!=t?this[e.constructor.singular](e,{},{noStub:!0})+this.routePath(t):null!=e?this[e.constructor.singular](e,o,s):this.routePath(t)}static routePath(e){return"/".concat(e).replace("//","/")}static group(e,t={},o={}){return null==e.handle||o.noStub?this.buildModelRoute("g",e.key,e.fullName,t,o):this.buildModelRoute("",e.handle,"",t,o)}static discussion(e,t={},o={}){var s;return s=o.print?null:o.action||e.title,this.buildModelRoute("d",e.key,s,t,o)}static discussionPoll(e,t={},o={}){return e.discussionId?this.event(e.createdEvent()):this.buildModelRoute("p",e.key,o.action||e.title,t,o)}static poll(e,t={},o={}){return this.buildModelRoute("p",e.key,o.action||e.title,t,o)}static outcome(e,t={},o={}){return this.poll(e.poll(),t,o)}static pollSearch(e={},t={}){return this.buildModelRoute("polls","",t.action,e,t)}static searchResult(e,t={},o={}){return this.discussion(e,t,o)}static user(e,t={},o={}){return this.buildModelRoute("u",e[o.key||"username"],null,t,o)}static comment(e,t={}){return this.route({model:e.discussion(),action:`comment/${e.id}`,params:t})}static membership(e,t={},o={}){return this.route({model:e.group(),action:"memberships",params:t})}static membershipRequest(e,t={},o={}){return this.route({model:e.group(),action:"membership_requests",params:t})}static event(e,t={},o={}){return this.discussion(e.discussion(),t,o)+`/${e.sequenceId}`}static buildModelRoute(e,t,o,s,n){var r;return r=n.absolute?i.baseUrl:"/",(n.namespace||e||"").length>0&&(r+=`${n.namespace||e}/`),r+=`${t}`,null!=o&&null==n.noStub&&(r+="/"+this.stub(o)),null!=n.ext&&(r+="."+n.ext),(0,l.keys)(s).length&&(r+="?"+this.queryStringFor(s)),r}static stub(e){return e.replace(/[^a-z0-9\-_]+/gi,"-").replace(/-+/g,"-").toLowerCase()}static queryStringFor(e={}){return(0,l.map)(e,(function(e,t){return`${t}=${e}`})).join("&")}},Ot=function(e){return e?window.location.href=e:window.location.reload()};St=["en"],Tt=function(e){return M.locale=e,document.querySelector("html").setAttribute("lang",e)},Nt=function(e){return e.replace("-","_")},At=function(e){return e.startsWith("nl")?"nl":e.replace("_","-")},$t=function(e){if(M.locale!==e)return St.includes(e)?Tt(e):(o(37052)(`./${At(e)}/index.js`).then((function(e){return M.dateLocale=e})),o(725)(`./client.${Nt(e)}.yml`).then((function(t){return t=t[e],St.push(e),M.setLocaleMessage(e,t),Tt(e),D.$emit("VueForceUpdate")})))};var Rt=new class{returnTo(){var e;return e=new URL(window.location.href),e.pathname+e.search}defaultFormat(){return this.user().experiences["html-editor.uses-markdown"]?"md":"html"}apply(e){var t;return s.ZP.set(i,"currentUserId",e.current_user_id),s.ZP.set(i,"pendingIdentity",e.pending_identity),jt.importJSON(e),this.userId=e.current_user_id,t=this.user(),this.updateLocale(t.locale),this.isSignedIn()&&(t.timeZone!==i.timeZone&&(t.timeZone=i.timeZone,jt.users.updateProfile(t)),D.$emit("signedIn",t)),t}signOut(){return i.currentUserId=null,jt.sessions.remote.destroy("").then((function(){return Ot("/")}))}isSignedIn(){return i.currentUserId&&null==this.user().restricted}user(){return jt.users.find(i.currentUserId)||jt.users.build()}currentGroupId(){return null!=this.currentGroup&&this.currentGroup.id}updateLocale(e){return $t(e)}providerIdentity(){var e;if(i.pendingIdentity)return e=i.identityProviders.map((function(e){return e.name})),e.includes(i.pendingIdentity.identity_type)?i.pendingIdentity:void 0}};s.ZP.use(r.Z),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;var qt,Mt=new r.Z({iconfont:"mdi",theme:{dark:!1,options:{customProperties:!0}}}),Et=function(){var e=this,t=e._self._c;return t("div",{staticClass:"loading-content"},e._l(e.blocks,(function(o,s){return t("div",{key:s,staticClass:"loading-content__background-wrapper"},e._l(e.lines,(function(e,o){return t("div",{key:o,staticClass:"loading-content__background"})})),0)})),0)},Lt=[],Dt={props:{blockCount:Number,lineCount:Number},computed:{blocks:function(){return new Array(this.blockCount||1)},lines:function(){return new Array(this.lineCount||3)}}},Ft=Dt,Ut=o(1001),zt=(0,Ut.Z)(Ft,Et,Lt,!1,null,null,null),Bt=zt.exports,Vt=function(){var e=this,t=e._self._c;return t("span",{style:e.styles},[e.poll.closingAt?t("abbr",{staticClass:"closing-in timeago--inline"},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:e.translationKey,args:{time:e.timeMethod(e.time)}},expression:"{ path: translationKey, args: { time: timeMethod(time) } }"}],attrs:{title:e.exact(e.time)}})]):t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_wip_field.past_tense",expression:"'poll_common_wip_field.past_tense'"}]})])},Ht=[],Gt={props:{poll:Object,approximate:Boolean},methods:{exact:Ge,timeMethod:function(){return this.approximate?He(this.time):Ge(this.time)}},computed:{time:function(){var e;return e=this.poll.isVotable()?"closingAt":"closedAt",this.poll[e]},translationKey:function(){return this.poll.isVotable()?"common.closing_in":"common.closed_ago"},color:function(){return this.poll.isVotable()?(0,Le.Z)(this.poll.closingAt,new Date)<48?"warning":"":"error"},styles:function(){return this.color?{color:"var(--v-"+this.color+"-base)"}:{}}}},Wt=Gt,Kt=(0,Ut.Z)(Wt,Vt,Ht,!1,null,null,null),Yt=Kt.exports,Qt=o(81243),Jt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-stance-icon",style:{width:e.size+"px",height:e.size+"px"},attrs:{"aria-hidden":"true"}},[e.stance&&e.stance.castAt&&e.pollOption?[e.hasOptionIcon?t("div",{staticClass:"poll-common-chart-preview__stance",class:"poll-proposal-chart-preview__stance--"+e.pollOption.icon}):e._e(),e.hasOptionIcon?e._e():[t("div",{staticClass:"poll-common-chart-preview__stance"},["meeting"!=e.poll.pollType?t(Qt.Z,{attrs:{small:"",color:e.pollOption.color}},[e._v("mdi-check")]):t(Qt.Z,{attrs:{small:""}},[e._v("mdi-check")])],1)]]:t("div",{staticClass:"poll-common-chart-preview__stance poll-proposal-chart-preview__stance--undecided"},[t(Qt.Z,{attrs:{size:e.size-e.size/4,color:"primary"}},[e._v("mdi-help")])],1)],2)},Xt=[],eo={props:{stance:Object,poll:Object,size:{type:Number,default:20}},computed:{hasOptionIcon:function(){return this.poll.config().has_option_icon},pollOption:function(){return this.stance.pollOption()}}},to=eo,oo=(0,Ut.Z)(to,Jt,Xt,!1,null,null,null),so=oo.exports,no=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-chart-preview",style:{width:e.size+"px",height:e.size+"px"},attrs:{"aria-hidden":"true"}},["bar"==e.poll.chartType?t("bar-icon",{attrs:{poll:e.poll,size:e.size}}):e._e(),"pie"==e.poll.chartType?t("pie-icon",{attrs:{slices:e.slices,size:e.size}}):e._e(),"grid"==e.poll.chartType?t("grid-icon",{attrs:{poll:e.poll,size:e.size}}):e._e(),e.showMyStance&&(e.myStance||e.poll.iCanVote())?t("div",{staticClass:"poll-common-chart-preview__stance-container"},[t(so,{attrs:{poll:e.poll,stance:e.myStance,size:e.stanceSize}})],1):e._e()],1)},io=[],ro=function(){var e=this,t=e._self._c;return t("div",{ref:"svg",staticClass:"bar-chart",style:{height:e.size+"px",width:e.size+"px"}})},ao=[],lo=o(97830),co=o.n(lo),uo={props:{size:Number,poll:Object},data:function(){return{svgEl:null,shapes:[]}},computed:{stanceCounts:function(){return this.poll.stanceCounts},scoreData:function(){return(0,l.take)((0,l.map)(this.stanceCounts,(function(e,t){return{color:i.pollColors.poll[t],index:t,score:e}})),5)},scoreMaxValue:function(){return(0,l.max)((0,l.map)(this.scoreData,(function(e){return e.score})))}},methods:{draw:function(){return this.scoreData.length>0&&this.scoreMaxValue>0?this.drawChart():this.drawPlaceholder()},drawPlaceholder:function(){var e,t;return(0,l.each)(this.shapes,(function(e){return e.remove()})),e=this.size/3,t={0:this.size,1:2*this.size/3,2:this.size/3},(0,l.each)(t,((t,o)=>this.svgEl.rect(t,e-2).fill("#ebebeb").x(0).y(o*e)))},drawChart:function(){var e;return(0,l.each)(this.shapes,(function(e){return e.remove()})),e=this.size/this.scoreData.length,(0,l.map)(this.scoreData,(t=>{var o;return o=(0,l.max)([this.size*t.score/this.scoreMaxValue,2]),this.svgEl.rect(o,e-2).fill(t.color).x(0).y(t.index*e)}))}},watch:{stanceCounts:function(){return this.draw()}},mounted:function(){return this.svgEl=co()(this.$refs.svg).size("100%","100%"),this.draw()}},po=uo,mo=(0,Ut.Z)(po,ro,ao,!1,null,null,null),ho=mo.exports,_o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-proposal-chart",style:{width:e.size+"px",height:e.size+"px"}})},fo=[],go={props:{slices:Array,size:Number},data:function(){return{svgEl:null,shapes:[]}},computed:{radius:function(){return this.size/2}},methods:{arcPath:function(e,t){var o,s,n,i,r;return o=Math.PI/180,s=this.radius+this.radius*Math.cos(-e*o),n=this.radius+this.radius*Math.cos(-t*o),i=this.radius+this.radius*Math.sin(-e*o),r=this.radius+this.radius*Math.sin(-t*o),["M",this.radius,this.radius,"L",s,i,"A",this.radius,this.radius,0,+(t-e>180),0,n,r,"z"].join(" ")},draw:function(){var e;switch(this.shapes.forEach((function(e){return e.remove()})),e=90,this.slices.length){case 0:return this.shapes.push(this.svgEl.circle(this.size).attr({"stroke-width":0,fill:"#BBBBBB"}));case 1:return(0,l.each)(this.slices,(e=>this.shapes.push(this.svgEl.circle(this.size).attr({"stroke-width":0,fill:e.color}))));default:return(0,l.each)(this.slices,(t=>{var o;return o=360*t.value/100,this.shapes.push(this.svgEl.path(this.arcPath(e,e+o)).attr({"stroke-width":0,fill:t.color})),e+=o}))}}},watch:{slices:function(){return this.draw()}},mounted:function(){return this.svgEl=co()(this.$el).size("100%","100%"),this.draw()},beforeDestroy:function(){return this.svgEl.clear(),delete this.shapes}},vo=go,bo=(0,Ut.Z)(vo,_o,fo,!1,null,null,null),yo=bo.exports,wo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-icon-grid d-flex align-center justify-center"},[e.voterIds.length?t("table",e._l(e.results,(function(o){return t("tr",{key:o.id},e._l(e.voterIds,(function(s){return t("td",{key:s},[t("div",{staticClass:"poll-meeting-icon__cell",class:e.classForScore(o.voter_scores[s]),style:{height:e.cellSize+"px",width:e.cellSize+"px"}},[e._v("Â ")])])})),0)})),0):e._e(),0==e.voterIds.length?t("table",e._l(e.results,(function(o){return t("tr",{key:o.id},e._l(e.results,(function(o){return t("td",{key:o.id},[t("div",{staticClass:"poll-meeting-icon__cell poll-meeting-chart__cell--empty",style:{height:e.cellSize+"px",width:e.cellSize+"px"}},[e._v("Â ")])])})),0)})),0):e._e()])},xo=[],ko={props:{poll:Object,size:Number},created:function(){return this.watchRecords({collections:["pollOptions"],query:e=>{var t;return t=10,this.results=(0,l.slice)(this.poll.results,0,t),this.voterIds=(0,l.slice)(this.poll.decidedVoterIds(),0,t)}})},computed:{cellHeight:function(){return this.size/this.results.length},cellWidth:function(){return this.size/this.voterIds.length},cellSize:function(){return this.cellHeight>this.cellWidth?this.cellWidth:this.cellHeight}},methods:{classForScore:function(e){switch(e){case 2:return"poll-meeting-chart__cell--yes";case 1:return"poll-meeting-chart__cell--maybe";case 0:return"poll-meeting-chart__cell--no";default:return"poll-meeting-chart__cell--empty"}}}},Co=ko,Zo=(0,Ut.Z)(Co,wo,xo,!1,null,null,null),Io=Zo.exports,Ao={components:{BarIcon:ho,PieIcon:yo,GridIcon:Io},props:{poll:Object,showMyStance:Boolean,stanceSize:Number({default:20}),size:{type:Number,default:40}},data:function(){return{slices:this.poll.pieSlices()}},watch:{"poll.stanceCounts":function(){return this.slices=this.poll.pieSlices()}},computed:{myStance:function(){return this.poll.myStance()},showPosition:function(){return"proposal count".split(" ").includes(this.poll.pollType)}}},$o=Ao,So=(0,Ut.Z)($o,no,io,!1,null,null,null),No=So.exports,To=function(){var e=this,t=e._self._c;return t("span",[e._v("Â ")])},jo=[],Po={},Oo=(0,Ut.Z)(Po,To,jo,!1,null,null,null),Ro=Oo.exports,qo=o(20154),Mo=function(){var e=this,t=e._self._c;return t("span",{staticClass:"tags-display"},e._l(e.tags,(function(o){return t(qo.Z,{key:o.id,staticClass:"ml-1 mb-1",class:{"mb-1":e.showCounts},attrs:{outlined:o.name!=e.selected,small:!e.smaller,xSmall:e.smaller,color:o.color,to:"/g/"+e.groupKey+"/tags/"+o.name}},[t("span",[e._v(e._s(o.name))]),e.showCounts?t("span",[t(Ro),t("span",[e._v(e._s(o.taggingsCount))])],1):e._e(),e.showOrgCounts?t("span",[t(Ro),t("span",[e._v(e._s(o.orgTaggingsCount))])],1):e._e()])})),1)},Eo=[],Lo={props:{model:Object,showCounts:Boolean,showOrgCounts:Boolean,selected:String,smaller:Boolean,selected:String},computed:{groupKey:function(){return this.model.group().key},byName:function(){var e;return e={},this.model.group().tags().forEach((function(t){return e[t.name]=t})),e},tags:function(){return this.model.isA("group")?this.model.tags():this.model.tags.map(((e,t)=>({id:t,name:e,color:(this.byName[e]||{}).color,taggingsCount:(this.byName[e]||{}).taggingsCount})))}}},Do=Lo,Fo=(0,Ut.Z)(Do,Mo,Eo,!1,null,null,null),Uo=Fo.exports,zo=o(82784),Bo=o(72612),Vo=o(86391),Ho=function(){var e=this,t=e._self._c;return t(zo.Z,{staticClass:"poll-common-preview",attrs:{to:e.link}},[t(Bo.Z,[t(No,{attrs:{poll:e.poll,"show-my-stance":""}})],1),t(Vo.km,[t(Vo.V9,[t("span",[e._v(e._s(e.poll.title))]),t(Uo,{attrs:{model:e.poll,smaller:""}})],1),t(Vo.oZ,[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_collapsed.by_who",args:{name:e.poll.authorName()}},expression:"{ path: 'poll_common_collapsed.by_who', args: { name: poll.authorName() } }"}]}),t(Ro),t("span",[e._v("Â·")]),t(Ro),e.displayGroupName&&e.poll.groupId?t("span",[t("span",[e._v(e._s(e.poll.group().name))]),t(Ro),t("span",[e._v("Â·")]),t(Ro)],1):e._e(),t(Yt,{attrs:{poll:e.poll,approximate:""}})],1)],1)],1)},Go=[],Wo=function(){var e=this,t=e._self._c;return e.poll.template?t(qo.Z,{attrs:{"x-small":e.smaller,small:!e.smaller,outlined:"",title:e.$t("templates.this_is_a_template_for_new_poll")}},[t("i",{staticClass:"mdi mdi-content-copy mr-1"}),t("span",{directives:[{name:"t",rawName:"v-t",value:"common.template",expression:"'common.template'"}]})]):e._e()},Ko=[],Yo={props:{poll:Object,smaller:Boolean}},Qo=Yo,Jo=(0,Ut.Z)(Qo,Wo,Ko,!1,null,null,null),Xo=Jo.exports,es={components:{TemplateBadge:Xo},props:{poll:Object,displayGroupName:Boolean},methods:{showGroupName:function(){return this.displayGroupName&&this.poll.groupId}},computed:{link:function(){return Pt.discussionPoll(this.poll)}}},ts=es,os=(0,Ut.Z)(ts,Ho,Go,!1,null,null,null),ss=os.exports,ns=o(85893),is=o(5255),rs=o(95519),as=function(){var e=this,t=e._self._c;return e.otherPolls.length||e.votePolls.length||e.loader.loading?t("div",{staticClass:"polls-panel"},[t(ns.Z,{staticClass:"mb-2"},[t(rs.Z,{attrs:{"two-line":"",avatar:""}},[[t(is.EB,{directives:[{name:"t",rawName:"v-t",value:"dashboard_page.polls_to_vote_on",expression:"'dashboard_page.polls_to_vote_on'"}]}),e._l(e.votePolls,(function(o){return e.votePolls.length?t(ss,{key:o.id,attrs:{poll:o}}):e._e()})),0==e.votePolls.length?t(is.ZB,{directives:[{name:"t",rawName:"v-t",value:"dashboard_page.no_polls_to_vote_on",expression:"'dashboard_page.no_polls_to_vote_on'"}]}):e._e()],e.otherPolls.length?[t(is.EB,{directives:[{name:"t",rawName:"v-t",value:"dashboard_page.recent_polls",expression:"'dashboard_page.recent_polls'"}]}),e._l(e.otherPolls,(function(e){return t(ss,{key:e.id,attrs:{poll:e}})}))]:e._e(),e.votePolls.length||e.otherPolls.length||!e.loader.loading?e._e():[t(is.EB,{directives:[{name:"t",rawName:"v-t",value:"group_page.polls",expression:"'group_page.polls'"}]}),e._l([1],(function(e,o){return t(Bt,{key:o,attrs:{lineCount:2}})}))]],2)],1)],1):e._e()},ls=[];qt=function(){return Rt.user()};var cs,us,ds,ps,ms=new class{isNotEmailVerified(){return Rt.isSignedIn()&&!Rt.user().emailVerified}isEmailVerified(){return Rt.isSignedIn()&&Rt.user().emailVerified}isUser(){return null!=i.currentUserId}canContactUser(e){return Rt.isSignedIn()&&Rt.user().id!==e.id&&(0,l.intersection)(Rt.user().groupIds(),e.groupIds()).length}canAddComment(e){return e.membersInclude(Rt.user())}canRespondToComment(e){return!e.discardedAt&&e.discussion().membersInclude(Rt.user())}canEdit(e){return e.isA("discussion")&&this.canEditThread(e)||e.isA("comment")&&this.canEditComment(e)||e.isA("poll")&&this.canEditPoll(e)||e.isA("stance")&&this.canEditStance(e)}canEditStance(e){return Rt.user()===e.author()}canEditThread(e){return e.adminsInclude(Rt.user())||e.membersInclude(Rt.user())&&(e.group().membersCanEditDiscussions||e.author()===Rt.user())}canCloseThread(e){return!e.closedAt&&this.canEditThread(e)}canReopenThread(e){return e.closedAt&&this.canEditThread(e)}canPinThread(e){return!e.closedAt&&!e.pinnedAt&&this.canEditThread(e)}canUnpinThread(e){return!e.closedAt&&e.pinnedAt&&this.canEditThread(e)}canExportThread(e){return!e.discardedAt&&e.membersInclude(Rt.user())}canPinEvent(e){return 1===e.depth&&!e.model().discardedAt&&!e.pinned&&this.canEditThread(e.discussion())}canUnpinEvent(e){return e.pinned&&this.canEditThread(e.discussion())}canMoveThread(e){return this.canEditThread(e)}canDeleteThread(e){return e.adminsInclude(Rt.user())||e.author()===Rt.user()}canChangeGroupVolume(e){return e.membersInclude(Rt.user())}canAdminister(e){switch(e.constructor.singular){case"group":return e.adminsInclude(Rt.user());case"discussion":case"comment":return e.discussion().adminsInclude(Rt.user());case"outcome":case"stance":case"poll":return e.poll().adminsInclude(Rt.user())}}canChangeVolume(e){return e.membersInclude(Rt.user())}canStartThread(e){return e.adminsInclude(Rt.user())||e.membersInclude(Rt.user())&&e.membersCanStartDiscussions}canAnnounceDiscussion(e){return!e.discardedAt&&(e.groupId?e.group().adminsInclude(Rt.user())||e.group().membersCanAnnounce&&e.group().membersInclude(Rt.user()):!e.id||e.adminsInclude(Rt.user()))}canNotifyGroup(e){return e.adminsInclude(Rt.user())||e.membersCanAnnounce&&e.membersInclude(Rt.user())}canAnnounce(e){return("function"===typeof e.isA?e.isA("poll"):void 0)?this.canAnnouncePoll(e):this.canAnnounceDiscussion(e)}canAddGuests(e){return("function"===typeof e.isA?e.isA("poll"):void 0)?this.canAddGuestsPoll(e):this.canAddGuestsDiscussion(e)}canAddGuestsDiscussion(e){return e.groupId?e.group().adminsInclude(Rt.user())||e.group().membersCanAddGuests&&e.group().membersInclude(Rt.user()):!e.id||e.adminsInclude(Rt.user())}canAnnouncePoll(e){return qt=Rt.user(),!e.discardedAt&&(e.groupId?e.group().adminsInclude(qt)||e.group().membersCanAnnounce&&e.adminsInclude(qt)||e.group().membersCanAnnounce&&!e.specifiedVotersOnly&&e.membersInclude(qt):e.adminsInclude(qt)||!e.specifiedVotersOnly&&e.membersInclude(qt))}canAddMembersPoll(e){return e.adminsInclude(qt())}canAddGuestsPoll(e){return e.groupId?e.group().adminsInclude(Rt.user())||e.group().membersCanAddGuests&&e.group(Rt.user()):e.adminsInclude(Rt.user())}canAddMembersToGroup(e){return e.adminsInclude(Rt.user())||e.membersInclude(Rt.user())&&e.membersCanAddMembers}canCreateSubgroups(e){return e.isParent()&&(e.adminsInclude(Rt.user())||e.membersInclude(Rt.user())&&e.membersCanCreateSubgroups)}canEditGroup(e){return e.adminsInclude(Rt.user())}canLeaveGroup(e){return null!=Rt.user().membershipFor(e)}canArchiveGroup(e){return e.adminsInclude(Rt.user())}canEditOwnComment(e){return e.authorIs(Rt.user())&&this.canEditComment(e)}canEditComment(e){return e.discussion().adminsInclude(Rt.user())&&e.group().adminsCanEditUserContent||e.authorIs(Rt.user())&&e.group().membersCanEditComments&&e.discussion().membersInclude(Rt.user())}canDeleteComment(e){return 0===jt.comments.find({parentId:e.id,parentType:"Comment"}).length&&e.discardedAt&&(e.discussion().adminsInclude(Rt.user())||e.group().membersCanDeleteComments&&e.authorIs(Rt.user()))}canDiscardComment(e){return!e.discardedAt&&(e.authorIs(Rt.user())||e.discussion().adminsInclude(Rt.user()))}canUndiscardComment(e){return e.discardedAt&&(e.authorIs(Rt.user())||e.discussion().adminsInclude(Rt.user()))}canRemoveMembership(e){return e&&(e.user()===Rt.user()||this.canAdminister(e.group()))}canSetMembershipTitle(e){return Rt.user()===e.user()||this.canAdminister(e.group())}canResendMembership(e){return e&&!e.acceptedAt&&this.canAdminister(e.group())}canManageMembershipRequests(e){return e.membersCanAddMembers&&e.membersInclude(Rt.user())||e.adminsInclude(Rt.user())}canViewPublicGroups(){return i.features.app.public_groups}canStartGroups(){return this.isEmailVerified()&&(i.features.app.create_group||Rt.user().isAdmin)}canViewGroup(e){return!e.privacyIsSecret()||e.membersInclude(Rt.user())}canViewPrivateContent(e){return e.membersInclude(Rt.user())}canJoinGroup(e){return"demo"!==e.subscription.plan&&(!(!this.canViewGroup(e)||e.membersInclude(Rt.user()))&&("request"===e.membershipGrantedUpon||e.parentOrSelf().adminsInclude(Rt.user())))}canRequestMembership(e){return"approval"===e.membershipGrantedUpon&&this.canViewGroup(e)&&!e.membersInclude(Rt.user())&&!this.canJoinGroup(e)}canTranslate(e){return!e.discardedAt&&(i.inlineTranslation.isAvailable&&0===Object.keys(e.translation).length&&!e.isBlank()&&e.contentLocale&&e.contentLocale!==Rt.user().locale||!e.contentLocale&&e.author().locale!==Rt.user().locale)}canStartPoll(e){return e.adminsInclude(Rt.user())||e.membersInclude(Rt.user())&&e.group().membersCanRaiseMotions}canParticipateInPoll(e){return!!e&&(!e.closedAt&&(e.myStance()||!e.specifiedVotersOnly&&e.membersInclude(Rt.user())))}canMovePoll(e){return!e.discussionId&&e.adminsInclude(Rt.user())}canEditPoll(e){return e.adminsInclude(Rt.user())&&!e.closedAt}canDeletePoll(e){return!e.discardedAt&&e.adminsInclude(Rt.user())}canExportPoll(e){return!e.discardedAt&&e.membersInclude(Rt.user())&&(e.closedAt||"until_closed"!==e.hideResults)}canAddPollToThread(e){return!e.discardedAt&&!e.discussionId&&e.adminsInclude(Rt.user())}canSetPollOutcome(e){return!e.discardedAt&&e.closedAt&&e.adminsInclude(Rt.user())}canClosePoll(e){return!!e.closingAt&&!e.discardedAt&&!e.closedAt&&this.canEditPoll(e)}canReopenPoll(e){return!e.discardedAt&&e.closedAt&&!e.anonymous&&e.adminsInclude(Rt.user())}},hs=class{constructor(e={}){this.exhausted=!1,this.loading=!1,this.collection=e.collection,this.params=(0,l.merge)({from:0,per:25,order:"id"},e.params),this.path=e.path,this.total=0,this.err=null,this.status=null}reset(){return this.params["from"]=0}fetchRecords(e={}){return this.loading=!0,this.params=(0,l.defaults)({},e,this.params),jt[(0,l.camelCase)(this.collection)].fetch({path:this.path,params:this.params}).then((e=>(this.total=e.meta.total,this.params.from=this.params.from+this.params.per,this.exhausted=this.params.from>=this.total,e))).finally((()=>this.loading=!1)).catch((e=>(this.err=e,this.status=e.status)))}},_s=o(7069),fs={data:function(){return{votePolls:[],otherPolls:[],loader:null}},created:function(){return this.loader=new hs({collection:"polls",params:{exclude_types:"group",status:"recent"}}),this.loader.fetchRecords(),this.watchRecords({collections:["polls","groups","memberships","stances"],query:()=>this.findRecords()})},methods:{findRecords:function(){var e,t,o,s,n;return t=Rt.user().groupIds(),o=jt.stances.find({myStance:!0}).map((function(e){return e.pollId})),e=jt.polls.collection.chain(),e=e.find({discardedAt:null,closingAt:{$ne:null}}),e=e.find({$or:[{groupId:{$in:t}},{id:{$in:o}}]}),e=e.find({$or:[{closedAt:null},{closedAt:{$gt:(0,_s.Z)(new Date,3)}}]}),this.$route.query.q&&(s=new RegExp((0,l.escapeRegExp)(this.$route.query.q),"i"),e=e.find({$or:[{title:{$regex:s}},{description:{$regex:s}}]})),n=e=>e.iCanVote()&&!e.iHaveVoted(),this.votePolls=(0,l.filter)(e.simplesort("closingAt",!0).data(),n),this.otherPolls=(0,l.reject)(e.simplesort("closingAt",!0).data(),n)}}},gs=fs,vs=(0,Ut.Z)(gs,as,ls,!1,null,null,null),bs=vs.exports,ys=o(59456),ws=o(86827),xs=function(){var e=this,t=e._self._c;return t("div",[e.until?e._e():t(ys.Z,{staticClass:"my-4 page-loading",attrs:{"justify-center":""}},[t(ws.Z,{attrs:{indeterminate:"",color:"primary"}})],1),e.until?e._t("default"):e._e()],2)},ks=[],Cs={props:{until:null,diameter:{type:Number,default:30}}},Zs=Cs,Is=(0,Ut.Z)(Zs,xs,ks,!1,null,null,null),As=Is.exports,$s=o(15075),Ss=function(){var e=this,t=e._self._c;return t("span",[e.action.to?t($s.Z,{staticClass:"action-button",class:e.cssClass,attrs:{small:e.small,to:e.action.to(),text:"",icon:1==e.action.dock,title:e.text}},[1==e.action.dock||3==e.action.dock?t(Qt.Z,{attrs:{small:e.small}},[e._v(e._s(e.action.icon))]):e._e(),3==e.action.dock?t("span",{staticClass:"ml-1"}):e._e(),e.action.dock>1?t("span",[e._v(e._s(e.text))]):e._e()],1):t($s.Z,{staticClass:"action-button",class:e.cssClass,attrs:{small:e.small,text:"",icon:1==e.action.dock,title:e.text},on:{click:function(t){return t.preventDefault(),e.action.perform()}}},[1==e.action.dock||3==e.action.dock?t(Qt.Z,{attrs:{small:e.small}},[e._v(e._s(e.action.icon))]):e._e(),3==e.action.dock?t("span",{staticClass:"ml-1"}):e._e(),e.action.dock>1?t("span",[e._v(e._s(e.text))]):e._e()],1)],1)},Ns=[],Ts={props:{action:Object,name:String,nameArgs:Object,small:Boolean},computed:{text:function(){return this.$t(this.action.name||"action_dock."+this.name,this.nameArgs||{})},cssClass:function(){return`action-dock__button--${this.name}`}}},js=Ts,Ps=(0,Ut.Z)(js,Ss,Ns,!1,null,null,null),Os=Ps.exports,Rs=o(33560),qs=o(57572),Ms=function(){var e=this,t=e._self._c;return e.canPerformAny?t("div",{staticClass:"action-menu lmo-no-print"},[t(qs.Z,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"action-menu--btn",attrs:{title:e.name,icon:e.icon,small:e.small},on:{click:function(e){e.preventDefault()}}},"v-btn",s,!1),o),[e.icon?t(Qt.Z,{attrs:{small:e.small}},[e._v(e._s(e.menuIcon))]):e._e(),e.icon?e._e():t("span",[e._v(e._s(e.name))])],1)]}}],null,!1,1373800736)},[t(rs.Z,[e._l(e.actions,(function(o,s){return o.canPerform()?[o.to?e._e():t(zo.Z,{key:s,class:"action-dock__button--"+s,attrs:{dense:""},on:{click:function(e){return o.perform()}}},[t(Rs.Z,[t(Qt.Z,[e._v(e._s(o.icon))])],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:{path:o.name||"action_dock."+s,args:o.nameArgs&&o.nameArgs()},expression:"{path: (action.name || 'action_dock.'+name), args: (action.nameArgs && action.nameArgs()) }"}]})],1),o.to?t(zo.Z,{key:s,class:"action-dock__button--"+s,attrs:{dense:"",to:o.to()}},[t(Rs.Z,[t(Qt.Z,[e._v(e._s(o.icon))])],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:{path:o.name||"action_dock."+s,args:o.nameArgs&&o.nameArgs()},expression:"{path: (action.name || 'action_dock.'+name), args: (action.nameArgs && action.nameArgs()) }"}]})],1):e._e()]:e._e()}))],2)],1)],1):e._e()},Es=[],Ls={props:{actions:Object,small:Boolean,icon:Boolean,name:String,menuIcon:{type:String,default:"mdi-dots-horizontal"}},computed:{canPerformAny:function(){return(0,l.some)(this.actions,(function(e){return e.canPerform()}))}}},Ds=Ls,Fs=(0,Ut.Z)(Ds,Ms,Es,!1,null,null,null),Us=Fs.exports,zs=o(99123),Bs=function(){var e=this,t=e._self._c;return t(e.componentType,{tag:"component",staticClass:"user-avatar",style:{width:e.size+"px",margin:"0"},attrs:{"aria-hidden":"true",to:!e.noLink&&e.user.id&&e.urlFor(e.user)}},[e.imageUrl?t(zs.Z,{attrs:{title:e.user.name,size:e.size}},[t("img",{attrs:{alt:e.user.avatarInitials,src:e.imageUrl}})]):t(zs.Z,{attrs:{title:e.user.name,size:e.size,color:e.color}},["initials"==e.user.avatarKind?t("span",{staticClass:"user-avatar--initials",style:{"font-size":e.fontSize,width:e.size+"px",height:e.size+"px"}},[e._v(e._s(e.user.avatarInitials))]):t(Qt.Z,[e._v(e._s(e.user.avatarKind))])],1)],1)},Vs=[],Hs={props:{user:{type:Object,default:function(){return jt.users.build()}},coordinator:Boolean,size:{type:Number,default:36},noLink:Boolean,colors:Object},computed:{fontSize:function(){return this.size<19?"6px":this.size<21?"8px":this.size<25?"10px":this.size<33?"12px":this.size<48?"14px":this.size<64?"18px":this.size<128?"32px":"50px"},imageUrl:function(){return this.size>64?this.user.avatarUrl:this.user.thumbUrl},color:function(){var e;return e=Object.values((0,l.pick)(i.theme.brand_colors,["gold","sky","wellington","sunset"])),e[(this.user.id||0)%e.length]},componentType:function(){return this.noLink||!this.user.id?"div":"router-link"}}},Gs=Hs,Ws=(0,Ut.Z)(Gs,Bs,Vs,!1,null,null,null),Ks=Ws.exports,Ys=o(94009),Qs=function(){var e=this,t=e._self._c;return e.reactionTypes.length?t("div",{staticClass:"reactions-display mr-2"},[t("div",{staticClass:"reactions-display__emojis"},e._l(e.reactionTypes,(function(o){return t("div",{key:o,staticClass:"reaction lmo-pointer",on:{click:function(t){return e.removeMine(o)}}},[t(Ys.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:n}){return[t("div",e._g(e._b({staticClass:"reactions-display__group"},"div",n,!1),s),[e.emojiSupported?t("span",{class:e.small?"small":void 0},[e._v(e._s(e.colonToUnicode(o)))]):t("img",{staticClass:"emoji",attrs:{src:e.srcForEmoji(e.colonToUnicode(o))}}),e._l(e.reactionHash[o],(function(o){return t(Ks,{key:o.id,staticClass:"reactions-display__author",attrs:{"no-link":"",user:o,size:e.diameter}})}))],2)]}}],null,!0)},e._l(e.reactionHash[o],(function(o){return t("div",{key:o.id,staticClass:"reactions-display__name"},[t("span",[e._v(e._s(o.name))])])})),0)],1)})),0)]):e._e()},Js=[];ds={},ps=function(){return ds={comment_ids:[],discussion_ids:[],poll_ids:[],outcome_ids:[],stance_ids:[]}},ps(),cs=function(e){var t;return t={},(0,l.forEach)(e,(function(e,o){return t[o]=e.join("x")||null,!0})),t},us=(0,l.debounce)((function(){if(0!==Object.keys(cs(ds)).length)return jt.reactions.fetch({params:cs(ds)}),ps()}),500);var Xs,en,tn=new class{enqueueFetch(e){return("function"===typeof e.isA?e.isA("stance"):void 0)&&ds["stance_ids"].push(e.id),("function"===typeof e.isA?e.isA("comment"):void 0)&&ds["comment_ids"].push(e.id),("function"===typeof e.isA?e.isA("discussion"):void 0)&&ds["discussion_ids"].push(e.id),("function"===typeof e.isA?e.isA("poll"):void 0)&&ds["poll_ids"].push(e.id),("function"===typeof e.isA?e.isA("outcome"):void 0)&&ds["outcome_ids"].push(e.id),us()}},on={props:{model:Object,small:Boolean},data:function(){return{diameter:this.small?20:24,maxNamesCount:10,reactionHash:{all:[]},emojiSupported:me}},created:function(){return tn.enqueueFetch(this.model)},mounted:function(){return this.watchRecords({collections:["reactions"],query:e=>(this.reactionHash={all:[]},(0,l.each)(jt.reactions.find(this.reactionParams),(e=>{var t;return null==this.reactionHash[e.reaction]&&(this.reactionHash[e.reaction]=[]),(t=jt.users.find(e.userId))&&(this.reactionHash[e.reaction].push(t),this.reactionHash["all"].push(t)),!0})))})},computed:{reactionParams:function(){return{reactableType:(0,l.capitalize)(this.model.constructor.singular),reactableId:this.model.id}},reactionTypes:function(){return(0,l.compact)((0,l.difference)((0,l.keys)(this.reactionHash),["all"]))},myReaction:function(){if(Rt.isSignedIn())return jt.reactions.find((0,l.merge)({},this.reactionParams,{userId:Rt.userId}))[0]},otherReaction:function(){return jt.reactions.find((0,l.merge)({},this.reactionParams,{userId:{$ne:Rt.userId}}))[0]},reactionTypes:function(){return(0,l.difference)((0,l.keys)(this.reactionHash),["all"])}},methods:{srcForEmoji:de,stripColons:re,colonToUnicode:ae,removeMine:function(e){var t;if(t=jt.reactions.find((0,l.merge)({},this.reactionParams,{userId:Rt.user().id,reaction:e}))[0],t)return t.destroy()},translate:function(e){var t;return t=emojiTitle(e),(0,l.startsWith)(t,"reactions.")?e:t},countFor:function(e){return null!=this.reactionHash[e]?this.reactionHash[e].length-this.maxNamesCount:0}}},sn=on,nn=(0,Ut.Z)(sn,Qs,Js,!1,null,null,null),rn=nn.exports,an=o(47374),ln=function(){var e=this,t=e._self._c;return t(an.Z,{staticClass:"emoji-picker pa-2"},[e._l(e.emojis,(function(o,s){return t("div",{key:s},[t("h5",{directives:[{name:"t",rawName:"v-t",value:"emoji_picker."+s,expression:"'emoji_picker.'+category"}]}),t("div",{staticClass:"emoji-picker__emojis"},e._l(o,(function(o,s){return t("span",{key:s,attrs:{title:s},on:{click:function(t){return e.insert(s,o)}}},[e._v(e._s(o))])})),0)])})),t("div",{staticClass:"d-flex justify-center pb-2"},[e.showMore?e._e():t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.show_more",expression:"'common.action.show_more'"}],attrs:{"x-small":""},on:{click:function(t){t.stopPropagation(),e.showMore=!0}}}),e.showMore?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.show_fewer",expression:"'common.action.show_fewer'"}],attrs:{"x-small":""},on:{click:function(t){t.stopPropagation(),e.showMore=!1}}}):e._e()],1)],2)},cn=[],un={props:{isPoll:Boolean,insert:{type:Function,required:!0}},data:function(){return{search:"",showMore:!1}},methods:{srcForEmoji:de},computed:{emojis:function(){return this.showMore?ie:(0,l.pick)(ie,["common","hands","expressions"])}}},dn=un,pn=(0,Ut.Z)(dn,ln,cn,!1,null,null,null),mn=pn.exports,hn=function(){var e=this,t=e._self._c;return t(qs.Z,{staticClass:"reactions-input",attrs:{"close-on-content-click":!0},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"emoji-picker__toggle action-button",attrs:{icon:"",small:e.small}},"v-btn",s,!1),o),[t(Qt.Z,{attrs:{small:e.small}},[e._v("mdi-emoticon-outline")])],1)]}}]),model:{value:e.closeEmojiMenu,callback:function(t){e.closeEmojiMenu=t},expression:"closeEmojiMenu"}},[t(mn,{attrs:{insert:e.insert,"is-poll":e.model.isA("poll")||e.model.isA("stance")||e.model.isA("outcome")}})],1)},_n=[],fn={props:{model:Object,small:Boolean},data:function(){return{search:null,closeEmojiMenu:!1}},methods:{insert:function(e){var t,o;return t={reactableType:(0,l.capitalize)(this.model.constructor.singular),reactableId:this.model.id,userId:Rt.user().id},o=jt.reactions.find(t)[0]||jt.reactions.build(t),o.reaction=`:${e}:`,o.save(),this.closeEmojiMenu=!0}}},gn=fn,vn=(0,Ut.Z)(gn,hn,_n,!1,null,null,null),bn=vn.exports,yn=o(22515),wn=function(){var e=this,t=e._self._c;return t("section",{staticClass:"d-flex flex-wrap align-center action-dock pb-1",staticStyle:{"margin-left":"-6px"},attrs:{"aria-label":e.$t("action_dock.actions_menu")}},[e._l(e.leftActions,(function(o,s){return o.canPerform()?t("div",{key:s,staticClass:"action-dock__action"},["react"!=s?t(Os,{attrs:{action:o,name:s,small:e.small,nameArgs:o.nameArgs&&o.nameArgs()}}):e._e()],1):e._e()})),e.left?e._e():t(yn.Z),!e.left&&e.actions.react&&e.actions.react.canPerform()?t(rn,{attrs:{model:e.model,small:e.small}}):e._e(),e._l(e.rightActions,(function(o,s){return o.canPerform()?t("div",{key:s,staticClass:"action-dock__action"},["react"==s?t(bn,{staticClass:"action-dock__button--react",attrs:{model:e.model,small:e.small}}):e._e(),"react"!=s?t(Os,{attrs:{action:o,name:s,small:e.small,nameArgs:o.nameArgs&&o.nameArgs()}}):e._e()],1):e._e()})),e.menuActions?t(Us,{attrs:{actions:e.menuActions,menuIcon:e.menuIcon,small:e.small,icon:"",name:e.$t("action_dock.more_actions")}}):e._e(),e.left?t(yn.Z):e._e(),e.left&&e.actions.react&&e.actions.react.canPerform()?t(rn,{attrs:{model:e.model,small:e.small}}):e._e()],2)},xn=[],kn={props:{model:Object,actions:{type:Object,default:function(){return{}}},menuActions:{type:Object,default:function(){return{}}},small:Boolean,left:Boolean,menuIcon:{type:String,default:"mdi-dots-horizontal"}},computed:{leftActions:function(){return(0,l.pickBy)(this.actions,(function(e){return e.dockLeft}))},rightActions:function(){return(0,l.pickBy)(this.actions,(function(e){return!e.dockLeft}))}}},Cn=kn,Zn=(0,Ut.Z)(Cn,wn,xn,!1,null,null,null),In=Zn.exports,An=function(){var e=this,t=e._self._c;return t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"common.active_time_ago",args:{time_ago:e.approximate(e.date)}},expression:"{path: 'common.active_time_ago', args: {time_ago: approximate(date)}}"}]})},$n=[],Sn={props:{date:Date},methods:{approximate:He}},Nn=Sn,Tn=(0,Ut.Z)(Nn,An,$n,!1,null,null,null),jn=Tn.exports,Pn=function(){var e=this,t=e._self._c;return t("span",[t("span",{attrs:{"aria-hidden":"true"}},[e._v("Â Â·Â ")]),e._t("default")],2)},On=[],Rn={},qn=(0,Ut.Z)(Rn,Pn,On,!1,null,null,null),Mn=qn.exports,En=o(73444),Ln=function(){var e=this,t=e._self._c;return t(zo.Z,{staticClass:"thread-preview thread-preview__link",class:{"thread-preview--unread-border":e.thread.isUnread()},attrs:{to:e.urlFor(e.thread)}},[t(Bo.Z,[t(Ks,{attrs:{user:e.thread.author(),size:40,"no-link":""}})],1),t(Vo.km,[t(Vo.V9,{staticStyle:{"align-items":"center"}},[e.thread.pinnedAt?t("span",{attrs:{title:e.$t("context_panel.thread_status.pinned")}},[t(Qt.Z,{attrs:{small:""}},[e._v("mdi-pin-outline")])],1):e._e(),t("span",{staticClass:"thread-preview__title",class:{"thread-preview--unread":e.thread.isUnread()}},[e._v(e._s(e.thread.title))]),e.thread.closedAt?t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"common.privacy.closed",expression:"'common.privacy.closed'"}],staticClass:"ml-1",attrs:{small:"",label:"",outlined:"",color:"warning"}}):e._e(),t(Uo,{staticClass:"ml-1",attrs:{model:e.thread,smaller:""}})],1),t(Vo.oZ,[e.showGroupName?t("span",{staticClass:"thread-preview__group-name"},[e._v(e._s(e.thread.group().name))]):e._e(),e.showGroupName?t(Mn):e._e(),t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"thread_preview.replies_count",args:{count:e.thread.itemsCount}},expression:"{path: 'thread_preview.replies_count', args: {count: thread.itemsCount}}"}],staticClass:"thread-preview__items-count"}),t(Ro),e.thread.hasUnreadActivity()?t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"thread_preview.unread_count",args:{count:e.thread.unreadItemsCount()}},expression:"{path: 'thread_preview.unread_count', args: {count: thread.unreadItemsCount()}}"}],staticClass:"thread-preview__unread-count"}):e._e(),t(Mn),t(jn,{attrs:{date:e.thread.lastActivityAt}})],1)],1),e.$vuetify.breakpoint.mdAndUp?t(En.Z,[t(In,{attrs:{actions:e.dockActions}})],1):e._e(),e.canPerformAny?t(En.Z,[t(Us,{attrs:{actions:e.menuActions,icon:""}})],1):e._e()],1)},Dn=[];en=function(e,t){return function(o,s,n,i){if(o)return D.$emit("flashMessage",{level:e,duration:t||4e3,message:o,options:s,action:n,actionFn:i})}};var Fn=Xs=function(){class e{static custom(e,t="error",o=4e3){return D.$emit("flashMessage",{text:e,level:t,duration:o})}}return e.success=en("success"),e.info=en("info"),e.warning=en("warning"),e.error=en("error"),e.wait=en("wait",3e4),e}.call(void 0);function Un(e){return D.$emit("openModal",e)}window.Loomio.flash=Xs;var zn=new class{actions(e,t){return{make_a_copy:{icon:"mdi-content-copy",name:"templates.make_a_copy",menu:!0,canPerform:function(){return Rt.user()},to:function(){return`/d/new?template_id=${e.id}`}},translate_thread:{icon:"mdi-translate",name:"common.action.translate",dock:2,canPerform:function(){return ms.canTranslate(e)},perform:function(){return Rt.user()&&e.translate(Rt.user().locale)}},subscribe:{name:"common.action.subscribe",icon:"mdi-bell",dock:2,canPerform:function(){return"normal"===e.volume()&&ms.canChangeVolume(e)},perform:function(){return Un({component:"ChangeVolumeForm",props:{model:e}})}},unsubscribe:{name:"common.action.unsubscribe",icon:"mdi-bell-off",dock:2,canPerform:function(){return"loud"===e.volume()&&ms.canChangeVolume(e)},perform:function(){return Un({component:"ChangeVolumeForm",props:{model:e}})}},unignore:{name:"common.action.unignore",icon:"mdi-bell-outline",dock:2,canPerform:function(){return"quiet"===e.volume()&&ms.canChangeVolume(e)},perform:function(){return Un({component:"ChangeVolumeForm",props:{model:e}})}},announce_thread:{name:"common.action.invite",icon:"mdi-send",dock:2,canPerform:function(){return e.group().adminsInclude(Rt.user())||(e.group().membersCanAnnounce||e.group().membersCanAddGuests)&&e.membersInclude(Rt.user())},perform:function(){return D.$emit("openModal",{component:"StrandMembersList",props:{discussion:e}})}},react:{dock:1,canPerform:function(){return ms.canAddComment(e)}},add_comment:{icon:"mdi-reply",dockDisplay:"icon",dock:1,canPerform:function(){return ms.canAddComment(e)},perform:function(){return t.$vuetify.goTo("#add-comment")}},edit_thread:{name:"common.action.edit",icon:"mdi-pencil",dock:1,canPerform:function(){return ms.canEditThread(e)},to:function(){return`/d/${e.key}/edit`}},show_history:{icon:"mdi-history",name:"action_dock.show_edits",dock:1,canPerform:function(){return e.edited()},perform:function(){return Un({component:"RevisionHistoryModal",props:{model:e}})}},notification_history:{name:"action_dock.notification_history",icon:"mdi-bell-ring-outline",menu:!0,perform:function(){return Un({component:"AnnouncementHistory",props:{model:e}})},canPerform:function(){return!0}},export_thread:{name:"common.action.print",icon:"mdi-printer-outline",dock:0,menu:!0,canPerform:function(){return ms.canExportThread(e)},perform:function(){return Ot(Pt.discussion(e,{export:1},{absolute:!0,print:!0}))}},pin_thread:{icon:"mdi-pin-outline",name:"action_dock.pin_thread",menu:!0,canPerform:function(){return ms.canPinThread(e)},perform:()=>this.pin(e)},unpin_thread:{icon:"mdi-pin-off",name:"action_dock.unpin_thread",menu:!0,canPerform:function(){return ms.canUnpinThread(e)},perform:()=>this.unpin(e)},dismiss_thread:{name:"dashboard_page.mark_as_read",icon:"mdi-check",dock:1,canPerform:function(){return e.isUnread()},perform:()=>this.dismiss(e)},edit_tags:{icon:"mdi-tag-outline",name:"loomio_tags.card_title",canPerform:function(){return ms.canEditThread(e)},perform:function(){return D.$emit("openModal",{component:"TagsSelect",props:{model:e.clone()}})}},edit_arrangement:{icon:e.newestFirst?"mdi-arrow-up":"mdi-arrow-down",name:e.newestFirst?"strand_nav.newest_first":"strand_nav.oldest_first",dock:3,dockLeft:!0,canPerform:function(){return ms.canEditThread(e)},perform:function(){return Un({component:"ArrangementForm",props:{discussion:e.clone()}})}},close_thread:{menu:!0,icon:"mdi-archive-outline",canPerform:function(){return!e.closedAt},perform:()=>this.close(e)},reopen_thread:{menu:!0,icon:"mdi-refresh",dock:2,canPerform:function(){return ms.canReopenThread(e)},perform:()=>this.reopen(e)},move_thread:{menu:!0,icon:"mdi-arrow-right",canPerform:function(){return ms.canMoveThread(e)},perform:function(){return Un({component:"MoveThreadForm",props:{discussion:e.clone()}})}},discard_thread:{name:"action_dock.delete_thread",icon:"mdi-delete-outline",menu:!0,canPerform:function(){return ms.canDeleteThread(e)},perform:function(){return Un({component:"ConfirmModal",props:{confirm:{submit:e.discard,text:{title:"delete_thread_form.title",helptext:"delete_thread_form.body",submit:"delete_thread_form.confirm",flash:"delete_thread_form.messages.success"},redirect:Pt.group(e.group())}}})}}}}mute(e,t=!1){var o;return Rt.user().hasExperienced("mutingThread")||t?(o=e.volume(),e.saveVolume("mute").then((()=>Fn.success("discussion.volume.mute_message",{name:e.title},"undo",(()=>this.unmute(e,o)))))):(jt.users.saveExperience("mutingThread"),jt.users.updateProfile(Rt.user()).then((function(){return Un({component:"ConfirmModal",props:{confirm:{submit:function(){return e.saveVolume("mute",!0)},text:{title:"mute_explanation_modal.mute_thread",flash:"discussion.volume.mute_message",fragment:"mute_thread"}}}})})))}unmute(e,t="normal"){return e.saveVolume(t).then((()=>Fn.success("discussion.volume.unmute_message",{name:e.title},"undo",(()=>this.mute(e)))))}close(e){return Rt.user().hasExperienced("closingThread")?e.close().then((()=>Fn.success("discussion.closed.closed",{},"undo",(()=>this.reopen(e))))):(jt.users.saveExperience("closingThread"),jt.users.updateProfile(Rt.user()).then((function(){return Un({component:"ConfirmModal",props:{confirm:{submit:e.close,text:{title:"close_explanation_modal.close_thread",helptext:"close_explanation_modal.body",flash:"discussion.closed.closed"}}}})})))}reopen(e){return e.reopen().then((()=>Fn.success("discussion.closed.reopened",{},"undo",(()=>this.close(e)))))}dismiss(e){return e.dismiss().then((()=>Fn.success("dashboard_page.thread_dismissed",{},"undo",(()=>this.recall(e)))))}recall(e){return e.recall().then((()=>Fn.success("dashboard_page.thread_recalled",{},"undo",(()=>this.dismiss(e)))))}pin(e){return Rt.user().hasExperienced("pinningThread")?e.savePin().then((()=>Fn.success("discussion.pin.pinned","undo",(()=>this.unpin(e))))):jt.users.saveExperience("pinningThread").then((function(){return Un({component:"ConfirmModal",props:{confirm:{submit:e.savePin,text:{title:"pin_thread_modal.title",flash:"discussion.pin.pinned",helptext:"pin_thread_modal.helptext"}}}})}))}unpin(e){return e.saveUnpin().then((()=>Fn.success("discussion.pin.unpinned","undo",(()=>this.pin(e)))))}},Bn={props:{thread:Object,groupPage:{type:Boolean,default:!1},showGroupName:{type:Boolean,default:!0}},computed:{dockActions:function(){return(0,l.pick)(zn.actions(this.thread,this),["dismiss_thread"])},menuActions:function(){var e;return e=this.groupPage?this.$vuetify.breakpoint.smAndDown?["dismiss_thread","pin_thread","unpin_thread","edit_thread","move_thread","close_thread","reopen_thread","discard_thread"]:["pin_thread","unpin_thread","edit_thread","move_thread","close_thread","reopen_thread","discard_thread"]:this.$vuetify.breakpoint.smAndDown?["dismiss_thread","close_thread","reopen_thread"]:["close_thread","reopen_thread"],(0,l.pick)(zn.actions(this.thread,this),e)},canPerformAny:function(){return(0,l.some)(this.menuActions,(function(e){return e.canPerform()}))}}},Vn=Bn,Hn=(0,Ut.Z)(Vn,Ln,Dn,!1,null,null,null),Gn=Hn.exports,Wn=function(){var e=this,t=e._self._c;return t("abbr",{staticClass:"time-ago",attrs:{title:e.exactDate(e.parsedDate)}},[e._v(e._s(e.approximateDate(e.parsedDate)))])},Kn=[],Yn={props:{date:[Date,String]},data:function(){return{parsedDate:null}},created:function(){return(0,l.isString)(this.date)?this.parsedDate=(0,m.Z)(this.date):this.parsedDate=this.date}},Qn=Yn,Jn=(0,Ut.Z)(Qn,Wn,Kn,!1,null,null,null),Xn=Jn.exports,ei=function(){var e=this,t=e._self._c;return t(zo.Z,{staticClass:"thread-preview thread-preview__link",attrs:{to:e.urlFor(e.result)}},[t(Vo.km,[t(Vo.V9,[e._v(e._s(e.result.title))]),t(Vo.oZ,[t("span",{domProps:{innerHTML:e._s(e.result.resultGroupName)}}),e._v("Â \nÂ·\nÂ "),t(Xn,{attrs:{date:e.result.lastActivityAt}}),e._v("Â \nÂ·\nÂ "),t("span",{domProps:{innerHTML:e._s(e.result.blurb)}})],1)],1)],1)},ti=[],oi={props:{result:Object}},si=oi,ni=(0,Ut.Z)(si,ei,ti,!1,null,null,null),ii=ni.exports,ri=o(66530),ai=o(56635),li=o(762),ci=o(31369),ui=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"dashboard-page max-width-1024 px-0 px-sm-3"},[t("h1",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.titleVisible},expression:"{callback: titleVisible}"},{name:"t",rawName:"v-t",value:"dashboard_page.aria_label",expression:"'dashboard_page.aria_label'"}],staticClass:"display-1 my-4",attrs:{tabindex:"-1"}}),e.dashboardLoaded?t(ys.Z,{staticClass:"mb-3"},[t(ci.Z,{attrs:{clearable:"",solo:"","hide-details":"",value:e.$route.query.q,placeholder:e.$t("common.action.search"),"append-icon":"mdi-magnify"},on:{input:e.onQueryInput}})],1):e._e(),t(bs),e.dashboardLoaded?e._e():t(ns.Z,{staticClass:"mb-3"},[t(rs.Z,{attrs:{"two-line":""}},[t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"dashboard_page.recent_threads",expression:"'dashboard_page.recent_threads'"}]}),e._l([1,2,3],(function(e,o){return t(Bt,{key:o,attrs:{lineCount:2}})}))],2)],1),e.dashboardLoaded?t("div",[e.$route.query.q?t("section",{staticClass:"dashboard-page__loaded"},[t(ns.Z,e._l(e.searchResults,(function(e){return t(ii,{key:e.id,attrs:{result:e}})})),1)],1):e._e(),e.$route.query.q?e._e():t("section",{staticClass:"dashboard-page__loaded"},[0==e.discussions.length?t("div",{staticClass:"dashboard-page__empty"},[e.noGroups?t("p",{domProps:{innerHTML:e._s(e.$t("dashboard_page.no_groups.show_all"))}}):e._e(),e.noGroups?e._e():t("div",{staticClass:"dashboard-page__no-threads"},[t("span",{directives:[{name:"show",rawName:"v-show",value:"show_all"==e.filter,expression:"filter == 'show_all'"},{name:"t",rawName:"v-t",value:"dashboard_page.no_threads.show_all",expression:"'dashboard_page.no_threads.show_all'"}]}),t("span",{directives:[{name:"show",rawName:"v-show",value:"show_muted"==e.filter&&e.userHasMuted,expression:"filter == 'show_muted' && userHasMuted"},{name:"t",rawName:"v-t",value:"dashboard_page.no_threads.show_muted",expression:"'dashboard_page.no_threads.show_muted'"}]}),t("router-link",{directives:[{name:"show",rawName:"v-show",value:"show_all"!=e.filter&&e.userHasMuted,expression:"filter != 'show_all' && userHasMuted"}],attrs:{to:"/dashboard"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"dashboard_page.view_recent",expression:"'dashboard_page.view_recent'"}]})])],1)]):e._e(),e.discussions.length?t("div",{staticClass:"dashboard-page__collections"},[t(ns.Z,{staticClass:"mb-3 thread-preview-collection__container thread-previews-container"},[t(rs.Z,{staticClass:"thread-previews",attrs:{"two-line":""}},[t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"dashboard_page.recent_threads",expression:"'dashboard_page.recent_threads'"}]}),e._l(e.discussions,(function(e){return t(Gn,{key:e.id,attrs:{thread:e}})}))],2)],1),e.loader.exhausted?e._e():t("div",{staticClass:"dashboard-page__footer"}),t(As,{directives:[{name:"show",rawName:"v-show",value:e.loader.loading,expression:"loader.loading"}]})],1):e._e()])]):e._e()],1)],1)},di=[],pi=o(85899);function mi(e){var t;return t=jt.discussions.collection.chain(),t=t.find({discardedAt:null}),e.group&&(t=t.find({groupId:{$in:e.group.organisationIds()}})),e.from&&(t=t.find({lastActivityAt:{$gt:e.from}})),e.to&&(t=t.find({lastActivityAt:{$lt:e.to}})),e.ids?t=t.find({id:{$in:e.ids}}):(0,l.each)((0,l.compact)([].concat(e.filters)),(function(e){var o;return t=function(){switch(e){case"show_recent":return t.find({lastActivityAt:{$gt:(0,pi.Z)(new Date,6)}});case"show_unread":return t.where((function(e){return e.isUnread()}));case"hide_unread":return t.where((function(e){return!e.isUnread()}));case"show_dismissed":return t.where((function(e){return e.isDismissed()}));case"hide_dismissed":return t.where((function(e){return!e.isDismissed()}));case"show_closed":return t.where((function(e){return null!=e.closedAt}));case"show_opened":return t.find({closedAt:null});case"show_pinned":return t.find({pinned:!0});case"hide_pinned":return t.find({pinned:!1});case"show_muted":return t.where((function(e){return"mute"===e.volume()}));case"hide_muted":return t.where((function(e){return"mute"!==e.volume()}));case"show_proposals":return t.where((function(e){return e.hasDecision()}));case"hide_proposals":return t.where((function(e){return!e.hasDecision()}));case"only_threads_in_my_groups":return o=Rt.user().groupIds(),t.find({$or:[{$and:[{inviterId:{$ne:null}},{revokedAt:null}]},{groupId:{$in:o}}]})}}()})),t.simplesort("lastActivityAt",!0).data()}var hi,_i=o(54559),fi={data:function(){return{dashboardLoaded:jt.discussions.collection.data.length>0,filter:this.$route.params.filter||"hide_muted",discussions:[],loader:null,searchLoader:null,searchResults:[]}},created:function(){return this.onQueryInput=(0,l.debounce)((e=>this.$router.replace(this.mergeQuery({q:e}))),1e3),this.init(),D.$on("signedIn",this.init)},beforeDestroy:function(){return D.$off("signedIn",this.init)},mounted:function(){return D.$emit("content-title-visible",!1),D.$emit("currentComponent",{titleKey:"dashboard_page.aria_label",page:"dashboardPage",search:{placeholder:this.$t("navbar.search_all_threads")}})},watch:{"$route.query":"refresh"},methods:{init:function(){return this.loader=new hs({collection:"discussions",path:"dashboard",params:{exclude_types:"poll",filter:this.filter,per:60}}),this.searchLoader=new hs({collection:"searchResults"}),this.watchRecords({key:"dashboard",collections:["discussions","searchResults","memberships"],query:this.query}),this.refresh()},refresh:function(){if(Rt.isSignedIn())return this.fetch(),this.query()},fetch:function(){if(this.loader)return this.$route.query.q?this.searchLoader.fetchRecords({q:this.$route.query.q,from:0}).then((()=>(this.dashboardLoaded=!0,this.query()))):this.loader.fetchRecords().then((()=>this.dashboardLoaded=!0))},query:function(){var e,t;return this.$route.query.q?(e=jt.searchResults.collection.chain(),e=e.find({query:this.$route.query.q}).data(),this.searchResults=(0,l.orderBy)(e,"rank","desc")):(t=jt.memberships.collection.find({userId:Rt.user().id}).map((function(e){return e.groupId})),e=jt.discussions.collection.chain(),e=e.find({$or:[{groupId:{$in:t}},{discussionReaderUserId:Rt.user().id,revokedAt:null}]}),e=e.find({discardedAt:null}),e=e.find({closedAt:null}),e=e.find({lastActivityAt:{$gt:(0,_i.Z)(new Date,6)}}),this.discussions=e.simplesort("lastActivityAt",!0).data())}},computed:{noGroups:function(){return 0===Rt.user().groups().length},promptStart:function(){return this.noGroups&&ms.canStartGroups()},userHasMuted:function(){return Rt.user().hasExperienced("mutingThread")},showLargeImage:function(){return!0}}},gi=fi,vi=(0,Ut.Z)(gi,ui,di,!1,null,null,null),bi=vi.exports,yi=function(){var e=this,t=e._self._c;return t(zs.Z,{class:"rounded elevation-"+e.elevation,attrs:{size:e.size,tile:""},on:{click:function(t){return e.$emit("click")}}},[e.group.logoUrl?t("img",{attrs:{alt:e.group.name,src:e.group.logoUrl}}):e._e(),e.group.logoUrl?e._e():t(Qt.Z,[e._v("mdi-account-group")])],1)},wi=[],xi={props:{elevation:{type:Number,default:0},group:Object,size:{type:Number,default:28}}},ki=xi,Ci=(0,Ut.Z)(ki,yi,wi,!1,null,null,null),Zi=Ci.exports,Ii=function(){var e=this,t=e._self._c;return t(rs.Z,{staticClass:"thread-previews",attrs:{"two-line":""}},e._l(e.orderedThreads,(function(e){return t(Gn,{key:e.id,attrs:{thread:e}})})),1)},Ai=[],$i={props:{threads:Array,limit:{type:Number,default:25},order:{type:String,default:"-lastActivityAt"}},computed:{orderedThreads:function(){return(0,l.slice)((0,l.orderBy)(this.threads,this.order),0,this.limit)}}},Si=$i,Ni=(0,Ut.Z)(Si,Ii,Ai,!1,null,null,null),Ti=Ni.exports,ji=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"inbox-page thread-preview-collection__container max-width-1024 px-0 px-sm-3",attrs:{"grid-list-lg":""}},[t("h1",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.titleVisible},expression:"{callback: titleVisible}"},{name:"t",rawName:"v-t",value:"inbox_page.unread_threads",expression:"'inbox_page.unread_threads'"}],staticClass:"display-1 my-4",attrs:{tabindex:"-1"}}),0==e.unreadCount&&e.loading?t("section",{staticClass:"dashboard-page__loading",attrs:{"aria-hidden":"true"}},[t("div",{staticClass:"thread-previews-container"},e._l([1,2,3,4,5,6,7,8,9,10],(function(e,o){return t(Bt,{key:o,staticClass:"thread-preview",attrs:{lineCount:2}})})),1)]):e._e(),e.unreadCount>0||!e.loading?t("section",{staticClass:"inbox-page__threads"},[t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.unreadCount,expression:"unreadCount == 0"}],staticClass:"inbox-page__no-threads"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"inbox_page.no_threads",expression:"'inbox_page.no_threads'"}]}),t("span",[e._v("ğŸ™Œ")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.groups.length,expression:"groups.length == 0"}],staticClass:"inbox-page__no-groups"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"inbox_page.no_groups.explanation",expression:"'inbox_page.no_groups.explanation'"}]}),t("button",{directives:[{name:"t",rawName:"v-t",value:"inbox_page.no_groups.start",expression:"'inbox_page.no_groups.start'"}],staticClass:"lmo-btn-link--blue",on:{click:function(t){return e.startGroup()}}}),e._v("Â "),t("span",{directives:[{name:"t",rawName:"v-t",value:"inbox_page.no_groups.or",expression:"'inbox_page.no_groups.or'"}]}),e._v("Â "),t("span",{domProps:{innerHTML:e._s(e.$t("inbox_page.no_groups.join_group"))}})]),e._l(e.groups,(function(o){return t("div",{key:o.id,staticClass:"inbox-page__group"},[e.views[o.key].length>0?t(ns.Z,{staticClass:"mb-3"},[t(is.EB,[t(Zi,{staticClass:"mr-2",attrs:{group:o,size:40}}),t("router-link",{staticClass:"inbox-page__group-name",attrs:{to:"/g/"+o.key}},[t("span",{staticClass:"subheading"},[e._v(e._s(o.name))])])],1),t(Ti,{attrs:{threads:e.views[o.key],limit:e.threadLimit}})],1):e._e()],1)}))],2):e._e()])],1)},Pi=[],Oi={data:function(){return{threadLimit:50,views:{},groups:[],loading:!1,unreadCount:0,filters:["only_threads_in_my_groups","show_unread","show_recent","hide_muted","hide_dismissed"]}},created:function(){return this.init(),D.$on("signedIn",(()=>this.init()))},methods:{startGroup:function(){return D.$emit("openModal",{component:"GroupNewForm",props:{group:jt.groups.build()}})},init:function(e={}){return Rt.isSignedIn()&&(this.loading=!0,jt.discussions.fetchInbox(e).then((()=>this.loading=!1))),D.$emit("currentComponent",{titleKey:"inbox_page.unread_threads",page:"inboxPage"}),this.watchRecords({collections:["discussions","groups"],query:e=>(this.groups=(0,l.sortBy)(Rt.user().inboxGroups(),"name"),this.views={},(0,l.each)(this.groups,(e=>this.views[e.key]=mi({filters:this.filters,group:e}))),this.unreadCount=(0,l.sum)((0,l.values)(this.views),(function(e){return e.length})))})}}},Ri=Oi,qi=(0,Ut.Z)(Ri,ji,Pi,!1,null,null,null),Mi=qi.exports,Ei=o(17024),Li=o(86158),Di=o(57894),Fi=o(95804),Ui=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"explore-page max-width-1024 px-0 px-sm-3"},[t(ci.Z,{attrs:{placeholder:e.$t("explore_page.search_placeholder"),id:"search-field","append-icon":"mdi-magnify"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),t(Fi.Z,{attrs:{items:e.orderOptions,"item-value":"val","item-text":"name",placeholder:e.$t("explore_page.order_by"),value:e.order},on:{change:e.handleOrderChange}}),t(As,{attrs:{until:!e.searching}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.noResultsFound,expression:"noResultsFound"}],staticClass:"explore-page__no-results-found",domProps:{innerHTML:e._s(e.$t("explore_page.no_results_found"))}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showMessage,expression:"showMessage"}],staticClass:"explore-page__search-results",domProps:{innerHTML:e._s(e.$t(e.searchResultsMessage,{resultCount:e.resultsCount,searchTerm:e.query}))}}),t(Di.Z,{directives:[{name:"show",rawName:"v-show",value:!e.searching,expression:"!searching"}],staticClass:"explore-page__groups my-4",attrs:{wrap:""}},[e._l(e.orderedGroups,(function(o){return t(Ei.Z,{key:o.id,attrs:{lg:6,md:6,sm:12}},[t(ns.Z,{staticClass:"explore-page__group my-4",attrs:{to:e.urlFor(o)}},[t(Li.Z,{staticClass:"explore-page__group-cover",attrs:{src:o.coverUrl,"max-height":"120"}}),t(is.EB,[e._v(e._s(o.name))]),t(is.ZB,[t("div",{staticClass:"explore-page__group-description"},[e._v(e._s(e.groupDescription(o)))]),t(ys.Z,{staticClass:"explore-page__group-stats",attrs:{"justify-start":"","align-center":""}},[t(Qt.Z,{staticClass:"mr-2"},[e._v("mdi-account-multiple")]),t("span",{staticClass:"mr-4"},[e._v(e._s(o.membershipsCount))]),t(Qt.Z,{staticClass:"mr-2"},[e._v("mdi-comment-text-outline")]),t("span",{staticClass:"mr-4"},[e._v(e._s(o.discussionsCount))]),t(Qt.Z,{staticClass:"mr-2"},[e._v("mdi-thumbs-up-down")]),t("span",{staticClass:"mr-4"},[e._v(e._s(o.pollsCount))])],1)],1)],1)],1)})),t("div",{directives:[{name:"show",rawName:"v-show",value:e.canLoadMoreGroups,expression:"canLoadMoreGroups"}],staticClass:"lmo-show-more"},[t($s.Z,{directives:[{name:"show",rawName:"v-show",value:!e.searching,expression:"!searching"},{name:"t",rawName:"v-t",value:"common.action.show_more",expression:"'common.action.show_more'"}],staticClass:"explore-page__show-more",on:{click:function(t){return e.loadMore()}}})],1)],2)],1)],1)},zi=[],Bi={methods:{urlFor:function(e,t,o){return Pt.route({model:e,action:t,params:o})},mergeQuery:function(e){return{query:(0,l.pickBy)(Object.assign({},this.$route.query,e),l.identity)}}}},Vi=o(39138),Hi=o.n(Vi),Gi=o(35161),Wi=o.n(Gi),Ki=o(87441),Yi={mixins:[Bi],data:function(){return{groupIds:[],resultsCount:0,perPage:50,canLoadMoreGroups:!0,query:"",searching:!0,order:null,orderOptions:[{name:this.$t("explore_page.newest_first"),val:"created_at"},{name:this.$t("explore_page.biggest_first"),val:"memberships_count"}]}},created:function(){return this.$route.query.order?this.order=this.$route.query.order:this.$router.replace(this.mergeQuery({order:"memberships_count"}))},mounted:function(){return D.$emit("currentComponent",{titleKey:"explore_page.header",page:"explorePage"}),this.search()},methods:{groups:function(){return jt.groups.find(this.groupIds)},handleSearchResults:function(e){return jt.groups.getExploreResultsCount(this.query).then((e=>this.resultsCount=e.count)),this.groupIds=this.groupIds.concat(Wi()(e.groups,"id")),this.canLoadMoreGroups=(e.groups||[]).length===this.perPage,this.searching=!1},search:(0,l.debounce)((function(){return this.groupIds=[],jt.groups.fetchExploreGroups(this.query,{per:this.perPage,order:this.order}).then(this.handleSearchResults)}),250),loadMore:function(){return this.searching=!0,jt.groups.fetchExploreGroups(this.query,{from:this.groupIds.length,per:this.perPage,order:this.order}).then(this.handleSearchResults)},groupCover:function(e){return{"background-image":`url(${e.coverUrl})`}},groupDescription:function(e){var t,o,s;return t=e.description||"","md"===e.descriptionFormat&&(t=(0,Ki.TU)(t)),s=new DOMParser,o=s.parseFromString(t,"text/html"),Hi()(o.body.textContent,{length:100})},handleOrderChange:function(e){return this.$router.replace(this.mergeQuery({order:e}))}},computed:{showMessage:function(){return!this.searching&&this.query.length>0&&this.groups().length>0},searchResultsMessage:function(){return 1===this.groups().length?"explore_page.single_search_result":"explore_page.multiple_search_results"},noResultsFound:function(){return!this.searching&&0===this.groups().length},orderedGroups:function(){return(0,l.orderBy)(this.groups(),[(0,l.camelCase)(this.order)],["desc"])}},watch:{query:function(){return this.searching=!0,this.search()},"$route.query.order":{immediate:!0,handler:function(){return this.order=this.$route.query.order,this.search()}}}},Qi=Yi,Ji=(0,Ut.Z)(Qi,Ui,zi,!1,null,null,null),Xi=Ji.exports,er=function(){var e=this,t=e._self._c;return t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.help",expression:"'common.help'"}],staticClass:"help-link",attrs:{href:"https://help.loomio.com/"+e.path,target:"_blank",title:e.$t(e.text)}})},tr=[],or={props:{text:String,path:String}},sr=or,nr=(0,Ut.Z)(sr,er,tr,!1,null,null,null),ir=nr.exports,rr=function(){var e=this,t=e._self._c;return t("div",[t("label",{staticClass:"caption v-label v-label--active",staticStyle:{color:"var(--text-secondary)"},attrs:{"aria-hidden":"true"}},[e._v(e._s(e.label))]),t("div",{staticClass:"lmo-textarea pb-1"},["html"==e.format?t("collab-editor",{attrs:{"focus-id":e.focusId,model:e.model,field:e.field,placeholder:e.placeholder,maxLength:e.maxLength,autofocus:e.autofocus,shouldReset:e.shouldReset},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,o){return{key:o,fn:function(t){return[e._t(o,null,null,t)]}}}))],null,!0)}):e._e(),"md"==e.format?t("md-editor",{attrs:{"focus-id":e.focusId,model:e.model,field:e.field,placeholder:e.placeholder,maxLength:e.maxLength,autofocus:e.autofocus,shouldReset:e.shouldReset},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,o){return{key:o,fn:function(t){return[e._t(o,null,null,t)]}}}))],null,!0)}):e._e()],1)])},ar=[],lr=function(){var e=this,t=e._self._c;return e.files.length?t("div",{staticClass:"files-list"},e._l(e.files,(function(o){return t(ns.Z,{key:o.key,staticClass:"mt-3",attrs:{outlined:""}},[t(is.EB,{staticClass:"files-list__item text--secondary"},[t(Qt.Z,{staticClass:"mr-2 files-list__icon"},[e._v("mdi-image")]),o.blob?t("a",{staticClass:"files-list__file-name",attrs:{href:o.blob.download_url,target:"_blank"}},[e._v(e._s(o.file.name))]):e._e(),o.blob?e._e():t("span",{staticClass:"files-list__file-name"},[e._v(e._s(o.file.name))]),o.blob?e._e():t("progress",{attrs:{max:"100"},domProps:{value:o.percentComplete}}),t($s.Z,{staticClass:"files-list__remove",attrs:{icon:""},on:{click:function(t){return e.$emit("removeFile",o.file.name)}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1),o.blob&&o.blob.preview_url?t("p",[t("img",{attrs:{src:o.blob.preview_url}})]):e._e()],1)})),1):e._e()},cr=[],ur={props:{files:Array},methods:{progressStyle:function(e){return{"background-color":this.$vuetify.theme.accent,width:e+"%"}}}},dr=ur,pr=(0,Ut.Z)(dr,lr,cr,!1,null,null,null),mr=pr.exports,hr=function(){var e=this,t=e._self._c;return e.model.linkPreviews&&e.model.linkPreviews.length?t("div",{staticClass:"link-previews mb-3"},e._l(e.model.linkPreviews,(function(o){return t("link-preview",{key:o.url,attrs:{model:e.model,preview:o,remove:e.remove}})})),1):e._e()},_r=[],fr=o(68763),gr=function(){var e=this,t=e._self._c;return t("div",[e.editing?[t(ns.Z,{staticClass:"link-preview mt-3",staticStyle:{position:"relative"},attrs:{outlined:""}},[e.preview.image?t("div",{staticClass:"link-preview__image",style:{"background-image":"url("+e.preview.image+")","background-size":e.preview.fit||"contain","background-position":e.preview.align||"center"}}):e._e(),t($s.Z,{staticClass:"link-preview__btn",staticStyle:{right:"8px"},attrs:{color:"primary",icon:"",outlined:"",title:e.$t("common.action.done")},on:{click:function(t){e.editing=!1}}},[t(Qt.Z,[e._v("mdi-check")])],1),t(is.EB,[t(ci.Z,{attrs:{filled:""},model:{value:e.preview.title,callback:function(t){e.$set(e.preview,"title",t)},expression:"preview.title"}})],1),t(is.Qq,[t(fr.Z,{attrs:{filled:""},model:{value:e.preview.description,callback:function(t){e.$set(e.preview,"description",t)},expression:"preview.description"}})],1)],1)]:[t(ns.Z,{staticClass:"link-preview link-preview-link mt-3",staticStyle:{position:"relative"},attrs:{outlined:""}},[e.remove?[t($s.Z,{staticClass:"link-preview__btn",staticStyle:{right:"8px"},attrs:{color:"primary",outlined:"",icon:"",title:e.$t("common.action.remove")},on:{click:function(t){return e.remove(e.preview.url)}}},[t(Qt.Z,[e._v("mdi-close")])],1),t($s.Z,{staticClass:"link-preview__btn",staticStyle:{right:"48px"},attrs:{color:"primary",icon:"",outlined:"",title:e.$t("common.action.edit")},on:{click:function(t){e.editing=!0}}},[t(Qt.Z,[e._v("mdi-pencil")])],1),e.preview.image?[t($s.Z,{staticClass:"link-preview__btn",staticStyle:{right:"88px"},attrs:{color:"primary",icon:"",outlined:"",title:e.$t("common.action.zoom")},on:{click:function(t){e.preview.fit="cover"==e.preview.fit?"contain":"cover"}}},["contain"==e.preview.fit?t(Qt.Z,[e._v("mdi-magnify-plus-outline")]):t(Qt.Z,[e._v("mdi-magnify-minus-outline")])],1),"cover"==e.preview.fit?t($s.Z,{staticClass:"link-preview__btn",staticStyle:{right:"128px"},attrs:{color:"primary",icon:"",outlined:"",title:e.$t("common.action.align")},on:{click:function(t){e.preview.align="top"==e.preview.align?"center":"top"}}},["top"==e.preview.align?t(Qt.Z,[e._v("mdi-format-vertical-align-center")]):t(Qt.Z,[e._v("mdi-format-vertical-align-top")])],1):e._e()]:e._e()]:e._e(),t("a",{staticClass:"link-preview-link",attrs:{href:e.preview.url,target:"_blank",rel:"nofollow ugc noreferrer noopener"}},[t("div",{staticClass:"ml-4"}),e.preview.image?t("div",{staticClass:"link-preview__image",style:{"background-image":"url("+e.preview.image+")","background-size":e.preview.fit||"contain","background-position":e.preview.align||"center"}}):e._e(),t(is.EB,{staticClass:"text--secondary"},[t(Qt.Z,{staticClass:"mr-1"},[e._v("mdi-open-in-new")]),e._v(e._s(e.preview.title))],1),t(is.Qq,["other"!=e.doctype.name?t("span",{directives:[{name:"t",rawName:"v-t",value:"doctypes."+e.doctype.name,expression:"'doctypes.'+doctype.name"}]}):t("span",{staticClass:"link-preview__hostname",domProps:{innerHTML:e._s(e.preview.hostname)}})]),e.preview.description?t(is.ZB,{staticClass:"text--secondary"},[e._v(e._s(e.preview.description))]):e._e()],1)],2)]],2)},vr=[];hi=[],o.e(1144).then(o.t.bind(o,1144,23)).then((function(e){var t,o;return t=Object.keys(e).filter((function(e){return parseInt(e).toString()===e})),o=t.map((function(t){return e[t]})),hi=o}));var br={props:{model:Object,preview:Object,remove:{default:null,type:Function}},data:function(){return{editing:!1}},computed:{doctype:function(){return hi.find((e=>new RegExp(e.regex).test(this.preview.url)))||{name:"other"}},icon:function(){return this.doctype?"mdi-"+this.doctype.icon:"mdi-link-variant"},iconColor:function(){return this.doctype.icon},hostname:function(){return new URL(this.preview.url).host}}},yr=br,wr=(0,Ut.Z)(yr,gr,vr,!1,null,null,null),xr=wr.exports,kr={components:{LinkPreview:xr},props:{model:Object,remove:{default:null,type:Function}}},Cr=kr,Zr=(0,Ut.Z)(Cr,hr,_r,!1,null,null,null),Ir=Zr.exports,Ar=function(){var e=this,t=e._self._c;return t("div",[e.editor?t("div",{staticClass:"editor"},[t("editor-content",{ref:"editor",staticClass:"html-editor__textarea lmo-markdown-wrapper",attrs:{editor:e.editor}}),t(an.Z,{staticClass:"menubar"},[t("div",[e.editor.isActive("table")?t(ys.Z,{attrs:{"align-center":""}},[t($s.Z,{attrs:{icon:"",title:e.$t("formatting.remove_table")},on:{click:function(t){e.editor.chain().deleteTable().focus().run()}}},[t(Qt.Z,[e._v("mdi-table-remove")])],1),t($s.Z,{attrs:{icon:"",title:e.$t("formatting.add_column_before")},on:{click:function(t){e.editor.chain().addColumnBefore().focus().run()}}},[t(Qt.Z,[e._v("mdi-table-column-plus-before")])],1),t($s.Z,{attrs:{icon:"",title:e.$t("formatting.add_column_after")},on:{click:function(t){e.editor.chain().addColumnAfter().focus().run()}}},[t(Qt.Z,[e._v("mdi-table-column-plus-after")])],1),t($s.Z,{attrs:{icon:"",title:e.$t("formatting.remove_column")},on:{click:function(t){e.editor.chain().deleteColumn().focus().run()}}},[t(Qt.Z,[e._v("mdi-table-column-remove")])],1),t($s.Z,{attrs:{icon:"",title:e.$t("formatting.add_row_before")},on:{click:function(t){e.editor.chain().addRowBefore().focus().run()}}},[t(Qt.Z,[e._v("mdi-table-row-plus-before")])],1),t($s.Z,{attrs:{icon:"",title:e.$t("formatting.add_row_after")},on:{click:function(t){e.editor.chain().addRowAfter().focus().run()}}},[t(Qt.Z,[e._v("mdi-table-row-plus-after")])],1),t($s.Z,{attrs:{icon:"",title:e.$t("formatting.remove_row")},on:{click:function(t){e.editor.chain().deleteRow().focus().run()}}},[t(Qt.Z,[e._v("mdi-table-row-remove")])],1),t($s.Z,{attrs:{icon:"",title:e.$t("formatting.merge_selected")},on:{click:function(t){e.editor.chain().mergeOrSplit().focus().run()}}},[t(Qt.Z,[e._v("mdi-table-merge-cells")])],1)],1):e._e(),t("div",{staticClass:"d-flex py-2 justify-space-between flex-wrap align-center",attrs:{"align-center":""}},[t("section",{staticClass:"d-flex flex-wrap formatting-tools",attrs:{"aria-label":e.$t("formatting.formatting_tools")}},[t($s.Z,{attrs:{small:e.expanded,icon:"",title:e.$t("formatting.attach")},on:{click:function(t){return e.$refs.filesField.click()}}},[t(Qt.Z,[e._v("mdi-paperclip")])],1),t($s.Z,{attrs:{small:e.expanded,icon:"",title:e.$t("formatting.insert_image")},on:{click:function(t){return e.$refs.imagesField.click()}}},[t(Qt.Z,[e._v("mdi-image")])],1),t(qs.Z,{attrs:{"close-on-content-click":!e.selectedText(),"min-width":"320px"},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[e.editor.isActive("link")?[t($s.Z,{attrs:{small:"expanded",icon:"",outlined:"",title:e.$t("formatting.link")},on:{click:function(t){e.editor.chain().toggleLink().focus().run()}}},[t(Qt.Z,[e._v("mdi-link-variant")])],1)]:[t($s.Z,e._g(e._b({attrs:{small:e.expanded,icon:"",title:e.$t("formatting.link")}},"v-btn",s,!1),o),[t(Qt.Z,[e._v("mdi-link-variant")])],1)]]}}],null,!1,703160116),model:{value:e.linkDialogIsOpen,callback:function(t){e.linkDialogIsOpen=t},expression:"linkDialogIsOpen"}},[t(ns.Z,[e.selectedText()?[t(is.EB,{directives:[{name:"t",rawName:"v-t",value:"text_editor.insert_link",expression:"'text_editor.insert_link'"}],staticClass:"title"}),t(is.ZB,[t(ci.Z,{ref:"focus",attrs:{type:"url",label:"https://www.example.com",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.setLinkUrl()}},model:{value:e.linkUrl,callback:function(t){e.linkUrl=t},expression:"linkUrl"}})],1),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.apply",expression:"'common.action.apply'"}],attrs:{small:"",color:"primary"},on:{click:function(t){return e.setLinkUrl()}}})],1)]:[t(is.EB,{directives:[{name:"t",rawName:"v-t",value:"text_editor.select_text_to_link",expression:"'text_editor.select_text_to_link'"}]})]],2)],1),t(qs.Z,{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"emoji-picker__toggle",attrs:{small:e.expanded,icon:"",title:e.$t("formatting.insert_emoji")}},"v-btn",s,!1),o),[t(Qt.Z,[e._v("mdi-emoticon-outline")])],1)]}}],null,!1,2021154225),model:{value:e.closeEmojiMenu,callback:function(t){e.closeEmojiMenu=t},expression:"closeEmojiMenu"}},[t(mn,{attrs:{insert:e.emojiPicked}})],1),e.expanded?[e._l([1,2,3],(function(o){return[t($s.Z,{attrs:{small:"",icon:"",outlined:e.editor.isActive("heading",{level:o}),title:e.$t("formatting.heading"+o)},on:{click:function(t){e.editor.chain().focus().toggleHeading({level:o}).run()}}},[t(Qt.Z,[e._v(e._s("mdi-format-header-"+o))])],1)]}))]:e._e(),e.expanded?t($s.Z,{attrs:{small:"",icon:"",outlined:e.editor.isActive("bold"),title:e.$t("formatting.bold")},on:{click:function(t){e.editor.chain().toggleBold().focus().run()}}},[t(Qt.Z,{attrs:{small:""}},[e._v("mdi-format-bold")])],1):e._e(),e.expanded?t($s.Z,{attrs:{small:"",icon:"",outlined:e.editor.isActive("italic"),title:e.$t("formatting.italicize")},on:{click:function(t){e.editor.chain().toggleItalic().focus().run()}}},[t(Qt.Z,[e._v("mdi-format-italic")])],1):e._e(),e.expanded?t($s.Z,{attrs:{small:"",icon:"",outlined:e.editor.isActive("strike"),title:e.$t("formatting.strikethrough")},on:{click:function(t){e.editor.chain().toggleStrike().focus().run()}}},[t(Qt.Z,[e._v("mdi-format-strikethrough")])],1):e._e(),e.expanded?t($s.Z,{attrs:{small:"",icon:"",outlined:e.editor.isActive("bulletList"),title:e.$t("formatting.bullet_list")},on:{click:function(t){e.editor.chain().toggleBulletList().focus().run()}}},[t(Qt.Z,[e._v("mdi-format-list-bulleted")])],1):e._e(),e.expanded?t($s.Z,{attrs:{small:"",icon:"",outlined:e.editor.isActive("orderedList"),title:e.$t("formatting.number_list")},on:{click:function(t){e.editor.chain().toggleOrderedList().focus().run()}}},[t(Qt.Z,[e._v("mdi-format-list-numbered")])],1):e._e(),e.expanded?t($s.Z,{attrs:{small:"",icon:"",outlined:e.editor.isActive("taskList"),title:e.$t("formatting.task_list")},on:{click:function(t){e.editor.chain().toggleTaskList().focus().run()}}},[t(Qt.Z,[e._v("mdi-checkbox-marked-outline")])],1):e._e(),e.expanded?t("text-highlight-btn",{attrs:{editor:e.editor}}):e._e(),e.expanded?t("text-align-btn",{attrs:{editor:e.editor}}):e._e(),e.expanded?[t(qs.Z,{attrs:{small:"","close-on-content-click":!1,"min-width":"320px"},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t($s.Z,e._g({attrs:{small:"",icon:"",title:e.$t("formatting.embed")}},o),[t(Qt.Z,[e._v("mdi-youtube")])],1)]}}],null,!1,436079134),model:{value:e.iframeDialogIsOpen,callback:function(t){e.iframeDialogIsOpen=t},expression:"iframeDialogIsOpen"}},[t(ns.Z,[t(is.EB,{directives:[{name:"t",rawName:"v-t",value:"text_editor.insert_embedded_url",expression:"'text_editor.insert_embedded_url'"}],staticClass:"title"}),t(is.ZB,[t(ci.Z,{ref:"focus",attrs:{type:"url",label:"e.g. https://www.youtube.com/watch?v=Zlzuqsunpxc",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.setIframeUrl()}},model:{value:e.iframeUrl,callback:function(t){e.iframeUrl=t},expression:"iframeUrl"}})],1),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.apply",expression:"'common.action.apply'"}],attrs:{small:"",color:"primary"},on:{click:function(t){return e.setIframeUrl()}}})],1)],1)],1),t($s.Z,{attrs:{small:"",icon:"",outlined:e.editor.isActive("blockquote"),title:e.$t("formatting.blockquote")},on:{click:function(t){e.editor.chain().toggleBlockquote().focus().run()}}},[t(Qt.Z,[e._v("mdi-format-quote-close")])],1),t($s.Z,{attrs:{small:"",icon:"",outlined:e.editor.isActive("codeBlock"),title:e.$t("formatting.code_block")},on:{click:function(t){e.editor.chain().toggleCodeBlock().focus().run()}}},[t(Qt.Z,[e._v("mdi-code-braces")])],1),t($s.Z,{attrs:{small:"",icon:"",title:e.$t("formatting.divider")},on:{click:function(t){e.editor.chain().setHorizontalRule().focus().run()}}},[t(Qt.Z,[e._v("mdi-minus")])],1),t($s.Z,{attrs:{small:"",icon:"",title:e.$t("formatting.add_table"),outlined:e.editor.isActive("table")},on:{click:function(t){e.editor.chain().insertTable({rows:3,cols:3,withHeaderRow:!1}).focus().run()}}},[t(Qt.Z,[e._v("mdi-table")])],1),t($s.Z,{attrs:{small:"",icon:"",title:e.$t("formatting.edit_markdown")},on:{click:e.convertToMd}},[t(Qt.Z,[e._v("mdi-language-markdown-outline")])],1)]:e._e(),e.expanded?e._e():t($s.Z,{staticClass:"html-editor__expand",attrs:{icon:"",title:e.$t("formatting.expand")},on:{click:e.toggleExpanded}},[t(Qt.Z,[e._v("mdi-chevron-right")])],1),e.expanded?t($s.Z,{staticClass:"html-editor__expand",attrs:{small:"",icon:"",title:e.$t("formatting.collapse")},on:{click:e.toggleExpanded}},[t(Qt.Z,[e._v("mdi-chevron-left")])],1):e._e()],2),t(yn.Z),e.expanded?e._e():e._t("actions"),e.maxLength?t("div",{staticClass:"text-right",class:{"red--text":e.reasonTooLong,"text--secondary":!e.reasonTooLong},attrs:{dense:""}},[t("span",{style:e.reasonTooLong?"font-weight: 700":""},[e._v(e._s(e.editor.getCharacterCount())+" / "+e._s(e.maxLength))])]):e._e()],2)],1)]),e.expanded?t("div",{staticClass:"d-flex",attrs:{name:"actions"}},[t(yn.Z),e._t("actions")],2):e._e()],1):e._e(),t(Ir,{attrs:{model:e.model,remove:e.removeLinkPreview}}),t("suggestion-list",{attrs:{query:e.query,loading:e.fetchingMentions,mentionable:e.mentionable,positionStyles:e.suggestionListStyles,navigatedUserIndex:e.navigatedUserIndex},on:{"select-user":e.selectUser}}),t("files-list",{attrs:{files:e.files},on:{removeFile:e.removeFile}}),t("form",{staticStyle:{display:"block"},on:{change:e.fileSelected}},[t("input",{ref:"filesField",attrs:{type:"file",name:"files",multiple:""}})]),t("form",{staticStyle:{display:"block"},on:{change:e.imageSelected}},[t("input",{ref:"imagesField",attrs:{type:"file",name:"files",multiple:""}})])],1)},$r=[],Sr=o(77668),Nr=class{constructor({onProgress:e}){this.onProgress=e}upload(e){var t,o;return o="/direct_uploads",t=new Sr.DirectUpload(e,o,{directUploadWillStoreFileWithXHR:e=>e.upload.addEventListener("progress",(e=>{if(e.lengthComputable)return this.onProgress(e)}))}),new Promise((function(e,o){return t.create((function(t,s,n){return t?o(t):e(s)}))}))}},Tr={"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã†":"AE","Ã‡":"C","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","ÃŒ":"I","Ã":"I","Ã":"I","Ã":"I","Ã":"D","Ã‘":"N","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Å":"O","Ã˜":"O","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Å°":"U","Ã":"Y","Ã":"TH","ÃŸ":"ss","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã¦":"ae","Ã§":"c","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã°":"d","Ã±":"n","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Å‘":"o","Ã¸":"o","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Å±":"u","Ã½":"y","Ã¾":"th","Ã¿":"y"},jr={"Â©":"(c)"},Pr={"Î±":"a","Î²":"b","Î³":"g","Î´":"d","Îµ":"e","Î¶":"z","Î·":"h","Î¸":"8","Î¹":"i","Îº":"k","Î»":"l","Î¼":"m","Î½":"n","Î¾":"3","Î¿":"o","Ï€":"p","Ï":"r","Ïƒ":"s","Ï„":"t","Ï…":"y","Ï†":"f","Ï‡":"x","Ïˆ":"ps","Ï‰":"w","Î¬":"a","Î­":"e","Î¯":"i","ÏŒ":"o","Ï":"y","Î®":"h","Ï":"w","Ï‚":"s","ÏŠ":"i","Î°":"y","Ï‹":"y","Î":"i","Î‘":"A","Î’":"B","Î“":"G","Î”":"D","Î•":"E","Î–":"Z","Î—":"H","Î˜":"8","Î™":"I","Îš":"K","Î›":"L","Îœ":"M","Î":"N","Î":"3","ÎŸ":"O","Î ":"P","Î¡":"R","Î£":"S","Î¤":"T","Î¥":"Y","Î¦":"F","Î§":"X","Î¨":"PS","Î©":"W","Î†":"A","Îˆ":"E","ÎŠ":"I","ÎŒ":"O","Î":"Y","Î‰":"H","Î":"W","Îª":"I","Î«":"Y"},Or={"ÅŸ":"s","Å":"S","Ä±":"i","Ä°":"I","Ã§":"c","Ã‡":"C","Ã¼":"u","Ãœ":"U","Ã¶":"o","Ã–":"O","ÄŸ":"g","Ä":"G"},Rr={"Ğ°":"a","Ğ±":"b","Ğ²":"v","Ğ³":"g","Ğ´":"d","Ğµ":"e","Ñ‘":"yo","Ğ¶":"zh","Ğ·":"z","Ğ¸":"i","Ğ¹":"j","Ğº":"k","Ğ»":"l","Ğ¼":"m","Ğ½":"n","Ğ¾":"o","Ğ¿":"p","Ñ€":"r","Ñ":"s","Ñ‚":"t","Ñƒ":"u","Ñ„":"f","Ñ…":"h","Ñ†":"c","Ñ‡":"ch","Ñˆ":"sh","Ñ‰":"sh","ÑŠ":"","Ñ‹":"y","ÑŒ":"","Ñ":"e","Ñ":"yu","Ñ":"ya","Ğ":"A","Ğ‘":"B","Ğ’":"V","Ğ“":"G","Ğ”":"D","Ğ•":"E","Ğ":"Yo","Ğ–":"Zh","Ğ—":"Z","Ğ˜":"I","Ğ™":"J","Ğš":"K","Ğ›":"L","Ğœ":"M","Ğ":"N","Ğ":"O","ĞŸ":"P","Ğ ":"R","Ğ¡":"S","Ğ¢":"T","Ğ£":"U","Ğ¤":"F","Ğ¥":"H","Ğ¦":"C","Ğ§":"Ch","Ğ¨":"Sh","Ğ©":"Sh","Ğª":"","Ğ«":"Y","Ğ¬":"","Ğ­":"E","Ğ®":"Yu","Ğ¯":"Ya"},qr={"Ğ„":"Ye","Ğ†":"I","Ğ‡":"Yi","Ò":"G","Ñ”":"ye","Ñ–":"i","Ñ—":"yi","Ò‘":"g"},Mr={"Ä":"c","Ä":"d","Ä›":"e","Åˆ":"n","Å™":"r","Å¡":"s","Å¥":"t","Å¯":"u","Å¾":"z","ÄŒ":"C","Ä":"D","Äš":"E","Å‡":"N","Å˜":"R","Å ":"S","Å¤":"T","Å®":"U","Å½":"Z"},Er={"Ä…":"a","Ä‡":"c","Ä™":"e","Å‚":"l","Å„":"n","Ã³":"o","Å›":"s","Åº":"z","Å¼":"z","Ä„":"A","Ä†":"C","Ä˜":"e","Å":"L","Åƒ":"N","Ã“":"o","Åš":"S","Å¹":"Z","Å»":"Z"},Lr={"Ä":"a","Ä":"c","Ä“":"e","Ä£":"g","Ä«":"i","Ä·":"k","Ä¼":"l","Å†":"n","Å¡":"s","Å«":"u","Å¾":"z","Ä€":"A","ÄŒ":"C","Ä’":"E","Ä¢":"G","Äª":"i","Ä¶":"k","Ä»":"L","Å…":"N","Å ":"S","Åª":"u","Å½":"Z"},Dr=new Array;Dr[0]=Tr,Dr[1]=jr,Dr[2]=Pr,Dr[3]=Or,Dr[4]=Rr,Dr[5]=qr,Dr[6]=Mr,Dr[7]=Er,Dr[8]=Lr;var Fr=new Object;Fr.Initialize=function(){if(!Fr.map){for(var e in Fr.map={},Fr.chars="",Dr){var t=Dr[e];for(var o in t)Fr.map[o]=t[o],Fr.chars+=o}Fr.regex=new RegExp("["+Fr.chars+"]|[^"+Fr.chars+"]+","g")}};var Ur=function(e){Fr.Initialize();var t="",o=e.match(Fr.regex);if(o)for(var s=0;s<o.length;s++){if(1==o[s].length){var n=Fr.map[o[s]];if(null!=n){t+=n;continue}}t+=o[s]}else t=e;return t};function zr(e,t=60){return e=Ur(e),e=e.replace(/[^-\w\s]/g,""),e=e.replace(/^\s+|\s+$/g,""),e=e.replace(/[-\s]+/g,"-"),e.toLowerCase().substring(0,t)}var Br=function(e){var t,o;return t=new Ki.TU.Renderer(e),o=(0,l.clone)(t),o.paragraph=function(e){return t.paragraph(ue(e))},o.listitem=function(e){return t.listitem(ue(e))},o.tablecell=function(e,o){return t.tablecell(ue(e),o)},o.heading=function(e,o){return t.heading(ue(e),o,e,{slug:zr})},o.link=function(e,o,s){return t.link(e,o,s).replace("<a ",'<a rel="ugc noreferrer" target="_blank" ')},o},Vr={gfm:!0,breaks:!0,smartypants:!1,tables:!0},Hr=function(e,t){return Ki.TU.setOptions(Object.assign({renderer:Br()},Vr)),e[`${t}Format`]="html",e[t]=(0,Ki.TU)(e[t]||"")},Gr=function(e,t){return o.e(50036).then(o.bind(o,50036)).then((function(o){var s;return s=o.default({headingStyle:"atx",hr:"---",codeBlockStyle:"fenced"}),s.addRule("mentions",{filter:"span",replacement:function(e,t,o){return"@"+t.getAttribute("data-mention-id")}}),e[`${t}Format`]="md",e[t]=s.turndown(e[t]||"")}))},Wr=o(99734),Kr=o(67937),Yr=o(30561),Qr=o(83416),Jr=(o(57355),o(20336)),Xr=o(73397),ea=o(94903),ta=(o(35525),o(7490)),oa=o(91842),sa=o(25748),na=o(73816),ia=o(99404),ra=o(34565),aa=o(51575),la=o(26022),ca=o(93237),ua=o(4281),da=o(658),pa=o(43626),ma=o(33991),ha=o(60363),_a=o(87605),fa=o(27935),ga=o(6007),va=o(33055),ba=o(64826),ya=function(){var e=this,t=e._self._c;return t("node-view-wrapper",{attrs:{as:"li"}},[t(ba.Z,{attrs:{contenteditable:"false",color:"accent",ripple:!1,type:"checkbox",value:e.checked},on:{click:e.onCheckboxChange}}),t("node-view-content",{class:{"task-item-text":!0,"task-item-is-empty":e.isEmpty},attrs:{as:"span","data-placeholder":e.$t("tasks.task_placeholder")}}),e.hasMention?t(qo.Z,{staticClass:"ml-2",attrs:{contenteditable:"false",color:"accent","x-small":""},on:{click:e.openModal}},[e._v("ğŸ“…"),e.node.attrs.dueOn?t("span",{staticClass:"ml-1"},[e._v(e._s(e.node.attrs.dueOn))]):t("span",{directives:[{name:"t",rawName:"v-t",value:"tasks.add_due_date",expression:"'tasks.add_due_date'"}],staticClass:"ml-1"})]):e._e(),t(va.Z,{ref:"dialog",attrs:{contenteditable:"false",persistent:"",width:"290px"},model:{value:e.modalOpen,callback:function(t){e.modalOpen=t},expression:"modalOpen"}},[t(ns.Z,[t(is.EB,[t("span",{directives:[{name:"t",rawName:"v-t",value:"tasks.due_date",expression:"'tasks.due_date'"}]}),t(yn.Z),t($s.Z,{attrs:{icon:""},on:{click:function(t){e.modalOpen=!1}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1),t(ga.Z,{attrs:{"no-title":"",scrollable:"","show-current":!1,min:(new Date).toISOString().substring(0,10)},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),t(is.ZB,[t(Fi.Z,{attrs:{label:e.$t("tasks.send_reminder"),items:e.reminders},model:{value:e.remind,callback:function(t){e.remind=t},expression:"remind"}})],1),t(is.h7,[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:e.$t("common.action.remove"),expression:"$t('common.action.remove')"}],attrs:{text:"",color:"primary"},on:{click:e.clearAndClose}}),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:e.$t("common.action.ok"),expression:"$t('common.action.ok')"}],attrs:{text:"",color:"primary",disabled:!e.date},on:{click:e.saveAndClose}})],1)],1)],1)],1)},wa=[],xa={components:{NodeViewWrapper:fa.T5,NodeViewContent:fa.ms},props:fa.Un,data:function(){return{modalOpen:!1,date:null,remind:0,checked:this.node.attrs.checked,reminders:[{text:this.$t("tasks.no_reminder"),value:null},{text:this.$t("tasks.on_due_date"),value:0},{text:this.$t("tasks.1_day_before"),value:1},{text:this.$t("tasks.2_day_before"),value:2},{text:this.$t("tasks.3_day_before"),value:3},{text:this.$t("tasks.7_day_before"),value:7}],mentioned:[]}},methods:{findMentioned:function(e){return console.log(e.toString())},onCheckboxChange:function(e){return this.checked=!this.checked,this.updateAttributes({checked:this.checked})},openModal:function(){return this.findMentioned(this.node),this.date=this.node.attrs.dueOn,this.remind=this.date?parseInt(this.node.attrs.remind)||null:0,this.modalOpen=!0},saveAndClose:function(){return this.updateAttributes({dueOn:this.date,remind:this.remind}),this.modalOpen=!1},clearAndClose:function(){return this.updateAttributes({dueOn:null,remind:null}),this.modalOpen=!1}},computed:{isEmpty:function(){return"taskItem(paragraph)"===this.node.toString()},hasMention:function(){return this.node.toString().includes("mention")}}},ka=xa,Ca=(0,Ut.Z)(ka,ya,wa,!1,null,null,null),Za=Ca.exports;const Ia=_a.ZP.extend({addAttributes(){return{uid:{default:Math.floor(9e7*Math.random()),parseHTML:e=>parseInt(e.getAttribute("data-uid"))||Math.floor(9e7*Math.random()),renderHTML:e=>({"data-uid":e.uid}),keepOnSplit:!1},checked:{default:!1,parseHTML:e=>"true"===(e.getAttribute("data-checked")||e.getAttribute("data-done")),renderHTML:e=>({"data-checked":e.checked}),keepOnSplit:!1},dueOn:{default:null,parseHTML:e=>e.getAttribute("data-due-on"),renderHTML:e=>({"data-due-on":e.dueOn}),keepOnSplit:!1},remind:{default:null,parseHTML:e=>e.getAttribute("data-remind"),renderHTML:e=>({"data-remind":e.remind}),keepOnSplit:!1},authorId:{default:Rt.user().id,parseHTML:e=>parseInt(e.getAttribute("data-author-id")),renderHTML:e=>({"data-author-id":e.authorId}),keepOnSplit:!1}}},parseHTML(){return[{tag:'li[data-type="taskItem"]',priority:51},{tag:'li[data-type="todo_item"]',priority:51}]},addNodeView(){return(0,fa.uf)(Za)}});var Aa=o(63354);const $a=Aa.Z.extend({parseHTML(){return[{tag:'ul[data-type="taskList"]',priority:51},{tag:'ul[data-type="todo_list"]',priority:51}]}});var Sa=o(23621),Na=o(52701),Ta=o(48510),ja=o(14068),Pa=o(42752);o(16722);const Oa=ja.ZP.extend({addAttributes(){return{id:{default:null,parseHTML:e=>e.getAttribute("data-mention-id"),renderHTML:e=>({"data-mention-id":e.id})},label:{default:null,parseHTML:e=>e.getAttribute("data-label")||e.innerText.split("@").join("")}}},renderHTML({node:e,HTMLAttributes:t}){return["span",(0,Pa.P1)(this.options.HTMLAttributes,t),`@${e.attrs.label}`]},parseHTML(){return[{tag:"span[data-mention-id]"}]}});var Ra=o(26761),qa=o(2376),Ma=o(84348);let Ea=0;const La=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,Da=new qa.Sy({state:{key:new qa.H$("uploadPlaceholder"),init(){return Ma.EH.empty},apply(e,t){t=t.map(e.mapping,e.doc);let o=e.getMeta("uploadPlaceholder");if(o&&o.add){let s=document.createElement("progress");s.setAttribute("id",o.add.id),s.setAttribute("max",100),s.setAttribute("value",0);let n=Ma.p.widget(o.add.pos,s,{id:o.add.id});t=t.add(e.doc,[n])}else o&&o.remove&&(t=t.remove(t.find(null,null,(e=>e.id==o.remove.id))));return t}},props:{decorations(e){return this.getState(e)}}});function Fa(e,t){let o=Da.getState(e),s=o.find(null,null,(e=>e.id==t));return s.length?s[0].from:null}function Ua({files:e,view:t,attachFile:o,attachImageFile:s,coordinates:n}){Array.from(e||[]).forEach((e=>{/image/i.test(e.type)?za(e,t,n,s):o({file:e})}))}function za(e,t,o,s){const{schema:n}=t.state,i="image"+Ea++;let r=t.state.tr;r.selection.empty?o?r.setMeta("uploadPlaceholder",{add:{id:i,pos:o.pos}}):r.setMeta("uploadPlaceholder",{add:{id:i,pos:r.selection.from}}):(r.deleteSelection(),r.setMeta("uploadPlaceholder",{add:{id:i,pos:r.selection.from}})),t.dispatch(r),s({file:e,onProgress:e=>{document.getElementById(i).setAttribute("value",parseInt(e.loaded/e.total*100))},onComplete:e=>{var o=document.createElement("img");o.src=e.preview_url,o.onload=function(){let s=Fa(t.state,i);null!=s&&t.dispatch(t.state.tr.replaceWith(s,s,n.nodes.image.create({src:e.preview_url,height:o.naturalHeight,width:o.naturalWidth})).setMeta("uploadPlaceholder",{remove:{id:i}}))}},onFailure:()=>{t.dispatch(r.setMeta("uploadPlaceholder",{remove:{id:i}}))}})}const Ba=Ra.ZP.extend({addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},addInputRules(){return[(0,Pa.x2)({find:La,type:this.type,getAttributes:e=>{const[,t,o,s,n,i]=e;return{src:o,alt:t,title:s,width:n,height:i}}})]},addProseMirrorPlugins(){const e=this.options.attachFile,t=this.options.attachImageFile;return[Da,new qa.Sy({props:{handleDOMEvents:{paste(o,s){const n=Array.from(s.clipboardData.items);if(0==n.filter((e=>e.getAsFile())).length)return;s.preventDefault();const i=n.map((e=>new File([e.getAsFile()],s.clipboardData.getData("text/plain")||Date.now(),{lastModified:Date.now(),type:e.type}))),r=null;Ua({files:i,view:o,attachFile:e,attachImageFile:t,coordinates:r})},drop(o,s){const n=s.dataTransfer&&s.dataTransfer.files&&s.dataTransfer.files.length;if(!n)return;s.preventDefault();const i=o.posAtCoords({left:s.clientX,top:s.clientY});Ua({files:s.dataTransfer.files,view:o,attachFile:e,attachImageFile:t,coordinates:i})}}}})]}}),Va=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,Ha=Pa.NB.create({name:"iframe",group:"block",selectable:!1,addOptions(){return{HTMLAttributes:{}}},addAttributes(){return{src:{default:null},allowfullscreen:{default:!0}}},parseHTML(){return[{tag:"iframe[src]"}]},renderHTML({HTMLAttributes:e}){return["div",{"data-iframe-container":"1"},["iframe",(0,Pa.P1)(this.options.HTMLAttributes,e)]]},renderText({node:e}){return e.attrs.src},addCommands(){return{setIframe:e=>({tr:t,dispatch:o})=>{const{selection:s}=t,n=this.type.create(e);return o&&t.replaceRangeWith(s.from,s.to,n),!0}}},addInputRules(){return[(0,Pa.x2)({find:Va,type:this.type,getAttributes:e=>{const[,t]=e;return{src:t}}})]}});var Ga,Wa,Ka,Ya,Qa=function(e){return e=e||"",e.includes("youtube.com")||e.includes("youtu.be")?Ka(e):e.includes("vimeo.com/")?Wa(e):e.includes("loom.com")?Ga(e):e};Ka=function(e){var t;return t=Ya(e),`https://www.youtube.com/embed/${t}`},Wa=function(e){return e.includes("player.vimeo.com/video/")?e:e.replace("vimeo.com/","player.vimeo.com/video/")},Ya=function(e){var t;return t="",e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==e[2]?(t=e[2].split(/[^0-9a-z_\-]/i),t=t[0]):t=e,t},Ga=function(e){return e.includes("share")?e.replace("share","embed"):e};var Ja=o(16496),Xa=o.n(Ja),el={data:function(){return{mentionableUserIds:[],mentionable:[],query:"",navigatedUserIndex:0,suggestionListStyles:{},fetchingMentions:!1}},mounted:function(){return this.fetchMentionable=(0,l.debounce)((function(){if(this.query)return this.fetchingMentions=!0,jt.users.fetchMentionable(this.query,this.model).then((e=>(this.fetchingMentions=!1,this.mentionableUserIds=(0,l.uniq)(this.mentionableUserIds.concat((0,l.map)(e.users,"id"))),this.findMentionable())))}),500)},methods:{findMentionable:function(){var e;return this.mentionableUserIds=(0,l.uniq)(this.mentionableUserIds.concat(this.model.participantIds())),e=(0,l.filter)(jt.users.collection.chain().find({id:{$in:this.mentionableUserIds}}).data(),(e=>(e.name||"").toLowerCase().startsWith(this.query)||(e.username||"").toLowerCase().startsWith(this.query)||(e.name||"").toLowerCase().includes(` ${this.query}`))),this.mentionable=(0,l.sortBy)(e,(function(e){return 0-jt.events.find({actorId:e.id}).length}))}}},tl={methods:{textarea:function(){return this.$refs.field.$el.querySelector("textarea")},onKeyUp:function(e){var t;return t=this.textarea().value.slice(0,this.textarea().selectionStart).match(/@(\w+)$/),t?(this.query=t[1].toLowerCase(),this.fetchMentionable(),this.findMentionable(),this.respondToKey(e),this.updatePopup()):this.query=""},onKeyDown:function(e){if(this.query)return this.respondToKey(e)},respondToKey:function(e){var t;if(38===e.keyCode&&(this.navigatedUserIndex=(this.navigatedUserIndex+this.mentionable.length-1)%this.mentionable.length,e.preventDefault()),40===e.keyCode&&(this.navigatedUserIndex=(this.navigatedUserIndex+1)%this.mentionable.length,e.preventDefault()),[13,9].includes(e.keyCode)&&(t=this.mentionable[this.navigatedUserIndex]))return this.selectUser(t),this.query="",e.preventDefault()},selectUser:function(e){var t,o;return this.textarea().value,o=this.textarea().value.slice(0,this.textarea().selectionStart-this.query.length),t=this.textarea().value.slice(this.textarea().selectionStart),this.model[this.field]=o+e.username+" "+t,this.textarea().selectionEnd=(o+e.username).length+1,this.textarea().focus,this.query=""},updatePopup:function(){var e;if(this.$refs.field)return e=Xa()(this.textarea(),this.textarea().selectionStart-this.query.length),this.suggestionListStyles={position:"absolute",top:e.top-this.textarea().scrollTop+e.height+16+"px",left:e.left+"px"}}}},ol={data:function(){return{suggestionRange:null}},created:function(){return this.insertMention=function(){return{}}},methods:{upHandler:function(){return this.navigatedUserIndex=(this.navigatedUserIndex+this.mentionable.length-1)%this.mentionable.length},downHandler:function(){return this.navigatedUserIndex=(this.navigatedUserIndex+1)%this.mentionable.length},enterHandler:function(){var e;if(e=this.mentionable[this.navigatedUserIndex],e)return this.selectUser(e)},selectUser:function(e){return this.insertMention({id:e.username,label:e.name}),this.editor.chain().focus()},updatePopup:function(e){return this.suggestionListStyles={position:"fixed",top:e.y+24+"px",left:e.x+"px"}}}},sl=function(){return{HTMLAttributes:{class:"mention"},suggestion:{render:()=>({onStart:e=>(this.query=e.query.toLowerCase(),this.suggestionRange=e.range,this.insertMention=e.command,this.updatePopup(e.clientRect()),this.fetchMentionable(),this.findMentionable()),onUpdate:e=>(this.query=e.query.toLowerCase(),this.suggestionRange=e.range,this.insertMention=e.command,this.navigatedUserIndex=0,this.updatePopup(e.clientRect()),this.fetchMentionable(),this.findMentionable()),onExit:e=>(this.query=null,this.suggestionRange=null,this.navigatedUserIndex=0),onKeyDown:e=>38===e.event.keyCode?(this.upHandler(),!0):40===e.event.keyCode?(this.downHandler(),!0):!![13,9].includes(e.event.keyCode)&&(this.enterHandler(),!0)})}}},nl=function(){var e=this,t=e._self._c;return t(ns.Z,{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],ref:"suggestions",staticClass:"suggestion-list",style:e.positionStyles,attrs:{outlined:"",elevation:8}},[e.mentionable.length?[t(rs.Z,{attrs:{dense:""}},e._l(e.mentionable,(function(o,s){return t(zo.Z,{key:o.id,class:{"v-list-item--active":e.navigatedUserIndex===s},on:{click:function(t){return e.$emit("select-user",o)}}},[t(Vo.V9,[e._v(e._s(o.name)),o.id==e.currentUser.id?t("span",{staticClass:"text--secondary"},[e._v("Â  ("+e._s(e.$t("common.you"))+")")]):e._e(),e.showUsername?t("span",{staticClass:"text--secondary"},[e._v("Â  "+e._s("@"+o.username))]):e._e()])],1)})),1)]:e._e(),0==e.mentionable.length?t(is.Qq,{directives:[{name:"t",rawName:"v-t",value:"common.no_results_found",expression:"'common.no_results_found'"}]}):e._e(),t("div",{staticClass:"d-flex justify-center"},[e.loading?t(ws.Z,{attrs:{indeterminate:"",color:"primary",size:"24",width:"2"}}):e._e()],1)],2)},il=[],rl={props:{query:String,loading:Boolean,mentionable:Array,positionStyles:Object,navigatedUserIndex:Number,showUsername:{type:Boolean,default:!1}}},al=rl,ll=(0,Ut.Z)(al,nl,il,!1,null,null,null),cl=ll.exports,ul={data:function(){return{files:[],imageFiles:[]}},created:function(){return this.files=this.model.attachments.filter((function(e){return e.signed_id})).map((function(e){return{blob:e,file:{name:e.filename}}}))},watch:{files:function(){return this.updateFiles()},imageFiles:function(){return this.updateFiles()}},methods:{resetFiles:function(){return this.files=[],this.imageFiles=[]},updateFiles:function(){return this.model.files=this.files.filter((e=>e.blob)).map((e=>e.blob.signed_id)),this.model.imageFiles=this.imageFiles.filter((e=>e.blob)).map((e=>e.blob.signed_id)),this.emitUploading()},emitUploading:function(){return this.$emit("is-uploading",!((this.model.files||[]).length===this.files.length&&(this.model.imageFiles||[]).length===this.imageFiles.length))},removeFile:function(e){return this.files=this.files.filter((function(t){return t.file.name!==e}))},attachFile:function({file:e}){var t,o;return o={file:e,key:e.name+e.size,percentComplete:0,blob:null},this.files.push(o),this.emitUploading(),t=new Nr({onProgress:function(e){return o.percentComplete=parseInt(e.loaded/e.total*100)}}),t.upload(e).then((e=>(o.blob=e,this.updateFiles())),(function(e){return console.log("attachment failed to upload")}))},attachImageFile:function({file:e,onProgress:t,onComplete:o,onFailure:s}){var n,i;return i={file:e,blob:null},this.imageFiles.push(i),this.emitUploading(),n=new Nr({onProgress:t}),n.upload(e).then((e=>(i.blob=e,o(e),this.updateFiles())),s)},fileSelected:function(){return(0,l.forEach)(this.$refs.filesField.files,(e=>this.attachFile({file:e})))},imageSelected:function(){return Array.from(this.$refs.imagesField.files||[]).forEach((e=>/image/i.test(e.type)?za(e,this.editor.view,null,this.attachImageFile):this.attachFile({file:e})))}}},dl=function(){var e=this,t=e._self._c;return t(qs.Z,{scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t("div",{staticClass:"rounded-lg color-picker-btn"},[t($s.Z,e._g(e._b({staticClass:"drop-down-button",style:{"background-color":e.buttonBgColor,color:e.buttonFgColor},attrs:{small:"",icon:"",title:e.$t("formatting.colors")}},"v-btn",s,!1),o),[t(Qt.Z,[e._v("mdi-palette")])],1)],1)]}}])},[t(ns.Z,{staticClass:"color-picker pa-2"},[e._l(e.colors,(function(o,s){return t("div",{staticClass:"swatch swatch-color",class:{"swatch--selected":s==e.activeColorKey},style:{"background-color":o.lighten1},on:{click:function(t){e.editor.chain().setHighlight({color:s}).focus().run()}}},[e._v("Â ")])})),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"formatting.reset",expression:"'formatting.reset'"}],staticClass:"mt-2",attrs:{block:"","x-small":"",outlined:""},on:{click:function(t){e.editor.chain().unsetHighlight().focus().run()}}})],2)],1)},pl=[],ml={props:{editor:Object},data:function(){return{colors:(0,l.pick)(ft.Z,"red pink purple blue green yellow orange brown grey".split(" "))}},computed:{activeColorKey:function(){return this.editor.isActive("highlight")?(0,l.keys)(this.colors).find((e=>this.editor.isActive("highlight",{color:e}))):null},buttonBgColor:function(){return(this.colors[this.activeColorKey]||{lighten1:null}).lighten2},buttonFgColor:function(){return this.buttonBgColor?"#000":void 0}}},hl=ml,_l=(0,Ut.Z)(hl,dl,pl,!1,null,null,null),fl=_l.exports,gl=function(){var e=this,t=e._self._c;return t(qs.Z,{scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t("div",{staticClass:"rounded-lg"},[t($s.Z,e._g({staticClass:"drop-down-button",attrs:{small:"",icon:"",outlined:e.showOutline,title:e.$t("formatting.alignment")}},o),[t(Qt.Z,[e._v("mdi-format-align-"+e._s(e.current))])],1)],1)]}}])},[t(rs.Z,{attrs:{dense:""}},e._l(e.alignments,(function(o,s){return t(zo.Z,{key:s,class:{"v-list-item--active":e.editor.isActive({textAlign:o.value})},on:{click:function(t){e.editor.chain().focus().setTextAlign(o.value).run()}}},[t(Rs.Z,[t(Qt.Z,[e._v(e._s("mdi-format-align-"+o.value))])],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:o.label,expression:"item.label"}]})],1)})),1)],1)},vl=[],bl={props:{editor:Object},methods:{isActive:function(e){return this.editor.isActive({textAlign:e})}},computed:{showOutline:function(){return this.editor.isActive({textAlign:"right"})||this.editor.isActive({textAlign:"center"})},current:function(){return["left","center","right"].find((e=>this.isActive(e)))||"left"},alignments:function(){return[{label:"formatting.left_align",value:"left"},{label:"formatting.center_align",value:"center"},{label:"formatting.right_align",value:"right"}]}}},yl=bl,wl=(0,Ut.Z)(yl,gl,vl,!1,null,null,null),xl=wl.exports;const kl=Pa.hj.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>e.style.textAlign||e.getAttribute("data-text-align")||this.options.defaultAlignment,renderHTML:e=>e.textAlign===this.options.defaultAlignment?{}:{"data-text-align":e.textAlign}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>!!this.options.alignments.includes(e)&&this.options.types.every((o=>t.updateAttributes(o,{textAlign:e}))),unsetTextAlign:()=>({commands:e})=>this.options.types.every((t=>e.resetAttributes(t,"textAlign")))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Cl=/(?:^|\s)((?:==)((?:[^~]+))(?:==))$/,Zl=/(?:^|\s)((?:==)((?:[^~]+))(?:==))/g,Il=Pa.vc.create({name:"highlight",addOptions:{HTMLAttributes:{}},addAttributes(){return{color:{default:null,parseHTML:e=>e.getAttribute("data-color"),renderHTML:e=>e.color?{"data-color":e.color}:{}}}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",(0,Pa.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark("highlight",e),toggleHighlight:e=>({commands:t})=>t.toggleMark("highlight",e),unsetHighlight:()=>({commands:e})=>e.unsetMark("highlight")}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[(0,Pa.Cf)({find:Cl,type:this.type})]},addPasteRules(){return[(0,Pa.K9)({find:Zl,type:this.type})]}});var Al;Al=function(e){var t;t=void 0;try{t=new URL(e)}catch(Pw){return Pw,!1}return"http:"===t.protocol||"https:"===t.protocol};var $l,Sl={mixins:[el,ol,ul],props:{focusId:String,model:Object,field:String,label:String,placeholder:String,maxLength:Number,shouldReset:Boolean,autofocus:Boolean},components:{EditorContent:fa.kg,TextAlignBtn:xl,TextHighlightBtn:fl,SuggestionList:cl,FilesList:mr},data:function(){return{loading:!0,socket:null,count:0,editor:null,expanded:!1,closeEmojiMenu:!1,linkUrl:"",iframeUrl:"",linkDialogIsOpen:!1,iframeDialogIsOpen:!1,fetchedUrls:[]}},computed:{format:function(){return this.model[`${this.field}Format`]},reasonTooLong:function(){return this.editor.getCharacterCount()>=this.maxLength}},mounted:function(){return D.$on("focusEditor",(e=>{if(this.focusId===e)return this.editor.commands.focus()})),this.expanded=Rt.user().experiences["html-editor.expanded"],this.model.beforeSaves.push((()=>this.updateModel())),this.editor=new fa.ML({editorProps:{scrollThreshold:100,scrollMargin:100},autofocus:this.autofocus,extensions:[Wr.ZP,Kr.ZP,Yr.ZP,Qr.ZP,Ba.configure({attachFile:this.attachFile,attachImageFile:this.attachImageFile}),Jr.Z,Xr.Z,ea.Z,ta.Z,Il.configure({multicolor:!0}),oa.Z,sa.Z,na.ZP,Ha,ia.Z,ra.Z,aa.ZP,la.Z,ca.Z.configure({placeholder:()=>this.placeholder}),ua.ZP,Na.Z,ha.ZP,pa.Z,ma.Z,da.Z,$a,Ia,Oa.configure(sl.bind(this)()),Sa.Z,kl.configure({types:["heading","paragraph"]}),Ta.Z],content:this.model[this.field],onUpdate:()=>{if(this.maxLength&&this.checkLength(),this.model.isNew())return this.scrapeLinkPreviews()},onCreate:()=>{if(this.model.isNew()&&this.editor.getCharacterCount()>0)return this.editor.commands.focus("end")}})},watch:{shouldReset:"reset"},methods:{checkLength:function(){return this.model.saveDisabled=this.editor.getCharacterCount()>this.maxLength},setCount:function(e){return this.count=e},tiptapAddress:function(){return this.model.isNew()?(0,l.compact)([i.theme.channels_uri,"tiptap",this.model.constructor.singular,"new",this.model.groupId,this.model.discussionId,this.model.parentId,Rt.user().secretToken]).join("/"):[i.theme.channels_uri,"tiptap",this.model.constructor.singular,this.model.id,this.model.secretToken||Rt.user().secretToken].join("/")},selectedText:function(){var e,t,o,s;return o=this.editor.state,t=this.editor.state.selection,({from:e,to:s}=t),o.doc.textBetween(e,s," ")},reset:function(){return this.editor.chain().clearContent().run(),this.resetFiles(),this.model.beforeSave=()=>this.updateModel()},convertToMd:function(){if(confirm(M.t("formatting.markdown_confirm")))return this.updateModel(),Gr(this.model,this.field),jt.users.saveExperience("html-editor.uses-markdown")},toggleExpanded:function(){return this.expanded=!this.expanded,jt.users.saveExperience("html-editor.expanded",this.expanded)},setLinkUrl:function(){return this.linkUrl&&(this.linkUrl.includes("://")||(this.linkUrl="http://".concat(this.linkUrl)),this.editor.chain().setLink({href:this.linkUrl}).focus().run(),this.fetchLinkPreviews([this.linkUrl]),this.linkUrl=null),this.linkDialogIsOpen=!1},setIframeUrl:function(){if(Al(this.iframeUrl))return this.editor.chain().setIframe({src:Qa(this.iframeUrl)}).focus().run(),this.iframeUrl=null,this.iframeDialogIsOpen=!1},emojiPicked:function(e,t){return this.editor.chain().insertContent(t).focus().run(),this.closeEmojiMenu=!1},updateModel:function(){if("html"===this.format)return this.model[this.field]=this.editor.getHTML(),"<p></p>"===this.model[this.field]&&(this.model[this.field]=""),this.updateFiles()},removeLinkPreview:function(e){return this.model.linkPreviews=(0,l.reject)(this.model.linkPreviews,(function(t){return t.url===e}))},scrapeLinkPreviews:(0,l.throttle)((function(){var e,t;return t=new DOMParser,e=t.parseFromString(this.editor.getHTML(),"text/html"),this.fetchLinkPreviews((0,l.difference)(Array.from(e.querySelectorAll("a")).map((e=>e.href)),this.fetchedUrls))}),500,{leading:!1}),fetchLinkPreviews:function(e){if(e.length)return this.fetchedUrls=(0,l.uniq)(this.fetchedUrls.concat(e)),jt.remote.post("link_previews",{urls:e}).then((e=>this.model.linkPreviews=(0,l.uniqBy)(this.model.linkPreviews.concat(e.previews),"url")))}},beforeDestroy:function(){if(this.editor)return this.editor.destroy()}},Nl=Sl,Tl=(0,Ut.Z)(Nl,Ar,$r,!1,null,null,null),jl=Tl.exports,Pl=function(){var e=this,t=e._self._c;return t("div",{staticClass:"translation"},[e.isMd?t("div",{directives:[{name:"marked",rawName:"v-marked",value:e.translated,expression:"translated"}],staticClass:"translated-body"}):e._e(),e.isHtml?t("div",{staticClass:"translated-body",domProps:{innerHTML:e._s(e.translated)}}):e._e()])},Ol=[],Rl={props:{model:Object,field:String},computed:{isMd:function(){return"md"===this.format},isHtml:function(){return"html"===this.format},translated:function(){return this.model.translation[this.field]},format:function(){return this.model[this.field+"Format"]?this.model[this.field+"Format"]:"html"}}},ql=Rl,Ml=(0,Ut.Z)(ql,Pl,Ol,!1,null,null,null),El=Ml.exports,Ll=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lmo-markdown-wrapper"},[!e.hasTranslation&&e.isMd?t("div",{directives:[{name:"marked",rawName:"v-marked",value:e.cookedText,expression:"cookedText"}]}):e._e(),!e.hasTranslation&&e.isHtml?t("div",{domProps:{innerHTML:e._s(e.text)}}):e._e(),e.hasTranslation?t(El,{attrs:{model:e.model,field:e.column}}):e._e()],1)},Dl=[],Fl={props:{model:{type:Object,required:!0},column:{type:String,required:!0}},mounted:function(){return this.$el.addEventListener("click",this.onClick)},destroyed:function(){return this.$el.removeEventListener("click",this.onClick)},methods:{onClick:function(e){var t,o,s;if("taskItem"===e.target.getAttribute("data-type")&&e.offsetX<e.target.offsetLeft&&!e.target.classList.contains("task-item-busy"))return this.canEdit||e.target.querySelectorAll('span[data-mention-id="'+Rt.user().username+'"]').length?(e.target.classList.add("task-item-busy"),s=e.target.getAttribute("data-uid"),t="true"===e.target.getAttribute("data-checked"),o=(0,l.merge)(this.model.namedId(),{uid:s,done:t?"false":"true"}),jt.remote.post("tasks/update_done",o).finally((()=>(t?Fn.success("tasks.task_updated_not_done"):Fn.success("tasks.task_updated_done"),e.target.classList.remove("task-item-busy"))))):alert(this.$t("tasks.permission_denied"))}},computed:{canEdit:function(){return ms.canEdit(this.model)},isMd:function(){return"md"===this.format},isHtml:function(){return"html"===this.format},format:function(){return this.model[this.column+"Format"]},text:function(){return he(this.model[this.column])},hasTranslation:function(){if(this.model.translation)return this.model.translation[this.column]},cookedText:function(){var e;return this.model.mentionedUsernames?(e=this.model[this.column],this.model.mentionedUsernames.forEach((function(t){return e=e.replace(RegExp(`@${t}`,"g"),`[@${t}](/u/${t})`)})),e):this.model[this.column]}}},Ul=Fl,zl=(0,Ut.Z)(Ul,Ll,Dl,!1,null,null,null),Bl=zl.exports,Vl=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"relative"}},[e.preview?e._e():t(fr.Z,{ref:"field",attrs:{placeholder:e.placeholder,label:e.label},on:{keyup:e.onKeyUp,keydown:e.onKeyDown,paste:e.onPaste,drop:e.onDrop,dragover:function(t){return t.preventDefault(),e.onDragOver.apply(null,arguments)}},model:{value:e.model[e.field],callback:function(t){e.$set(e.model,e.field,t)},expression:"model[field]"}}),e.preview?t(Bl,{attrs:{model:e.model,column:e.field}}):e._e(),e.preview&&0==e.model[e.field].trim().length?t(an.Z,{staticClass:"pa-4 my-4 poll-common-outcome-panel",attrs:{color:"primary lighten-5",elevation:"2"}},[t("p",{directives:[{name:"t",rawName:"v-t",value:"common.empty",expression:"'common.empty'"}]})]):e._e(),t(ys.Z,{staticClass:"menubar",attrs:{"align-center":"","aria-label":e.$t("formatting.formatting_tools")}},[t($s.Z,{attrs:{icon:"",title:e.$t("formatting.attach")},on:{click:function(t){return e.$refs.filesField.click()}}},[t(Qt.Z,[e._v("mdi-paperclip")])],1),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"formatting.wysiwyg",expression:"'formatting.wysiwyg'"}],attrs:{text:"","x-small":""},on:{click:function(t){return e.convertToHtml(e.model,e.field)}}}),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:e.previewAction,expression:"previewAction"}],staticClass:"mr-4",attrs:{text:"","x-small":""},on:{click:function(t){e.preview=!e.preview}}}),e._t("actions")],2),t("suggestion-list",{attrs:{query:e.query,loading:e.fetchingMentions,mentionable:e.mentionable,positionStyles:e.suggestionListStyles,navigatedUserIndex:e.navigatedUserIndex,showUsername:""},on:{"select-user":e.selectUser}}),t("files-list",{attrs:{files:e.files},on:{removeFile:e.removeFile}}),t("form",{staticStyle:{display:"block"},on:{change:e.fileSelected}},[t("input",{ref:"filesField",attrs:{type:"file",name:"files",multiple:""}})])],1)},Hl=[],Gl={mixins:[el,tl,ul],props:{model:Object,field:String,label:String,placeholder:String,shouldReset:Boolean,maxLength:Number,autofocus:{type:Boolean,default:!1}},components:{FilesList:mr,SuggestionList:cl},data:function(){return{preview:!1}},watch:{shouldReset:"reset"},methods:{reset:function(){return this.preview=!1,this.resetFiles()},convertToHtml:function(){return Hr(this.model,this.field),jt.users.saveExperience("html-editor.uses-markdown",!1)},onPaste:function(e){var t;if(t=Array.from(e.clipboardData.items),0!==t.filter((e=>e.getAsFile())).length)return e.preventDefault(),this.handleUploads(t.map((t=>new File([t.getAsFile()],e.clipboardData.getData("text/plain")||Date.now(),{lastModified:Date.now(),type:t.type}))))},handleUploads:function(e){return Array.from(e).forEach((e=>/image/i.test(e.type)?this.insertImage(e):this.attachFile({file:e})))},insertImage:function(e){var t,o,s,n;return o="file"|e.name.replace(/[\W_]+/g,""),n=function(e){return`![uploading-${o}](${"*".repeat(parseInt(e/5))})`},t=e=>{var t,o;return o=this.model[this.field].slice(0,this.textarea().selectionStart),t=this.model[this.field].slice(this.textarea().selectionStart),this.model[this.field]=o+"\n"+e+"\n"+t},s=e=>this.model[this.field]=this.model[this.field].replace(RegExp(`!\\[uploading-${o}\\]\\(\\**\\)`),e),t(n(0)),this.attachImageFile({file:e,onProgress:e=>s(n(parseInt(e.loaded/e.total*100))),onComplete:e=>s(`![${o}](${e.preview_url})`),onFailure:()=>s(`![${o}](${this.$t("formatting.upload_failed")}`)})},onDrop:function(e){if(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length)return e.preventDefault(),this.handleUploads(e.dataTransfer.files)},onDragOver:function(e){return!1}},computed:{previewAction:function(){return this.preview?"common.action.edit":"common.action.preview"},previewIcon:function(){return this.preview?"mdi-pencil":"mdi-eye"}}},Wl=Gl,Kl=(0,Ut.Z)(Wl,Vl,Hl,!1,null,null,null),Yl=Kl.exports,Ql=new class{constructor(){this.models=[]}okToLeave(e){var t,o;return t=["description","title","body","details","name","reason","statement"],o=e&&[e]||this.models,o.forEach((function(e){return e.beforeSave()})),(0,l.some)(o,(function(e){return(0,l.intersection)(t,e.modifiedAttributes()).length>0}))?!!confirm(M.t("common.confirm_discard_changes"))&&(e&&e.discardChanges()||!0):(this.models=[],!0)}add(e){return this.models.push(e)}clear(){return this.models=[]}},Jl={props:{focusId:String,model:Object,field:String,label:String,placeholder:String,maxLength:Number,autofocus:Boolean,shouldReset:Boolean},components:{"md-editor":Yl,"collab-editor":jl},mounted:function(){return Ql.add(this.model)},computed:{format:function(){return this.model[`${this.field}Format`]}}},Xl=Jl,ec=(0,Ut.Z)(Xl,rr,ar,!1,null,null,null),tc=ec.exports,oc=o(11537),sc=function(){var e=this,t=e._self._c;return t(oc.Z,{staticClass:"submit-overlay",attrs:{value:e.value}},[t(ws.Z,{attrs:{indeterminate:"",size:"64"}})],1)},nc=[],ic={props:{value:Boolean}},rc=ic,ac=(0,Ut.Z)(rc,sc,nc,!1,null,null,null),lc=ac.exports,cc=o(60683),uc=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lmo-validation-error"},[e.subject.errors[e.field]?t("div",{staticClass:"lmo-validation-error__message error--text caption",attrs:{for:"field + '-error'"}},[t("span",{attrs:{role:"status","aria-live":"polite"}},[e._v(e._s(e.subject.errors[e.field].join(", ")))])]):e._e()])},dc=[],pc={props:{subject:Object,field:String}},mc=pc,hc=(0,Ut.Z)(mc,uc,dc,!1,null,null,null),_c=hc.exports,fc=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"profile-page max-width-1024 px-0 px-sm-3"},[e.user?e._e():t(As),e.user?t("div",[t(ns.Z,[t(lc,{attrs:{value:e.user.processing}}),t(is.ZB,[t(ys.Z,[t(cc.Z,{staticClass:"profile-page__details"},[t(ys.Z,{attrs:{column:e.$vuetify.breakpoint.xs}},[t(cc.Z,[t(ci.Z,{staticClass:"profile-page__name-input",attrs:{label:e.$t("profile_page.name_label"),required:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),t(_c,{attrs:{subject:e.user,field:"name"}}),t(ci.Z,{staticClass:"profile-page__username-input",attrs:{id:"user-username-field",label:e.$t("profile_page.username_label"),required:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),t(_c,{attrs:{subject:e.user,field:"username"}}),t(ci.Z,{staticClass:"profile-page__email-input",attrs:{id:"user-email-field",label:e.$t("profile_page.email_label"),required:""},on:{keyup:e.checkEmailExistence},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),t(_c,{attrs:{subject:e.user,field:"email"}}),e.emailExists?t("div",{staticClass:"profile-page__email-taken"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"merge_accounts.email_taken",expression:"'merge_accounts.email_taken'"}],staticClass:"email-taken-message"}),t(Ro),t("a",{directives:[{name:"t",rawName:"v-t",value:"merge_accounts.find_out_more",expression:"'merge_accounts.find_out_more'"}],staticClass:"email-taken-find-out-more",on:{click:e.openSendVerificationModal}})],1):e._e()],1),t("div",{staticClass:"profile-page__avatar d-flex flex-column justify-center align-center mx-12",on:{click:function(t){return e.changePicture()}}},[t(Ks,{staticClass:"mb-4",attrs:{user:e.originalUser,size:192,"no-link":!0}}),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"profile_page.change_picture_link",expression:"'profile_page.change_picture_link'"}],attrs:{color:"accent"},on:{click:e.changePicture}})],1)],1),t(tc,{attrs:{model:e.user,field:"shortBio",label:e.$t("profile_page.short_bio_label"),placeholder:e.$t("profile_page.short_bio_placeholder")}}),t(_c,{attrs:{subject:e.user,field:"shortBio"}}),t(ci.Z,{staticClass:"profile-page__location-input",attrs:{id:"user-location-field",label:e.$t("profile_page.location_label"),placeholder:e.$t("profile_page.location_placeholder")},model:{value:e.user.location,callback:function(t){e.$set(e.user,"location",t)},expression:"user.location"}}),t(Fi.Z,{attrs:{id:"user-date-time-format-field",label:e.$t("profile_page.date_time_pref_label"),items:e.dateTimeFormats},model:{value:e.user.dateTimePref,callback:function(t){e.$set(e.user,"dateTimePref",t)},expression:"user.dateTimePref"}}),t(_c,{attrs:{subject:e.user,field:"dateTimeFormat"}}),t(Fi.Z,{attrs:{id:"user-locale-field",label:e.$t("profile_page.locale_label"),items:e.availableLocales,"item-text":"name","item-value":"key"},model:{value:e.user.selectedLocale,callback:function(t){e.$set(e.user,"selectedLocale",t)},expression:"user.selectedLocale"}}),t(_c,{attrs:{subject:e.user,field:"selectedLocale"}}),e.showHelpTranslate?t("p",[t("a",{directives:[{name:"t",rawName:"v-t",value:"profile_page.help_translate",expression:"'profile_page.help_translate'"}],attrs:{href:"https://help.loomio.com/en/user_manual/users/translation/#help-translate-loomio",target:"_blank"}})]):e._e(),t("p",[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.time_zone",expression:"'common.time_zone'"}]}),t(Ro),t("span",[e._v(e._s(e.user.timeZone))]),t(Ro),t(Ys.Z,{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t(Qt.Z,e._g(e._b({attrs:{small:""}},"v-icon",s,!1),o),[e._v("mdi-information-outline")])]}}],null,!1,967704426)},[t("span",{directives:[{name:"t",rawName:"v-t",value:"profile_page.updated_on_sign_in",expression:"'profile_page.updated_on_sign_in'"}]})])],1)],1)],1)],1),t(is.h7,{staticClass:"profile-page__update-account"},[t(ir,{attrs:{path:"en/user_manual/users/user_profile"}}),t(yn.Z),t($s.Z,{staticClass:"profile-page__update-button",attrs:{color:"primary",disabled:e.emailExists,loading:e.user.processing},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"profile_page.update_profile",expression:"'profile_page.update_profile'"}]})])],1)],1),t(ns.Z,{staticClass:"profile-page-card mt-4"},[t(rs.Z,e._l(e.actions,(function(o,s){return o.canPerform()?t(zo.Z,{key:s,class:"user-page__"+s,on:{click:function(e){return o.perform()}}},[t(Rs.Z,[t(Qt.Z,[e._v(e._s(o.icon))])],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:o.name,expression:"action.name"}]})],1):e._e()})),1)],1)],1):e._e()],1)],1)},gc=[],vc=new class{actions(e,t){return{change_password:{icon:"mdi-lock-reset",name:"profile_page.change_password_link",canPerform:function(){return!0},perform:function(){return D.$emit("openModal",{component:"ChangePasswordForm",props:{user:e}})}},merge_accounts:{icon:"mdi-account-multiple",name:"profile_page.merge_accounts",canPerform:function(){return!0},perform:function(){return D.$emit("openModal",{component:"ConfirmModal",props:{confirm:{text:{title:"merge_accounts.modal.title",raw_helptext:t.$t("merge_accounts.placeholder_modal_text")}}}})}},deactivate_user:{icon:"mdi-exit-run",name:"profile_page.delete_user_link",canPerform:function(){return!e.deactivatedAt},perform:function(){return D.$emit("openModal",{component:"ConfirmModal",props:{confirm:{text:{title:"profile_page.delete_account",raw_helptext:`<p>${t.$t("deactivation_modal.introduction")}</p> <ul> <li>${t.$t("deactivation_modal.you_will_be_deleted")}</li> <li>${t.$t("deactivation_modal.name_removed")}</li> <li>${t.$t("deactivation_modal.no_longer_group_member")}</li> <li>${t.$t("deactivation_modal.no_emails")}</li> </ul>`,submit:"deactivation_modal.submit_delete"},submit:function(){return jt.users.destroy()},successCallback:Ot}}})}}}}},bc={data:function(){return{user:null,originalUser:null,existingEmails:[],currentTime:new Date}},created:function(){return setInterval((()=>this.currentTime=new Date),1e4),this.init(),D.$emit("currentComponent",{titleKey:"profile_page.edit_profile",page:"profilePage"}),D.$on("updateProfile",this.init),D.$on("signedIn",this.init)},beforeDestroy:function(){return D.$off("updateProfile",this.init),D.$off("signedIn",this.init)},computed:{showHelpTranslate:function(){return i.features.app.help_link},availableLocales:function(){return i.locales},dateTimeFormats:function(){return this.user.selectedLocale,"iso day_iso abbr day_abbr".split(" ").map((e=>({value:e,text:Ge(this.currentTime,this.user.timeZone,e)})))},actions:function(){return vc.actions(Rt.user(),this)},emailExists:function(){return(0,l.includes)(this.existingEmails,this.user.email)}},methods:{init:function(){if(Rt.isSignedIn())return this.originalUser=Rt.user(),this.user=this.originalUser.clone(),Rt.updateLocale(this.user.locale)},changePicture:function(){return Un({component:"ChangePictureForm"})},changePassword:function(){return this.openChangePasswordModal(this.user)},openDeleteUserModal:function(){return this.isDeleteUserModalOpen=!0},closeDeleteUserModal:function(){return this.isDeleteUserModalOpen=!1},openSendVerificationModal:function(){return Un({component:"ConfirmModal",props:{confirm:{submit:()=>jt.users.sendMergeVerificationEmail(this.user.email),text:{title:"merge_accounts.modal.title",raw_helptext:this.$t("merge_accounts.modal.helptext",{sourceEmail:this.originalUser.email,targetEmail:this.user.email}),submit:"merge_accounts.modal.submit",flash:"merge_accounts.modal.flash"}}}})},checkEmailExistence:(0,l.debounce)((function(){if(this.originalUser.email!==this.user.email)return jt.users.checkEmailExistence(this.user.email).then((e=>{if(e.exists)return this.existingEmails=(0,l.uniq)(this.existingEmails.concat([e.email]))}))}),250),submit:function(){return jt.users.updateProfile(this.user).then((()=>(Fn.success("profile_page.messages.updated"),this.init()))).catch((()=>!0))}}},yc=bc,wc=(0,Ut.Z)(yc,fc,gc,!1,null,null,null),xc=wc.exports,kc=function(){var e=this,t=e._self._c;return t(e.componentName,{tag:"component",attrs:{poll:e.poll,stance:e.stance,"stance-choice":e.stanceChoice,outcome:e.outcome,back:e.back,size:e.size,"should-reset":e.shouldReset}})},Cc=[],Zc=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-stance-reason"},["disabled"!=e.poll.stanceReasonRequired?t(tc,{staticClass:"poll-common-vote-form__reason",attrs:{"focus-id":"poll-"+e.poll.id,model:e.stance,field:"reason",label:e.$t(e.label),placeholder:e.prompt||e.poll.reasonPrompt||e.$t("poll_common.reason_placeholder"),"max-length":e.maxLength}}):e._e(),t(_c,{attrs:{subject:e.stance,field:"reason"}})],1)},Ic=[],Ac={props:{poll:Object,stance:Object,prompt:String},computed:{label:function(){return this.poll.config().has_options?"poll_common.reason":"poll_common.response"},maxLength:function(){return this.poll.limitReasonLength?500:void 0}}},$c=Ac,Sc=(0,Ut.Z)($c,Zc,Ic,!1,null,null,null),Nc=Sc.exports,Tc=o(28190),jc=function(){var e=this,t=e._self._c;return t("form",{staticClass:"poll-common-vote-form",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null}}},[t(lc,{attrs:{value:e.stance.processing}}),e.poll.config().has_options&&!e.poll.singleChoice()?t(Tc.Z,{attrs:{color:e.optionCountAlertColor}},[e.poll.minimumStanceChoices==e.poll.maximumStanceChoices?t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common.select_count_options",args:{count:e.poll.minimumStanceChoices}},expression:"{path: 'poll_common.select_count_options', args: {count: poll.minimumStanceChoices}}"}]}):t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common.select_minimum_to_maximum_options",args:{minimum:e.poll.minimumStanceChoices,maximum:e.poll.maximumStanceChoices}},expression:"{path: 'poll_common.select_minimum_to_maximum_options', args: {minimum: poll.minimumStanceChoices, maximum: poll.maximumStanceChoices}}"}]})]):e._e(),e._l(e.options,(function(o){return t(an.Z,{key:o.id,staticClass:"poll-common-vote-form__button mb-2 rounded",class:e.classes(o),style:e.isSelected(o)&&{"border-color":o.color}||{},attrs:{outlined:""}},[t("label",[e.singleChoice?t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedOptionId,expression:"selectedOptionId"}],attrs:{"aria-label":o.optionName(),type:"radio",name:"name"},domProps:{value:o.id,checked:e._q(e.selectedOptionId,o.id)},on:{change:function(t){e.selectedOptionId=o.id}}}):e._e(),e.singleChoice?e._e():t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedOptionIds,expression:"selectedOptionIds"}],attrs:{"aria-label":o.optionName(),type:"checkbox",name:"name"},domProps:{value:o.id,checked:Array.isArray(e.selectedOptionIds)?e._i(e.selectedOptionIds,o.id)>-1:e.selectedOptionIds},on:{change:function(t){var s=e.selectedOptionIds,n=t.target,i=!!n.checked;if(Array.isArray(s)){var r=o.id,a=e._i(s,r);n.checked?a<0&&(e.selectedOptionIds=s.concat([r])):a>-1&&(e.selectedOptionIds=s.slice(0,a).concat(s.slice(a+1)))}else e.selectedOptionIds=i}}}),t(zo.Z,[t(Rs.Z,[e.hasOptionIcon?[t(zs.Z,{attrs:{size:"48"}},[t("img",{attrs:{"aria-hidden":"true",src:"/img/"+o.icon+".svg"}})])]:[e.singleChoice&&!e.isSelected(o)?t(Qt.Z,{attrs:{color:o.color}},[e._v("mdi-radiobox-blank")]):e._e(),e.singleChoice&&e.isSelected(o)?t(Qt.Z,{attrs:{color:o.color}},[e._v("mdi-radiobox-marked")]):e._e(),e.singleChoice||e.isSelected(o)?e._e():t(Qt.Z,{attrs:{color:o.color}},[e._v("mdi-checkbox-blank-outline")]),!e.singleChoice&&e.isSelected(o)?t(Qt.Z,{attrs:{color:o.color}},[e._v("mdi-checkbox-marked")]):e._e()]],2),t(Vo.km,[t(Vo.V9,{staticClass:"poll-common-vote-form__button-text"},[e._v(e._s(o.optionName()))]),t(Vo.oZ,[e._v(e._s(o.meaning))])],1)],1)],1)])})),t(Nc,{attrs:{stance:e.stance,poll:e.poll,selectedOptionId:e.selectedOptionId,prompt:e.optionPrompt}}),t(is.h7,{staticClass:"poll-common-form-actions"},[t($s.Z,{staticClass:"poll-common-vote-form__submit",attrs:{disabled:!e.optionCountValid||!e.poll.isVotable(),loading:e.stance.processing,color:"primary",block:""},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:e.submitText,expression:"submitText"}]})])],1)],2)},Pc=[],Oc={props:{stance:Object},data:function(){return{selectedOptionIds:(0,l.compact)(this.stance.pollOptionIds().length&&this.stance.pollOptionIds()||[parseInt(this.$route.query.poll_option_id)]),selectedOptionId:this.stance.pollOptionIds()[0]||parseInt(this.$route.query.poll_option_id),options:[]}},created:function(){return this.watchRecords({collections:["pollOptions"],query:e=>{if(this.poll.optionsDiffer(this.options)&&this.poll)return this.options=this.poll.pollOptionsForVoting()}})},computed:{singleChoice:function(){return this.poll.singleChoice()},hasOptionIcon:function(){return this.poll.config().has_option_icon},poll:function(){return this.stance.poll()},optionSelected:function(){return this.selectedOptionIds.length||this.selectedOptionId},optionPrompt:function(){return this.selectedOptionId&&jt.pollOptions.find(this.selectedOptionId).prompt||""},submitText:function(){return this.stance.castAt?this.poll.config().has_options?"poll_common.update_vote":"poll_common.update_response":this.poll.config().has_options?"poll_common.submit_vote":"poll_common.submit_response"},optionCountAlertColor:function(){if(!this.singleChoice&&this.selectedOptionIds.length&&(this.selectedOptionIds.length<this.poll.minimumStanceChoices||this.selectedOptionIds.length>this.poll.maximumStanceChoices))return"warning"},optionCountValid:function(){return this.singleChoice&&this.selectedOptionId||this.selectedOptionIds.length>=this.poll.minimumStanceChoices&&this.selectedOptionIds.length<=this.poll.maximumStanceChoices}},watch:{selectedOptionId:function(){return D.$emit("focusEditor","poll-"+this.poll.id)}},methods:{submit:function(){var e;return this.singleChoice?this.stance.stanceChoicesAttributes=[{poll_option_id:this.selectedOptionId}]:this.stance.stanceChoicesAttributes=this.selectedOptionIds.map((e=>({poll_option_id:e}))),e=this.stance.castAt?"updated":"created",this.stance.save().then((()=>(Fn.success(`poll_${this.stance.poll().pollType}_vote_form.stance_${e}`),D.$emit("closeModal")))).catch((()=>!0))},isSelected:function(e){return this.singleChoice?this.selectedOptionId===e.id:this.selectedOptionIds.includes(e.id)},classes:function(e){var t;return t=this.poll.isVotable()?"voting-enabled":"voting-disabled",this.optionSelected?this.isSelected(e)?["elevation-2",t]:["poll-common-vote-form__button--not-selected",t]:[t]}}},Rc=Oc,qc=(0,Ut.Z)(Rc,jc,Pc,!1,null,null,null),Mc=qc.exports,Ec=o(55142),Lc=o(83240),Dc=o(41581),Fc=function(){var e=this,t=e._self._c;return t("div",[t(Lc.Z,{ref:"form",staticClass:"poll-dot-vote-vote-form"},[t(Ec.Z,{staticClass:"poll-dot-vote-vote-form__dots-remaining",attrs:{sticky:"",rounded:"",dense:"",color:e.alertColor}},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_dot_vote_vote_form.dots_remaining",args:{count:e.dotsRemaining}},expression:"{ path: 'poll_dot_vote_vote_form.dots_remaining', args: { count: dotsRemaining } }"}]})]),t("div",{staticClass:"poll-dot-vote-vote-form__options"},[e._l(e.stanceChoices,(function(o){return t(zo.Z,{key:o.option.id,staticClass:"poll-dot-vote-vote-form__option"},[t(Vo.km,[t(Vo.V9,[e._v(e._s(o.option.name))]),t(Vo.oZ,{staticStyle:{"white-space":"inherit"}},[e._v(e._s(o.option.meaning))]),t(Dc.Z,{staticClass:"poll-dot-vote-vote-form__slider mt-4",attrs:{disabled:!e.poll.isVotable(),color:o.option.color,"track-color":"grey",height:4,min:0,max:e.dotsPerPerson,readonly:!1},model:{value:o.score,callback:function(t){e.$set(o,"score",t)},expression:"choice.score"}})],1),t(En.Z,{staticStyle:{"max-width":"128px"}},[t(ci.Z,{attrs:{type:"number","max-width":"20px",filled:"",rounded:"",dense:""},model:{value:o.score,callback:function(t){e.$set(o,"score",t)},expression:"choice.score"}})],1)],1)})),t(_c,{attrs:{subject:e.stance,field:"stanceChoices"}})],2),t(Nc,{attrs:{stance:e.stance,poll:e.poll}}),t(is.h7,{staticClass:"poll-common-form-actions"},[t($s.Z,{staticClass:"poll-common-vote-form__submit",attrs:{block:"",disabled:e.dotsRemaining<0||!e.poll.isVotable(),loading:e.stance.processing,color:"primary"},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:e.stance.castAt?"poll_common.update_vote":"poll_common.submit_vote",expression:"stance.castAt? 'poll_common.update_vote' : 'poll_common.submit_vote'"}]})])],1)],1)],1)},Uc=[],zc={props:{stance:Object},data:function(){return{pollOptions:[],stanceChoices:[]}},created:function(){return this.watchRecords({collections:["pollOptions"],query:e=>{if(this.stance.poll().optionsDiffer(this.pollOptions))return this.pollOptions=this.stance.poll().pollOptionsForVoting(),this.stanceChoices=(0,l.map)(this.pollOptions,(e=>({option:e,score:this.stance.scoreFor(e)})))}})},methods:{submit:function(){var e;return(0,l.sum)((0,l.map)(this.stanceChoices,"score"))>0&&(this.stance.stanceChoicesAttributes=(0,l.map)(this.stanceChoices,(e=>({poll_option_id:e.option.id,score:e.score})))),e=this.stance.castAt?"updated":"created",this.stance.save().then((()=>(Fn.success(`poll_${this.stance.poll().pollType}_vote_form.stance_${e}`),D.$emit("closeModal")))).catch((()=>!0))},rulesForChoice:function(e){return[t=>t<=this.maxForChoice(e)||this.$t("poll_dot_vote_vote_form.too_many_dots")]},percentageFor:function(e){var t;if(t=dotsPerPerson,t>0)return 100*e.score/t+"% 100%"},backgroundImageFor:function(e){return`url(/img/poll_backgrounds/${e.color.replace("#","")}.png)`},styleData:function(e){return{"border-color":e.option.color,"background-image":this.backgroundImageFor(e.option),"background-size":this.percentageFor(e)}},adjust:function(e,t){return e.score+=t},maxForChoice:function(e){return this.dotsPerPerson-(0,l.sum)((0,l.map)((0,l.without)(this.stanceChoices,e),"score"))}},computed:{poll:function(){return this.stance.poll()},dotsRemaining:function(){return this.dotsPerPerson-(0,l.sum)((0,l.map)(this.stanceChoices,"score"))},dotsPerPerson:function(){return this.stance.poll().dotsPerPerson},alertColor:function(){return 0===this.dotsRemaining?"success":this.dotsRemaining>0?"primary":this.dotsRemaining<0?"error":void 0}}},Bc=zc,Vc=(0,Ut.Z)(Bc,Fc,Uc,!1,null,null,null),Hc=Vc.exports,Gc=function(){var e=this,t=e._self._c;return t("form",{staticClass:"poll-score-vote-form",on:{submit:function(t){return t.preventDefault(),e.submit()}}},[t("div",{staticClass:"poll-score-vote-form__options"},e._l(e.stanceChoices,(function(o){return t(zo.Z,{key:o.option.id,staticClass:"poll-dot-vote-vote-form__option"},[t(Vo.km,[t(Vo.V9,[e._v(e._s(o.option.name))]),t(Vo.oZ,{staticStyle:{"white-space":"inherit"}},[e._v(e._s(o.option.meaning))]),t(Dc.Z,{staticClass:"poll-score-vote-form__score-slider mt-4",attrs:{disabled:!e.poll.isVotable(),color:o.option.color,height:4,min:e.poll.minScore,max:e.poll.maxScore},model:{value:o.score,callback:function(t){e.$set(o,"score",t)},expression:"choice.score"}})],1),t(En.Z,{staticStyle:{"max-width":"128px"}},[t(ci.Z,{staticClass:"text-right",attrs:{type:"number","max-width":"20px",filled:"",rounded:"",dense:""},model:{value:o.score,callback:function(t){e.$set(o,"score",t)},expression:"choice.score"}})],1)],1)})),1),t(_c,{attrs:{subject:e.stance,field:"stanceChoices"}}),t(Nc,{attrs:{stance:e.stance,poll:e.poll}}),t(is.h7,{staticClass:"poll-common-form-actions"},[t($s.Z,{staticClass:"poll-common-vote-form__submit",attrs:{block:"",disabled:!e.poll.isVotable(),loading:e.stance.processing,color:"primary",type:"submit"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common.submit_vote",expression:"'poll_common.submit_vote'"}]})])],1)],1)},Wc=[],Kc={props:{stance:Object},data:function(){return{pollOptions:[],stanceChoices:[]}},created:function(){return this.watchRecords({collections:["pollOptions"],query:e=>{if(this.stance.poll().optionsDiffer(this.pollOptions))return this.pollOptions=this.poll.pollOptionsForVoting(),this.stanceChoices=(0,l.map)(this.pollOptions,(e=>({score:this.stance.scoreFor(e),option:e})))}})},methods:{submit:function(){var e;return this.stance.stanceChoicesAttributes=(0,l.map)(this.stanceChoices,(e=>({poll_option_id:e.option.id,score:e.score}))),e=this.stance.castAt?"updated":"created",this.stance.save().then((()=>(Fn.success(`poll_${this.stance.poll().pollType}_vote_form.stance_${e}`),D.$emit("closeModal")))).catch((()=>!0))}},computed:{poll:function(){return this.stance.poll()}}},Yc=Kc,Qc=(0,Ut.Z)(Yc,Gc,Wc,!1,null,null,null),Jc=Qc.exports,Xc=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sortable-list-item"},[e._t("default")],2)},eu=[],tu=o(36247),ou={mixins:[tu.ElementMixin],directives:{handle:tu.HandleDirective},props:{item:Object}},su=ou,nu=(0,Ut.Z)(su,Xc,eu,!1,null,null,null),iu=nu.exports,ru=function(){var e=this,t=e._self._c;return t("div",{staticClass:"list",attrs:{transitionDuration:250,lockAxis:"y"}},[e._t("default")],2)},au=[],lu={mixins:[tu.ContainerMixin]},cu=lu,uu=(0,Ut.Z)(cu,ru,au,!1,null,null,null),du=uu.exports,pu=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-ranked-choice-vote-form lmo-relative"},[t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_ranked_choice_vote_form.helptext",args:{count:e.numChoices}},expression:"{ path: 'poll_ranked_choice_vote_form.helptext', args: { count: numChoices } }"}],staticClass:"text--secondary"}),t(du,{attrs:{"lock-axis":"y",axis:"y","append-to":".app-is-booted"},model:{value:e.pollOptions,callback:function(t){e.pollOptions=t},expression:"pollOptions"}},e._l(e.pollOptions,(function(o,s){return t(iu,{key:o.id,attrs:{index:s,item:o}},[t(an.Z,{staticClass:"mb-2 rounded poll-ranked-choice-vote-form__option",style:{"border-color":o.color},attrs:{outlined:""}},[t(zo.Z,[t(Rs.Z,[t(Qt.Z,{staticStyle:{cursor:"pointer"},attrs:{color:o.color}},[e._v("mdi-drag")])],1),t(Vo.km,[t(Vo.V9,[e._v(e._s(o.name))]),t(Vo.oZ,[e._v(e._s(o.meaning))])],1),t(En.Z,[s+1<=e.numChoices?t("span",{staticStyle:{"font-size":"1.4rem"}},[e._v("# "+e._s(s+1))]):e._e()])],1)],1)],1)})),1),t(_c,{attrs:{subject:e.stance,field:"stanceChoices"}}),t(Nc,{attrs:{stance:e.stance,poll:e.poll}}),t(is.h7,{staticClass:"poll-common-form-actions"},[t($s.Z,{staticClass:"poll-common-vote-form__submit",attrs:{block:"",disabled:!e.poll.isVotable(),loading:e.stance.processing,color:"primary"},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:e.stance.castAt?"poll_common.update_vote":"poll_common.submit_vote",expression:"stance.castAt? 'poll_common.update_vote' : 'poll_common.submit_vote'"}]})])],1)],1)},mu=[],hu={props:{stance:Object},data:function(){return{pollOptions:[]}},created:function(){return this.watchRecords({collections:["pollOptions"],query:e=>{if(this.stance.poll().optionsDiffer(this.pollOptions))return this.pollOptions=this.sortPollOptions()}})},methods:{submit:function(){var e,t;return t=(0,l.take)(this.pollOptions,this.numChoices),this.stance.stanceChoicesAttributes=(0,l.map)(t,((e,t)=>({poll_option_id:e.id,score:this.numChoices-t}))),e=this.stance.castAt?"updated":"created",this.stance.save().then((()=>(Fn.success(`poll_${this.stance.poll().pollType}_vote_form.stance_${e}`),D.$emit("closeModal")))).catch((()=>!0))},sortPollOptions:function(){return this.stance&&this.stance.castAt?(0,l.sortBy)(this.stance.poll().pollOptions(),(e=>-this.stance.scoreFor(e))):this.stance.poll().pollOptionsForVoting()}},computed:{poll:function(){return this.stance.poll()},numChoices:function(){return this.stance.poll().minimumStanceChoices}}},_u=hu,fu=(0,Ut.Z)(_u,pu,mu,!1,null,null,null),gu=fu.exports,vu=function(){var e=this,t=e._self._c;return t("pre",{staticClass:"poll-meeting-time"},[e._v(e._s(e.time))])},bu=[],yu={props:{name:String,zone:String},computed:{time:function(){return Ge((0,m.Z)(this.name),this.zone)}}},wu=yu,xu=(0,Ut.Z)(wu,vu,bu,!1,null,null,null),ku=xu.exports,Cu=function(){var e=this,t=e._self._c;return t("span",{staticClass:"poll-common-stance-choice text-truncate",class:"poll-common-stance-choice--"+e.pollType,attrs:{row:""}},[e.poll.config().has_option_icon?t(zs.Z,{attrs:{tile:"",size:e.size}},[t("img",{attrs:{src:"/img/"+e.pollOption.icon+".svg",alt:e.optionName}})]):e._e(),"iso8601"==e.poll.pollOptionNameFormat?t(qo.Z,{attrs:{outlined:"",color:e.colorFor(e.stanceChoice.score)},on:{click:e.emitClick}},[t(ku,{attrs:{name:e.optionName}})],1):e._e(),e.poll.config().has_option_icon||"iso8601"==e.poll.pollOptionNameFormat?e._e():t("span",[t(Qt.Z,{staticClass:"mr-2",attrs:{small:"",color:e.pollOption.color}},[e._v("mdi-check-circle")]),t("span",[e._v(e._s(e.optionName))])],1)],1)},Zu=[],Iu={props:{poll:{type:Object,required:!0},stanceChoice:{type:Object,required:!0},size:{type:Number,default:24}},computed:{color:function(){return this.pollOption.color},pollOption:function(){return this.stanceChoice.pollOption},pollType:function(){return this.poll.pollType},optionName:function(){return"i18n"===i.pollTypes[this.poll.pollType].poll_option_name_format?this.$t("poll_"+this.pollType+"_options."+this.stanceChoice.pollOption.name):this.stanceChoice.pollOption.name}},methods:{emitClick:function(){return this.$emit("click")},colorFor:function(e){switch(e){case 2:return i.pollColors.proposal[0];case 1:return i.pollColors.proposal[1];case 0:return i.pollColors.proposal[2]}}}},Au=Iu,$u=(0,Ut.Z)(Au,Cu,Zu,!1,null,null,null),Su=$u.exports,Nu=function(){var e=this,t=e._self._c;return t("form",{staticClass:"poll-meeting-vote-form",on:{submit:function(t){return t.preventDefault(),e.submit()}}},[t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_meeting_vote_form.local_time_zone",args:{zone:e.currentUserTimeZone}},expression:"{path: 'poll_meeting_vote_form.local_time_zone', args: {zone: currentUserTimeZone}}"}],staticClass:"text--secondary"}),t("div",{staticClass:"poll-common-vote-form__options"},e._l(e.stanceChoices,(function(o){return t(ys.Z,{key:o.id,staticClass:"poll-common-vote-form__option",attrs:{wrap:""}},[t(Su,{attrs:{poll:e.stance.poll(),"stance-choice":o,zone:e.zone},on:{click:function(t){return e.incrementScore(o)}}}),t(yn.Z),e._l(e.stanceValues,(function(s){return t($s.Z,{key:s,staticClass:"poll-meeting-vote-form--box",style:e.buttonStyleFor(o,s),attrs:{icon:""},on:{click:function(e){o.score=s}}},[t(zs.Z,{attrs:{size:36}},[t("img",{staticClass:"poll-common-form__icon",attrs:{src:e.imgForScore(s)}})])],1)}))],2)})),1),t(_c,{attrs:{subject:e.stance,field:"stanceChoices"}}),t(Nc,{attrs:{stance:e.stance,poll:e.poll}}),t(is.h7,{staticClass:"poll-common-form-actions"},[t($s.Z,{staticClass:"poll-common-vote-form__submit",attrs:{block:"",disabled:!e.poll.isVotable(),loading:e.stance.processing,color:"primary",type:"submit"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:e.stance.castAt?"poll_common.update_vote":"poll_common.submit_vote",expression:"stance.castAt? 'poll_common.update_vote' : 'poll_common.submit_vote'"}]})])],1)],1)},Tu=[],ju={props:{stance:Object},data:function(){return{stanceChoices:[],pollOptions:[],zone:null,stanceValues:[]}},beforeDestroy:function(){return D.$off("timeZoneSelected",this.setTimeZone)},created:function(){return D.$on("timeZoneSelected",this.setTimeZone),this.watchRecords({collections:["pollOptions"],query:e=>{if(this.stanceValues=this.poll.canRespondMaybe?[2,1,0]:[2,0],this.stance.poll().optionsDiffer(this.pollOptions))return this.pollOptions=this.stance.poll().pollOptionsForVoting(),this.stanceChoices=this.pollOptions.map((e=>({pollOption:e,poll_option_id:e.id,score:this.stance.scoreFor(e)})))}})},methods:{setTimeZone:function(e,t){return this.zone=t},submit:function(){var e;return this.stance.stanceChoicesAttributes=this.stanceChoices.map((function(e){return{poll_option_id:e.poll_option_id,score:e.score}})),e=this.stance.castAt?"updated":"created",this.stance.save().then((()=>(D.$emit("closeModal"),Fn.success(`poll_${this.stance.poll().pollType}_vote_form.stance_${e}`)))).catch((()=>!0))},buttonStyleFor:function(e,t){return e.score===t?{opacity:1}:{opacity:.3}},imgForScore:function(e){var t;return t=function(){switch(e){case 2:return"agree";case 1:return"abstain";case 0:return"disagree"}}(),`/img/${t}.svg`},incrementScore:function(e){return this.poll.canRespondMaybe?e.score=(e.score+5)%3:e.score=2===e.score?0:2}},computed:{poll:function(){return this.stance.poll()},currentUserTimeZone:function(){return Rt.user().timeZone}}},Pu=ju,Ou=(0,Ut.Z)(Pu,Nu,Tu,!1,null,null,null),Ru=Ou.exports,qu={components:{"poll-common-vote-form":Mc,"poll-dot_vote-vote-form":Hc,"poll-score-vote-form":Jc,"poll-ranked_choice-vote-form":gu,"poll-meeting-vote-form":Ru},props:{poll:Object,stance:Object,outcome:Object,stanceChoice:Object,back:Object,name:String,size:Number,shouldReset:Boolean},computed:{componentName:function(){var e;return e=(this.stance||this.outcome||this.stanceChoice||this.poll).poll().pollType,"vote-form"===this.name&&["proposal","count","poll"].includes(e)?"poll-common-vote-form":this.$options.components[`poll-${e}-${this.name}`]?`poll-${e}-${this.name}`:`poll-common-${this.name}`}}},Mu=qu,Eu=(0,Ut.Z)(Mu,kc,Cc,!1,null,null,null),Lu=Eu.exports,Du=function(){var e=this,t=e._self._c;return e.poll.closedAt?e._e():t("div",{staticClass:"poll-common-action-panel",staticStyle:{position:"relative"}},[e.poll.anonymous?t(Tc.Z,{staticClass:"poll-common-action-panel__anonymous-message mt-6",attrs:{dense:"",outlined:"",type:"info"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_action_panel.anonymous",expression:"'poll_common_action_panel.anonymous'"}]})]):e._e(),e.poll.closingAt?[e.stance&&!e.stance.castAt?t("div",{staticClass:"poll-common-vote-form"},[t("h3",{directives:[{name:"t",rawName:"v-t",value:"poll_common.have_your_say",expression:"'poll_common.have_your_say'"}],staticClass:"title py-3"})]):e._e()]:t(oc.Z,{staticClass:"rounded elevation-1",attrs:{absolute:"",opacity:.33,"z-index":2}},[t(Tc.Z,{staticClass:"poll-common-action-panel__results-hidden-until-vote my-2 elevation-5",attrs:{dense:"",type:"info"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_action_panel.draft_mode",args:{poll_type:e.poll.translatedPollType()}},expression:"{path: 'poll_common_action_panel.draft_mode', args: {poll_type: poll.translatedPollType()}}"}]})])],1),e.stance&&!e.stance.castAt?t(Lu,{class:{"pa-2":!e.poll.closingAt},attrs:{stance:e.stance,name:"vote-form"}}):e._e(),e.stance?e._e():t("div",{staticClass:"poll-common-unable-to-vote"},[t(Tc.Z,{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_action_panel.unable_to_vote",args:{poll_type:e.poll.translatedPollType()}},expression:"{path: 'poll_common_action_panel.unable_to_vote', args: {poll_type: poll.translatedPollType()}}"}],staticClass:"my-4",attrs:{type:"warning",outlined:"",dense:""}})],1)],2)},Fu=[],Uu={props:{poll:Object},data:function(){return{stance:null}},created:function(){return parseInt(this.$route.query.set_outcome)===this.poll.id&&D.$emit("openModal",{component:"PollCommonOutcomeModal",props:{outcome:jt.outcomes.build({pollId:this.poll.id})}}),parseInt(this.$route.query.change_vote)===this.poll.id&&D.$emit("openModal",{component:"PollCommonEditVoteModal",props:{stance:this.poll.myStance()}}),D.$on("deleteMyStance",(e=>{if(e===this.poll.id)return this.stance=null})),this.watchRecords({collections:["stances"],query:e=>{if(this.stance&&!this.stance.castAt&&this.poll.myStance()&&this.poll.myStance().castAt&&(this.stance=this.lastStanceOrNew().clone()),this.stance&&this.stance.castAt&&this.poll.myStance()&&!this.poll.myStance().castAt&&(this.stance=this.lastStanceOrNew().clone()),!this.stance&&ms.canParticipateInPoll(this.poll))return this.stance=this.lastStanceOrNew().clone()}})},methods:{lastStanceOrNew:function(){var e;return e=this.poll.myStance()||jt.stances.build({reasonFormat:Rt.defaultFormat(),pollId:this.poll.id,userId:i.currentUserId}),this.$route.params.poll_option_id&&e.choose(this.$route.params.poll_option_id),e}}},zu=Uu,Bu=(0,Ut.Z)(zu,Du,Fu,!1,null,null,null),Vu=Bu.exports,Hu=o(20057),Gu=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-card-header d-flex align-center mr-3 ml-2 pb-2 pt-4 flex-wrap"},[t(Hu.Z,{attrs:{items:e.groups},scopedSlots:e._u([{key:"divider",fn:function(){return[t(Qt.Z,[e._v("mdi-chevron-right")])]},proxy:!0}])}),t(yn.Z),t("span",{staticClass:"text--secondary text-body-2"},[t(Xn,{attrs:{date:e.poll.createdAt}})],1)],1)},Wu=[],Ku={props:{poll:Object},computed:{groups:function(){return(0,l.map)((0,l.compact)([this.poll.groupId&&this.poll.group(),this.poll.discussionId&&this.poll.discussion()]),(e=>e.isA("discussion")?{text:e.name||e.title,disabled:!1,to:this.urlFor(e)+"/"+this.poll.createdEvent().sequenceId}:{text:e.name||e.title,disabled:!1,to:this.urlFor(e)}))}}},Yu=Ku,Qu=(0,Ut.Z)(Yu,Gu,Wu,!1,null,null,null),Ju=Qu.exports,Xu=function(){var e=this,t=e._self._c;return e.poll.closingAt?t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_percent_voted.sentence",args:{numerator:e.poll.decidedVotersCount,denominator:e.poll.votersCount,percent:e.poll.castStancesPct}},expression:"{ path: 'poll_common_percent_voted.sentence', args: { numerator: poll.decidedVotersCount, denominator: poll.votersCount, percent: poll.castStancesPct } }"}],staticClass:"text--secondary my-2"}):e._e()},ed=[],td={props:{poll:Object}},od=td,sd=(0,Ut.Z)(od,Xu,ed,!1,null,null,null),nd=sd.exports,id=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-chart-panel"},[e.poll.showResults()?[e.poll.config().has_options?[t(li.Z,{staticClass:"ml-n4"},[t("span",{directives:[{name:"t",rawName:"v-t",value:e.poll.closedAt?"poll_common.results":"poll_common.current_results",expression:"poll.closedAt ? 'poll_common.results' : 'poll_common.current_results'"}]})]),"grid"!=e.poll.chartType?t("poll-common-chart-table",{attrs:{poll:e.poll}}):t("poll-common-chart-meeting",{attrs:{poll:e.poll}})]:e._e()]:[e.poll.closingAt&&"until_closed"==e.poll.hideResults?t(Tc.Z,{staticClass:"poll-common-action-panel__results-hidden-until-closed my-2",attrs:{dense:"",outlined:"",type:"info"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_action_panel.results_hidden_until_closed",args:{poll_type:e.poll.pollType}},expression:"{path: 'poll_common_action_panel.results_hidden_until_closed', args: {poll_type: poll.pollType}}"}]})]):e._e(),e.poll.closingAt&&!e.poll.iHaveVoted()&&"until_vote"==e.poll.hideResults?t(Tc.Z,{staticClass:"poll-common-action-panel__results-hidden-until-vote my-2",attrs:{dense:"",outlined:"",type:"info"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_action_panel.results_hidden_until_vote",expression:"'poll_common_action_panel.results_hidden_until_vote'"}]})]):e._e()],"count"!=e.poll.pollType?t(nd,{attrs:{poll:e.poll}}):e._e()],2)},rd=[],ad=new(function(){class e{actions(e,t,o){return{react:{dock:1,canPerform:function(){return!e.discardedAt&&e.castAt&&e.poll().membersInclude(Rt.user())}},edit_stance:{name:e.poll().config().has_options?"poll_common.change_vote":"poll_common.change_response",icon:"mdi-pencil",dock:1,canPerform:()=>this.canUpdateStance(e),perform:()=>this.updateStance(e)},add_comment:{name:"common.action.reply",icon:"mdi-reply",dock:1,canPerform:function(){return!e.poll().anonymous&&ms.canAddComment(e.poll().discussion())},perform:function(){return o.depth===e.discussion().maxDepth?D.$emit("toggle-reply",e,o.parentId):D.$emit("toggle-reply",e,o.id)}},uncast_stance:{name:e.poll().config().has_options?"poll_common.remove_your_vote":"poll_common.remove_your_response",icon:"mdi-cancel",dock:1,canPerform:()=>this.canUpdateStance(e),perform:()=>this.uncastStance(e)},translate_stance:{icon:"mdi-translate",name:"common.action.translate",dock:2,canPerform:function(){return e.author()&&Rt.user()&&e.author().locale!==Rt.user().locale&&ms.canTranslate(e)},perform:function(){return e.translate(Rt.user().locale)}},show_history:{name:"action_dock.edited",icon:"mdi-history",dock:3,canPerform:function(){return e.edited()},perform:function(){return Un({component:"RevisionHistoryModal",props:{model:e}})}}}}updateStance(e){return Un({component:"PollCommonEditVoteModal",props:{stance:e.clone()}})}uncastStance(e){return Un({component:"ConfirmModal",props:{confirm:{submit:function(){return jt.remote.patch(`stances/${e.id}/uncast`)},text:{title:"poll_remove_vote.title",helptext:"poll_remove_vote.helptext",submit:"poll_remove_vote.confirm",flash:"poll_remove_vote.success"}}}})}canUpdateStance(e){return e&&e.latest&&e.poll().myStanceId===e.id&&e.poll().isVotable()&&e.poll().iHaveVoted()}}return e.prototype.makeAdmin={name:"membership_dropdown.make_coordinator",canPerform:function(e,t){return e.adminsInclude(Rt.user())&&!e.adminsInclude(t)},perform:function(e,t){return jt.remote.post("stances/make_admin",{participant_id:t.id,poll_id:e.id,exclude_types:"discussion"})}},e.prototype.removeAdmin={name:"membership_dropdown.demote_coordinator",canPerform:function(e,t){return e.adminsInclude(Rt.user())&&e.adminsInclude(t)},perform:function(e,t){return jt.remote.post("stances/remove_admin",{participant_id:t.id,poll_id:e.id,exclude_types:"discussion"})}},e.prototype.revoke={name:"membership_dropdown.remove_from.poll",canPerform:function(e,t){return e.adminsInclude(Rt.user())},perform:function(e,t){return jt.remote.post("stances/revoke",{participant_id:t.id,poll_id:e.id}).then((()=>(t.id===Rt.user().id&&D.$emit("deleteMyStance",e.id),Fn.success("membership_remove_modal.invitation.flash"))))}},e}.call(void 0)),ld=new class{actions(e,t,o){return e?{translate_poll:{icon:"mdi-translate",name:"common.action.translate",dock:2,canPerform:function(){return ms.canTranslate(e)},perform:function(){return Rt.user()&&e.translate(Rt.user().locale)}},edit_stance:{name:e.config().has_options?"poll_common.change_vote":"poll_common.change_response",icon:"mdi-pencil",dock:2,canPerform:function(){return ad.canUpdateStance(e.myStance())},perform:function(){return ad.updateStance(e.myStance())}},uncast_stance:{name:e.config().has_options?"poll_common.remove_your_vote":"poll_common.remove_your_response",icon:"mdi-cancel",menu:!0,canPerform:function(){return ad.canUpdateStance(e.myStance())},perform:()=>ad.uncastStance(e.myStance())},edit_poll:{name:"action_dock.edit_poll_type",menu:!0,nameArgs:function(){return{pollType:e.translatedPollType()}},icon:"mdi-pencil",canPerform:function(){return ms.canEditPoll(e)},to:function(){return`/p/${e.key}/edit`}},make_a_copy:{icon:"mdi-content-copy",name:"templates.make_a_copy",menu:!0,canPerform:function(){return Rt.user()},to:function(){return`/p/new?template_id=${e.id}`}},add_poll_to_thread:{menu:!0,name:"action_dock.add_poll_to_thread",icon:"mdi-comment-plus-outline",canPerform:function(){return ms.canAddPollToThread(e)},perform:function(){return Un({component:"AddPollToThreadModal",props:{poll:e}})}},announce_poll:{icon:"mdi-send",name:"common.action.invite",dock:2,canPerform:function(){return!e.discardedAt&&!e.closedAt&&ms.canAnnouncePoll(e)},perform:function(){return Un({component:"PollMembers",props:{poll:e}})}},remind_poll:{icon:"mdi-send",name:"common.action.remind",dock:2,canPerform:function(){return!(e.discardedAt||e.closedAt||e.votersCount<2)&&ms.canAnnouncePoll(e)},perform:function(){return Un({component:"PollReminderForm",props:{poll:e.clone()}})}},close_poll:{icon:"mdi-close-circle-outline",name:"poll_common.close_early",dock:2,canPerform:function(){return ms.canClosePoll(e)},perform:function(){return Un({component:"ConfirmModal",props:{confirm:{submit:function(){return e.close()},successCallback:function(){return Un({component:"PollCommonOutcomeModal",props:{outcome:jt.outcomes.build({groupId:e.groupId,pollId:e.id,statementFormat:Rt.defaultFormat()})}})},text:{title:"poll_common_close_form.title",helptext:"poll_common_close_form.helptext",flash:"poll_common_close_form.poll_type_closed"},textArgs:{poll_type:e.translatedPollType()}}}})}},reopen_poll:{icon:"mdi-refresh",name:"common.action.reopen",dock:3,canPerform:function(){return ms.canReopenPoll(e)},perform:function(){return Un({component:"PollCommonReopenModal",props:{poll:e}})}},add_comment:{name:"activity_card.add_comment",icon:"mdi-reply",dock:1,canPerform:function(){return!e.discardedAt&&e.discussionId&&ms.canAddComment(e.discussion())&&!e.closingAt},perform:function(){return D.$emit("toggle-reply",e,o.id)}},show_history:{icon:"mdi-history",name:"action_dock.show_edits",menu:!0,canPerform:function(){return!e.discardedAt&&e.edited()},perform:function(){return Un({component:"RevisionHistoryModal",props:{model:e}})}},notification_history:{name:"action_dock.notification_history",icon:"mdi-alarm-check",menu:!0,perform:function(){return Un({component:"AnnouncementHistory",props:{model:e}})},canPerform:function(){return!e.discardedAt}},move_poll:{name:"common.action.move",icon:"mdi-folder-swap-outline",menu:!0,canPerform:function(){return ms.canMovePoll(e)},perform:function(){return Un({component:"PollCommonMoveForm",props:{poll:e.clone()}})}},export_poll:{name:"common.action.export",icon:"mdi-database-arrow-right-outline",menu:!0,canPerform:function(){return ms.canExportPoll(e)},perform:function(){return Ot(Pt.poll(e,{export:1},{action:"export",ext:"csv",absolute:!0}))}},print_poll:{name:"common.action.print",icon:"mdi-printer-outline",menu:!0,canPerform:function(){return ms.canExportPoll(e)},perform:function(){return Ot(Pt.poll(e,{export:1},{action:"export",ext:"html",absolute:!0}))}},discard_poll:{name:"poll_common.delete_poll",menu:!0,icon:"mdi-delete",canPerform:function(){return ms.canDeletePoll(e)},perform:function(){return Un({component:"ConfirmModal",props:{confirm:{submit:function(){return e.discard()},text:{raw_title:M.t("poll_common_delete_modal.title",{pollType:M.t(e.pollTypeKey())}),helptext:"poll_common_delete_modal.question",flash:"poll_common_delete_modal.success"}}}})}}}:{}}},cd=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-meeting-chart-panel"},[t("table",{staticClass:"poll-meeting-chart-table"},[t("thead",[t("tr",[e.datesAsOptions?t("td",{staticClass:"text--secondary"},[e._v(e._s(e.currentUserTimeZone))]):e._e(),t("td",{directives:[{name:"t",rawName:"v-t",value:"poll_common.votes",expression:"'poll_common.votes'"}],staticClass:"pr-2 total text--secondary"}),e._l(e.decidedVoters,(function(e){return t("td",{key:e.id},[t(Ks,{attrs:{user:e,size:24}})],1)}))],2)]),t("tbody",e._l(e.poll.results,(function(o){return t("tr",{key:o.id},[t("td",{staticClass:"poll-meeting-chart__meeting-time"},[e.datesAsOptions?t(ku,{attrs:{name:o.name,zone:e.zone}}):e._e(),"i18n"==o.name_format?t("span",{directives:[{name:"t",rawName:"v-t",value:o.name,expression:"option.name"}]}):e._e(),"none"==o.name_format?t("span",[e._v(e._s(o.name)+" ")]):e._e()],1),t("td",{staticClass:"total text-right pr-2"},[e.poll.canRespondMaybe?t("span",[e._v(e._s(o.score/2))]):t("span",[e._v(e._s(o.score))])]),e._l(e.decidedVoters,(function(s){return t("td",{key:s.id},[t("div",{staticClass:"poll-meeting-chart__cell",class:e.classForScore(o.voter_scores[s.id])},[e._v("Â ")])])}))],2)})),0)])])},ud=[],dd={props:{poll:Object,zone:Object},data:function(){return{decidedVoters:[]}},created:function(){return this.watchRecords({collections:["users"],query:e=>this.decidedVoters=this.poll.decidedVoters()})},methods:{scoreColor:function(e){switch(e){case 2:return i.pollColors.proposal[0];case 1:return i.pollColors.proposal[1];case 0:return i.pollColors.proposal[2]}},bgColor:function(e){switch(e){case 2:return"rgba(0, 209, 119, 0.5)";case 1:return"rgba(246, 168, 43, 0.5)"}},classForScore:function(e){switch(e){case 2:return"poll-meeting-chart__cell--yes";case 1:return"poll-meeting-chart__cell--maybe";default:return"poll-meeting-chart__cell--no"}}},computed:{datesAsOptions:function(){return this.poll.datesAsOptions()},currentUserTimeZone:function(){return Rt.user().timeZone}}},pd=dd,md=(0,Ut.Z)(pd,cd,ud,!1,null,null,null),hd=md.exports,_d=o(87149),fd=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-chart-table"},[t(_d.Z,{attrs:{dense:""}},[t("thead",[t("tr",[e._l(e.poll.resultColumns,(function(o){return["chart"==o?t("th",{staticClass:"text-left"}):e._e(),"name"==o?t("th",{directives:[{name:"t",rawName:"v-t",value:"common.option",expression:'"common.option"'}],staticClass:"text-left"}):e._e(),"target_percent"==o?t("th",{directives:[{name:"t",rawName:"v-t",value:"poll_count_form.pct_of_target",expression:'"poll_count_form.pct_of_target"'}],staticClass:"text-right"}):e._e(),"score_percent"==o?t("th",{directives:[{name:"t",rawName:"v-t",value:"poll_ranked_choice_form.pct_of_points",expression:'"poll_ranked_choice_form.pct_of_points"'}],staticClass:"text-right"}):e._e(),"voter_percent"==o?t("th",{directives:[{name:"t",rawName:"v-t",value:"poll_ranked_choice_form.pct_of_voters",expression:'"poll_ranked_choice_form.pct_of_voters"'}],staticClass:"text-right"}):e._e(),"score"==o?t("th",{directives:[{name:"t",rawName:"v-t",value:"poll_ranked_choice_form.points",expression:'"poll_ranked_choice_form.points"'}],staticClass:"text-right"}):e._e(),"rank"==o?t("th",{directives:[{name:"t",rawName:"v-t",value:"poll_ranked_choice_form.rank",expression:'"poll_ranked_choice_form.rank"'}],staticClass:"text-right"}):e._e(),"average"==o?t("th",{directives:[{name:"t",rawName:"v-t",value:"poll_ranked_choice_form.mean",expression:'"poll_ranked_choice_form.mean"'}],staticClass:"text-right"}):e._e(),"voter_count"==o?t("th",{directives:[{name:"t",rawName:"v-t",value:"membership_card.voters",expression:'"membership_card.voters"'}],staticClass:"text-right"}):e._e(),"voters"==o?t("th"):e._e()]}))],2)]),t("tbody",e._l(e.poll.results,(function(o,s){return t("tr",{key:o.id},[e._l(e.poll.resultColumns,(function(n){return["chart"==n&&"pie"==e.poll.chartType&&0==s?t("td",{staticClass:"pa-0",staticStyle:{"vertical-align":"top"},attrs:{rowspan:e.poll.results.length}},[t("pie-icon",{staticClass:"ma-2",attrs:{slices:e.slices,size:128}})],1):e._e(),"chart"==n&&"bar"==e.poll.chartType?t("td",{staticClass:"pr-2 py-2",staticStyle:{width:"128px","min-width":"128px",padding:"0 8px 0 0"}},[t("div",{staticClass:"rounded",style:{width:e.clampPercent(o[e.poll.chartColumn])+"%",height:"24px","background-color":o.color}})]):e._e(),"name"==n?t("td",{style:"pie"==e.poll.chartType?{"border-left":"4px solid "+o.color}:{}},["plain"==o.name_format?t("span",[e._v(e._s(o.name))]):e._e(),"i18n"==o.name_format?t("span",{directives:[{name:"t",rawName:"v-t",value:o.name,expression:"option.name"}]}):e._e()]):e._e(),"target_percent"==n&&"agree"==o.icon?t("td",{staticClass:"text-right"},[e._v(e._s(o.target_percent.toFixed(0))+"%")]):e._e(),"target_percent"==n&&"agree"!=o.icon?t("td",{staticClass:"text-right"}):e._e(),"rank"==n?t("td",{staticClass:"text-right"},[e._v(e._s(o.rank))]):e._e(),"score"==n?t("td",{staticClass:"text-right"},[e._v(e._s(o.score))]):e._e(),"voter_count"==n?t("td",{staticClass:"text-right"},[e._v(e._s(o.voter_count))]):e._e(),"average"==n?t("td",{staticClass:"text-right"},[e._v(e._s(Math.round(100*(o.average+Number.EPSILON))/100))]):e._e(),"voter_percent"==n?t("td",{staticClass:"text-right"},[e._v(e._s(o.voter_percent.toFixed(0))+"%")]):e._e(),"score_percent"==n?t("td",{staticClass:"text-right"},[e._v(e._s(o.score_percent.toFixed(0))+"%")]):e._e(),"voters"==n?t("td",{staticClass:"text-right"},[t("div",{staticClass:"poll-common-chart-table__voter-avatars"},e._l(o.voter_ids,(function(o){return t(Ks,{key:o,staticClass:"float-left",attrs:{user:e.users[o],size:24,"no-link":""}})})),1)]):e._e()]}))],2)})),0)])],1)},gd=[],vd={components:{BarIcon:ho,PieIcon:yo,GridIcon:Io},props:{poll:Object},data:function(){return{users:{},slices:[]}},watch:{"poll.stanceCounts":function(){return this.slices=this.poll.pieSlices()}},methods:{clampPercent:function(e){return Math.max(0,Math.min(e,100))}},created:function(){return this.watchRecords({collections:["users","stances"],query:()=>this.poll.results.forEach((e=>e.voter_ids.forEach((e=>{var t;return(t=jt.users.find(e))?s.ZP.set(this.users,e,t):jt.users.addMissing(e)}))))})}},bd=vd,yd=(0,Ut.Z)(bd,fd,gd,!1,null,null,null),wd=yd.exports,xd=function(){var e=this,t=e._self._c;return e.poll.closingAt?t("p",{staticClass:"text--secondary my-2"},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_percent_voted.target_progress",args:{num:e.agreeCount,target:e.poll.agreeTarget,percent:e.targetPercent}},expression:"{path: 'poll_common_percent_voted.target_progress', args: { num: agreeCount, target: poll.agreeTarget, percent: targetPercent } }"}]})]):e._e()},kd=[],Cd={props:{poll:Object},computed:{agreeResult:function(){return this.poll.results.find((function(e){return"agree"===e.icon}))},agreeCount:function(){return this.agreeResult.voter_count},targetPercent:function(){return this.agreeResult.target_percent}}},Zd=Cd,Id=(0,Ut.Z)(Zd,xd,kd,!1,null,null,null),Ad=Id.exports,$d={components:{PollCommonChartTable:wd,PollCommonChartMeeting:hd,PollCommonPercentVoted:nd,PollCommonTargetProgress:Ad},props:{poll:Object},data:function(){return{votersByOptionId:{}}},created:function(){return this.watchRecords({collections:["polls"],query:()=>{if(Rt.isSignedIn())return jt.users.fetchAnyMissingById(this.poll.decidedVoterIds())}})}},Sd=$d,Nd=(0,Ut.Z)(Sd,id,rd,!1,null,null,null),Td=Nd.exports,jd=function(){var e=this,t=e._self._c;return e.attachments&&e.attachments.length?t("div",{staticClass:"attachment-list mb-2"},e._l(e.attachments,(function(e){return t("attachment-list-item",{key:e.id,attrs:{attachment:e}})})),1):e._e()},Pd=[],Od=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"mt-3 attachment-list-item-link",attrs:{outlined:""}},[t("a",{attrs:{href:e.attachment.download_url,target:"_blank"}},[t(is.EB,[t(Qt.Z,{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-"+e._s(e.attachment.icon))]),t("span",{staticClass:"text--secondary"},[e._v(e._s(e.attachment.filename)),t(Ro),t("span",{staticClass:"text-caption"},[e._v(e._s(e.prettifyBytes(e.attachment.byte_size)))])],1)],1),e.attachment.preview_url?t("div",{staticClass:"attachment-list-item-image mb-2",style:{"background-image":"url("+e.attachment.preview_url+")","background-size":e.backgroundSize,"background-position":e.backgroundPosition}}):e._e()],1)])},Rd=[],qd=o(54748),Md={props:{attachment:Object},data:function(){return{backgroundSize:"contain",backgroundPosition:"center"}},mounted:function(){},methods:{prettifyBytes:function(e){return(0,qd.Z)(e)},setBackgroundSize:function(){var e,t;if(this.attachment.preview_url)return this.attachment.preview_url,e=new Image,t=this,e.onload=function(){return Math.abs(this.width-this.height)<this.width/3?(t.backgroundSize="contain",t.backgroundPosition="center"):(t.backgroundSize="cover",t.backgroundPosition="0 5%")},e.src=this.attachment.preview_url}},watch:{"attachment.preview_url":"setBackgroundSize"}},Ed=Md,Ld=(0,Ut.Z)(Ed,Od,Rd,!1,null,null,null),Dd=Ld.exports,Fd={components:{AttachmentListItem:Dd},props:{attachments:[Array,Object]}},Ud=Fd,zd=(0,Ut.Z)(Ud,jd,Pd,!1,null,null,null),Bd=zd.exports,Vd=function(){var e=this,t=e._self._c;return e.couldHaveDocuments?t("section",{staticClass:"document-list"},[!e.model.hasDocuments()&&e.placeholder?t("p",{directives:[{name:"t",rawName:"v-t",value:e.placeholder,expression:"placeholder"}],staticClass:"caption"}):e._e(),t("div",{staticClass:"document-list__documents"},e._l(e.documents,(function(o){return t("div",{key:o.id,staticClass:"attachment-list__item",class:{"document-list__document--image":o.isAnImage()&&!e.hidePreview}},[o.isAnImage()&&!e.hidePreview?t("a",{staticClass:"attachment-list__preview",attrs:{href:o.url,target:"_blank"}},[t("img",{attrs:{src:o.webUrl,alt:o.title}})]):e._e(),t("div",{staticClass:"attachment-list__item-details"},[t("a",{staticClass:"document-list__title",attrs:{href:o.url,target:"_blank"}},[e._v(e._s(o.title))]),e.canDelete?t($s.Z,{staticClass:"ml-2",attrs:{icon:"","aria-label":e.$t("common.action.delete")},on:{click:function(t){return e.deleteDocument(o)}}},[t(Qt.Z,{attrs:{size:"medium"}},[e._v("mdi-delete")])],1):e._e()],1)])})),0)]):e._e()},Hd=[],Gd={props:{model:Object,showEdit:Boolean,hidePreview:Boolean,hideDate:Boolean,fetch:Boolean,placeholder:String},data:function(){return{documents:[]}},created:function(){if(this.couldHaveDocuments)return this.model.isA("discussion")&&jt.documents.fetchByDiscussion(this.model),(this.model.isA("poll")||this.model.isA("outcome")||this.model.isA("group"))&&jt.documents.fetchByModel(this.model),this.watchRecords({collections:["documents"],query:e=>this.documents=e.documents.collection.chain().find({modelId:{$in:(0,l.flatten)([this.model.id,this.model.newDocumentIds])},modelType:(0,l.capitalize)(this.model.constructor.singular)}).where((e=>!(0,l.includes)(this.model.removedDocumentIds,e.id))).simplesort("createdAt",!0).data()})},methods:{edit:function(e,t){return D.$emit("initializeDocument",e,t)},deleteDocument:function(e){return D.$emit("openModal",{component:"ConfirmModal",props:{confirm:{submit:e.destroy,text:{title:"comment_form.attachments.remove_attachment",helptext:"poll_common_delete_modal.question",submit:"common.action.delete",flash:"poll_common_delete_modal.success"}}}})}},computed:{couldHaveDocuments:function(){return this.model.createdAt<new Date("2020-08-01T00:00:00")},showTitle:function(){return(this.model.showDocumentTitle||this.showEdit)&&(this.model.hasDocuments()||this.placeholder)},canDelete:function(){return ms.canEditGroup(this.model.group())}}},Wd=Gd,Kd=(0,Ut.Z)(Wd,Vd,Hd,!1,null,null,null),Yd=Kd.exports,Qd=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-details-panel pt-2"},[e.poll.outcome()?t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_common.details",expression:"'poll_common.details'"}],staticClass:"ml-n4"}):e._e(),t("div",{staticClass:"poll-common-details-panel__started-by text--secondary mb-4"},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_card.poll_type_by_name",args:{name:e.poll.authorName(),poll_type:e.poll.translatedPollTypeCaps()}},expression:"{ path: 'poll_card.poll_type_by_name', args: { name: poll.authorName(), poll_type: poll.translatedPollTypeCaps() } }"}]}),t(Mn),t(Yt,{attrs:{poll:e.poll}})],1),t(Bl,{staticClass:"poll-common-details-panel__details",attrs:{model:e.poll,column:"details"}}),t(Ir,{attrs:{model:e.poll}}),t(Bd,{attrs:{attachments:e.poll.attachments}}),t(Yd,{attrs:{model:e.poll}})],1)},Jd=[],Xd={props:{poll:Object}},ep=Xd,tp=(0,Ut.Z)(ep,Qd,Jd,!1,null,null,null),op=tp.exports,sp=function(){var e=this,t=e._self._c;return e.outcome?t(Tc.Z,{staticClass:"my-4 poll-common-outcome-panel",attrs:{color:"primary",outlined:""}},[t("h2",{directives:[{name:"t",rawName:"v-t",value:"poll_common.outcome",expression:"'poll_common.outcome'"}],staticClass:"title"}),t("div",{staticClass:"my-2"},[t(Ks,{staticClass:"mr-2",attrs:{user:e.outcome.author(),size:24}}),t("small",[t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_outcome_panel.authored_by",args:{name:e.outcome.authorName()}},expression:"{ path: 'poll_common_outcome_panel.authored_by', args: { name: outcome.authorName() } }"}]}),t(Mn),t(Xn,{attrs:{date:e.outcome.createdAt}})],1),e.outcome.reviewOn?t("span",[t(Mn),t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common.review_due",expression:"'poll_common.review_due'"}]}),t(Ro),t(Xn,{attrs:{date:e.outcome.reviewOn}})],1):e._e()],1),e.outcome.poll().datesAsOptions()&&e.outcome.pollOption()?t("div",{staticClass:"poll-common-outcome__event-info"},[t("div",{staticClass:"title"},[e._v(e._s(e.outcome.eventSummary))]),t("span",[e._v(e._s(e.exactDate(e.parseISO(e.outcome.pollOption().name))))]),t("p",[e._v(e._s(e.outcome.eventLocation))])]):e._e(),t(Bl,{attrs:{model:e.outcome,column:"statement"}}),t(Ir,{attrs:{model:e.outcome}}),t(Yd,{attrs:{model:e.outcome}}),t(Bd,{attrs:{attachments:e.outcome.attachments}}),t(In,{attrs:{model:e.outcome,actions:e.dockActions,menuActions:e.menuActions}})],1):e._e()},np=[],ip=new class{actions(e){var t,o;return t=e.poll(),o=Rt.user(),{translate_outcome:{name:"common.action.translate",icon:"mdi-translate",dock:2,canPerform:function(){return ms.canTranslate(e)},perform:function(){return Rt.user()&&e.translate(o.locale)}},react:{dock:1,canPerform:function(){return t.membersInclude(o)}},edit_outcome:{name:"common.action.edit",icon:"mdi-pencil",dock:1,canPerform:function(){return ms.canSetPollOutcome(t)},perform:function(){return Un({component:"PollCommonOutcomeModal",props:{outcome:e.clone()}})}},show_history:{icon:"mdi-history",name:"action_dock.show_edits",dock:1,canPerform:function(){return e.edited()},perform:function(){return Un({component:"RevisionHistoryModal",props:{model:e}})}},notification_history:{name:"action_dock.notification_history",icon:"mdi-alarm-check",menu:!0,perform:function(){return Un({component:"AnnouncementHistory",props:{model:e}})},canPerform:function(){return!0}}}}},rp={props:{outcome:Object},methods:{parseISO:m.Z},data:function(){return{actions:ip.actions(this.outcome,this)}},computed:{menuActions:function(){return(0,l.pickBy)(ip.actions(this.outcome,this),(function(e,t){return e.menu}))},dockActions:function(){return(0,l.pickBy)(ip.actions(this.outcome,this),(function(e,t){return e.dock>0}))}}},ap=rp,lp=(0,Ut.Z)(ap,sp,np,!1,null,null,null),cp=lp.exports,up=function(){var e=this,t=e._self._c;return e.showPanel()?t(Tc.Z,{staticClass:"my-4 poll-common-set-outcome-panel",attrs:{icon:"mdi-flag-checkered",prominent:"",outlined:"",color:"primary",elevation:"3"}},[t(Di.Z,{attrs:{align:"center"}},[t(Ei.Z,{staticClass:"grow"},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_set_outcome_panel.poll_type",args:{poll_type:e.poll.translatedPollType()}},expression:"{path: 'poll_common_set_outcome_panel.poll_type', args: {poll_type: poll.translatedPollType()}}"}]})]),t(Ei.Z,{staticClass:"shrink"},[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_common_set_outcome_panel.enter_outcome",expression:"'poll_common_set_outcome_panel.enter_outcome'"}],staticClass:"poll-common-set-outcome-panel__submit",attrs:{color:"primary"},on:{click:function(t){return e.openOutcomeForm()}}})],1)],1)],1):e._e()},dp=[],pp={props:{poll:Object},methods:{showPanel:function(){return ms.canSetPollOutcome(this.poll)},openOutcomeForm:function(){var e;return e=jt.outcomes.build({pollId:this.poll.id,groupId:this.poll.groupId,statementFormat:Rt.defaultFormat()}),D.$emit("openModal",{component:"PollCommonOutcomeModal",props:{outcome:e}})}}},mp=pp,hp=(0,Ut.Z)(mp,up,dp,!1,null,null,null),_p=hp.exports,fp=function(){var e=this,t=e._self._c;return t(Ys.Z,{staticClass:"poll-common-type-icon",attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t(Qt.Z,e._g(e._b({staticClass:"mr-2",attrs:{small:e.small,"aria-label":e.poll.translatedPollType()}},"v-icon",s,!1),o),[e._v(e._s(e.$pollTypes[e.poll.pollType].material_icon))])]}}])},[t("span",[e._v(e._s(e.poll.translatedPollType()))])])},gp=[],vp={props:{poll:Object,small:Boolean}},bp=vp,yp=(0,Ut.Z)(bp,fp,gp,!1,null,null,null),wp=yp.exports,xp=function(){var e=this,t=e._self._c;return"question"==e.poll.pollType||e.poll.hasOptionIcon()?e._e():t("div",{staticClass:"poll-common-stance-choices pb-2 pt-2"},[e.stance.castAt&&0==e.stance.totalScore()?t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_votes_panel.none_of_the_above",expression:"'poll_common_votes_panel.none_of_the_above'"}],staticClass:"caption"}):[e.datesAsOptions?e._e():e._l(e.choices,(function(o){return o.score>0||"score"==e.pollType?t("div",{key:o.id,staticClass:"poll-common-stance-choice text-truncate",class:"poll-common-stance-choice--"+e.pollType},[e.variableScore?e._e():t(Qt.Z,{attrs:{small:"",color:o.pollOption.color}},[e._v("mdi-check-circle")]),e.variableScore?t("span",{style:{color:o.pollOption.color}},[e._v(e._s(o.rank||o.score))]):e._e(),t("span",{staticClass:"ml-2 text--secondary"},[e._v(e._s(o.pollOption.optionName()))])],1):e._e()}))]],2)},kp=[],Cp={props:{stance:Object},computed:{poll:function(){return this.stance.poll()},variableScore:function(){return this.poll.hasVariableScore()},pollType:function(){return this.poll.pollType},datesAsOptions:function(){return this.poll.datesAsOptions()},choices:function(){return this.stance.sortedChoices()}},methods:{emitClick:function(){return this.$emit("click")},colorFor:function(e){switch(e){case 2:return i.pollColors.proposal[0];case 1:return i.pollColors.proposal[1];case 0:return i.pollColors.proposal[2]}}}},Zp=Cp,Ip=(0,Ut.Z)(Zp,xp,kp,!1,null,null,null),Ap=Ip.exports,$p=o(12669),Sp=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-votes-panel"},[t("h2",{directives:[{name:"t",rawName:"v-t",value:"poll_common.votes",expression:"'poll_common.votes'"}],staticClass:"text-h5 my-2",attrs:{id:"votes"}}),e.poll.votersCount?e._e():t("div",{directives:[{name:"t",rawName:"v-t",value:"poll_common_votes_panel.no_votes_yet",expression:"'poll_common_votes_panel.no_votes_yet'"}],staticClass:"poll-common-votes-panel__no-votes text--secondary"}),e.poll.votersCount?t("div",{staticClass:"poll-common-votes-panel__has-votes"},[e._l(e.stances,(function(o){return t("div",{key:o.id,staticClass:"poll-common-votes-panel__stance"},[t("div",{staticClass:"poll-common-votes-panel__avatar pr-3"},[t(Ks,{attrs:{user:o.participant(),size:24}})],1),t("div",{staticClass:"poll-common-votes-panel__stance-content"},[t("div",{staticClass:"poll-common-votes-panel__stance-name-and-option"},[t(ys.Z,{staticClass:"text-body-2",attrs:{"align-center":""}},[t("span",{staticClass:"text--secondary"},[e._v(e._s(o.participantName()))]),e.poll.showResults()&&o.castAt&&e.poll.hasOptionIcon()?t("span",[t(Su,{staticClass:"pl-2 pr-1",attrs:{poll:e.poll,"stance-choice":o.stanceChoice()}}),t(Ro)],1):e._e(),o.castAt?e._e():t("span",[t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_votes_panel.undecided",expression:"'poll_common_votes_panel.undecided'"}]})],1),o.castAt?t("span",[e.poll.hasOptionIcon()?e._e():t(Mn),t(Xn,{staticClass:"text--secondary",attrs:{date:o.castAt}})],1):e._e()])],1),e.poll.showResults()&&o.castAt?t("div",{staticClass:"poll-common-stance"},[t(Ap,{attrs:{stance:o}}),t(Bl,{staticClass:"poll-common-stance-created__reason",attrs:{model:o,column:"reason"}})],1):e._e()])])})),e.loader.loading?t(As):e._e(),t($p.Z,{attrs:{length:e.totalPages,disabled:1==e.totalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],2):e._e()])},Np=[],Tp=class{constructor(e){this.remote=new p,this.loading=!1,this.params=e.params,this.path=e.path,this.per=e.params.per,this.order=e.order,this.total=0,this.pageWindow={},this.pageIds={},this.err=null,this.status=null}totalPages(){return Math.ceil(parseFloat(this.total)/parseFloat(this.params.per))}fetch(e){return this.loading=!0,this.remote.fetch({path:this.path,params:(0,l.merge)({from:(e-1)*this.per},this.params)}).then((t=>{var o,n,i;return o=h.deserialize(t),this.total=o.meta.total,n=o[o.meta.root][0][this.order],i=o[o.meta.root][o[o.meta.root].length-1][this.order],s.ZP.set(this.pageWindow,e,[i,n]),s.ZP.set(this.pageIds,e,(0,l.map)(o[o.meta.root],"id")),jt.importREADY(o)})).catch((e=>(this.err=e,this.status=e.status))).finally((()=>this.loading=!1))}},jp={props:{poll:Object},data:function(){return{stances:[],per:25,loader:null}},created:function(){return this.loader=new Tp({path:"stances",order:"orderAt",params:{per:this.per,poll_id:this.poll.id}}),this.loader.fetch(this.page).then((()=>this.findRecords())),this.watchRecords({collections:["stances","polls"],query:()=>this.findRecords()})},computed:{page:{get:function(){return parseInt(this.$route.query.page)||1},set:function(e){return this.$router.replace({query:Object.assign({},this.$route.query,{page:e})})}},totalPages:function(){return Math.ceil(parseFloat(this.loader.total)/parseFloat(this.per))}},watch:{page:function(){return this.loader.fetch(this.page).then((()=>this.findRecords())).then((()=>this.scrollTo("#votes"))),this.findRecords()}},methods:{findRecords:function(){var e;return this.loader.pageWindow[this.page]?(e=jt.stances.collection.chain().find({id:{$in:this.loader.pageIds[this.page]}}),e=e.simplesort("orderAt",!0),this.stances=e.data()):this.stances=[]}}},Pp=jp,Op=(0,Ut.Z)(Pp,Sp,Np,!1,null,null,null),Rp=Op.exports,qp=function(){var e=this,t=e._self._c;return t(an.Z,[t(Ju,{attrs:{poll:e.poll}}),e.poll.discardedAt?t("div",[t(is.ZB,[t("div",{directives:[{name:"t",rawName:"v-t",value:"poll_common_card.deleted",expression:"'poll_common_card.deleted'"}],staticClass:"text--secondary"})])],1):t("div",{staticClass:"px-2 pb-4 px-sm-4"},[t("poll-template-banner",{attrs:{poll:e.poll}}),t("h1",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.titleVisible},expression:"{callback: titleVisible}"}],staticClass:"poll-common-card__title text-h4 py-2",attrs:{tabindex:"-1"}},[t(wp,{staticClass:"mr-2",attrs:{poll:e.poll}}),e.poll.translation.title?e._e():t("span",[e._v(e._s(e.poll.title))]),e.poll.translation.title?t(El,{attrs:{model:e.poll,field:"title"}}):e._e(),t(Uo,{attrs:{model:e.poll}})],1),e.outcome?e._e():t(_p,{attrs:{poll:e.poll}}),e.outcome?t(cp,{attrs:{outcome:e.outcome}}):e._e(),t(op,{attrs:{poll:e.poll}}),t(Td,{attrs:{poll:e.poll}}),t(Vu,{attrs:{poll:e.poll}}),t(In,{staticClass:"mt-4",attrs:{"menu-actions":e.menuActions,actions:e.dockActions}}),t("div",{staticClass:"poll-common-card__results-shown mt-4"},[t(Rp,{attrs:{poll:e.poll}})],1)],1)],1)},Mp=[],Ep=function(){var e=this,t=e._self._c;return e.poll.template&&e.poll.id?t(Tc.Z,{attrs:{color:"info",outlined:""}},[t("div",{staticClass:"d-flex align-center"},[t("div",{directives:[{name:"t",rawName:"v-t",value:"templates.this_is_a_poll_template",expression:"'templates.this_is_a_poll_template'"}]}),t(yn.Z),t($s.Z,{attrs:{to:"/p/new?template_id="+e.poll.id}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.make_a_copy",expression:"'templates.make_a_copy'"}]})])],1)]):e._e()},Lp=[],Dp={props:{poll:Object}},Fp=Dp,Up=(0,Ut.Z)(Fp,Ep,Lp,!1,null,null,null),zp=Up.exports,Bp={components:{PollCommonDirective:Lu,PollTemplateBanner:zp},props:{poll:Object,isPage:Boolean},created:function(){return D.$on("stanceSaved",(()=>D.$emit("refreshStance"))),this.watchRecords({collections:["stances","outcomes"],query:e=>(this.actions=ld.actions(this.poll),this.myStance=this.poll.myStance()||jt.stances.build(),this.outcome=this.poll.outcome())})},data:function(){return{actions:{},buttonPressed:!1,myStance:null,outcome:this.poll.outcome()}},methods:{titleVisible:function(e){if(this.isPage)return D.$emit("content-title-visible",e)}},computed:{menuActions:function(){return(0,l.pickBy)(this.actions,(function(e){return e.menu}))},dockActions:function(){return(0,l.pickBy)(this.actions,(function(e){return e.dock}))}}},Vp=Bp,Hp=(0,Ut.Z)(Vp,qp,Mp,!1,null,null,null),Gp=Hp.exports,Wp=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-page"},[t(ai.Z,[t(ri.Z,{staticClass:"max-width-800 pa-sm-3 pa-0"},[t(As,{attrs:{until:e.poll}},[t(Gp,{attrs:{poll:e.poll,"is-page":""}})],1)],1)],1)],1)},Kp=[],Yp={data:function(){return{poll:null}},created:function(){return this.init()},watch:{"$route.params.key":"init"},methods:{init:function(){return jt.polls.findOrFetchById(this.$route.params.key).then((e=>(this.poll=e,this.poll.group().newHost&&(window.location.host=this.poll.group().newHost),D.$emit("currentComponent",{group:e.group(),poll:e,title:e.title,page:"pollPage"})))).catch((function(e){if(D.$emit("pageError",e),403===e.status&&!Rt.isSignedIn())return D.$emit("openAuthModal")}))}}},Qp=Yp,Jp=(0,Ut.Z)(Qp,Wp,Kp,!1,null,null,null),Xp=Jp.exports,em=o(77255),tm=function(){var e=this,t=e._self._c;return e.model.id?t("div",{staticClass:"common-notify-fields"},[t(em.Z,{staticClass:"my-6"}),t(ci.Z,{attrs:{label:e.$t("discussion_form.change_log_label"),placeholder:e.$t("discussion_form.change_log_placeholder")},model:{value:e.model.recipientMessage,callback:function(t){e.$set(e.model,"recipientMessage",t)},expression:"model.recipientMessage"}}),t("recipients-autocomplete",{attrs:{label:e.$t(e.model.id?"action_dock.notify":"common.action.invite"),placeholder:e.$t("announcement.form."+e.model.constructor.singular+"_"+(e.model.id?"edited":"announced")+".helptext"),model:e.model}})],1):e._e()},om=[],sm=o(67416),nm=function(){var e=this,t=e._self._c;return t("div",{staticClass:"recipients-autocomplete"},[t(sm.Z,{staticClass:"announcement-form__input",attrs:{multiple:"","return-object":"","auto-select-first":"","hide-selected":"","search-input":e.query,"item-text":"name","hide-no-data":e.recipients.length>0||e.loading,loading:e.loading,label:e.label,placeholder:e.placeholder,items:e.suggestions},on:{change:function(t){e.query=null},"update:searchInput":function(t){e.query=t},"update:search-input":function(t){e.query=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t(zo.Z,[t(Rs.Z,[e.query?e._e():t(Qt.Z,[e._v("mdi-account-search")]),e.query?t(Qt.Z,[e._v("mdi-information-outline")]):e._e()],1),t(Vo.km,[t(Vo.V9,[e.query?t("span",{directives:[{name:"t",rawName:"v-t",value:"common.no_results_found",expression:"'common.no_results_found'"}]}):t("span",[e.canAddGuests?t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.search_by_name_or_email",expression:"'announcement.search_by_name_or_email'"}]}):e._e(),e.canAddGuests?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.search_by_name",expression:"'announcement.search_by_name'"}]})])]),t(Vo.oZ,[e.canAddGuests||e.canNotifyGroup?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.only_admins_can_announce_or_invite",expression:"'announcement.only_admins_can_announce_or_invite'"}]}),!e.canAddGuests&&e.canNotifyGroup?t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.only_admins_can_invite",expression:"'announcement.only_admins_can_invite'"}]}):e._e(),e.canAddGuests&&!e.canNotifyGroup?t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.only_admins_can_announce",expression:"'announcement.only_admins_can_announce'"}]}):e._e()])],1)],1)]},proxy:!0},{key:"selection",fn:function(o){return["audience"==o.item.type?t(qo.Z,{staticClass:"chip--select-multi",attrs:{value:o.selected,close:"",color:"primary"},on:{"click:close":function(t){return e.remove(o.item)},click:function(t){return e.expand(o.item)}}},[t("span",[t(Qt.Z,{staticClass:"mr-1",attrs:{small:""}},[e._v(e._s(o.item.icon))])],1),t("span",[e._v(e._s(o.item.name))])]):t(qo.Z,{staticClass:"chip--select-multi",attrs:{value:o.selected,close:"",outlined:"",color:"primary"},on:{"click:close":function(t){return e.remove(o.item)}}},[t("span",["user"==o.item.type?t(Ks,{staticClass:"mr-1",attrs:{user:o.item.user,size:24,"no-link":""}}):t(Qt.Z,{staticClass:"mr-1",attrs:{small:""}},[e._v(e._s(o.item.icon))])],1),t("span",[e._v(e._s(o.item.name))]),"user"==o.item.type&&e.currentUserId==o.item.id?t("span",[t(Ro),t("span",[e._v("("+e._s(e.$t("common.you"))+")")])],1):e._e()])]}},{key:"item",fn:function(o){return[t(Bo.Z,["user"==o.item.type?t(Ks,{attrs:{user:o.item.user,size:24,"no-link":""}}):t(Qt.Z,{staticClass:"mr-1",attrs:{small:""}},[e._v(e._s(o.item.icon))])],1),t(Vo.km,{staticClass:"announcement-chip__content"},[t(Vo.V9,[t("span",[e._v(e._s(o.item.name))]),"user"==o.item.type&&e.currentUserId==o.item.id?t("span",[t(Ro),t("span",[e._v("("+e._s(e.$t("common.you"))+")")])],1):e._e()])],1)]}}]),model:{value:e.recipients,callback:function(t){e.recipients=t},expression:"recipients"}}),t("notifications-count",{directives:[{name:"show",rawName:"v-show",value:e.recipients.length,expression:"recipients.length"}],attrs:{model:e.model,"exclude-members":e.excludeMembers,"include-actor":e.includeActor}})],1)},im=[];$l=function(){return Rt.user()};var rm,am,lm,cm=new class{audiencesFor(e){var t;return t=[],e.discussion&&e.discussion().id&&e.discussion().membersCount&&(e.adminsInclude($l())||e.group().membersCanAnnounce&&e.membersInclude($l()),t.push("discussion_group")),e.poll&&e.poll().id&&e.poll().votersCount&&(e.adminsInclude($l())||e.group().membersCanAnnounce&&e.membersInclude($l()),t.push("voters")),e.poll&&e.poll().id&&e.poll().decidedVotersCount&&e.poll().undecidedVotersCount&&(e.adminsInclude($l())||e.group().membersCanAnnounce&&e.membersInclude($l()),t.push("decided_voters")),e.poll&&e.poll().id&&e.poll().decidedVotersCount&&e.poll().undecidedVotersCount&&(e.adminsInclude($l())||e.group().membersCanAnnounce&&e.membersInclude($l()),t.push("undecided_voters")),t}},um=function(){var e=this,t=e._self._c;return t("p",{staticClass:"common-notifications-count text--secondary caption"},[e.model.notifyRecipients?[0==e.count?t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.form.notified_none",expression:"'announcement.form.notified_none'"}]}):e._e(),1==e.count?t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.form.single_notification",expression:"'announcement.form.single_notification'"}]}):e._e(),e.count>1?t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"announcement.form.multiple_notifications",args:{notified:e.count}},expression:"{path: 'announcement.form.multiple_notifications', args: {notified: count}}"}]}):e._e()]:[0==e.count?t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.form.added_none",expression:"'announcement.form.added_none'"}]}):e._e(),1==e.count?t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.form.added_singular",expression:"'announcement.form.added_singular'"}]}):e._e(),e.count>1?t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"announcement.form.added",args:{count:e.count}},expression:"{path: 'announcement.form.added', args: {count: count}}"}]}):e._e()],t(Ro),e.model.recipientAudience&&!e.model.anonymous?t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.form.click_group_to_see_individuals",expression:"'announcement.form.click_group_to_see_individuals'"}]}):e._e()],2)},dm=[],pm={props:{model:Object,excludeMembers:Boolean,includeActor:Boolean},data:function(){return{count:0}},methods:{updateCount:function(){var e;return e=this.excludeMembers&&{exclude_members:1}||{},jt.remote.fetch({path:"announcements/count",params:{recipient_emails_cmr:this.model.recipientEmails.join(","),recipient_user_xids:this.model.recipientUserIds.join("x"),recipient_chatbot_xids:this.model.recipientChatbotIds.join("x"),recipient_usernames_cmr:[],recipient_audience:this.model.recipientAudience,include_actor:this.includeActor?1:null,...this.model.bestNamedId(),...e}}).then((e=>this.count=e.count))}},watch:{"model.recipientEmails":"updateCount","model.recipientUserIds":"updateCount","model.recipientAudience":"updateCount","model.groupId":"updateCount"}},mm=pm,hm=(0,Ut.Z)(mm,um,dm,!1,null,null,null),_m=hm.exports,fm={components:{NotificationsCount:_m},props:{autofocus:Boolean,label:String,placeholder:String,hint:String,reset:Boolean,model:Object,existingOnly:Boolean,includeActor:Boolean,excludeMembers:Boolean,excludedAudiences:{type:Array,default:function(){return[]}},excludedUserIds:{type:Array,default:function(){return[]}},initialRecipients:{type:Array,default:function(){return[]}}},data:function(){return{query:"",suggestedUserIds:[],suggestions:[],recipients:[],loading:!1}},mounted:function(){return this.recipients=this.initialRecipients,this.fetchChatbots(),this.fetchAndUpdateSuggestions()},watch:{"model.groupId":function(e){return this.suggestedUserIds=[],this.newRecipients(this.initialRecipients),this.fetchChatbots(),this.fetchAndUpdateSuggestions()},reset:function(){return this.query="",this.recipients=this.initialRecipients,this.fetchAndUpdateSuggestions()},recipients:function(e){return this.newRecipients(e),this.$emit("new-recipients",e),this.updateSuggestions()},query:function(e){return this.$emit("new-query",e),this.fetchAndUpdateSuggestions()}},methods:{fetchChatbots:function(){if(this.model.groupId)return jt.fetch({path:"chatbots",params:{group_id:this.model.groupId}}).then((e=>this.updateSuggestions()))},fetchSuggestions:(0,l.debounce)((function(){var e;if(this.query)return e=this.existingOnly&&{existing_only:1}||{},this.loading=!0,jt.fetch({path:"announcements/search",params:{exclude_types:"group inviter",q:this.query,per:20,include_actor:this.includeActor?1:null,...e,...this.model.bestNamedId()}}).then((e=>(this.suggestedUserIds=(0,l.uniq)(this.suggestedUserIds.concat(e["users"].map((function(e){return e.id})))),this.updateSuggestions()))).finally((()=>this.loading=!1))}),500),fetchAndUpdateSuggestions:function(){return this.fetchSuggestions(),this.updateSuggestions()},newRecipients:function(e){return this.model.recipientAudience=((0,l.find)(e,(function(e){return"audience"===e.type}))||{}).id,this.model.recipientUserIds=(0,l.map)((0,l.filter)(e,(function(e){return"user"===e.type})),"id"),this.model.recipientEmails=(0,l.map)((0,l.filter)(e,(function(e){return"email"===e.type})),"name"),this.model.recipientChatbotIds=(0,l.map)((0,l.filter)(e,(function(e){return"chatbot"===e.type})),"id")},findUsers:function(){var e;return this.query?(e=jt.users.collection.chain(),e=e.find({id:{$in:(0,l.difference)(this.suggestedUserIds,this.excludedUserIds)}}),e=e.find({emailVerified:!0}),e=e.find({$or:[{name:{$regex:[`^${this.query}`,"i"]}},{username:{$regex:[`^${this.query}`,"i"]}},{name:{$regex:[` ${this.query}`,"i"]}}]}),e.data()):[]},notificationsCount:function(){return sum(this.recipients.map((e=>e.size||1)))},expand:function(e){var t;return t=this.excludeMembers&&{exclude_members:1}||{},this.model.anonymous&&["decided_voters","undecided_voters"].includes(e.id)?(Fn.warning("announcement.cannot_reveal_when_anonymous"),!1):jt.fetch({path:"announcements/audience",params:{recipient_audience:e.id,include_actor:this.includeActor?1:null,...t,...this.model.bestNamedId()}}).then((t=>{var o;return this.remove(e),o=(t["users"]||[]).map((function(e){return e.id})),this.suggestedUserIds=(0,l.uniq)(this.suggestedUserIds.concat(o)),jt.users.find(o).forEach((e=>this.recipients.push({id:e.id,type:"user",name:e.nameOrEmail(),user:e})))}))},remove:function(e){return this.recipients=(0,l.filter)(this.recipients,(function(t){return!(t.id===e.id&&t.type===e.type)}))},emailToRecipient:function(e){return{id:e,type:"email",icon:"mdi-email-outline",name:e}},updateSuggestions:function(){var e,t,o,s,n;if(this.query&&this.canAddGuests){if(o=(0,l.uniq)(this.query.match(/[^\s:,;'"`<>]+?@[^\s:,;'"`<>]+\.[^\s:,;'"`<>]+/g)||[]),o.length>1||1===o.length&&[","," "].includes(this.query.slice(-1)))return n=(0,l.uniqBy)(this.recipients.concat(o.map(this.emailToRecipient)),"id"),this.recipients=n,this.suggestions=n,void(this.query="");if(1===o.length)return void(this.suggestions=this.recipients.concat(o.map(this.emailToRecipient)))}return s=this.findUsers().map((function(e){return{id:e.id,type:"user",name:e.nameOrEmail(),user:e}})),e=this.audiences.map((function(e){return{id:e.id,type:"audience",icon:"mdi-account-group",name:e.name,size:e.size}})),t=this.model.group().chatbots().map((function(e){return{id:e.id,type:"chatbot",icon:"mdi-robot",name:e.name}})),this.suggestions=this.recipients.concat(t).concat(e).concat(s)}},computed:{canAddGuests:function(){return ms.canAddGuests(this.model)},canNotifyGroup:function(){return ms.canAnnounce(this.model)},modelName:function(){return this.model.constructor.singular},audiences:function(){var e,t;return t=[],0===this.recipients.length&&(cm.audiencesFor(this.model).forEach((e=>{switch(e){case"group":return t.push({id:"group",name:this.$t("announcement.audiences.group",{name:this.model.group().name}),size:this.model.group().acceptedMembershipsCount,icon:"mdi-account-group"});case"discussion_group":return t.push({id:"discussion_group",name:this.$t("announcement.audiences.discussion_group"),size:this.model.discussion().membersCount,icon:"mdi-forum"});case"voters":return t.push({id:"voters",name:this.$t("announcement.audiences.voters",{pollType:this.model.poll().translatedPollType()}),size:this.model.poll().votersCount,icon:"mdi-forum"});case"decided_voters":return t.push({id:"decided_voters",name:this.$t("announcement.audiences.decided_voters"),size:this.model.poll().decidedVotersCount,icon:"mdi-forum"});case"undecided_voters":return t.push({id:"undecided_voters",name:this.$t("announcement.audiences.undecided_voters"),size:this.model.poll().undecidedVotersCount,icon:"mdi-forum"})}})),this.excludedAudiences.includes("group")||(e=function(){switch(this.model.constructor.singular){case"poll":case"discussion":case"outcome":return(0,l.compact)([this.model.group(),this.model.group().parentId&&this.model.group().parent()].concat((0,l.without)(this.model.group().parentOrSelf().subgroups(),this.model.group())));default:return[]}}.call(this),e.filter(ms.canNotifyGroup).forEach((e=>{if(e.acceptedMembershipsCount)return t.push({id:`group-${e.id}`,name:this.$t("announcement.audiences.group",{name:e.name}),size:e.acceptedMembershipsCount,icon:"mdi-forum"})})))),t.filter((e=>!this.excludedAudiences.includes(e.id)&&(this.query&&e.name.match(new RegExp(this.query,"i"))||!0)))}}},gm=fm,vm=(0,Ut.Z)(gm,nm,im,!1,null,null,null),bm=vm.exports,ym={components:{RecipientsAutocomplete:bm},props:{model:Object},data:function(){return{initialRecipients:[]}}},wm=ym,xm=(0,Ut.Z)(wm,tm,om,!1,null,null,null),km=xm.exports,Cm=o(91232),Zm=function(){var e=this,t=e._self._c;return t(ys.Z,{staticClass:"date-time-picker"},[t(qs.Z,{ref:"dateTimePicker",attrs:{"offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t(ci.Z,e._g(e._b({staticClass:"date-time-picker__date-field",attrs:{placeholder:e.placeholder,rules:[e.validDate],"prepend-icon":"mdi-calendar"},model:{value:e.dateStr,callback:function(t){e.dateStr=t},expression:"dateStr"}},"v-text-field",s,!1),o))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[t(ga.Z,{staticClass:"date-time-picker__date-picker",attrs:{"no-title":"",min:e.minStr},on:{input:function(t){e.dateMenu=!1}},model:{value:e.dateStr,callback:function(t){e.dateStr=t},expression:"dateStr"}})],1),t(yn.Z),t(Cm.Z,{staticClass:"date-time-picker__time-field",attrs:{hint:e.twelvehour?e.timeHint:null,"persistent-hint":e.twelvehour,items:e.times,"prepend-icon":"mdi-clock-outline"},model:{value:e.timeStr,callback:function(t){e.timeStr=t},expression:"timeStr"}})],1)},Im=[],Am=o(42298),$m=o(86307),Sm={props:{value:Date,min:Date,dateLabel:Object,timeLabel:Object},created:function(){return this.newValue=this.value},data:function(){return{dateStr:this.value&&(0,Am.Z)(this.value,"yyyy-MM-dd")||"",timeStr:this.value&&(0,Am.Z)(this.value,"HH:mm")||"",minStr:this.value&&(0,Am.Z)(this.min,"yyyy-MM-dd")||"",dateMenu:!1,times:We(),placeholder:(0,Am.Z)(new Date,"yyyy-MM-dd"),validDate:e=>(0,Ee.Z)((0,$m.Z)(e,"yyyy-MM-dd",new Date))}},methods:{updateNewValue:function(){var e;if(e=(0,$m.Z)(`${this.dateStr} ${this.timeStr}`,"yyyy-MM-dd HH:mm",new Date),(0,Ee.Z)(e))return this.newValue=e,this.$emit("input",this.newValue)}},watch:{dateStr:function(){return this.updateNewValue()},timeStr:function(){return this.updateNewValue()}},computed:{twelvehour:function(){return"HH:mm"!==Ye()},timeHint:function(){var e;try{return e=(0,$m.Z)(this.timeStr,"HH:mm",new Date),(0,Am.Z)(e,Ye())}catch(Pw){return Fn.error("poll_meeting_form.use_24_hour_format",{time:(0,Am.Z)(new Date,"HH:mm")}),M.t("poll_meeting_form.use_24_hour_format",{time:(0,Am.Z)(new Date,"HH:mm")})}}}},Nm=Sm,Tm=(0,Ut.Z)(Nm,Zm,Im,!1,null,null,null),jm=Tm.exports,Pm=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"poll-common-closing-at-field my-3"},[t("div",{staticClass:"poll-common-closing-at-field__inputs"},[t(ys.Z,{attrs:{wrap:""}},[t(cc.Z,[t(qs.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t(ci.Z,e._g(e._b({attrs:{disabled:!e.poll.closingAt,rules:[e.validDate],placeholder:"2000-12-30","prepend-icon":"mdi-calendar"},scopedSlots:e._u([{key:"label",fn:function(){return[e.poll.closingAt?t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"common.closing_in",args:{time:e.label}},expression:"{ path: 'common.closing_in', args: { time: label } }"}],attrs:{title:e.exact(e.poll.closingAt)}}):e._e(),e.poll.closingAt?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_closing_at_field.no_closing_date",expression:"'poll_common_closing_at_field.no_closing_date'"}]})]},proxy:!0}],null,!0),model:{value:e.closingDate,callback:function(t){e.closingDate=t},expression:"closingDate"}},"v-text-field",s,!1),o))]}}]),model:{value:e.isShowingDatePicker,callback:function(t){e.isShowingDatePicker=t},expression:"isShowingDatePicker"}},[t(ga.Z,{staticClass:"poll-common-closing-at-field__datepicker",attrs:{disabled:!e.poll.closingAt,min:e.dateToday,"no-title":""},on:{input:function(t){e.isShowingDatePicker=!1}},model:{value:e.closingDate,callback:function(t){e.closingDate=t},expression:"closingDate"}})],1)],1),t(yn.Z),t(Fi.Z,{staticClass:"poll-common-closing-at-field__timepicker",attrs:{disabled:!e.poll.closingAt,"prepend-icon":"mdi-clock-outline",label:e.$t("poll_meeting_time_field.closing_hour"),items:e.times,hint:e.twelvehour?e.closingAtHint:null,"persistent-hint":e.twelvehour},model:{value:e.closingHour,callback:function(t){e.closingHour=t},expression:"closingHour"}})],1)],1),t(_c,{attrs:{subject:e.poll,field:"closingAt"}})],1)])},Om=[],Rm=o(77946),qm={props:{poll:Object},data:function(){return{closingHour:(0,Am.Z)(this.poll.closingAt||(0,Te.Z)(new Date),"HH:mm"),closingDate:(0,Am.Z)(this.poll.closingAt||new Date,"yyyy-MM-dd"),dateToday:(0,Am.Z)(new Date,"yyyy-MM-dd"),times:We(),timeZone:i.timeZone,isShowingDatePicker:!1,validDate:()=>(0,Ee.Z)((0,$m.Z)(`${this.closingDate} ${this.closingHour}`,"yyyy-MM-dd HH:mm",new Date))}},methods:{exact:Ge,updateClosingAt:function(){var e;if(e=(0,$m.Z)(`${this.closingDate} ${this.closingHour}`,"yyyy-MM-dd HH:mm",new Date),(0,Ee.Z)(e))return this.poll.closingAt=e}},computed:{twelvehour:function(){return"HH:mm"!==Ye()},closingAtHint:function(){return(0,Am.Z)(this.poll.closingAt,Ye())},label:function(){return!!this.poll.closingAt&&(0,Rm.Z)(this.poll.closingAt,new Date,{addSuffix:!0})}},watch:{"poll.closingAt":function(e){if(e)return this.closingHour=(0,Am.Z)(e,"HH:mm"),this.closingDate=(0,Am.Z)(e,"yyyy-MM-dd")},closingDate:function(e){return this.updateClosingAt()},closingHour:function(e){return this.updateClosingAt()}}},Mm=qm,Em=(0,Ut.Z)(Mm,Pm,Om,!1,null,null,null),Lm=Em.exports,Dm=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-meeting-add-option-menu"},[t("p",{staticClass:"text-caption text--secondary"},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_form.your_in_zone",args:{zone:e.currentTimeZone}},expression:"{path: 'poll_common_form.your_in_zone', args: {zone: currentTimeZone}}"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_meeting_form.participants_see_local_times",expression:"'poll_meeting_form.participants_see_local_times'"}]})])])},Fm=[],Um={props:{poll:Object,value:Date},data:function(){return{min:new Date,zoneCounts:[],showTimeZones:!1}},computed:{currentTimeZone:function(){return Rt.user().timeZone}},methods:{timeInZone:function(e){return Ge(this.value,e)}}},zm=Um,Bm=(0,Ut.Z)(zm,Dm,Fm,!1,null,null,null),Vm=Bm.exports,Hm=function(){var e=this,t=e._self._c;return t(Cm.Z,{staticClass:"tags-field__input",attrs:{multiple:"","hide-selected":"",label:e.$t("loomio_tags.tags"),items:e.items},scopedSlots:e._u([{key:"selection",fn:function(o){return[t(qo.Z,{key:JSON.stringify(o.item),staticClass:"chip--select-multi",attrs:{value:o.item,close:"",outlined:"",color:e.colorFor(o.item)},on:{"click:close":function(t){return e.remove(o)}}},[t("span",[e._v(e._s(o.item))])])]}},{key:"item",fn:function(o){return[t(qo.Z,{staticClass:"chip--select-multi",attrs:{outlined:"",color:e.colorFor(o.item)}},[t("span",[e._v(e._s(o.item))])])]}}]),model:{value:e.model.tags,callback:function(t){e.$set(e.model,"tags",t)},expression:"model.tags"}})},Gm=[],Wm={props:{model:Object},data:function(){return{items:this.model.group().tags().map((function(e){return e.name}))}},methods:{colorFor:function(e){return(this.model.group().tags().find((function(t){return t.name===e}))||{}).color},remove:function(e){return this.model.tags.splice(this.model.tags.indexOf(e),1)}},computed:{actor:function(){return Rt.user()}}},Km=Wm,Ym=(0,Ut.Z)(Km,Hm,Gm,!1,null,null,null),Qm=Ym.exports,Jm=o(99293),Xm=o(46684),eh=o(15325),th=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-form"},[t(lc,{attrs:{value:e.poll.processing}}),t(is.EB,{staticClass:"px-0"},[t("h1",{directives:[{name:"t",rawName:"v-t",value:{path:e.titlePath,args:e.titleArgs},expression:"{path: titlePath, args: titleArgs}"}],staticClass:"text-h4",attrs:{tabindex:"-1"}}),t(yn.Z),e.poll.id?t($s.Z,{attrs:{icon:"",to:e.urlFor(e.poll),"aria-hidden":"true"}},[t(Qt.Z,[e._v("mdi-close")])],1):e._e(),e.poll.id?e._e():t($s.Z,{attrs:{icon:"","aria-hidden":"true"},on:{click:function(t){return e.$emit("setPoll",null)}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1),t("poll-template-info-panel",{attrs:{poll:e.poll}}),e.poll.id||e.poll.discussionId?e._e():t(Fi.Z,{attrs:{items:e.groupItems,label:e.$t("common.group")},model:{value:e.poll.groupId,callback:function(t){e.$set(e.poll,"groupId",t)},expression:"poll.groupId"}}),t(ci.Z,{staticClass:"poll-common-form-fields__title",attrs:{type:"text",required:"true",hint:e.$t("poll_common_form.title_hint"),placeholder:e.$t("common.prefix_eg",{val:e.poll.titlePlaceholder}),label:e.$t("poll_common_form.title"),maxlength:"250"},model:{value:e.poll.title,callback:function(t){e.$set(e.poll,"title",t)},expression:"poll.title"}}),t(_c,{attrs:{subject:e.poll,field:"title"}}),t(Qm,{attrs:{model:e.poll}}),t(tc,{staticClass:"poll-common-form-fields__details",attrs:{model:e.poll,field:"details",placeholder:e.$t("poll_common_form.details_placeholder"),label:e.$t("poll_common_form.details"),"should-reset":e.shouldReset}}),e.hasOptions?[t("div",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.options",expression:"'poll_common_form.options'"}],staticClass:"v-label v-label--active px-0 text-caption py-2"}),e.pollOptions.length?e._e():t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.no_options_add_some",expression:"'poll_common_form.no_options_add_some'"}],staticClass:"px-0"}),e.pollOptions.length?t(du,{attrs:{"append-to":".app-is-booted","use-drag-handle":"","lock-axis":"y"},model:{value:e.pollOptions,callback:function(t){e.pollOptions=t},expression:"pollOptions"}},e._l(e.visiblePollOptions,(function(o,s){return o._destroy?e._e():t(iu,{key:o.name,attrs:{index:s,item:o}},[t(an.Z,{staticClass:"mb-2 rounded",attrs:{outlined:""}},[t(zo.Z,{staticStyle:{"user-select":"none"}},[e.hasOptionIcon?t(Rs.Z,{directives:[{name:"handle",rawName:"v-handle"}]},[t(zs.Z,{attrs:{size:"48"}},[t("img",{attrs:{src:"/img/"+o.icon+".svg","aria-hidden":"true"}})])],1):e._e(),t(Vo.km,{directives:[{name:"handle",rawName:"v-handle"}]},[t(Vo.V9,["i18n"==e.optionFormat?t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_proposal_options."+o.name,expression:"'poll_proposal_options.'+option.name"}]}):e._e(),"plain"==e.optionFormat?t("span",[e._v(e._s(o.name))]):e._e(),"iso8601"==e.optionFormat?t("span",[t(ku,{attrs:{name:o.name}})],1):e._e()]),t(Vo.oZ,[e._v(e._s(o.meaning))])],1),t(En.Z,[t($s.Z,{attrs:{icon:"",title:e.$t("common.action.delete")},on:{click:function(t){return e.removeOption(o)}}},[t(Qt.Z,{staticClass:"text--secondary"},[e._v("mdi-delete")])],1)],1),"meeting"!=e.poll.pollType?t(En.Z,{staticClass:"ml-0"},[t($s.Z,{attrs:{icon:"",title:e.$t("common.action.edit")},on:{click:function(t){return e.editOption(o)}}},[t(Qt.Z,{staticClass:"text--secondary"},[e._v("mdi-pencil")])],1)],1):e._e(),"meeting"!=e.poll.pollType?t(Qt.Z,{directives:[{name:"handle",rawName:"v-handle"}],staticClass:"text--secondary",attrs:{title:e.$t("common.action.move")}},[e._v("mdi-drag-vertical")]):e._e()],1)],1)],1)})),1):e._e(),"i18n"==e.optionFormat?[t(Fi.Z,{attrs:{outlined:"",items:e.i18nItems,label:e.$t("poll_poll_form.add_option_placeholder")},on:{change:e.addOption},model:{value:e.newOption,callback:function(t){e.newOption=t},expression:"newOption"}})]:e._e(),"plain"==e.optionFormat?[t(ci.Z,{staticClass:"poll-poll-form__add-option-input mt-4",attrs:{label:e.$t("poll_poll_form.new_option"),placeholder:e.$t("poll_poll_form.add_option_hint"),filled:"",rounded:"",color:"primary"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addOption.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t($s.Z,{staticClass:"mt-n2",attrs:{icon:"",disabled:!e.newOption,color:"primary",outlined:"",title:e.$t("poll_poll_form.add_option_placeholder")},on:{click:e.addOption}},[t(Qt.Z,[e._v("mdi-plus")])],1)]},proxy:!0}],null,!1,2744582193),model:{value:e.newOption,callback:function(t){e.newOption=t},expression:"newOption"}})]:e._e(),"iso8601"==e.optionFormat?[t("div",{directives:[{name:"t",rawName:"v-t",value:"poll_poll_form.new_option",expression:"'poll_poll_form.new_option'"}],staticClass:"v-label v-label--active px-0 text-caption pt-2"}),t("div",{staticClass:"d-flex align-center"},[t(jm,{attrs:{min:e.minDate},model:{value:e.newDateOption,callback:function(t){e.newDateOption=t},expression:"newDateOption"}}),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_poll_form.add_option_placeholder",expression:"'poll_poll_form.add_option_placeholder'"}],staticClass:"poll-meeting-form__option-button ml-4",attrs:{title:e.$t("poll_meeting_time_field.add_time_slot"),outlined:"",color:"primary"},on:{click:function(t){return e.addDateOption()}}})],1),t(Vm,{attrs:{poll:e.poll,value:e.newDateOption}})]:e._e()]:e._e(),"iso8601"==e.optionFormat?[t("div",{staticClass:"d-flex align-center"},[t(ci.Z,{staticClass:"text-right",staticStyle:{"max-width":"120px","text-align":"right"},attrs:{label:e.$t("poll_meeting_form.meeting_duration"),type:"number"},model:{value:e.poll.meetingDuration,callback:function(t){e.$set(e.poll,"meetingDuration",t)},expression:"poll.meetingDuration"}}),t("span",{directives:[{name:"t",rawName:"v-t",value:"common.minutes",expression:"'common.minutes'"}],staticClass:"pl-2 text--secondary"}),e.formattedDuration?t("span",{staticClass:"pl-1 text--secondary"},[e._v("("+e._s(e.formattedDuration)+")")]):e._e()],1)]:e._e(),"count"==e.poll.pollType?[t("p",{directives:[{name:"t",rawName:"v-t",value:"poll_count_form.agree_target_helptext",expression:"'poll_count_form.agree_target_helptext'"}],staticClass:"text--secondary"}),t("div",{staticClass:"d-flex"},[t(ci.Z,{staticClass:"poll-common-form__agree-target",attrs:{type:"number",step:1,label:e.$t("poll_count_form.agree_target_label")},model:{value:e.poll.agreeTarget,callback:function(t){e.$set(e.poll,"agreeTarget",t)},expression:"poll.agreeTarget"}})],1)]:e._e(),"score"==e.poll.pollType?t("div",{staticClass:"d-flex"},[t(ci.Z,{staticClass:"poll-score-form__min",attrs:{type:"number",step:1,label:e.$t("poll_common.min_score")},model:{value:e.poll.minScore,callback:function(t){e.$set(e.poll,"minScore",t)},expression:"poll.minScore"}}),t(yn.Z),t(ci.Z,{staticClass:"poll-score-form__max",attrs:{type:"number",step:1,label:e.$t("poll_common.max_score")},model:{value:e.poll.maxScore,callback:function(t){e.$set(e.poll,"maxScore",t)},expression:"poll.maxScore"}})],1):e._e(),"poll"==e.poll.pollType?[t("p",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.how_many_options_can_a_voter_choose",expression:"'poll_common_form.how_many_options_can_a_voter_choose'"}],staticClass:"text--secondary"}),t("div",{staticClass:"d-flex"},[t(ci.Z,{staticClass:"poll-common-form__minimum-stance-choices",attrs:{type:"number",step:1,hint:e.$t("poll_common_form.choose_at_least"),label:e.$t("poll_common_form.minimum_choices")},model:{value:e.poll.minimumStanceChoices,callback:function(t){e.$set(e.poll,"minimumStanceChoices",t)},expression:"poll.minimumStanceChoices"}}),t(yn.Z),t(ci.Z,{staticClass:"poll-common-form__maximum-stance-choices",attrs:{type:"number",step:1,hint:e.$t("poll_common_form.choose_at_most"),label:e.$t("poll_common_form.maximum_choices")},model:{value:e.poll.maximumStanceChoices,callback:function(t){e.$set(e.poll,"maximumStanceChoices",t)},expression:"poll.maximumStanceChoices"}})],1)]:e._e(),"ranked_choice"==e.poll.pollType?t("div",{staticClass:"d-flex align-center"},[t(ci.Z,{staticClass:"lmo-number-input",attrs:{label:e.$t("poll_ranked_choice_form.minimum_stance_choices_helptext"),hint:e.$t("poll_ranked_choice_form.minimum_stance_choices_hint"),type:"number",min:1,max:e.poll.pollOptionNames.length},model:{value:e.poll.minimumStanceChoices,callback:function(t){e.$set(e.poll,"minimumStanceChoices",t)},expression:"poll.minimumStanceChoices"}}),t(_c,{attrs:{subject:e.poll,field:"minimumStanceChoices"}})],1):e._e(),"dot_vote"==e.poll.pollType?[t(ci.Z,{attrs:{label:e.$t("poll_dot_vote_form.dots_per_person"),type:"number",min:"1"},model:{value:e.poll.dotsPerPerson,callback:function(t){e.$set(e.poll,"dotsPerPerson",t)},expression:"poll.dotsPerPerson"}}),t(_c,{attrs:{subject:e.poll,field:"dotsPerPerson"}})]:e._e(),t(em.Z,{staticClass:"my-4"}),t(Lm,{attrs:{poll:e.poll}}),e.poll.closingAt&&e.closesSoon?t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_settings.notify_on_closing_soon.voting_closes_too_soon",args:{pollType:e.poll.translatedPollType()}},expression:"{path: 'poll_common_settings.notify_on_closing_soon.voting_closes_too_soon', args: {pollType: poll.translatedPollType()}}"}]}):e._e(),t(eh.Z,{attrs:{disabled:!e.poll.closingAt,label:e.$t("poll_common_settings.who_can_vote")},model:{value:e.poll.specifiedVotersOnly,callback:function(t){e.$set(e.poll,"specifiedVotersOnly",t)},expression:"poll.specifiedVotersOnly"}},[e.poll.discussionId&&!e.poll.groupId?t(Xm.Z,{attrs:{value:!1,label:e.$t("poll_common_settings.specified_voters_only_false_discussion")}}):e._e(),e.poll.groupId?t(Xm.Z,{attrs:{value:!1,label:e.$t("poll_common_settings.specified_voters_only_false_group")}}):e._e(),t(Xm.Z,{staticClass:"poll-common-settings__specified-voters-only",attrs:{value:!0,label:e.$t("poll_common_settings.specified_voters_only_true")}})],1),e.poll.specifiedVotersOnly?t("div",{directives:[{name:"t",rawName:"v-t",value:e.$t("poll_common_settings.invite_people_next",{poll_type:e.poll.translatedPollType()}),expression:"$t('poll_common_settings.invite_people_next', {poll_type: poll.translatedPollType()})"}],staticClass:"caption mt-n4 text--secondary text-caption"}):e._e(),t("div",{staticClass:"d-flex align-center"},[t($s.Z,{staticClass:"center mb-2 mt-4 mx-auto text-center poll-common-form__advanced-btn",on:{click:function(t){e.showAdvanced=!e.showAdvanced}}},[e.showAdvanced?t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.hide_advanced_settings",expression:"'poll_common_form.hide_advanced_settings'"}]}):t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.show_advanced_settings",expression:"'poll_common_form.show_advanced_settings'"}]})])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanced,expression:"showAdvanced"}]},[t(Fi.Z,{attrs:{disabled:!e.poll.closingAt,label:e.$t("poll_common_settings.notify_on_closing_soon.voting_title"),items:e.closingSoonItems},model:{value:e.poll.notifyOnClosingSoon,callback:function(t){e.$set(e.poll,"notifyOnClosingSoon",t)},expression:"poll.notifyOnClosingSoon"}}),e.allowAnonymous?[t(Jm.Z,{staticClass:"poll-common-checkbox-option poll-settings-anonymous",attrs:{disabled:!e.poll.isNew(),label:e.$t("poll_common_form.votes_are_anonymous")},model:{value:e.poll.anonymous,callback:function(t){e.$set(e.poll,"anonymous",t)},expression:"poll.anonymous"}})]:e._e(),e.poll.config().can_shuffle_options?[t(Jm.Z,{staticClass:"poll-common-checkbox-option poll-settings-shuffle-options mt-4 pt-2",attrs:{label:e.$t("poll_common_settings.shuffle_options.title")},model:{value:e.poll.shuffleOptions,callback:function(t){e.$set(e.poll,"shuffleOptions",t)},expression:"poll.shuffleOptions"}})]:e._e(),e.poll.config().hide_reason_required?e._e():[t(Fi.Z,{attrs:{label:e.$t("poll_common_form.stance_reason_required_label"),items:e.stanceReasonRequiredItems},model:{value:e.poll.stanceReasonRequired,callback:function(t){e.$set(e.poll,"stanceReasonRequired",t)},expression:"poll.stanceReasonRequired"}})],"disabled"==e.poll.stanceReasonRequired||e.poll.config().per_option_reason_prompt?e._e():t(ci.Z,{attrs:{label:e.$t("poll_common_form.reason_prompt"),hint:e.$t("poll_option_form.prompt_hint"),placeholder:e.$t("poll_common.reason_placeholder")},model:{value:e.poll.reasonPrompt,callback:function(t){e.$set(e.poll,"reasonPrompt",t)},expression:"poll.reasonPrompt"}}),"disabled"!=e.poll.stanceReasonRequired?[t(Jm.Z,{staticClass:"poll-common-checkbox-option",attrs:{label:e.$t("poll_common_form.limit_reason_length")},model:{value:e.poll.limitReasonLength,callback:function(t){e.$set(e.poll,"limitReasonLength",t)},expression:"poll.limitReasonLength"}})]:e._e(),e.allowAnonymous?[t(Fi.Z,{staticClass:"poll-common-settings__hide-results mt-6 pt-2",attrs:{label:e.$t("poll_common_card.hide_results"),items:e.hideResultsItems,disabled:!e.poll.isNew()&&"until_closed"==e.currentHideResults},model:{value:e.poll.hideResults,callback:function(t){e.$set(e.poll,"hideResults",t)},expression:"poll.hideResults"}})]:e._e()],2),t(km,{attrs:{model:e.poll}}),t("div",{staticClass:"d-flex justify-space-between my-4 mt-4 poll-common-form-actions"},[t(yn.Z),t($s.Z,{staticClass:"poll-common-form__submit",attrs:{color:"primary",loading:e.poll.processing,disabled:!e.poll.title||e.hasOptions&&e.pollOptions.length<e.minOptions},on:{click:function(t){return e.submit()}}},[e.poll.id?t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.save_changes",expression:"'common.action.save_changes'"}]}):e._e(),!e.poll.id&&e.poll.closingAt?t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.start_poll",expression:"'poll_common_form.start_poll'"}]}):e._e(),e.poll.id||e.poll.closingAt?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.save_poll",expression:"'poll_common_form.save_poll'"}]})])],1)],2)},oh=[],sh=o(41574),nh=o(58545),ih=o(784),rh=o(78343),ah=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-wip-field"},[t(Jm.Z,{attrs:{disabled:e.poll.decidedVotersCount>0||e.poll.template,"hide-details":""},model:{value:e.isEnabled,callback:function(t){e.isEnabled=t},expression:"isEnabled"}},[t("div",{attrs:{slot:"label"},slot:"label"},[t("span",[e._v(e._s(e.$t("poll_common_wip_field.voting_open")))]),t(Ro),e._v("-"),t(Ro),t("span",{staticClass:"text-lowercase"},[e._v(e._s(e.$t("poll_common_wip_field.this_is_ready_for_voting",{poll_type:e.poll.translatedPollType()})))])],1)])],1)},lh=[],ch={props:{poll:Object},data:function(){return{isDisabled:!this.poll.closingAt,isEnabled:!!this.poll.closingAt,wasClosingAt:null}},watch:{"poll.template":function(e){return e?(this.wasClosingAt=this.poll.closingAt,this.poll.closingAt=null,this.isEnabled=!1,this.isDisabled=!0):(this.poll.closingAt=this.wasClosingAt||(0,Te.Z)((0,je.Z)(new Date,3)),this.isEnabled=!!this.poll.closingAt,this.isDisabled=!this.poll.closingAt)},isDisabled:function(e){return this.poll.closingAt=e?null:(0,Te.Z)((0,je.Z)(new Date,3))},isEnabled:function(e){return this.poll.closingAt=e?(0,Te.Z)((0,je.Z)(new Date,3)):null}}},uh=ch,dh=(0,Ut.Z)(uh,ah,lh,!1,null,null,null),ph=dh.exports,mh=function(){var e=this,t=e._self._c;return e.pollTemplate?t("div",[e.pollTemplate.processIntroduction?t(Tc.Z,{staticClass:"poll-template-info-panel",attrs:{type:"info",text:"",outlined:""}},[t(Bl,{attrs:{model:e.pollTemplate,column:"processIntroduction"}})],1):t(Tc.Z,{staticClass:"poll-template-info-panel",attrs:{type:"info",text:"",outlined:""}},[e._v(e._s(e.pollTemplate.processSubtitle))])],1):e._e()},hh=[],_h={props:{poll:Object},mounted:function(){return this.pollTemplate=jt.pollTemplates.find(this.poll.pollTemplateId||this.poll.pollTemplateKey)},data:function(){return{pollTemplate:null}}},fh=_h,gh=(0,Ut.Z)(fh,mh,hh,!1,null,null,null),vh=gh.exports,bh=o(37042),yh={components:{PollCommonWipField:ph,PollTemplateInfoPanel:vh},directives:{handle:tu.HandleDirective},props:{poll:Object,shouldReset:Boolean,redirectOnSave:Boolean},mounted:function(){return jt.users.fetchGroups(),this.watchRecords({collections:["groups","memberships"],query:()=>this.groupItems=[{text:this.$t("discussion_form.none_invite_only_thread"),value:null}].concat(Rt.user().groups().filter((function(e){return ms.canStartPoll(e)})).map((function(e){return{text:e.fullName,value:e.id}})))})},data:function(){return{newOption:null,lastPollType:this.poll.pollType,pollOptions:this.poll.pollOptionsAttributes||this.poll.clonePollOptions(),groupItems:[],showAdvanced:!1,votingMethodsI18n:{proposal:{title:"poll_common_form.voting_methods.show_thumbs",hint:"poll_common_form.voting_methods.show_thumbs_hint"},poll:{title:"poll_common_form.voting_methods.simple_poll",hint:"poll_common_form.voting_methods.choose_hint"},dot_vote:{title:"decision_tools_card.dot_vote_title",hint:"poll_common_form.voting_methods.allocate_hint"},score:{title:"poll_common_form.voting_methods.score",hint:"poll_common_form.voting_methods.score_hint"},ranked_choice:{title:"poll_common_form.voting_methods.ranked_choice",hint:"poll_common_form.voting_methods.ranked_choice_hint"}},chartTypeItems:[{text:"bar",value:"bar"},{text:"pie",value:"pie"},{text:"grid",value:"grid"}],currentHideResults:this.poll.hideResults,hideResultsItems:[{text:this.$t("common.off"),value:"off"},{text:this.$t("poll_common_card.until_you_vote"),value:"until_vote"},{text:this.$t("poll_common_card.until_voting_is_closed"),value:"until_closed"}],newDateOption:(0,Te.Z)((0,bh.Z)(new Date,12)),minDate:new Date,closingAtWas:null}},methods:{optionHasVotes:function(e){return(this.poll.results.find((function(t){return t.id===e.id}))||{voter_count:0}).voter_count>0},setPollOptionPriority:function(){var e;return e=0,this.pollOptions.forEach((function(e){return e.priority=0})),this.visiblePollOptions.forEach((function(t){return t.priority=e++}))},removeOption:function(e){if(!this.optionHasVotes(e)||confirm(M.t("poll_common_form.option_has_votes_confirm_delete")))return this.newOption=null,e.id?(e.name="",e.meaning="",e["_destroy"]=1):this.pollOptions=(0,l.without)(this.pollOptions,e)},addDateOption:function(){return this.newOption=this.newDateOption.toJSON(),this.addOption()},addOption:function(){var e,t;return(0,l.some)(this.pollOptions,(e=>e.name.toLowerCase()===this.newOption.toLowerCase()))?Fn.error("poll_poll_form.option_already_added"):(e=this.knownOptions.find((e=>this.$t(e.name_i18n).toLowerCase()===this.newOption.toLowerCase())),e?this.pollOptions.push({name:this.newOption,icon:e.icon,meaning:this.$t(e.meaning_i18n),prompt:this.$t(e.prompt_i18n)}):(t={name:this.newOption,meaning:"",prompt:"",icon:"agree"},this.pollOptions.push(t),"proposal"===this.poll.pollType&&(Fn.success("poll_common_form.option_added_please_add_details"),this.editOption(t))),this.newOption=null)},editOption:function(e){return D.$emit("openModal",{component:"PollOptionForm",props:{pollOption:e,poll:this.poll}})},submit:function(){var e;return e=this.poll.isNew()?"created":"updated",this.poll.setErrors({}),this.setPollOptionPriority(),this.poll.pollOptionsAttributes=this.pollOptions,this.poll.save().then((t=>{var o;if(o=jt.polls.find(t.polls[0].id),this.redirectOnSave&&this.$router.replace(this.urlFor(o)),this.$emit("saveSuccess",o),Fn.success("poll_common_form.poll_type_started",{poll_type:o.translatedPollTypeCaps()}),"created"===e)return D.$emit("openModal",{component:"PollMembers",props:{poll:o}})})).catch((e=>(Fn.warning("poll_common_form.please_review_the_form"),console.error(e))))}},computed:{votingMethodsItems:function(){return Object.keys(this.votingMethodsI18n).map((e=>({text:this.$t(this.votingMethodsI18n[e].title),value:e})))},knownOptions:function(){return i.pollTypes[this.poll.pollType].common_poll_options||[]},formattedDuration:function(){var e,t;return this.poll.meetingDuration?(t=parseInt(this.poll.meetingDuration),e=(0,sh.Z)({start:new Date,end:(0,nh.Z)(new Date,t)}),(0,ih.Z)(e,{format:["hours","minutes"]})):""},visiblePollOptions:function(){return this.pollOptions.filter((function(e){return!e._destroy}))},hasOptions:function(){return this.poll.config().has_options},minOptions:function(){return this.poll.config().min_options},allowAnonymous:function(){return!this.poll.config().prevent_anonymous},stanceReasonRequiredItems:function(){return[{text:this.$t("poll_common_form.stance_reason_required"),value:"required"},{text:this.$t("poll_common_form.stance_reason_optional"),value:"optional"},{text:this.$t("poll_common_form.stance_reason_disabled"),value:"disabled"}]},titlePath:function(){return this.poll.isNew()?"action_dock.new_poll_type":"action_dock.edit_poll_type"},titleArgs:function(){return{pollType:this.poll.translatedPollType().toLowerCase()}},closesSoon:function(){return!(this.poll.closingAt&&(0,T.Z)(this.poll.closingAt,(0,rh.Z)(new Date,24)))},closingSoonItems:function(){return"nobody author undecided_voters voters".split(" ").map((e=>({text:this.$t(`poll_common_settings.notify_on_closing_soon.${e}`),value:e})))},optionFormat:function(){return this.poll.pollOptionNameFormat},hasOptionIcon:function(){return this.poll.config().has_option_icon},i18nItems:function(){return(0,l.compact)("agree abstain disagree consent objection block yes no".split(" ").map((e=>this.poll.pollOptionNames.includes(e)?null:{text:this.$t("poll_proposal_options."+e),value:e})))}}},wh=yh,xh=(0,Ut.Z)(wh,th,oh,!1,null,null,null),kh=xh.exports,Ch=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-form-page"},[t(ai.Z,[t(ri.Z,{staticClass:"max-width-800 px-0 px-sm-3"},[t(As,{attrs:{until:!e.loading}},[t(ns.Z,{staticClass:"poll-common-modal"},[t("div",{staticClass:"pa-4"},[e.poll?t(kh,{attrs:{poll:e.poll,"redirect-on-save":""},on:{setPoll:e.setPoll}}):e._e(),e.poll?e._e():t("poll-common-choose-template",{attrs:{discussion:e.discussion,group:e.group},on:{setPoll:e.setPoll}})],1)])],1)],1)],1)],1)},Zh=[],Ih=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-templates-list"},[t(Tc.Z,{staticClass:"poll-templates-welcome",attrs:{type:"success",color:"info",icon:"mdi-new-box",text:"",outlined:"",dismissible:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[t("span",[t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common.new_templates_are_here",expression:"'poll_common.new_templates_are_here'"}]}),t(Ro),t("a",{directives:[{name:"t",rawName:"v-t",value:"common.learn_more",expression:"'common.learn_more'"}],staticClass:"text-decoration-underline",attrs:{href:"https://help.loomio.com/en/user_manual/polls/poll_templates/index.html",target:"_blank"}})],1)]),e._l(e.filters,(function(o,s){return t(qo.Z,{key:s,class:"poll-common-choose-template__"+s,attrs:{outlined:e.filter!=s},on:{click:function(t){e.filter=s}}},[t(Qt.Z,{staticClass:"mr-2",attrs:{small:""}},[e._v(e._s(o))]),t("span",{directives:[{name:"t",rawName:"v-t",value:e.filterLabels[s],expression:"filterLabels[name]"}],staticClass:"poll-type-chip-name"})],1)})),t(rs.Z,{staticClass:"decision-tools-card__poll-types",attrs:{"two-line":"",dense:""}},["admin"==e.filter?[t(zo.Z,{key:99999,staticClass:"decision-tools-card__new-template",class:"decision-tools-card__poll-type--new-template",attrs:{to:"/poll_templates/new?group_id="+e.group.id+"&return_to="+e.returnTo}},[t(Vo.km,[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"discussion_form.new_template",expression:"'discussion_form.new_template'"}]}),t(Vo.oZ,{directives:[{name:"t",rawName:"v-t",value:"poll_common.create_a_custom_process",expression:"'poll_common.create_a_custom_process'"}]})],1)],1),t(Jm.Z,{attrs:{label:e.$t("poll_common.show_all_templates_in_one_list")},model:{value:e.singleList,callback:function(t){e.singleList=t},expression:"singleList"}}),e.pollTemplates.length?t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_common.hidden_poll_templates",expression:"'poll_common.hidden_poll_templates'"}]}):e._e()]:e._e(),e.isSorting?[t(du,{attrs:{"append-to":".decision-tools-card__poll-types","lock-axis":"y",axis:"y"},on:{"sort-end":e.sortEnded},model:{value:e.pollTemplates,callback:function(t){e.pollTemplates=t},expression:"pollTemplates"}},e._l(e.pollTemplates,(function(o,s){return t(iu,{key:o.id||o.key,attrs:{index:s}},[t(zo.Z,{key:o.id||o.key,staticClass:"decision-tools-card__poll-type",class:"decision-tools-card__poll-type--"+o.pollType},[t(Vo.km,[t(Vo.V9,[t("span",[e._v(e._s(o.processName))]),"admin"!=e.filter||o.id?e._e():t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_common_action_panel.default_template",expression:"'poll_common_action_panel.default_template'"}],staticClass:"ml-2",attrs:{"x-small":"",outlined:""}}),"admin"==e.filter&&o.id?t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_common_action_panel.custom_template",expression:"'poll_common_action_panel.custom_template'"}],staticClass:"ml-2",attrs:{"x-small":"",outlined:""}}):e._e()],1),t(Vo.oZ,[e._v(e._s(o.processSubtitle))])],1),t(En.Z,{directives:[{name:"handle",rawName:"v-handle"}],staticClass:"handle"},[t(Qt.Z,[e._v("mdi-drag-vertical")])],1)],1)],1)})),1)]:e._l(e.pollTemplates,(function(o,s){return t(zo.Z,{key:o.id||o.key,staticClass:"decision-tools-card__poll-type",class:"decision-tools-card__poll-type--"+o.pollType,on:{click:function(t){return e.cloneTemplate(o)}}},[t(Vo.km,[t(Vo.V9,[t("span",[e._v(e._s(o.processName))]),"admin"!=e.filter||o.id?e._e():t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_common_action_panel.default_template",expression:"'poll_common_action_panel.default_template'"}],staticClass:"ml-2",attrs:{"x-small":"",outlined:""}}),"admin"==e.filter&&o.id?t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_common_action_panel.custom_template",expression:"'poll_common_action_panel.custom_template'"}],staticClass:"ml-2",attrs:{"x-small":"",outlined:""}}):e._e()],1),t(Vo.oZ,[e._v(e._s(o.processSubtitle))])],1),t(En.Z,[t(Us,{attrs:{actions:e.actions[s],small:"",icon:"",name:e.$t("action_dock.more_actions")}})],1)],1)}))],2)],2)},Ah=[],$h=new class{actions(e,t){return{edit_default_template:{name:"poll_common.edit_template",icon:"mdi-pencil",menu:!0,canPerform:function(){return!e.id&&t.adminsInclude(Rt.user())},to:function(){return`/poll_templates/new?template_key=${e.key}&group_id=${t.id}&return_to=${Rt.returnTo()}`}},edit_template:{name:"poll_common.edit_template",icon:"mdi-pencil",menu:!0,canPerform:function(){return e.id&&t.adminsInclude(Rt.user())},to:function(){return`/poll_templates/${e.id}/edit?&return_to=${Rt.returnTo()}`}},move:{name:"common.action.move",icon:"mdi-arrow-up-down",menu:!0,canPerform:function(){return!e.discardedAt&&t.adminsInclude(Rt.user())},perform:function(){return D.$emit("sortPollTemplates")}},discard:{icon:"mdi-eye-off",name:"common.action.hide",menu:!0,canPerform:function(){return e.id&&!e.discardedAt&&t.adminsInclude(Rt.user())},perform:function(){return jt.remote.post("poll_templates/discard",{group_id:t.id,id:e.id})}},undiscard:{icon:"mdi-eye",name:"common.action.unhide",menu:!0,canPerform:function(){return e.id&&e.discardedAt&&t.adminsInclude(Rt.user())},perform:function(){return jt.remote.post("poll_templates/undiscard",{group_id:t.id,id:e.id})}},destroy:{icon:"mdi-delete",name:"common.action.delete",menu:!0,canPerform:function(){return e.id&&t.adminsInclude(Rt.user())},perform:function(){return Un({component:"ConfirmModal",props:{confirm:{submit:function(){return e.destroy().then((function(){return D.$emit("closeModal")}))},text:{title:"common.are_you_sure",helptext:"poll_common_form.confirm_delete",submit:"common.action.delete"}}}})}},hide:{icon:"mdi-eye-off",name:"common.action.hide",menu:!0,canPerform:function(){return!e.id&&e.key&&!e.discardedAt&&t.adminsInclude(Rt.user())},perform:function(){return jt.remote.post("poll_templates/hide",{group_id:t.id,key:e.key})}},unhide:{icon:"mdi-eye",name:"common.action.unhide",menu:!0,canPerform:function(){return!e.id&&e.key&&e.discardedAt&&t.adminsInclude(Rt.user())},perform:function(){return jt.remote.post("poll_templates/unhide",{group_id:t.id,key:e.key})}}}}},Sh={directives:{handle:tu.HandleDirective},props:{discussion:Object,group:Object},data:function(){return{alert:!Rt.user().experiences["alertNewPollTemplates"],isSorting:!1,returnTo:Rt.returnTo(),groups:[],pollTemplates:[],actions:{},filter:"proposal",singleList:!this.group.categorizePollTemplates,filterLabels:{proposal:"decision_tools_card.proposal_title",poll:"decision_tools_card.poll_title",meeting:"decision_tools_card.meeting",admin:"group_page.settings",templates:"templates.templates"}}},created:function(){return jt.remote.fetch({path:"poll_templates",params:{group_id:this.group.id}}),D.$on("sortPollTemplates",(()=>this.isSorting=!0)),this.watchRecords({collections:["pollTemplates"],query:e=>this.query()})},methods:{query:function(){var e;return[],e=this.group.categorizePollTemplates?function(){switch(this.filter){case"proposal":return{pollType:{$in:["proposal","question"]},discardedAt:null};case"poll":return{pollType:{$in:["score","poll","ranked_choice","dot_vote"]},discardedAt:null};case"meeting":return{pollType:{$in:["meeting","count"]},discardedAt:null};case"admin":return{discardedAt:{$ne:null}}}}.call(this):function(){switch(this.filter){case"admin":return{discardedAt:{$ne:null}};default:return{discardedAt:null}}}.call(this),this.pollTemplates=jt.pollTemplates.collection.chain().find({groupId:this.group.id||null}).find(e).simplesort("position").data(),this.actions={},this.pollTemplates.forEach(((e,t)=>this.actions[t]=$h.actions(e,this.group)))},cloneTemplate:function(e){var t;return t=e.buildPoll(),this.discussion?(t.discussionId=this.discussion.id,t.groupId=this.discussion.groupId):this.group&&(t.groupId=this.group.id),this.$emit("setPoll",t)},sortEnded:function(){return this.isSorting=!1,setTimeout((()=>{var e;return e=this.pollTemplates.map((e=>e.id||e.key)),jt.remote.post("poll_templates/positions",{group_id:this.group.id,ids:e})}))}},watch:{alert:function(e){return jt.users.saveExperience("alertNewPollTemplates",!0)},filter:"query",singleList:function(){return setTimeout((()=>(this.group.categorizePollTemplates=!this.singleList,jt.remote.post("poll_templates/settings",{group_id:this.group.id,categorize_poll_templates:this.group.categorizePollTemplates}))))}},computed:{filters:function(){var e;return e=this.group.adminsInclude(Rt.user()),this.singleList?e?{templates:"mdi-thumbs-up-down",admin:"mdi-cog"}:{}:e?{proposal:"mdi-thumbs-up-down",poll:"mdi-poll",meeting:"mdi-calendar",admin:"mdi-cog"}:{proposal:"mdi-thumbs-up-down",poll:"mdi-poll",meeting:"mdi-calendar"}}}},Nh=Sh,Th=(0,Ut.Z)(Nh,Ih,Ah,!1,null,null,null),jh=Th.exports,Ph={components:{PollCommonForm:kh,PollCommonChooseTemplate:jh},data:function(){return{loading:!1,poll:null,group:null,discussion:null}},created:function(){var e,t,o;if((o=parseInt(this.$route.query.template_id))&&(this.loading=!0,jt.polls.findOrFetchById(o).then((e=>(this.poll=e.clonePoll(),Rt.user().groupIds().includes(e.groupId)&&(this.poll.groupId=e.groupId,this.group=this.poll.group()),this.loading=!1)))),(e=parseInt(this.$route.query.discussion_id))&&(this.loading=!0,jt.discussions.findOrFetchById(e).then((e=>(this.discussion=e,this.group=e.group(),this.loading=!1)))),(t=parseInt(this.$route.query.group_id))&&(this.loading=!0,jt.groups.findOrFetchById(t).then((e=>(this.group=e,this.loading=!1)))),this.$route.params.key)return this.loading=!0,jt.polls.findOrFetchById(this.$route.params.key).then((e=>(this.poll=e.clone(),D.$emit("currentComponent",{group:e.group(),poll:e,title:e.title,page:"pollFormPage"}),this.loading=!1))).catch((function(e){if(D.$emit("pageError",e),403===e.status&&!Rt.isSignedIn())return D.$emit("openAuthModal")}))},methods:{setPoll:function(e){return this.poll=e}}},Oh=Ph,Rh=(0,Ut.Z)(Oh,Ch,Zh,!1,null,null,null),qh=Rh.exports,Mh=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-form-page"},[t(ai.Z,[t(ri.Z,{staticClass:"max-width-800 px-0 px-sm-3"},[t(ns.Z,{staticClass:"poll-common-modal"},[t("div",{staticClass:"pa-4"},[e.pollTemplate?t("poll-template-form",{attrs:{"poll-template":e.pollTemplate}}):e._e()],1)])],1)],1)],1)},Eh=[],Lh=function(){var e=this,t=e._self._c;return t($s.Z,{staticClass:"dismiss-modal-button",attrs:{icon:"","aria-label":e.$t("common.action.cancel")},on:{click:e.closeModal}},[t(Qt.Z,[e._v("mdi-close")])],1)},Dh=[],Fh={props:{close:Function,model:Object},methods:{closeModal:function(){if(!this.model||Ql.okToLeave(this.model))return this.close?this.close():D.$emit("closeModal")}}},Uh=Fh,zh=(0,Ut.Z)(Uh,Lh,Dh,!1,null,null,null),Bh=zh.exports,Vh=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-common-form",class:e.isModal?"pa-4":""},[t(lc,{attrs:{value:e.pollTemplate.processing}}),t("div",{staticClass:"d-flex"},[t(Hu.Z,{staticClass:"px-0 py-0",attrs:{items:e.breadcrumbs},scopedSlots:e._u([{key:"divider",fn:function(){return[t(Qt.Z,[e._v("mdi-chevron-right")])]},proxy:!0}])}),t(yn.Z),e.isModal?t(Bh,{attrs:{model:e.pollTemplate}}):e._e(),!e.isModal&&e.$route.query.return_to?t($s.Z,{staticClass:"back-button",attrs:{icon:"","aria-label":e.$t("common.action.cancel"),to:e.$route.query.return_to}},[t(Qt.Z,[e._v("mdi-close")])],1):e._e()],1),t(is.EB,{staticClass:"px-0"},[t("h1",{directives:[{name:"t",rawName:"v-t",value:e.titlePath,expression:"titlePath"}],staticClass:"text-h4",attrs:{tabindex:"-1"}})]),t(Tc.Z,{staticClass:"poll-template-info-panel",attrs:{type:"info",text:"",outlined:""}},[t("span",[t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common.need_help_with_templates",expression:"'poll_common.need_help_with_templates'"}]}),t(Ro),t("a",{staticClass:"text-decoration-underline",attrs:{target:"_blank",href:"https://help.loomio.com/en/user_manual/polls/poll_templates/index.html"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.visit_loomio_help",expression:"'common.visit_loomio_help'"}]})])],1)]),t(Fi.Z,{attrs:{label:e.$t("poll_common_form.voting_method"),items:e.votingMethodsItems,hint:e.$t(e.votingMethodsI18n[e.pollTemplate.pollType].hint)},model:{value:e.pollTemplate.pollType,callback:function(t){e.$set(e.pollTemplate,"pollType",t)},expression:"pollTemplate.pollType"}}),t(ci.Z,{attrs:{label:e.$t("poll_common_form.process_name"),hint:e.$t("poll_common_form.process_name_hint")},model:{value:e.pollTemplate.processName,callback:function(t){e.$set(e.pollTemplate,"processName",t)},expression:"pollTemplate.processName"}}),t(_c,{attrs:{subject:e.pollTemplate,field:"processName"}}),t(ci.Z,{attrs:{label:e.$t("poll_common_form.process_subtitle"),hint:e.$t("poll_common_form.process_subtitle_hint")},model:{value:e.pollTemplate.processSubtitle,callback:function(t){e.$set(e.pollTemplate,"processSubtitle",t)},expression:"pollTemplate.processSubtitle"}}),t(_c,{attrs:{subject:e.pollTemplate,field:"processSubtitle"}}),t(tc,{attrs:{model:e.pollTemplate,field:"processIntroduction",placeholder:e.$t("poll_common_form.process_introduction_hint"),label:e.$t("poll_common_form.process_introduction")}}),t(ci.Z,{staticClass:"poll-common-form-fields__title",attrs:{type:"text",required:"true",hint:e.$t("poll_common_form.example_title_hint"),label:e.$t("poll_common_form.example_title"),maxlength:"250"},model:{value:e.pollTemplate.title,callback:function(t){e.$set(e.pollTemplate,"title",t)},expression:"pollTemplate.title"}}),t(_c,{attrs:{subject:e.pollTemplate,field:"title"}}),t(Qm,{attrs:{model:e.pollTemplate}}),t(tc,{attrs:{model:e.pollTemplate,field:"details",placeholder:e.$t("poll_common_form.example_details_placeholder"),label:e.$t("poll_common_form.example_details")}}),e.hasOptions?[t("div",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.options",expression:"'poll_common_form.options'"}],staticClass:"v-label v-label--active px-0 text-caption py-2"}),e.pollOptions.length?e._e():t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.no_options_add_some",expression:"'poll_common_form.no_options_add_some'"}],staticClass:"px-0"}),t(du,{attrs:{"append-to":".app-is-booted","use-drag-handle":"","lock-axis":"y"},model:{value:e.pollOptions,callback:function(t){e.pollOptions=t},expression:"pollOptions"}},e._l(e.pollOptions,(function(o,s){return e.pollOptions.length?t(iu,{key:o.name,attrs:{index:s,item:o}},[t(an.Z,{staticClass:"mb-2 rounded",attrs:{outlined:""}},[t(zo.Z,{staticStyle:{"user-select":"none"}},[e.hasOptionIcon?t(Rs.Z,{directives:[{name:"handle",rawName:"v-handle"}]},[t(zs.Z,{attrs:{size:"48"}},[t("img",{attrs:{src:"/img/"+o.icon+".svg","aria-hidden":"true"}})])],1):e._e(),t(Vo.km,{directives:[{name:"handle",rawName:"v-handle"}]},[t(Vo.V9,["i18n"==e.optionFormat?t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_proposal_options."+o.name,expression:"'poll_proposal_options.'+option.name"}]}):e._e(),"plain"==e.optionFormat?t("span",[e._v(e._s(o.name))]):e._e(),"iso8601"==e.optionFormat?t("span",[t(ku,{attrs:{name:o.name}})],1):e._e()]),t(Vo.oZ,[e._v(e._s(o.meaning))])],1),t(En.Z,[t($s.Z,{attrs:{icon:"",title:e.$t("common.action.delete")},on:{click:function(t){return e.removeOption(o)}}},[t(Qt.Z,{staticClass:"text--secondary"},[e._v("mdi-delete")])],1)],1),t(En.Z,{staticClass:"ml-0"},[t($s.Z,{attrs:{icon:"",title:e.$t("common.action.edit")},on:{click:function(t){return e.editOption(o)}}},[t(Qt.Z,{staticClass:"text--secondary"},[e._v("mdi-pencil")])],1)],1),t(Qt.Z,{directives:[{name:"handle",rawName:"v-handle"}],staticClass:"text--secondary",attrs:{title:e.$t("common.action.move")}},[e._v("mdi-drag-vertical")])],1)],1)],1):e._e()})),1),t(ci.Z,{staticClass:"poll-poll-form__add-option-input mt-4",attrs:{label:e.$t("poll_poll_form.new_option"),placeholder:e.$t("poll_poll_form.add_option_hint"),filled:"",rounded:"",color:"primary"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addOption.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t($s.Z,{staticClass:"mt-n2",attrs:{icon:"",disabled:!e.newOption,color:"primary",outlined:"",title:e.$t("poll_poll_form.add_option_placeholder")},on:{click:e.addOption}},[t(Qt.Z,[e._v("mdi-plus")])],1)]},proxy:!0}],null,!1,2744582193),model:{value:e.newOption,callback:function(t){e.newOption=t},expression:"newOption"}}),"score"==e.pollTemplate.pollType?t("div",{staticClass:"d-flex"},[t(ci.Z,{staticClass:"poll-score-form__min",attrs:{type:"number",step:1,label:e.$t("poll_common.min_score")},model:{value:e.pollTemplate.minScore,callback:function(t){e.$set(e.pollTemplate,"minScore",t)},expression:"pollTemplate.minScore"}}),t(yn.Z),t(ci.Z,{staticClass:"poll-score-form__max",attrs:{type:"number",step:1,label:e.$t("poll_common.max_score")},model:{value:e.pollTemplate.maxScore,callback:function(t){e.$set(e.pollTemplate,"maxScore",t)},expression:"pollTemplate.maxScore"}})],1):e._e(),"poll"==e.pollTemplate.pollType?[t("p",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.how_many_options_can_a_voter_choose",expression:"'poll_common_form.how_many_options_can_a_voter_choose'"}],staticClass:"text--secondary"}),t("div",{staticClass:"d-flex"},[t(ci.Z,{staticClass:"poll-common-form__minimum-stance-choices",attrs:{type:"number",step:1,hint:e.$t("poll_common_form.choose_at_least"),label:e.$t("poll_common_form.minimum_choices")},model:{value:e.pollTemplate.minimumStanceChoices,callback:function(t){e.$set(e.pollTemplate,"minimumStanceChoices",t)},expression:"pollTemplate.minimumStanceChoices"}}),t(yn.Z),t(ci.Z,{staticClass:"poll-common-form__maximum-stance-choices",attrs:{type:"number",step:1,hint:e.$t("poll_common_form.choose_at_most"),label:e.$t("poll_common_form.maximum_choices")},model:{value:e.pollTemplate.maximumStanceChoices,callback:function(t){e.$set(e.pollTemplate,"maximumStanceChoices",t)},expression:"pollTemplate.maximumStanceChoices"}})],1)]:e._e(),"ranked_choice"==e.pollTemplate.pollType?t("div",{staticClass:"d-flex align-center"},[t(ci.Z,{staticClass:"lmo-number-input",attrs:{label:e.$t("poll_ranked_choice_form.minimum_stance_choices_helptext"),hint:e.$t("poll_ranked_choice_form.minimum_stance_choices_hint"),type:"number",min:1},model:{value:e.pollTemplate.minimumStanceChoices,callback:function(t){e.$set(e.pollTemplate,"minimumStanceChoices",t)},expression:"pollTemplate.minimumStanceChoices"}}),t(_c,{attrs:{subject:e.pollTemplate,field:"minimumStanceChoices"}})],1):e._e(),"dot_vote"==e.pollTemplate.pollType?[t(ci.Z,{attrs:{label:e.$t("poll_dot_vote_form.dots_per_person"),type:"number",min:"1"},model:{value:e.pollTemplate.dotsPerPerson,callback:function(t){e.$set(e.pollTemplate,"dotsPerPerson",t)},expression:"pollTemplate.dotsPerPerson"}}),t(_c,{attrs:{subject:e.pollTemplate,field:"dotsPerPerson"}})]:e._e()]:e._e(),t(em.Z,{staticClass:"my-4"}),t(ci.Z,{attrs:{label:e.$t("poll_common_form.default_duration_in_days"),hint:e.$t("poll_common_form.default_duration_in_days_hint"),type:"number",min:"1"},model:{value:e.pollTemplate.defaultDurationInDays,callback:function(t){e.$set(e.pollTemplate,"defaultDurationInDays",t)},expression:"pollTemplate.defaultDurationInDays"}}),t(_c,{attrs:{subject:e.pollTemplate,field:"defaultDurationInDays"}}),t(eh.Z,{attrs:{label:e.$t("poll_common_settings.who_can_vote")},model:{value:e.pollTemplate.specifiedVotersOnly,callback:function(t){e.$set(e.pollTemplate,"specifiedVotersOnly",t)},expression:"pollTemplate.specifiedVotersOnly"}},[t(Xm.Z,{attrs:{value:!1,label:e.$t("poll_common_settings.specified_voters_only_false_group")}}),t(Xm.Z,{staticClass:"poll-common-settings__specified-voters-only",attrs:{value:!0,label:e.$t("poll_common_settings.specified_voters_only_true")}})],1),e.allowAnonymous?[t(Jm.Z,{staticClass:"poll-common-checkbox-option poll-settings-anonymous",attrs:{label:e.$t("poll_common_form.votes_are_anonymous")},model:{value:e.pollTemplate.anonymous,callback:function(t){e.$set(e.pollTemplate,"anonymous",t)},expression:"pollTemplate.anonymous"}})]:e._e(),e.pollTemplate.config().can_shuffle_options?[t(Jm.Z,{staticClass:"poll-common-checkbox-option poll-settings-shuffle-options mt-4 pt-2",attrs:{label:e.$t("poll_common_settings.shuffle_options.title")},model:{value:e.pollTemplate.shuffleOptions,callback:function(t){e.$set(e.pollTemplate,"shuffleOptions",t)},expression:"pollTemplate.shuffleOptions"}})]:e._e(),t(Fi.Z,{attrs:{label:e.$t("poll_common_form.stance_reason_required_label"),items:e.stanceReasonRequiredItems},model:{value:e.pollTemplate.stanceReasonRequired,callback:function(t){e.$set(e.pollTemplate,"stanceReasonRequired",t)},expression:"pollTemplate.stanceReasonRequired"}}),"disabled"==e.pollTemplate.stanceReasonRequired||e.pollTemplate.config().per_option_reason_prompt?e._e():t(ci.Z,{attrs:{label:e.$t("poll_common_form.reason_prompt"),hint:e.$t("poll_option_form.prompt_hint"),placeholder:e.$t("poll_common.reason_placeholder")},model:{value:e.pollTemplate.reasonPrompt,callback:function(t){e.$set(e.pollTemplate,"reasonPrompt",t)},expression:"pollTemplate.reasonPrompt"}}),"disabled"!=e.pollTemplate.stanceReasonRequired?[t(Jm.Z,{staticClass:"poll-common-checkbox-option",attrs:{label:e.$t("poll_common_form.limit_reason_length")},model:{value:e.pollTemplate.limitReasonLength,callback:function(t){e.$set(e.pollTemplate,"limitReasonLength",t)},expression:"pollTemplate.limitReasonLength"}})]:e._e(),e.allowAnonymous?[t(Fi.Z,{staticClass:"poll-common-settings__hide-results mt-6 pt-2",attrs:{label:e.$t("poll_common_card.hide_results"),items:e.hideResultsItems},model:{value:e.pollTemplate.hideResults,callback:function(t){e.$set(e.pollTemplate,"hideResults",t)},expression:"pollTemplate.hideResults"}})]:e._e(),t("div",{staticClass:"d-flex justify-space-between my-4 mt-4 poll-common-form-actions"},[t(yn.Z),t($s.Z,{staticClass:"poll-common-form__submit",attrs:{color:"primary",loading:e.pollTemplate.processing,disabled:!e.pollTemplate.processName||!e.pollTemplate.processSubtitle},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}]})])],1)],2)},Hh=[],Gh={directives:{handle:tu.HandleDirective},props:{isModal:{default:!1,type:Boolean},pollTemplate:Object},data:function(){return{newOption:null,lastPollType:this.pollTemplate.pollType,pollOptions:this.pollTemplate.pollOptionsAttributes(),votingMethodsI18n:{count:{title:"poll_common_form.voting_methods.show_thumbsdecision_tools_card.proposal_title",hint:"poll_common_form.voting_methods.show_thumbs_hint"},question:{title:"poll_common_form.voting_methods.question",hint:"poll_common_form.voting_methods.question_hint"},proposal:{title:"decision_tools_card.proposal_title",hint:"poll_common_form.voting_methods.show_thumbs_hint"},poll:{title:"poll_common_form.voting_methods.simple_poll",hint:"poll_common_form.voting_methods.choose_hint"},meeting:{title:"poll_common_form.voting_methods.time_poll",hint:"poll_common_form.voting_methods.time_poll_hint"},dot_vote:{title:"decision_tools_card.dot_vote_title",hint:"poll_common_form.voting_methods.allocate_hint"},score:{title:"poll_common_form.voting_methods.score",hint:"poll_common_form.voting_methods.score_hint"},ranked_choice:{title:"poll_common_form.voting_methods.ranked_choice",hint:"poll_common_form.voting_methods.ranked_choice_hint"}},currentHideResults:this.pollTemplate.hideResults,hideResultsItems:[{text:this.$t("common.off"),value:"off"},{text:this.$t("poll_common_card.until_you_vote"),value:"until_vote"},{text:this.$t("poll_common_card.until_voting_is_closed"),value:"until_closed"}]}},methods:{setPollOptionPriority:function(){var e;return e=0,this.pollOptions.forEach((function(t){return t.priority=e++}))},removeOption:function(e){return this.newOption=null,this.pollOptions=(0,l.without)(this.pollOptions,e)},addOption:function(){var e,t;return(0,l.some)(this.pollOptions,(e=>e.name.toLowerCase()===this.newOption.toLowerCase()))?Fn.error("poll_poll_form.option_already_added"):(e=this.knownOptions.find((e=>this.$t(e.name_i18n).toLowerCase()===this.newOption.toLowerCase())),e?this.pollOptions.push({name:this.newOption,icon:e.icon,meaning:this.$t(e.meaning_i18n),prompt:this.$t(e.prompt_i18n)}):(t={name:this.newOption,meaning:"",prompt:"",icon:"agree"},this.pollOptions.push(t),"proposal"===this.pollTemplate.pollType&&(Fn.success("poll_common_form.option_added_please_add_details"),this.editOption(t))),this.newOption=null)},editOption:function(e){return D.$emit("openModal",{component:"PollOptionForm",props:{pollOption:e,poll:this.pollTemplate}})},submit:function(){return this.pollTemplate.isNew()?"created":"updated",this.pollTemplate.setErrors({}),this.setPollOptionPriority(),this.pollTemplate.pollOptions=this.pollOptions,this.pollTemplate.save().then((e=>(Fn.success("poll_common.poll_template_saved"),this.isModal?D.$emit("closeModal"):this.$router.push(this.$route.query.return_to)))).catch((e=>(Fn.warning("poll_common_form.please_review_the_form"),console.error(e))))}},computed:{hasOptions:function(){return this.pollTemplate.config().has_options},breadcrumbs:function(){return(0,l.compact)([this.pollTemplate.group().parentId&&this.pollTemplate.group().parent(),this.pollTemplate.group()]).map((e=>({text:e.name,disabled:!1,to:this.urlFor(e)})))},votingMethodsItems:function(){return(0,l.without)(Object.keys(this.votingMethodsI18n),"count").map((e=>({text:this.$t(this.votingMethodsI18n[e].title),value:e})))},knownOptions:function(){return i.pollTypes[this.pollTemplate.pollType].common_poll_options||[]},allowAnonymous:function(){return!this.pollTemplate.config().prevent_anonymous},stanceReasonRequiredItems:function(){return[{text:this.$t("poll_common_form.stance_reason_required"),value:"required"},{text:this.$t("poll_common_form.stance_reason_optional"),value:"optional"},{text:this.$t("poll_common_form.stance_reason_disabled"),value:"disabled"}]},titlePath:function(){return"proposal"===this.pollTemplate.pollType?this.pollTemplate.isNew()?"poll_common.new_proposal_template":"poll_common.edit_proposal_template":this.pollTemplate.isNew()?"poll_common.new_poll_template":"poll_common.edit_poll_template"},closingSoonItems:function(){return"nobody author undecided_voters voters".split(" ").map((e=>({text:this.$t(`poll_common_settings.notify_on_closing_soon.${e}`),value:e})))},optionFormat:function(){return this.pollTemplate.pollOptionNameFormat},hasOptionIcon:function(){return this.pollTemplate.config().has_option_icon},i18nItems:function(){return(0,l.compact)("agree abstain disagree consent objection block yes no".split(" ").map((e=>this.pollTemplate.pollOptionNames.includes(e)?null:{text:this.$t("poll_proposal_options."+e),value:e})))}}},Wh=Gh,Kh=(0,Ut.Z)(Wh,Vh,Hh,!1,null,null,null),Yh=Kh.exports,Qh={components:{PollTemplateForm:Yh},data:function(){return{pollTemplate:null,group:null}},created:function(){var e,t;return(t=parseInt(this.$route.params.id))?jt.pollTemplates.findOrFetchById(t).then((e=>this.pollTemplate=e)):(e=parseInt(this.$route.query.group_id))?jt.groups.findOrFetchById(e).then((e=>{var t;return this.group=e,(t=this.$route.query.template_key)?jt.remote.fetch({path:"poll_templates",params:{group_id:this.group.id}}).then((()=>(this.pollTemplate=jt.pollTemplates.find(t),this.pollTemplate.groupId=this.group.id))):this.pollTemplate=jt.pollTemplates.build({pollType:"proposal",groupId:this.group.id})})):console.error("no group or template id found")}},Jh=Qh,Xh=(0,Ut.Z)(Jh,Mh,Eh,!1,null,null,null),e_=Xh.exports,t_=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"dashboard-page max-width-1024 px-0 px-sm-3"},[t("h1",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.titleVisible},expression:"{callback: titleVisible}"},{name:"t",rawName:"v-t",value:"tasks.your_tasks",expression:"'tasks.your_tasks'"}],staticClass:"display-1 my-4",attrs:{tabindex:"-1"}}),e.loading?t(As):e._e(),e._l(e.tasksByRecordKey,(function(o,s){return[t(ns.Z,{staticClass:"mb-3"},[t(is.EB,[t("router-link",{attrs:{to:e.taskUrlFor(e.records[s])}},[e._v(e._s(e.records[s].discussion().title))])],1),t(rs.Z,{attrs:{subheader:""}},e._l(o,(function(o){return t(zo.Z,{key:o.id},[t(En.Z,[t($s.Z,{attrs:{color:"accent",icon:""},on:{click:function(t){return e.toggleDone(o)}}},[o.done?t(Qt.Z,[e._v("mdi-checkbox-marked")]):t(Qt.Z,[e._v("mdi-checkbox-blank-outline")])],1)],1),t(Vo.V9,[e._v(e._s(o.name))])],1)})),1)],1)]})),e.loading||0!=Object.keys(e.records).length?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"tasks.no_tasks_assigned",expression:"'tasks.no_tasks_assigned'"}]}),t("div",{staticClass:"d-flex justify-center"},[t(qo.Z,{attrs:{outlined:"",href:"https://help.loomio.org/en/user_manual/threads/thread_admin/tasks.html",target:"_blank"}},[t(Qt.Z,{staticClass:"mr-2"},[e._v("mdi-help-circle-outline")]),t("span",{directives:[{name:"t",rawName:"v-t",value:"common.help",expression:"'common.help'"}]}),t("span",[e._v(":")]),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"tasks.tasks",expression:"'tasks.tasks'"}]})],1)],1)],2)],1)},o_=[],s_={data:function(){return{records:{},tasksByRecordKey:{},loading:!0}},mounted:function(){return jt.tasks.remote.fetch("/").then((e=>{var t,o;return t=e["tasks"].map((function(e){return e.id})),o=jt.tasks.find(t).filter((function(e){return null!=e.record()})),o.forEach((e=>{var t;if(t=e.recordType+e.recordId,null==this.records[t])return this.records[t]=e.record()})),this.tasksByRecordKey=(0,l.groupBy)(o,(function(e){return e.recordType+e.recordId}))})).finally((()=>this.loading=!1))},methods:{taskUrlFor:function(e){return e.isA("discussion")?this.urlFor(e)+"/0":this.urlFor(e)},toggleDone:function(e){return e.toggleDone().then((function(){return e.done?Fn.success("tasks.task_updated_done"):Fn.success("tasks.task_updated_not_done")}))}}},n_=s_,i_=(0,Ut.Z)(n_,t_,o_,!1,null,null,null),r_=i_.exports,a_=function(){var e=this,t=e._self._c;return e.show?t(ns.Z,{staticClass:"mb-4 group-progress-card",attrs:{outlined:"",flat:""}},[t(is.EB,[e.setupComplete?e._e():t("h4",{directives:[{name:"t",rawName:"v-t",value:"loomio_onboarding.group_progress_card.title",expression:"'loomio_onboarding.group_progress_card.title'"}],staticClass:"headline group-progress-card__title"}),e.setupComplete?t("h4",{directives:[{name:"t",rawName:"v-t",value:"loomio_onboarding.group_progress_card.celebration_message",expression:"'loomio_onboarding.group_progress_card.celebration_message'"}],staticClass:"headline group-progress-card__title"}):e._e(),t(yn.Z),t($s.Z,{staticClass:"group-progress-card__dismiss",attrs:{icon:""},on:{click:e.close}},[t(Qt.Z,[e._v("mdi-close")])],1)],1),t(is.ZB,[t(rs.Z,{staticClass:"group-progress-card__list",attrs:{dense:""}},e._l(e.activities,(function(o){return t(zo.Z,{key:o.translate,staticClass:"group-progress-card__list-item",class:{"group-progress-card__complete":o.complete()},on:{click:function(e){return o.click()}}},[t(Rs.Z,[t(Qt.Z,{attrs:{color:"primary"}},[e._v(e._s(o.icon))])],1),t(Vo.km,[t("span",{directives:[{name:"t",rawName:"v-t",value:e.translationFor(o.translate),expression:"translationFor(activity.translate)"}],staticClass:"group-progress-card__activity-text"})])],1)})),1)],1)],1):e._e()},l_=[],c_=o(94533),u_={props:{group:Object},data:function(){return{activities:[]}},created:function(){return this.activities=[{icon:"mdi-image",translate:"customize_group",complete:()=>this.group.description,click:()=>Un({component:"GroupForm",props:{group:this.group}})},{icon:"mdi-robot",translate:"setup_chatbot",complete:()=>this.group.chatbots().length,click:()=>Un({component:"ChatbotList",props:{group:this.group}})},{icon:"mdi-account-multiple-plus",translate:"invite_people_in",complete:()=>this.group.membershipsCount>1||this.group.invitationsCount>0,click:()=>Un({component:"GroupInvitationForm",props:{group:this.group}})},{icon:"mdi-comment-multiple",translate:"start_thread",complete:()=>this.group.discussionsCount>1,click:()=>Un({component:"DiscussionForm",props:{discussion:jt.discussions.build({groupId:this.group.id})}})}]},methods:{translationFor:function(e){return`loomio_onboarding.group_progress_card.activities.${e}`},close:function(){return jt.users.saveExperience("dismissProgressCard")}},computed:{setupComplete:function(){return(0,l.every)((0,l.invokeMap)(this.activities,"complete"))},show:function(){return(0,c_.Z)(new Date,Rt.user().createdAt)<30&&this.group.isParent()&&this.group.adminsInclude(Rt.user())&&!Rt.user().hasExperienced("dismissProgressCard")}}},d_=u_,p_=(0,Ut.Z)(d_,a_,l_,!1,null,null,null),m_=p_.exports,h_=function(){var e=this,t=e._self._c;return e.membership?e._e():t(Tc.Z,{staticClass:"my-4",attrs:{outlined:"",color:"primary",dense:""}},[t("p",{directives:[{name:"t",rawName:"v-t",value:"join_group_button.not_a_member",expression:"'join_group_button.not_a_member'"}],staticClass:"text-center"}),e.canJoinGroup||e.canRequestMembership||e.hasRequestedMembership?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:e.label,expression:"label"}],staticClass:"join-group-button",attrs:{block:"",color:"primary",disabled:e.hasRequestedMembership},on:{click:e.join}}):e._e()],1)},__=[],f_={props:{group:{required:!0,type:Object},block:Boolean},data:function(){return{membership:null,hasRequestedMembership:!1}},created:function(){return Rt.user().membershipFor(this.group)||jt.membershipRequests.fetchMyPendingByGroup(this.group.id),this.watchRecords({collections:["memberships","membershipRequests"],query:()=>(this.hasRequestedMembership=this.group.hasPendingMembershipRequestFrom(Rt.user()),this.membership=Rt.user().membershipFor(this.group))})},methods:{join:function(){return Rt.isSignedIn()?this.canJoinGroup?jt.memberships.joinGroup(this.group).then((()=>(D.$emit("joinedGroup",{group:this.group}),Fn.success("join_group_button.messages.joined_group",{group:this.group.fullName})))):D.$emit("openModal",{component:"MembershipRequestForm",props:{group:this.group}}):D.$emit("openModal",{component:"AuthModal"})}},computed:{label:function(){return this.hasRequestedMembership?"join_group_button.membership_requested":"join_group_button.join_group"},canJoinGroup:function(){return this.group&&ms.canJoinGroup(this.group)},canRequestMembership:function(){return ms.canRequestMembership(this.group)}}},g_=f_,v_=(0,Ut.Z)(g_,h_,__,!1,null,null,null),b_=v_.exports,y_=function(){var e=this,t=e._self._c;return e.isTrialing?t(Tc.Z,{attrs:{outlined:"",color:"primary",dense:""}},[t("div",{staticClass:"d-flex align-center"},[e.isWasGift?t("div",{staticClass:"pr-1"},[e.isExpired?t("span",{domProps:{innerHTML:e._s(e.$t("current_plan_button.was_gift_expired"))}}):e._e(),e.isExpired?e._e():t("span",{domProps:{innerHTML:e._s(e.$t("current_plan_button.was_gift_remaining",{days:e.daysRemaining}))}}),t(Ro),t("span",{domProps:{innerHTML:e._s(e.$t("current_plan_button.was_gift_trial",{createdDate:e.createdDate}))}})],1):e._e(),e.isWasGift?e._e():t("div",{staticClass:"pr-1"},[e.isExpired?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"current_plan_button.free_trial",args:{days:e.daysRemaining}},expression:"{ path: 'current_plan_button.free_trial', args: { days: daysRemaining }}"}]}),e.isExpired?t("span",{directives:[{name:"t",rawName:"v-t",value:"current_plan_button.trial_expired",expression:"'current_plan_button.trial_expired'"}]}):e._e()]),t(yn.Z),t($s.Z,{attrs:{color:"primary",href:"/upgrade/"+e.group.id,target:"_blank",title:e.$t("current_plan_button.tooltip")}},[t(Qt.Z,[e._v("mdi-rocket")]),t("span",{directives:[{name:"t",rawName:"v-t",value:"current_plan_button.view_plans",expression:"'current_plan_button.view_plans'"}]})],1)],1)]):e._e()},w_=[],x_={methods:{openAuthModal:function(e=!1){return D.$emit("openModal",{component:"AuthModal",props:{preventClose:e}})}}},k_={mixins:[x_],props:{group:Object},methods:{signIn:function(){return this.openAuthModal()}},computed:{isLoggedIn:function(){return Rt.isSignedIn()},isWasGift:function(){return"was-gift"===this.group.subscription.plan},isTrialing:function(){return this.group.membersInclude(Rt.user())&&"trial"===this.group.subscription.plan},isExpired:function(){return this.isTrialing&&!this.group.subscription.active},daysRemaining:function(){return(0,c_.Z)((0,m.Z)(this.group.subscription.expires_at),new Date)+1},createdDate:function(){return(0,Am.Z)(new Date(this.group.createdAt),"do LLLL yyyy")}}},C_=k_,Z_=(0,Ut.Z)(C_,y_,w_,!1,null,null,null),I_=Z_.exports,A_=o(756),$_=o(54129),S_=function(){var e=this,t=e._self._c;return t(ai.Z,[e.group?e._e():t(As),e.group?t(ri.Z,{staticClass:"group-page max-width-1024 px-2 px-sm-4"},[t("demo-banner",{attrs:{group:e.group}}),t("div",{staticStyle:{position:"relative"}},[t(Li.Z,{staticStyle:{"border-radius":"8px"},attrs:{src:e.group.coverUrl,"max-height":"256",eager:""}}),e.group.logoUrl?t(Li.Z,{staticClass:"ma-2 d-none d-sm-block rounded",staticStyle:{"border-radius":"8px",position:"absolute",bottom:"0"},attrs:{src:e.group.logoUrl,height:"96",width:"96",eager:""}}):e._e(),e.group.logoUrl?t(Li.Z,{staticClass:"ma-2 d-sm-none rounded",staticStyle:{"border-radius":"8px",position:"absolute",bottom:"0"},attrs:{src:e.group.logoUrl,height:"48",width:"48",eager:""}}):e._e()],1),t("h1",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.titleVisible},expression:"{callback: titleVisible}"}],staticClass:"display-1 my-4",attrs:{tabindex:"-1"}},[e.group&&e.group.parentId?t("span",[t("router-link",{attrs:{to:e.urlFor(e.group.parent())}},[e._v(e._s(e.group.parent().name))]),t(Ro),t("span",{staticClass:"text--secondary text--lighten-1"},[e._v(">")]),t(Ro)],1):e._e(),t("span",{staticClass:"group-page__name mr-4"},[e._v(e._s(e.group.name))])]),t("old-plan-banner",{attrs:{group:e.group}}),t(I_,{attrs:{group:e.group}}),t(m_,{attrs:{group:e.group}}),e.group?t(Bl,{staticClass:"group-page__description",attrs:{model:e.group,column:"description"}}):e._e(),t(In,{attrs:{model:e.group,actions:e.dockActions,"menu-icon":"mdi-cog","menu-actions":e.menuActions}}),t(b_,{attrs:{group:e.group}}),t(Ir,{attrs:{model:e.group}}),t(Yd,{attrs:{model:e.group}}),t(Bd,{attrs:{attachments:e.group.attachments}}),t(em.Z,{staticClass:"mt-4"}),t($_.Z,{attrs:{"background-color":"transparent","center-active":"",grow:""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabs,(function(e){return t(A_.Z,{key:e.id,class:"group-page-"+e.name+"-tab",attrs:{to:e.route}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_page."+e.name,expression:"'group_page.'+tab.name"}]})])})),1),t("router-view")],1):e._e()],1)},N_=[],T_=new class{actions(e){var t;return t=e.membershipFor(Rt.user()),{translate_group:{name:"common.action.translate",icon:"mdi-translate",dock:2,canPerform:function(){return e.description&&ms.canTranslate(e)},perform:function(){return Rt.user()&&e.translate(Rt.user().locale)}},edit_group:{name:"group_page.options.edit_group",icon:"mdi-cog",menu:!0,canPerform:function(){return ms.canEditGroup(e)},perform:function(){return Un({component:"GroupForm",props:{group:e.clone()}})}},change_volume:{name:"user_dropdown.email_settings",icon:"mdi-email",menu:!0,canPerform:function(){return ms.canChangeGroupVolume(e)},perform:function(){return Un({component:"ChangeVolumeForm",props:{model:t}})}},edit_tags:{icon:"mdi-tag-outline",name:"loomio_tags.card_title",menu:!0,canPerform:function(){return ms.canAdminister(e)},perform:function(){return D.$emit("openModal",{component:"TagsSelect",props:{model:e}})}},become_coordinator:{name:"group_page.options.become_coordinator",icon:"mdi-shield-star",menu:!0,canPerform:function(){return t&&!1===t.admin&&(0===e.adminMembershipsCount||e.parentOrSelf().adminsInclude(Rt.user()))},perform:function(){return jt.memberships.makeAdmin(t).then((function(){return Fn.success("memberships_page.messages.make_admin_success",{name:Rt.user().name})}))}},chatbots:{name:"chatbot.chatbots",icon:"mdi-robot",menu:!0,canPerform:function(){return e.adminsInclude(Rt.user())},perform:function(){return Un({component:"ChatbotList",props:{group:e}})}},webhooks:{name:"webhook.api_keys",icon:"mdi-webhook",menu:!0,canPerform:function(){return e.adminsInclude(Rt.user())},perform:function(){return Un({component:"WebhookList",props:{group:e}})}},group_stats:{name:"group_page.stats",icon:"mdi-chart-bar",menu:!0,canPerform:function(){return ms.canAdminister(e)},perform:function(){return window.open(`${i.baseUrl}g/${e.key}/stats?export=1`,"_blank")}},export_data:{name:"group_page.options.export_data",icon:"mdi-database-export",menu:!0,canPerform:function(){return t&&e.adminsInclude(Rt.user())},perform:function(){return Un({component:"ExportDataModal",props:{group:e}})}},manage_subscription:{name:"subscription_status.manage_subscription",icon:"mdi-credit-card-outline",menu:!0,perform:function(){return window.location=`/upgrade/${e.id}`},canPerform:function(){return i.features.app.subscriptions&&e.isParent()&&e.adminsInclude(Rt.user())}},leave_group:{name:"group_page.options.leave_group",icon:"mdi-exit-to-app",menu:!0,canPerform:function(){return ms.canRemoveMembership(t)},perform:function(){return Un({component:"ConfirmModal",props:{confirm:{submit:function(){return t.destroy().then((function(){return jt.discussions.find({groupId:t.groupId}).forEach((function(e){return e.update({discussionReaderUserId:null})}))}))},text:{title:"leave_group_form.title",helptext:"leave_group_form.question",confirm:"leave_group_form.submit",flash:"group_page.messages.leave_group_success"},redirect:"/dashboard"}}})}},destroy_group:{name:"delete_group_modal.title",icon:"mdi-delete",menu:!0,canPerform:function(){return ms.canArchiveGroup(e)},perform:function(){var t;return t=e.handle||e.name.trim(),Un({component:"ConfirmModal",props:{confirm:{submit:e.destroy,text:{title:e.isParent()?"delete_group_modal.title":"delete_group_modal.subgroup_title",helptext:e.isParent()?"delete_group_modal.parent_body":"delete_group_modal.body",raw_confirm_text_placeholder:M.t("delete_group_modal.confirm",{name:t}),confirm_text:t,flash:"delete_group_modal.success",submit:"delete_group_modal.title"},redirect:"/dashboard"}}})}}}}},j_=function(){var e=this,t=e._self._c;return e.isAdmin&&e.isOldPlan&&!e.isHidden?t(Tc.Z,{attrs:{outlined:"",color:"secondary",dense:""}},[t(ys.Z,{attrs:{"align-center":""}},[t("div",{staticClass:"pr-1"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"current_plan_button.is_old_plan",expression:"'current_plan_button.is_old_plan'"}]})]),t(yn.Z),t($s.Z,{staticClass:"mr-2",attrs:{color:"primary",href:"/upgrade/"+e.group.id,target:"_blank",title:e.$t("current_plan_button.tooltip")}},[t(Qt.Z,[e._v("mdi-rocket")]),e.isOldPlan?t("span",{directives:[{name:"t",rawName:"v-t",value:"current_plan_button.view_plans",expression:"'current_plan_button.view_plans'"}]}):e._e()],1),t($s.Z,{attrs:{icon:"",title:e.$t("common.action.close")},on:{click:e.hideBanner}},[t(Qt.Z,[e._v("mdi-close")])],1)],1)],1):e._e()},P_=[],O_={props:{group:Object},data:function(){return{isHidden:Rt.user().hasExperienced("old-plan-banner")}},methods:{hideBanner:function(){return jt.users.saveExperience("old-plan-banner"),this.isHidden=!0}},computed:{isAdmin:function(){return this.group.adminsInclude(Rt.user())},isOldPlan:function(){var e;return e="pp-basic-monthly pp-pro-monthly ap-active-monthly npap-active-monthly pp-basic-annual pp-pro-annual pp-community-annual ap-active-annual ap-community-annual npap-active-annual small-monthly small-yearly",e.includes(this.group.subscription.plan)}}},R_=O_,q_=(0,Ut.Z)(R_,j_,P_,!1,null,null,null),M_=q_.exports,E_=function(){var e=this,t=e._self._c;return t("div",[t(oc.Z,{attrs:{value:e.loading}}),e.isDemo?t(Tc.Z,{attrs:{outlined:"",color:"primary",dense:""}},[e.isLoggedIn?e._e():[t("div",{staticClass:"text-center"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.login_to_start_demo",expression:"'templates.login_to_start_demo'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.sign_in_to_try_features",expression:"'templates.sign_in_to_try_features'"}]})])],e.isLoggedIn&&e.isPublicDemo?[t("div",{staticClass:"d-flex align-center"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.click_button_to_start_demo",expression:"'templates.click_button_to_start_demo'"}]}),t(yn.Z),t($s.Z,{staticClass:"ml-2",attrs:{color:"primary",target:"_blank"},on:{click:e.cloneDemo}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.start_demo",expression:"'templates.start_demo'"}]})])],1)]:e._e(),e.isLoggedIn&&!e.isPublicDemo?[t("div",{staticClass:"text-center"},[t("p",[t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.welcome_to_your_demo",expression:"'templates.welcome_to_your_demo'"}]}),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.try_voting_to_see_it_work",expression:"'templates.try_voting_to_see_it_work'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.to_use_loomio_with_your_org_start_trial",expression:"'templates.to_use_loomio_with_your_org_start_trial'"}]})],1),t($s.Z,{attrs:{outlined:"",color:"primary",to:"/g/new",target:"_blank"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.start_free_trial",expression:"'templates.start_free_trial'"}]})])],1)]:e._e()],2):e._e()],1)},L_=[],D_={mixins:[x_],props:{group:Object},data:function(){return{loading:!1}},methods:{signIn:function(){return this.openAuthModal()},cloneDemo:function(){return this.loading=!0,Fn.wait("templates.generating_demo"),jt.post({path:"demos/clone",params:{handle:this.group.handle}}).then((e=>(Fn.success("templates.demo_created"),this.$router.push(this.urlFor(jt.groups.find(e.groups[0].id)))))).finally((()=>this.loading=!1))}},computed:{isLoggedIn:function(){return Rt.isSignedIn()},isPublicDemo:function(){return!!this.group.handle},isDemo:function(){return"demo"===this.group.subscription.plan},daysRemaining:function(){return(0,c_.Z)((0,m.Z)(this.group.subscription.expires_at),new Date)+1},createdDate:function(){return(0,Am.Z)(new Date(this.group.createdAt),"do LLLL yyyy")}}},F_=D_,U_=(0,Ut.Z)(F_,E_,L_,!1,null,null,null),z_=U_.exports,B_={components:{OldPlanBanner:M_,DemoBanner:z_},data:function(){return{group:null,activeTab:"",groupFetchError:null}},created:function(){return this.init(),D.$on("signedIn",this.init)},beforeDestroy:function(){return D.$off("signedIn",this.init)},watch:{"$route.params.key":"init"},computed:{dockActions:function(){return(0,l.pickBy)(T_.actions(this.group),(function(e){return e.dock}))},menuActions:function(){return(0,l.pickBy)(T_.actions(this.group),(function(e){return e.menu}))},canEditGroup:function(){return ms.canEditGroup(this.group)},tabs:function(){var e;if(this.group)return e="",this.$route.query.subgroups&&(e="?subgroups="+this.$route.query.subgroups),[{id:0,name:"threads",route:this.urlFor(this.group,null)+e},{id:1,name:"polls",route:this.urlFor(this.group,"polls")+e},{id:2,name:"members",route:this.urlFor(this.group,"members")+e},{id:4,name:"files",route:this.urlFor(this.group,"files")+e},{id:5,name:"subgroups",route:this.urlFor(this.group,"subgroups")+e}].filter((e=>!("subgroups"===e.name&&this.group.parentId)))}},methods:{init:function(){return jt.groups.findOrFetch(this.$route.params.key).then((e=>{if(this.group=e,this.group.newHost)return window.location.host=this.group.newHost})).catch((e=>{if(D.$emit("pageError",e),403===e.status&&!Rt.isSignedIn())return D.$emit("openAuthModal")}))},openGroupSettingsModal:function(){return this.canEditGroup?D.$emit("openModal",{component:"GroupForm",props:{group:this.group}}):null}}},V_=B_,H_=(0,Ut.Z)(V_,S_,N_,!1,null,null,null),G_=H_.exports,W_=function(){var e=this,t=e._self._c;return e.group?t("div",{staticClass:"discussions-panel"},[t(ys.Z,{staticClass:"py-3",attrs:{"align-center":"",wrap:""}},[t(qs.Z,{scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"mr-2 text-lowercase discussions-panel__filters",attrs:{text:""}},"v-btn",s,!1),o),[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:e.filterName(e.$route.query.t),args:{count:e.unreadCount}},expression:"{path: filterName($route.query.t), args: {count: unreadCount}}"}]}),t(Qt.Z,[e._v("mdi-menu-down")])],1)]}}],null,!1,2232457729)},[t(rs.Z,{attrs:{dense:""}},[t(zo.Z,{staticClass:"discussions-panel__filters-open",on:{click:function(t){return e.routeQuery({t:null})}}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"discussions_panel.open",expression:"'discussions_panel.open'"}]})],1),t(zo.Z,{staticClass:"discussions-panel__filters-all",on:{click:function(t){return e.routeQuery({t:"all"})}}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"discussions_panel.all",expression:"'discussions_panel.all'"}]})],1),t(zo.Z,{staticClass:"discussions-panel__filters-templates",on:{click:function(t){return e.routeQuery({t:"templates"})}}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"templates.templates",expression:"'templates.templates'"}]})],1),t(zo.Z,{staticClass:"discussions-panel__filters-closed",on:{click:function(t){return e.routeQuery({t:"closed"})}}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"discussions_panel.closed",expression:"'discussions_panel.closed'"}]})],1),t(zo.Z,{staticClass:"discussions-panel__filters-unread",on:{click:function(t){return e.routeQuery({t:"unread"})}}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:{path:"discussions_panel.unread",args:{count:e.unreadCount}},expression:"{path: 'discussions_panel.unread', args: { count: unreadCount }}"}]})],1)],1)],1),t(qs.Z,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"mr-2 text-lowercase",attrs:{text:""}},"v-btn",s,!1),o),[e.$route.query.tag?t("span",[e._v(e._s(e.$route.query.tag))]):t("span",{directives:[{name:"t",rawName:"v-t",value:"loomio_tags.tags",expression:"'loomio_tags.tags'"}]}),t(Qt.Z,[e._v("mdi-menu-down")])],1)]}}],null,!1,3456710592)},[t(an.Z,{staticClass:"pa-1"},[t(Uo,{attrs:{model:e.group,"show-counts":e.group.parentId,"show-org-counts":!e.group.parentId}})],1)],1),t(ci.Z,{staticClass:"mr-2 flex-grow-1",attrs:{clearable:"",solo:"","hide-details":"",value:e.$route.query.q,placeholder:e.$t("navbar.search_threads",{name:e.group.name}),"append-icon":"mdi-magnify",loading:e.searchLoader.loading},on:{input:e.onQueryInput}}),e.canStartThread?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"navbar.start_thread",expression:"'navbar.start_thread'"}],staticClass:"discussions-panel__new-thread-button",attrs:{to:"/d/new?group_id="+e.group.id+(e.group.templateDiscussionsCount?"":"&blank_template=1"),color:"primary"}}):e._e()],1),t(ns.Z,{staticClass:"discussions-panel",attrs:{outlined:""}},[403==e.loader.status?t("div",[t("p",{directives:[{name:"t",rawName:"v-t",value:"error_page.forbidden",expression:"'error_page.forbidden'"}],staticClass:"pa-4 text-center"})]):t("div",[e.$route.query.q?e._e():t("div",{staticClass:"discussions-panel__content"},[e.noThreads?t("div",{staticClass:"discussions-panel__list--empty pa-4",attrs:{value:!0}},[e.canViewPrivateContent?t("p",{directives:[{name:"t",rawName:"v-t",value:"group_page.no_threads_here",expression:"'group_page.no_threads_here'"}],staticClass:"text-center"}):e._e(),e.canViewPrivateContent?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"group_page.private_threads",expression:"'group_page.private_threads'"}],staticClass:"text-center"})]):e._e(),e.discussions.length?t("div",{staticClass:"discussions-panel__list thread-preview-collection__container"},[t(rs.Z,{staticClass:"thread-previews",attrs:{"two-line":""}},[e._l(e.pinnedDiscussions,(function(o){return t(Gn,{key:o.id,attrs:{"show-group-name":e.groupIds.length>1,thread:o,"group-page":""}})})),e._l(e.regularDiscussions,(function(o){return t(Gn,{key:o.id,attrs:{"show-group-name":e.groupIds.length>1,thread:o,"group-page":""}})}))],2)],1):e._e(),e.loading&&0==e.discussions.length?t(As):e._e(),t($p.Z,{attrs:{length:e.totalPages,"total-visible":7,disabled:1==e.totalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),t("div",{staticClass:"d-flex justify-center"},[e.suggestClosedThreads?t("router-link",{directives:[{name:"t",rawName:"v-t",value:"group_page.view_closed_threads",expression:"'group_page.view_closed_threads'"}],staticClass:"discussions-panel__view-closed-threads text-center pa-1",attrs:{to:"?t=closed"}}):e._e()],1)],1),e.$route.query.q?t("div",{staticClass:"discussions-panel__content pa-4"},[e.searchResults.length||e.searchLoader.loading?e._l(e.searchResults,(function(e){return t(ii,{key:e.id,attrs:{result:e}})})):t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"discussions_panel.no_results_found",args:{search:e.$route.query.q}},expression:"{path: 'discussions_panel.no_results_found', args: {search: $route.query.q}}"}],staticClass:"text-center discussions-panel__list--empty"})],2):e._e()])])],1):e._e()},K_=[],Y_={created:function(){return this.onQueryInput=(0,l.debounce)((e=>this.$router.replace(this.mergeQuery({q:e}))),1e3),this.init(),D.$on("signedIn",this.init)},beforeDestroy:function(){return D.$off("signedIn",this.init)},data:function(){return{group:null,discussions:[],searchResults:[],loader:null,searchLoader:null,groupIds:[],per:25}},methods:{routeQuery:function(e){return this.$router.replace(this.mergeQuery(e))},openStartDiscussionModal:function(){return D.$emit("openModal",{component:"DiscussionForm",props:{discussion:jt.discussions.build({descriptionFormat:Rt.defaultFormat(),groupId:this.group.id})}})},beforeDestroy:function(){return D.$off("joinedGroup")},init:function(){return jt.groups.findOrFetch(this.$route.params.key).then((e=>(this.group=e,D.$emit("currentComponent",{page:"groupPage",title:this.group.name,group:this.group,search:{placeholder:this.$t("navbar.search_threads",{name:this.group.parentOrSelf().name})}}),D.$on("joinedGroup",(e=>this.fetch())),this.refresh(),this.watchRecords({key:this.group.id,collections:["discussions","groups","memberships"],query:()=>this.query()}))))},refresh:function(){return this.loader=new Tp({path:"discussions",order:"lastActivityAt",params:{group_id:this.group.id,exclude_types:"group outcome poll",filter:this.$route.query.t,subgroups:this.$route.query.subgroups||"mine",tags:this.$route.query.tag,per:this.per}}),this.searchLoader=new hs({collection:"searchResults",params:{exclude_types:"group stance outcome poll",subgroups:this.$route.query.subgroups||"all",group_id:this.group.id}}),this.fetch(),this.query()},query:function(){var e,t;if(this.group){if(this.publicGroupIds=this.group.publicOrganisationIds(),this.groupIds=function(){switch(this.$route.query.subgroups||"mine"){case"mine":return(0,l.uniq)((0,l.concat)((0,l.intersection)(this.group.organisationIds(),Rt.user().groupIds()),this.publicGroupIds,this.group.id));case"all":return this.group.organisationIds();default:return[this.group.id]}}.call(this),this.$route.query.q)return e=jt.searchResults.collection.chain(),e=e.find({groupId:{$in:this.group.parentOrSelf().organisationIds()}}),e=e.find({query:this.$route.query.q}),this.searchResults=(0,l.orderBy)(e.data(),"rank","desc");switch(e=jt.discussions.collection.chain(),e=e.find({discardedAt:null}),e=e.find({groupId:{$in:this.groupIds}}),this.$route.query.t){case"unread":e=e.where((function(e){return e.isUnread()}));break;case"closed":e=e.find({closedAt:{$ne:null}});break;case"templates":e=e.find({template:!0});break;case"all":break;default:e=e.find({closedAt:null})}return this.$route.query.tag&&(t=jt.tags.find({groupId:this.group.parentOrSelf().id,name:this.$route.query.tag})[0],e=e.find({tagIds:{$contains:t.id}})),this.loader.pageWindow[this.page]?(e=1===this.page?e.find({lastActivityAt:{$gte:this.loader.pageWindow[this.page][0]}}):e.find({lastActivityAt:{$jbetween:this.loader.pageWindow[this.page]}}),this.discussions=e.simplesort("lastActivityAt",!0).data()):this.discussions=[]}},fetch:function(){return this.$route.query.q?this.searchLoader.fetchRecords({q:this.$route.query.q,from:0}):this.loader.fetch(this.page).then((()=>this.query()))},filterName:function(e){switch(e){case"unread":return"discussions_panel.unread";case"all":return"discussions_panel.all";case"closed":return"discussions_panel.closed";case"templates":return"templates.templates";case"subscribed":return"change_volume_form.simple.loud";default:return"discussions_panel.open"}}},watch:{"$route.params":"init","$route.query":"refresh",page:function(){return this.fetch(),this.query()}},computed:{page:{get:function(){return parseInt(this.$route.query.page)||1},set:function(e){return this.$router.replace({query:Object.assign({},this.$route.query,{page:e})})}},totalPages:function(){return Math.ceil(parseFloat(this.loader.total)/parseFloat(this.per))},pinnedDiscussions:function(){return(0,l.orderBy)(this.discussions.filter((function(e){return e.pinnedAt})),["pinnedAt"],["desc"])},regularDiscussions:function(){return(0,l.orderBy)(this.discussions.filter((function(e){return!e.pinnedAt})),["lastActivityAt"],["desc"])},groupTags:function(){return this.group&&this.group.tags().filter((function(e){return e.taggingsCount>0}))},loading:function(){return this.loader.loading||this.searchLoader.loading},noThreads:function(){return!this.loading&&0===this.discussions.length},canViewPrivateContent:function(){return ms.canViewPrivateContent(this.group)},canStartThread:function(){return ms.canStartThread(this.group)},isLoggedIn:function(){return Rt.isSignedIn()},unreadCount:function(){return(0,l.filter)(this.discussions,(function(e){return e.isUnread()})).length},suggestClosedThreads:function(){return["undefined","open","unread"].includes(String(this.$route.query.t))&&this.group&&this.group.closedDiscussionsCount}}},Q_=Y_,J_=(0,Ut.Z)(Q_,W_,K_,!1,null,null,null),X_=J_.exports,ef=function(){var e=this,t=e._self._c;return t("div",{staticClass:"polls-panel"},[e.group?e._e():t(As),e.group?t("div",[t(ys.Z,{staticClass:"py-2",attrs:{"align-center":"",wrap:""}},[t(qs.Z,{scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"mr-2 text-lowercase",attrs:{text:""}},"v-btn",s,!1),o),["active"==e.$route.query.status?t("span",{directives:[{name:"t",rawName:"v-t",value:"polls_panel.open",expression:"'polls_panel.open'"}]}):e._e(),"closed"==e.$route.query.status?t("span",{directives:[{name:"t",rawName:"v-t",value:"polls_panel.closed",expression:"'polls_panel.closed'"}]}):e._e(),"vote"==e.$route.query.status?t("span",{directives:[{name:"t",rawName:"v-t",value:"polls_panel.need_vote",expression:"'polls_panel.need_vote'"}]}):e._e(),e.$route.query.status?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"polls_panel.any_status",expression:"'polls_panel.any_status'"}]}),t(Qt.Z,[e._v("mdi-menu-down")])],1)]}}],null,!1,2853686031)},[t(rs.Z,{attrs:{dense:""}},[t(zo.Z,{directives:[{name:"t",rawName:"v-t",value:"polls_panel.any_status",expression:"'polls_panel.any_status'"}],attrs:{to:e.mergeQuery({status:null})}}),t(zo.Z,{directives:[{name:"t",rawName:"v-t",value:"polls_panel.open",expression:"'polls_panel.open'"}],attrs:{to:e.mergeQuery({status:"active"})}}),t(zo.Z,{directives:[{name:"t",rawName:"v-t",value:"polls_panel.closed",expression:"'polls_panel.closed'"}],attrs:{to:e.mergeQuery({status:"closed"})}}),t(zo.Z,{directives:[{name:"t",rawName:"v-t",value:"polls_panel.need_vote",expression:"'polls_panel.need_vote'"}],attrs:{to:e.mergeQuery({status:"vote"})}})],1)],1),t(qs.Z,{scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"mr-2 text-lowercase",attrs:{text:""}},"v-btn",s,!1),o),[e.$route.query.poll_type?t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_types."+e.$route.query.poll_type,expression:"'poll_types.'+$route.query.poll_type"}]}):e._e(),e.$route.query.poll_type?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"polls_panel.any_type",expression:"'polls_panel.any_type'"}]}),t(Qt.Z,[e._v("mdi-menu-down")])],1)]}}],null,!1,1950106713)},[t(rs.Z,{attrs:{dense:""}},[t(zo.Z,{attrs:{to:e.mergeQuery({poll_type:null})}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"polls_panel.any_type",expression:"'polls_panel.any_type'"}]})],1),e._l(Object.keys(e.pollTypes),(function(o){return t(zo.Z,{key:o,attrs:{to:e.mergeQuery({poll_type:o})}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"poll_types."+o,expression:"'poll_types.'+pollType"}]})],1)}))],2)],1),t(ci.Z,{staticClass:"mr-2",attrs:{clearable:"","hide-details":"",solo:"",value:e.$route.query.q,placeholder:e.$t("navbar.search_polls",{name:e.group.name}),"append-icon":"mdi-magnify"},on:{input:e.onQueryInput}}),e.canStartPoll?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"polls_panel.new_poll",expression:"'polls_panel.new_poll'"}],staticClass:"polls-panel__new-poll-button",attrs:{to:"/p/new?group_id="+e.group.id,color:"primary"}}):e._e()],1),t(ns.Z,{attrs:{outlined:""}},[403==e.loader.status?t("div",[t("p",{directives:[{name:"t",rawName:"v-t",value:"error_page.forbidden",expression:"'error_page.forbidden'"}],staticClass:"pa-4 text-center"})]):t("div",[e.polls.length&&e.loader.pageWindow[e.page]?t(rs.Z,{attrs:{"two-line":"",avatar:""}},e._l(e.polls,(function(o){return t(ss,{key:o.id,attrs:{poll:o,"display-group-name":o.groupId!=e.group.id}})})),1):e._e(),0!=e.polls.length||e.loader.loading?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"polls_panel.no_polls",expression:"'polls_panel.no_polls'"}],staticClass:"pa-4 text-center"}),e.loader.loading?t(As):e._e(),t($p.Z,{attrs:{length:e.totalPages,"total-visible":7,disabled:1==e.totalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)])],1):e._e()],1)},tf=[],of={data:function(){return{group:null,polls:[],loader:null,pollTypes:i.pollTypes,per:25}},created:function(){return this.onQueryInput=(0,l.debounce)((e=>this.$router.replace(this.mergeQuery({q:e}))),500),this.group=jt.groups.find(this.$route.params.key),this.initLoader(),this.watchRecords({collections:["polls","groups","memberships"],query:()=>this.findRecords()}),this.loader.fetch(this.page).then((()=>D.$emit("currentComponent",{page:"groupPage",title:this.group.name,group:this.group})))},methods:{initLoader:function(){return this.loader=new Tp({path:"polls",order:"createdAt",params:{exclude_types:"group",group_key:this.$route.params.key,status:this.$route.query.status,poll_type:this.$route.query.poll_type,query:this.$route.query.q,subgroups:this.$route.query.subgroups,per:this.per}})},openSelectPollTypeModal:function(){return D.$emit("openModal",{component:"PollCommonStartForm",props:{group:this.group,isModal:!0}})},findRecords:function(){var e,t;switch(t=function(){switch(this.$route.query.subgroups||"mine"){case"all":return this.group.organisationIds();case"none":return[this.group.id];case"mine":return(0,l.uniq)([this.group.id].concat((0,l.intersection)(this.group.organisationIds(),Rt.user().groupIds())))}}.call(this),e=jt.polls.collection.chain(),e=e.find({groupId:{$in:t}}),e=e.find({discardedAt:null}),this.$route.query.status){case"active":e=e.find({closedAt:null});break;case"closed":e=e.find({closedAt:{$ne:null}});break;case"vote":e=e.find({closedAt:null}).where((function(e){return e.iCanVote()&&!e.iHaveVoted()}))}return this.$route.query.poll_type&&(e=e.find({pollType:this.$route.query.poll_type})),this.$route.query.q&&(e=e.where((e=>(0,l.some)([e.title,e.details],(e=>(0,l.every)(this.$route.query.q.split(" "),(function(t){return RegExp(t,"i").test(e)}))))))),this.loader.pageWindow[this.page]?(e=1===this.page?e.find({createdAt:{$gte:this.loader.pageWindow[this.page][0]}}):e.find({createdAt:{$jbetween:this.loader.pageWindow[this.page]}}),this.polls=e.simplesort("createdAt",!0).data()):this.polls=[]}},watch:{"$route.query.q":function(){return this.initLoader().fetch(this.page)},"$route.query.status":function(){return this.initLoader().fetch(this.page)},"$route.query.poll_type":function(){return this.initLoader().fetch(this.page)},"$route.query.subgroups":function(){return this.initLoader().fetch(this.page)},"$route.query.page":function(){return this.loader.fetch(this.page)}},computed:{totalPages:function(){return Math.ceil(parseFloat(this.loader.total)/parseFloat(this.per))},canStartPoll:function(){return ms.canStartPoll(this.group)},page:{get:function(){return parseInt(this.$route.query.page)||1},set:function(e){return this.$router.replace({query:Object.assign({},this.$route.query,{page:e})})}}}},sf=of,nf=(0,Ut.Z)(sf,ef,tf,!1,null,null,null),rf=nf.exports,af=function(){var e=this,t=e._self._c;return e.canPerformAction()?t("div",{staticClass:"membership-dropdown lmo-no-print"},[t(qs.Z,{staticClass:"lmo-dropdown-menu",attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"membership-dropdown__button",attrs:{icon:""}},"v-btn",s,!1),o),[t(Qt.Z,[e._v("mdi-dots-vertical")])],1)]}}],null,!1,3050785892)},[t(rs.Z,{staticClass:"group-actions-dropdown__menu-content"},[e.canSetTitle()?t(zo.Z,{staticClass:"membership-dropdown__set-title",on:{click:function(t){return e.setTitle()}}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"membership_dropdown.set_title",expression:"'membership_dropdown.set_title'"}]})],1):e._e(),e.canResendMembership()?t(zo.Z,{staticClass:"membership-dropdown__resend",attrs:{disabled:e.membership.resent},on:{click:function(t){return e.resendMembership()}}},[e.membership.resent?e._e():t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"membership_dropdown.resend",expression:"'membership_dropdown.resend'"}]}),e.membership.resent?t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"membership_dropdown.invitation_resent",expression:"'membership_dropdown.invitation_resent'"}]}):e._e()],1):e._e(),e.canToggleAdmin()?t(zo.Z,{staticClass:"membership-dropdown__toggle-admin",on:{click:function(t){return e.toggleAdmin()}}},[e.membership.admin?e._e():t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"membership_dropdown.make_coordinator",expression:"'membership_dropdown.make_coordinator'"}]}),e.membership.admin?t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"membership_dropdown.demote_coordinator",expression:"'membership_dropdown.demote_coordinator'"}]}):e._e()],1):e._e(),e.canRemoveMembership()?t(zo.Z,{staticClass:"membership-dropdown__remove",on:{click:function(t){return e.removeMembership()}}},[e.membership.acceptedAt?t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"membership_dropdown.remove_from.group",expression:"'membership_dropdown.remove_from.group'"}]}):e._e(),e.membership.acceptedAt?e._e():t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"membership_dropdown.cancel_invitation",expression:"'membership_dropdown.cancel_invitation'"}]})],1):e._e()],1)],1)],1):e._e()},lf=[],cf={props:{membership:Object},methods:{canPerformAction:function(){return this.canSetTitle()||this.canRemoveMembership()||this.canResendMembership()||this.canToggleAdmin()},canSetTitle:function(){return ms.canSetMembershipTitle(this.membership)},setTitle:function(){return D.$emit("openModal",{component:"MembershipModal",props:{membership:this.membership.clone()}})},canResendMembership:function(){return ms.canResendMembership(this.membership)},resendMembership:function(){return this.membership.resend().then((function(){return Fn.success("membership_dropdown.invitation_resent")}))},canRemoveMembership:function(){return ms.canRemoveMembership(this.membership)},removeMembership:function(){var e,t;return t=this.membership.acceptedAt?"membership":"invitation",e=[],e.push(this.$t(`membership_remove_modal.${t}.message`,{name:this.membership.user().name})),this.membership.group().parentId?e.push(this.$t("membership_remove_modal.membership.impact_for_subgroup")):e.push(this.$t("membership_remove_modal.membership.impact_for_group")),D.$emit("openModal",{component:"ConfirmModal",props:{confirm:{membership:this.membership.clone(),text:{title:`membership_remove_modal.${t}.title`,raw_helptext:e.join("<br>"),flash:`membership_remove_modal.${t}.flash`,submit:`membership_remove_modal.${t}.submit`},submit:this.membership.destroy,redirect:this.membership.user()===Rt.user()?"dashboard":void 0}}})},canToggleAdmin:function(){return 0===this.membership.group().adminMembershipsCount&&this.membership.user()===Rt.user()||ms.canAdminister(this.membership.group())&&(!this.membership.admin||this.canRemoveMembership(this.membership))||this.membership.userIs(Rt.user())&&this.membership.group().parentOrSelf().adminsInclude(Rt.user())},toggleAdmin:function(e){var t;if(t=this.membership.admin?"removeAdmin":"makeAdmin",!this.membership.admin||this.membership.user()!==Rt.user()||confirm(this.$t("memberships_page.remove_admin_from_self.question")))return jt.memberships[t](this.membership).then((()=>Fn.success(`memberships_page.messages.${(0,l.snakeCase)(t)}_success`,{name:this.membership.userName()||this.membership.userEmail()})))}}},uf=cf,df=(0,Ut.Z)(uf,af,lf,!1,null,null,null),pf=df.exports,mf=function(){var e=this,t=e._self._c;return t(va.Z,{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({directives:[{name:"t",rawName:"v-t",value:"common.action.share",expression:"'common.action.share'"}],staticClass:"mr-2",attrs:{color:"primary",outlined:""}},"v-btn",s,!1),o))]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(ns.Z,{staticClass:"shareable-link-modal"},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"invitation_form.share_group",expression:"'invitation_form.share_group'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t($s.Z,{staticClass:"dismiss-modal-button",attrs:{icon:"",small:""},on:{click:function(t){e.dialog=!1}}},[t(Qt.Z,[e._v("mdi-window-close")])],1)],1),t(is.ZB,[t("span",{directives:[{name:"t",rawName:"v-t",value:"invitation_form.group_url",expression:"'invitation_form.group_url'"}],staticClass:"subtitle-2"}),"secret"==e.group.groupPrivacy?t("p",{directives:[{name:"t",rawName:"v-t",value:"invitation_form.secret_group_url_explanation",expression:"'invitation_form.secret_group_url_explanation'"}],staticClass:"mt-2 mb-0 caption"}):t("p",{directives:[{name:"t",rawName:"v-t",value:"invitation_form.shareable_group_url_explanation",expression:"'invitation_form.shareable_group_url_explanation'"}],staticClass:"mt-2 mb-0 caption"}),t(ys.Z,{attrs:{"align-center":""}},[t(ci.Z,{staticClass:"shareable-link-modal__shareable-link",attrs:{value:e.groupUrl,disabled:!0}}),t($s.Z,{staticClass:"shareable-link-modal__copy",attrs:{icon:"",color:"primary",title:e.$t("common.copy")},on:{click:function(t){return e.copyText(e.groupUrl)}}},[t(Qt.Z,[e._v("mdi-content-copy")])],1)],1),e.canAddMembers?t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"invitation_form.reusable_invitation_link",expression:"'invitation_form.reusable_invitation_link'"}],staticClass:"subtitle-2"}),t("p",{directives:[{name:"t",rawName:"v-t",value:"invitation_form.shareable_invitation_explanation",expression:"'invitation_form.shareable_invitation_explanation'"}],staticClass:"mt-2 mb-0 caption"}),t(ys.Z,{attrs:{"align-center":""}},[t(ci.Z,{staticClass:"shareable-link-modal__shareable-link",attrs:{value:e.invitationLink,disabled:!0}}),t($s.Z,{staticClass:"shareable-link-modal__copy",attrs:{icon:"",color:"primary",title:e.$t("common.copy")},on:{click:function(t){return e.copyText(e.invitationLink)}}},[t(Qt.Z,[e._v("mdi-content-copy")])],1),t($s.Z,{staticClass:"shareable-link-modal__reset",attrs:{icon:"",color:"warning",title:e.$t("common.reset")},on:{click:function(t){return e.resetInvitationLink()}}},[t(Qt.Z,[e._v("mdi-lock-reset")])],1)],1)],1):e._e(),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.help",expression:"'common.help'"}],attrs:{href:"https://help.loomio.org/en/user_manual/groups/membership/",target:"_blank"}})],1)],1)],1)},hf=[],_f={props:{group:Object},data:function(){return{dialog:!1}},methods:{copyText:function(e){return navigator.clipboard.writeText(e).then((function(){return Fn.success("common.copied")}),(function(){return Fn.error("invitation_form.error")}))},resetInvitationLink:function(){return this.group.resetToken().then((()=>Fn.success("invitation_form.shareable_link_reset")))}},computed:{groupUrl:function(){return Pt.group(this.group,null,{absolute:!0})},invitationLink:function(){return this.group.token?Pt.shareableLink(this.group):this.$t("common.action.loading")},canAddMembers:function(){return ms.canAddMembersToGroup(this.group)&&!this.pending}},watch:{dialog:function(e){if(e)return this.group.fetchToken()}}},ff=_f,gf=(0,Ut.Z)(ff,mf,hf,!1,null,null,null),vf=gf.exports,bf=function(){var e=this,t=e._self._c;return t("div",{staticClass:"members-panel"},[e.group?e._e():t(As),e.group?t("div",[e.showAdminWarning?t(Tc.Z,{staticClass:"my-2",attrs:{color:"primary",type:"warning"}},[t("template",{slot:"default"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"memberships_page.only_one_admin",expression:"'memberships_page.only_one_admin'"}]})])],2):e._e(),t(ys.Z,{staticClass:"py-2",attrs:{"align-center":"",wrap:""}},[t(qs.Z,{scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"members-panel__filters mr-2 text-lowercase",attrs:{text:""}},"v-btn",s,!1),o),["admin"==e.$route.query.filter?t("span",{directives:[{name:"t",rawName:"v-t",value:"members_panel.order_by_admin_desc",expression:"'members_panel.order_by_admin_desc'"}]}):e._e(),"pending"==e.$route.query.filter?t("span",{directives:[{name:"t",rawName:"v-t",value:"members_panel.invitations",expression:"'members_panel.invitations'"}]}):e._e(),"accepted"==e.$route.query.filter?t("span",{directives:[{name:"t",rawName:"v-t",value:"members_panel.accepted",expression:"'members_panel.accepted'"}]}):e._e(),e.$route.query.filter?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"members_panel.everyone",expression:"'members_panel.everyone'"}]}),t(Qt.Z,[e._v("mdi-menu-down")])],1)]}}],null,!1,3360649667)},[t(rs.Z,{attrs:{dense:""}},[t(zo.Z,{staticClass:"members-panel__filters-everyone",attrs:{to:e.mergeQuery({filter:null})}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"members_panel.everyone",expression:"'members_panel.everyone'"}]})],1),t(zo.Z,{staticClass:"members-panel__filters-everyone",attrs:{to:e.mergeQuery({filter:"accepted"})}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"members_panel.accepted",expression:"'members_panel.accepted'"}]})],1),t(zo.Z,{staticClass:"members-panel__filters-admins",attrs:{to:e.mergeQuery({filter:"admin"})}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"members_panel.order_by_admin_desc",expression:"'members_panel.order_by_admin_desc'"}]})],1),t(zo.Z,{staticClass:"members-panel__filters-invitations",attrs:{to:e.mergeQuery({filter:"pending"})}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"members_panel.invitations",expression:"'members_panel.invitations'"}]})],1)],1)],1),t(ci.Z,{staticClass:"mr-2",attrs:{clearable:"","hide-details":"",solo:"",value:e.$route.query.q,placeholder:e.$t("navbar.search_members",{name:e.group.name}),"append-icon":"mdi-magnify"},on:{input:e.onQueryInput}}),e.canAddMembers?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.invite",expression:"'common.action.invite'"}],staticClass:"membership-card__invite mr-2",attrs:{color:"primary"},on:{click:function(t){return e.invite()}}}):e._e(),e.canAddMembers?t(vf,{attrs:{group:e.group}}):e._e(),e.canAddMembers?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"members_panel.requests",expression:"'members_panel.requests'"}],staticClass:"group-page__requests-tab",attrs:{to:e.urlFor(e.group,"members/requests"),color:"primary",outlined:""}}):e._e()],1),t(ns.Z,{attrs:{outlined:""}},[403==e.loader.status?t("div",[t("p",{directives:[{name:"t",rawName:"v-t",value:"error_page.forbidden",expression:"'error_page.forbidden'"}],staticClass:"pa-4 text-center"})]):t("div",[e.memberships.length?t(rs.Z,{attrs:{"three-line":""}},e._l(e.memberships,(function(o){return t(zo.Z,{key:o.id},[t(Bo.Z,{attrs:{size:"48"}},[t("router-link",{attrs:{to:e.urlFor(o.user())}},[t(Ks,{attrs:{user:o.user(),size:48}})],1)],1),t(Vo.km,[t(Vo.V9,[t("router-link",{attrs:{to:e.urlFor(o.user())}},[e._v(e._s(o.user().nameOrEmail()))]),t(Ro),e.$route.query.subgroups?t("span",{staticClass:"caption"},[e._v(e._s(o.group().name))]):e._e(),t(Ro),t("span",{staticClass:"title caption"},[e._v(e._s(o.user().title(e.group)))]),e.$route.query.q?t("span",[t(Ro),t("span",{staticClass:"caption"},[e._v(e._s(o.user().email))])],1):e._e(),o.groupId==e.group.id&&o.admin?t("span",[t(Ro),t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"members_panel.admin",expression:"'members_panel.admin'"}],attrs:{small:"",outlined:"",label:""}}),t(Ro)],1):e._e(),o.acceptedAt?t("span",{staticClass:"caption text--secondary"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.joined",expression:"'common.action.joined'"}]}),t(Ro),t(Xn,{attrs:{date:o.acceptedAt}})],1):e._e(),o.acceptedAt?e._e():t("span",{staticClass:"caption text--secondary"},[o.inviterId?[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"members_panel.invited_by_name",args:{name:o.inviter().name}},expression:"{path: 'members_panel.invited_by_name', args: {name: membership.inviter().name}}"}]}),t(Ro),t(Xn,{attrs:{date:o.createdAt}})]:e._e(),o.inviterId?e._e():[t("span",{directives:[{name:"t",rawName:"v-t",value:"members_panel.header_invited",expression:"'members_panel.header_invited'"}]}),t(Ro),t(Xn,{attrs:{date:o.createdAt}})]],2)],1),t(Vo.oZ,[o.acceptedAt?t("span",[e._v(e._s((o.user().shortBio||"").replace(/<\/?[^>]+(>|$)/g,"")))]):e._e()])],1),t(En.Z,[o.groupId==e.group.id?t(pf,{attrs:{membership:o}}):e._e()],1)],1)})),1):t("p",{directives:[{name:"t",rawName:"v-t",value:"common.no_results_found",expression:"'common.no_results_found'"}],staticClass:"pa-4 text-center"}),t("div",{staticClass:"d-flex justify-center"},[t("div",{staticClass:"d-flex flex-column align-center"},["all"==e.$route.query.subgroups?t("div",{staticClass:"text--secondary"},[e._v(e._s(e.memberships.length)+" / "+e._s(e.group.orgMembersCount))]):t("div",{staticClass:"text--secondary"},[e._v(e._s(e.memberships.length)+" / "+e._s(e.loader.total))]),e.memberships.length<e.loader.total&&!e.loader.exhausted?t($s.Z,{staticClass:"my-2 members-panel__show-more",attrs:{outlined:"",color:"primary",loading:e.loader.loading},on:{click:function(t){return e.loader.fetchRecords({per:50})}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.load_more",expression:"'common.action.load_more'"}]})]):e._e(),e.group.subgroupsCount&&"all"!=e.$route.query.subgroups?t("a",{directives:[{name:"t",rawName:"v-t",value:"members_panel.show_users_in_subgroups",expression:"'members_panel.show_users_in_subgroups'"}],attrs:{href:"?subgroups=all"}},[e._v("show users in all subgroups")]):e._e()],1)])],1)])],1):e._e()],1)},yf=[],wf={data:function(){return{loader:null,group:null,per:25,order:"created_at desc",orders:[{text:this.$t("members_panel.order_by_name"),value:"users.name"},{text:this.$t("members_panel.order_by_created"),value:"memberships.created_at"},{text:this.$t("members_panel.order_by_created_desc"),value:"memberships.created_at desc"},{text:this.$t("members_panel.order_by_admin_desc"),value:"admin desc"}],memberships:[]}},created:function(){return this.onQueryInput=(0,l.debounce)((e=>this.$router.replace(this.mergeQuery({q:e}))),500),jt.groups.findOrFetch(this.$route.params.key).then((e=>(this.group=e,D.$emit("currentComponent",{page:"groupPage",title:this.group.name,group:this.group,search:{placeholder:this.$t("navbar.search_members",{name:this.group.parentOrSelf().name})}}),this.loader=new hs({collection:"memberships",params:{exclude_types:"group",group_id:this.group.id,per:this.per,order:this.order,subgroups:this.$route.query.subgroups}}),this.watchRecords({collections:["memberships","groups"],query:this.query}),this.refresh())))},methods:{exact:Ge,approximate:He,query:function(){var e,t,o,s;switch(e=jt.memberships.collection.chain(),this.$route.query.subgroups){case"mine":e=e.find({groupId:{$in:(0,l.intersection)(this.group.organisationIds(),Rt.user().groupIds())}});break;case"all":e=e.find({groupId:{$in:this.group.organisationIds()}});break;default:e=e.find({groupId:this.group.id})}switch(e=e.sort(((e,t)=>e.groupId===this.group.id?-1:t.groupId===this.group.id?1:0)),o=[],t=[],e.data().forEach((function(e){if(!o.includes(e.userId))return o.push(e.userId),t.push(e.id)})),e=jt.memberships.collection.chain().find({id:{$in:t}}),this.$route.query.q&&(s=jt.users.collection.find({$or:[{name:{$regex:[`^${this.$route.query.q}`,"i"]}},{email:{$regex:[`${this.$route.query.q}`,"i"]}},{username:{$regex:[`^${this.$route.query.q}`,"i"]}},{name:{$regex:[` ${this.$route.query.q}`,"i"]}}]}),e=e.find({userId:{$in:(0,l.map)(s,"id")}})),this.$route.query.filter){case"admin":e=e.find({admin:!0});break;case"accepted":e=e.find({acceptedAt:{$ne:null}});break;case"pending":e=e.find({acceptedAt:null})}return e=e.simplesort("id",!0),this.memberships=e.data()},refresh:function(){return this.loader.fetchRecords({from:0,q:this.$route.query.q,order:this.order,filter:this.$route.query.filter,subgroups:this.$route.query.subgroups}),this.query()},invite:function(){return D.$emit("openModal",{component:"GroupInvitationForm",props:{group:this.group}})}},computed:{membershipRequestsPath:function(){return Pt.membershipRequest(this.group)},showLoadMore:function(){return!this.loader.exhausted},totalRecords:function(){return this.pending?this.group.pendingMembershipsCount:this.group.membershipsCount-this.group.pendingMembershipsCount},canAddMembers:function(){return ms.canAddMembersToGroup(this.group)&&!this.pending},showAdminWarning:function(){return this.group.adminsInclude(Rt.user())&&this.group.adminMembershipsCount<2&&this.group.membershipsCount-this.group.adminMembershipsCount>0}},watch:{"$route.query":"refresh"}},xf=wf,kf=(0,Ut.Z)(xf,bf,yf,!1,null,null,null),Cf=kf.exports,Zf=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tags-panel"},[t(ns.Z,{staticClass:"my-4 pa-2",attrs:{outlined:""}},[t(Uo,{attrs:{model:e.group,"show-counts":e.group.parentId,"show-org-counts":!e.group.parentId,selected:e.$route.params.tag}})],1),e.group?e._e():t(As),e.group?t("div",[t(ns.Z,{staticClass:"mb-4",attrs:{outlined:""}},[t(is.EB,{directives:[{name:"t",rawName:"v-t",value:"common.threads",expression:"'common.threads'"}]}),403==e.discussionsLoader.status?t("div",[t("p",{directives:[{name:"t",rawName:"v-t",value:"error_page.forbidden",expression:"'error_page.forbidden'"}],staticClass:"pa-4 text-center"})]):t("div",[e.discussions.length?t("div",{staticClass:"discussions-panel__list thread-preview-collection__container"},[t(rs.Z,{staticClass:"thread-previews",attrs:{"two-line":""}},e._l(e.discussions,(function(e){return t(Gn,{key:e.id,attrs:{thread:e,"group-page":""}})})),1),t("div",{staticClass:"d-flex justify-center"},[t("div",{staticClass:"d-flex flex-column align-center"},[t("div",{staticClass:"text--secondary"},[e._v(e._s(e.discussions.length)+" / "+e._s(e.discussionsLoader.total))]),e.discussions.length<e.discussionsLoader.total&&!e.discussionsLoader.exhausted?t($s.Z,{staticClass:"my-2 discussions-panel__show-more",attrs:{outlined:"",color:"accent",loading:e.discussionsLoader.loading},on:{click:function(t){return e.fetch()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.load_more",expression:"'common.action.load_more'"}]})]):e._e()],1)])],1):e._e(),0!=e.discussions.length||e.discussionsLoader.loading?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"common.no_results_found",expression:"'common.no_results_found'"}],staticClass:"pa-4 text-center"})]),e.discussionsLoader.loading?t(As):e._e()],1),t(ns.Z,{attrs:{outlined:""}},[t(is.EB,{directives:[{name:"t",rawName:"v-t",value:"group_page.polls",expression:"'group_page.polls'"}]}),403==e.pollsLoader.status?t("div",[t("p",{directives:[{name:"t",rawName:"v-t",value:"error_page.forbidden",expression:"'error_page.forbidden'"}],staticClass:"pa-4 text-center"})]):e._e(),e.polls.length?t("div",[t(rs.Z,{attrs:{"two-line":"",avatar:""}},e._l(e.polls,(function(o){return t(ss,{key:o.id,attrs:{poll:o,"display-group-name":o.groupId!=e.group.id}})})),1),t("div",{staticClass:"d-flex justify-center"},[t("div",{staticClass:"d-flex flex-column align-center"},[t("div",{staticClass:"text--secondary"},[e._v(e._s(e.polls.length)+" / "+e._s(e.pollsLoader.total))]),e.polls.length<e.pollsLoader.total&&!e.pollsLoader.exhausted?t($s.Z,{staticClass:"my-2 polls-panel__show-more",attrs:{loading:e.pollsLoader.loading,color:"accent",outlined:""},on:{click:function(t){return e.loader.fetchRecords({per:50})}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.load_more",expression:"'common.action.load_more'"}]})]):e._e()],1)])],1):e._e(),0!=e.polls.length||e.pollsLoader.loading?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"polls_panel.no_polls",expression:"'polls_panel.no_polls'"}],staticClass:"pa-4 text-center"}),e.pollsLoader.loading?t(As):e._e()],1)],1):e._e()],1)},If=[],Af={data:function(){return{group:null,pollsLoader:null,discussionsLoader:null}},created:function(){return this.init(),this.watchRecords({collections:["polls","groups","discussions"],query:()=>this.findRecords()})},watch:{"$route.params.tag":"init"},methods:{init:function(){return this.group=jt.groups.find(this.$route.params.key),this.pollsLoader=new hs({collection:"polls",params:{group_id:this.group.id,tags:this.$route.params.tag,subgroups:"all"}}),this.discussionsLoader=new hs({collection:"discussions",params:{filter:"all",tags:this.$route.params.tag,group_id:this.group.id,subgroups:"all"}}),this.pollsLoader.fetchRecords(),this.discussionsLoader.fetchRecords(),this.findRecords()},findRecords:function(){return this.polls=jt.polls.collection.chain().find({groupId:{$in:this.group.selfAndSubgroupIds()}}).find({tags:{$contains:this.$route.params.tag}}).find({discardedAt:null}).simplesort("createdAt",!0).data(),this.discussions=jt.discussions.collection.chain().find({groupId:{$in:this.group.selfAndSubgroupIds()}}).find({tags:{$contains:this.$route.params.tag}}).find({discardedAt:null}).simplesort("lastActivityAt",!0).data()}}},$f=Af,Sf=(0,Ut.Z)($f,Zf,If,!1,null,null,null),Nf=Sf.exports,Tf=function(){var e=this,t=e._self._c;return e.group?t("div",[t(ys.Z,{staticClass:"my-2",attrs:{"align-center":"",wrap:""}},[t(ci.Z,{staticClass:"mr-2",attrs:{clearable:"","hide-details":"",solo:"",value:e.$route.query.q,placeholder:e.$t("subgroups_panel.search_subgroups_of_name",{name:e.group.name}),"append-icon":"mdi-magnify"},on:{input:e.onQueryInput}}),e.canCreateSubgroups?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.add_subgroup",expression:"'common.action.add_subgroup'"}],staticClass:"subgroups-card__start",attrs:{color:"primary"},on:{click:function(t){return e.startSubgroup()}}}):e._e()],1),t(ns.Z,{staticClass:"group-subgroups-panel",attrs:{outlined:""}},[e.loading||e.subgroups.length?t(rs.Z,{attrs:{avatar:"","three-line":""}},[e.group.subgroups().length>0?t(zo.Z,{staticClass:"subgroups-card__list-item",attrs:{to:e.urlFor(e.group)+"?subgroups=none"}},[t(Bo.Z,{staticClass:"subgroups-card__list-item-logo"},[t(Zi,{attrs:{group:e.group,size:28}})],1),t(Vo.km,[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:{path:"subgroups_panel.group_without_subgroups",args:{name:e.group.name}},expression:"{path: 'subgroups_panel.group_without_subgroups', args: {name: group.name}}"}]}),t(Vo.oZ,[e._v(e._s(e.stripDescription(e.group.description)))])],1)],1):e._e(),e._l(e.subgroups,(function(o){return t(zo.Z,{key:o.id,staticClass:"subgroups-card__list-item",attrs:{to:e.urlFor(o)}},[t(Bo.Z,{staticClass:"subgroups-card__list-item-logo"},[t(Zi,{attrs:{group:o,size:28}})],1),t(Vo.km,[t(Vo.V9,[e._v(e._s(o.name))]),t(Vo.oZ,[e._v(e._s(e.stripDescription(o.description)))])],1)],1)}))],2):t("p",{directives:[{name:"t",rawName:"v-t",value:"common.no_results_found",expression:"'common.no_results_found'"}],staticClass:"text-center pa-4"})],1)],1):e._e()},jf=[],Pf={data:function(){return{group:null,loading:!0}},created:function(){return this.onQueryInput=(0,l.debounce)((e=>this.$router.replace(this.mergeQuery({q:e}))),500),jt.groups.findOrFetch(this.$route.params.key).then((e=>(this.group=e,D.$emit("currentComponent",{page:"groupPage",title:this.group.name,group:this.group}),jt.groups.fetchByParent(this.group).then((()=>(this.loading=!1,D.$emit("subgroupsLoaded",this.group)))),this.watchRecords({collections:["memberships","groups"],query:this.findRecords}),this.findRecords())))},computed:{canCreateSubgroups:function(){return ms.canCreateSubgroups(this.group)}},methods:{findRecords:function(){var e,t,o;return t=jt.memberships.find({userId:Rt.user().id}).map((function(e){return e.groupId})),o=jt.groups.collection.chain().find({parentId:this.group.id}).find({groupPrivacy:{$in:["closed","open"]}}).data().map((function(e){return e.id})),e=jt.groups.collection.chain().find({parentId:this.group.id,id:{$in:t.concat(o)}}).simplesort("name"),this.$route.query.q&&(e=e.where((e=>(0,l.some)([e.name,e.description],(e=>RegExp(this.$route.query.q,"i").test(e)))))),this.subgroups=e.data()},startSubgroup:function(){return D.$emit("openModal",{component:"GroupNewForm",props:{group:jt.groups.build({parentId:this.group.id})}})},stripDescription:function(e){return(e||"").replace(/<[^>]*>?/gm,"")}},watch:{"$route.query":"findRecords"}},Of=Pf,Rf=(0,Ut.Z)(Of,Tf,jf,!1,null,null,null),qf=Rf.exports,Mf=function(){var e=this,t=e._self._c;return t("div",[t(ys.Z,{staticClass:"py-2",attrs:{"align-center":"",wrap:""}},[t(ci.Z,{attrs:{clearable:"","hide-details":"",solo:"",placeholder:e.$t("navbar.search_files",{name:e.group.name}),"append-icon":"mdi-magnify"},on:{input:e.onQueryInput}})],1),t(ns.Z,{staticClass:"group-files-panel",attrs:{outlined:""}},[403==e.loader.status?t("div",[t("p",{directives:[{name:"t",rawName:"v-t",value:"error_page.forbidden",expression:"'error_page.forbidden'"}],staticClass:"pa-4 text-center"})]):t("div",[e.loading||e.items.length?t(_d.Z,{attrs:{items:e.items,"hide-default-footer":""}},[t("thead",[t("tr",[t("th",{directives:[{name:"t",rawName:"v-t",value:"group_files_panel.filename",expression:"'group_files_panel.filename'"}]}),t("th",{directives:[{name:"t",rawName:"v-t",value:"group_files_panel.uploaded_by",expression:"'group_files_panel.uploaded_by'"}]}),t("th",{directives:[{name:"t",rawName:"v-t",value:"group_files_panel.uploaded_at",expression:"'group_files_panel.uploaded_at'"}]}),e.canAdminister?t("th"):e._e()])]),t("tbody",e._l(e.items,(function(o){return t("tr",{key:o.id},[t("td",[t(ys.Z,{attrs:{"align-center":""}},[t(Qt.Z,[e._v("mdi-"+e._s(o.icon))]),t("a",{attrs:{href:o.downloadUrl||o.url}},[e._v(e._s(o.filename||o.title))])],1)],1),t("td",[t(Ks,{attrs:{user:o.author()}})],1),t("td",[t(Xn,{attrs:{date:o.createdAt}})],1),e.canAdminister?t("td",[Object.keys(e.actionsFor(o)).length?t(Us,{attrs:{actions:e.actionsFor(o),icon:""}}):e._e()],1):e._e()])})),0)]):t("p",{directives:[{name:"t",rawName:"v-t",value:"common.no_results_found",expression:"'common.no_results_found'"}],staticClass:"text-center pa-4"}),t(ys.Z,{attrs:{"justify-center":""}},[t("div",{staticClass:"d-flex flex-column justify-center align-center"},[e.attachmentLoader.exhausted?e._e():t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.load_more",expression:"'common.action.load_more'"}],staticClass:"my-2",attrs:{outlined:"",color:"primary",loading:e.loading},on:{click:function(t){return e.fetch()}}})],1)])],1)])],1)},Ef=[],Lf=new class{actions(e){return{delete_attachment:{icon:"mdi-delete",name:"common.action.delete",canPerform:function(){return e.isA("attachment")&&ms.canAdminister(e.group())},perform:function(){return D.$emit("openModal",{component:"ConfirmModal",props:{confirm:{submit:e.destroy,text:{title:"comment_form.attachments.remove_attachment",helptext:"group_files_panel.delete_confirmation",submit:"common.action.delete",flash:"poll_common_delete_modal.success"}}}})}},delete_document:{icon:"mdi-delete",name:"common.action.delete",canPerform:function(){return e.isA("document")&&ms.canAdminister(e.group())},perform:function(){return D.$emit("openModal",{component:"ConfirmModal",props:{confirm:{submit:e.destroy,text:{title:"comment_form.attachments.remove_attachment",helptext:"group_files_panel.delete_confirmation",submit:"common.action.delete",flash:"poll_common_delete_modal.success"}}}})}}}}},Df={data:function(){return{group:null,loader:null,attachmentLoader:null,searchQuery:"",items:[],subgroups:"mine",attachmentIds:[],per:25,from:0}},created:function(){return this.onQueryInput=(0,l.debounce)((e=>this.$router.replace({query:{q:e}})),400),this.group=jt.groups.fuzzyFind(this.$route.params.key),D.$emit("currentComponent",{page:"groupPage",title:this.group.name,group:this.group,search:{placeholder:this.$t("navbar.search_files",{name:this.group.parentOrSelf().name})}}),this.loader=new hs({collection:"documents",path:"for_group",params:{group_id:this.group.id,per:this.per,subgroups:this.subgroups,from:this.from}}),this.attachmentLoader=new hs({collection:"attachments",params:{group_id:this.group.id,per:this.per,subgroups:this.subgroups,from:this.from}}),this.watchRecords({collections:["documents","attachments"],query:()=>this.query()}),this.searchQuery=this.$route.query.q||"",this.fetch()},watch:{"$route.query.q":function(e){return this.searchQuery=e||"",this.fetch(),this.query()}},methods:{query:function(){var e,t,o;return o=function(){switch(this.subgroups){case"none":return[this.group.id];case"mine":return(0,l.intersection)(this.group.organisationIds(),Rt.user().groupIds());case"all":return this.group.organisationIds()}}.call(this),t=jt.documents.collection.chain().find({groupId:{$in:o}}).find({title:{$regex:RegExp(`${this.searchQuery}`,"i")}}).data(),e=jt.attachments.collection.chain().find({id:{$in:this.attachmentIds}}).find({filename:{$regex:RegExp(`${this.searchQuery}`,"i")}}).data(),this.items=(0,l.orderBy)(t.concat(e),"createdAt","desc")},fetch:function(){return this.loader.fetchRecords({q:this.searchQuery}),this.attachmentLoader.fetchRecords({q:this.searchQuery}).then((e=>this.attachmentIds=(0,l.uniq)(this.attachmentIds.concat((e.attachments||[]).map((function(e){return e.id})))))).then((()=>this.query()))},actionsFor:function(e){return Lf.actions(e)}},computed:{showLoadMore:function(){return!this.loader.exhausted&&!this.attachmentLoader.exhausted},loading:function(){return this.loader.loading||this.attachmentLoader.loading},canAdminister:function(){return ms.canAdminister(this.group)}}},Ff=Df,Uf=(0,Ut.Z)(Ff,Mf,Ef,!1,null,null,null),zf=Uf.exports,Bf=function(){var e=this,t=e._self._c;return t("div",[t(zo.Z,{staticClass:"membership-requests"},[t(Bo.Z,[t(Ks,{attrs:{user:e.request.actor(),size:40}})],1),t(Vo.km,[t(Vo.V9,{staticClass:"membership-request__name"},[t("span",[e._v(e._s(e.request.actor().name)+" <"+e._s(e.request.requestorEmail)+">")]),e.request.respondedAt?e._e():t("span",{staticClass:"caption text--secondary"},[t(Ro),t(Mn),t(Xn,{attrs:{date:e.request.createdAt}})],1),e.request.respondedAt?t("span",{staticClass:"membership-request__response caption text--secondary"},[t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"membership_requests_page.previous_request_response",args:{response:e.request.formattedResponse(),responder:e.request.responder().name}},expression:"{ path: 'membership_requests_page.previous_request_response', args: { response: request.formattedResponse(), responder: request.responder().name } }"}]}),t(Mn),t(Xn,{attrs:{date:e.request.respondedAt}})],1):e._e()]),t(Vo.oZ,{staticClass:"membership-request__introduction"},[e._v(e._s(e.request.introduction))])],1),e.request.respondedAt?e._e():t(En.Z,[t($s.Z,{staticClass:"membership-requests-page__approve",attrs:{text:"",icon:""},on:{click:function(t){return e.approve(e.request)}}},[t(Qt.Z,[e._v("mdi-check")])],1)],1),e.request.respondedAt?e._e():t(En.Z,[t($s.Z,{staticClass:"membership-requests-page__ignore",attrs:{text:"",icon:""},on:{click:function(t){return e.ignore(e.request)}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1)],1)],1)},Vf=[],Hf={props:{request:Object},methods:{approve:function(e){return jt.membershipRequests.approve(e).then((()=>Fn.success("membership_requests_page.messages.request_approved_success")))},ignore:function(e){return jt.membershipRequests.ignore(e).then((()=>Fn.success("membership_requests_page.messages.request_ignored_success")))}}},Gf=Hf,Wf=(0,Ut.Z)(Gf,Bf,Vf,!1,null,null,null),Kf=Wf.exports,Yf=function(){var e=this,t=e._self._c;return t("div",{staticClass:"requests-panel"},[t("h2",{directives:[{name:"t",rawName:"v-t",value:"membership_requests_card.heading",expression:"'membership_requests_card.heading'"}],staticClass:"ma-4 headline"}),e.group?t(ns.Z,{staticClass:"mt-4",attrs:{outlined:""}},[e.requests.length?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"common.no_results_found",expression:"'common.no_results_found'"}],staticClass:"text-center pa-4"}),t(rs.Z,{attrs:{"two-line":""}},[e._l(e.unapprovedRequestsByOldestFirst,(function(e){return t(Kf,{key:e.id,attrs:{request:e}})})),e._l(e.approvedRequestsByNewestFirst,(function(e){return t(Kf,{key:e.id,attrs:{request:e}})}))],2)],1):t(As)],1)},Qf=[],Jf={data:function(){return{requests:[],group:null}},created:function(){return jt.groups.findOrFetch(this.$route.params.key).then((e=>{if(this.group=e,ms.canManageMembershipRequests(this.group))return jt.membershipRequests.fetchPendingByGroup(this.group.key,{per:100}),jt.membershipRequests.fetchPreviousByGroup(this.group.key,{per:100}),this.watchRecords({collections:["membershipRequests"],query:e=>this.requests=this.group.membershipRequests()})}))},computed:{unapprovedRequestsByOldestFirst:function(){var e;return e=(0,l.filter)(this.requests,(function(e){return!e.respondedAt})),(0,l.orderBy)(e,["createdAt"],["asc"])},approvedRequestsByNewestFirst:function(){var e;return e=(0,l.filter)(this.requests,(function(e){return e.respondedAt})),(0,l.orderBy)(e,["respondedAt"],["desc"])}}},Xf=Jf,eg=(0,Ut.Z)(Xf,Yf,Qf,!1,null,null,null),tg=eg.exports,og=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"group-form"},[t(oc.Z,{attrs:{value:e.uploading}},[t(ws.Z,{attrs:{size:"64",value:e.progress}})],1),t(is.EB,[t(ys.Z,{staticStyle:{"align-items":"center"},attrs:{"justify-space-between":""}},[t("div",{staticClass:"group-form__group-title"},[e.group.parentId?t("h1",{directives:[{name:"t",rawName:"v-t",value:"group_form.new_subgroup",expression:"'group_form.new_subgroup'"}],staticClass:"headline",attrs:{tabindex:"-1"}}):e._e(),e.group.parentId?e._e():t("h1",{directives:[{name:"t",rawName:"v-t",value:"group_form.new_group",expression:"'group_form.new_group'"}],staticClass:"headline",attrs:{tabindex:"-1"}})]),e.group.parentId?t(Bh,{attrs:{model:e.group}}):e._e()],1)],1),t("div",{staticClass:"px-4"},[e.group.parentId?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"group_form.new_group_explainer",expression:"'group_form.new_group_explainer'"}],staticClass:"text--secondary"}),e.group.parentId?t("p",{directives:[{name:"t",rawName:"v-t",value:"group_form.new_subgroup_explainer",expression:"'group_form.new_subgroup_explainer'"}],staticClass:"text--secondary"}):e._e(),e.parentGroups.length>1?t(Fi.Z,{staticClass:"group-form__parent-group",attrs:{items:e.parentGroups,label:e.$t("group_form.parent_group")},model:{value:e.group.parentId,callback:function(t){e.$set(e.group,"parentId",t)},expression:"group.parentId"}}):e._e(),t(ci.Z,{staticClass:"group-form__name",attrs:{id:"group-name",placeholder:e.$t(e.groupNamePlaceholder),rules:[e.rules.required],maxlength:"255",label:e.$t(e.groupNameLabel)},on:{keyup:function(t){return e.suggestHandle()}},model:{value:e.group.name,callback:function(t){e.$set(e.group,"name",t)},expression:"group.name"}}),t(_c,{attrs:{subject:e.group,field:"name"}}),!e.group.parentId||e.group.parentId&&e.group.parent().handle?t("div",[t(ci.Z,{staticClass:"group-form__handle",attrs:{id:"group-handle",loading:e.loadingHandle,hint:e.$t("group_form.group_handle_placeholder",{host:e.hostname,handle:e.group.handle}),maxlength:"100",label:e.$t("group_form.handle")},model:{value:e.group.handle,callback:function(t){e.$set(e.group,"handle",t)},expression:"group.handle"}}),t(_c,{attrs:{subject:e.group,field:"handle"}})],1):e._e(),e.group.parentId?t("div",[t("div",{staticClass:"group-form__section group-form__privacy"},[t(eh.Z,{attrs:{label:e.$t("common.privacy.privacy")},model:{value:e.group.groupPrivacy,callback:function(t){e.$set(e.group,"groupPrivacy",t)},expression:"group.groupPrivacy"}},e._l(e.privacyOptions,(function(o){return t(Xm.Z,{key:o,class:"md-checkbox--with-summary group-form__privacy-"+o,attrs:{value:o,"aria-label":o}},[t("template",{slot:"label"},[t("div",{staticClass:"group-form__privacy-title"},[t("strong",{directives:[{name:"t",rawName:"v-t",value:"common.privacy."+o,expression:"'common.privacy.' + privacy"}]}),t(Mn),t("span",[e._v(e._s(e.privacyStringFor(o)))])],1)])],2)})),1)],1),t("p",{staticClass:"group-form__privacy-statement text-body-2"},[e._v(e._s(e.privacyStatement))]),e.group.privacyIsOpen()?t("div",{staticClass:"group-form__section group-form__joining lmo-form-group"},[t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"group_form.how_do_people_join",expression:"'group_form.how_do_people_join'"}]}),t(eh.Z,{model:{value:e.group.membershipGrantedUpon,callback:function(t){e.$set(e.group,"membershipGrantedUpon",t)},expression:"group.membershipGrantedUpon"}},e._l(["request","approval"],(function(e){return t(Xm.Z,{key:e,class:"group-form__membership-granted-upon-"+e,attrs:{value:e}},[t("template",{slot:"label"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.membership_granted_upon_"+e,expression:"'group_form.membership_granted_upon_' + granted"}]})])],2)})),1)],1):e._e()]):e._e(),e.group.parentId?e._e():t("div",{staticClass:"pt-2"},[t("span",{staticClass:"text--secondary"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.privacy.privacy",expression:"'common.privacy.privacy'"}]}),t("span",[e._v(":")]),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"common.privacy.secret",expression:"'common.privacy.secret'"}]})],1),t("p",{staticClass:"text-caption text--secondary"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.secret_by_default",expression:"'group_form.secret_by_default'"}]})])])],1),t(is.h7,{staticClass:"ma-2"},[t(ir,{attrs:{path:"en/user_manual/groups/starting_a_group"}}),t(yn.Z),t($s.Z,{staticClass:"group-form__submit-button",attrs:{loading:e.group.processing,color:"primary"},on:{click:function(t){return e.submit()}}},[e.group.isParent()?t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.submit_start_group",expression:"'group_form.submit_start_group'"}]}):e._e(),e.group.isParent()?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.submit_start_subgroup",expression:"'group_form.submit_start_subgroup'"}]})])],1)],1)},sg=[],ng=function(e,t=!1){var o;return o=function(){switch(e.kind){case"new_comment":return am(e,t);case"stance_created":return lm(e,t);case"discussion_edited":return rm(e);case"poll_created":return"poll_created";default:return e.kind}}(),`thread_item.${o}`},ig=function(e){switch(e.eventableType){case"Comment":return e.model().parentAuthorName;case"Poll":case"Outcome":return e.model().poll().title;case"Group":case"Membership":return e.model().group().name;case"Stance":return e.model().poll().title;case"Discussion":return"discussion_moved"===e.kind?e.sourceGroupId?(jt.groups.find(e.sourceGroupId)||{fullName:M.t("thread_item.deleted_group")}).fullName:M.t("thread_item.invite_only_thread"):e.model().title}},rg=function(e){return(0,l.includes)(["Poll","Stance","Outcome"],e.eventableType)?`poll_types.${e.model().poll().pollType}`:""},ag=function(e,t){if(t=t||e.groupPrivacy,e.isParent())switch(t){case"open":return"group_form.group_privacy_is_open_description";case"secret":return"group_form.group_privacy_is_secret_description";case"closed":return e.allowPublicThreads?"group_form.group_privacy_is_closed_public_threads_description":"group_form.group_privacy_is_closed_description"}else switch(t){case"open":return"group_form.subgroup_privacy_is_open_description";case"secret":return"group_form.subgroup_privacy_is_secret_description";case"closed":return e.isSubgroupOfSecretParent()?"group_form.subgroup_privacy_is_closed_secret_parent_description":e.allowPublicThreads?"group_form.subgroup_privacy_is_closed_public_threads_description":"group_form.subgroup_privacy_is_closed_description"}},lg=function(e){if(e.parentId&&e.parent().privacyIsSecret())return e.privacyIsClosed()?"group_form.privacy_statement.private_to_parent_members":"group_form.privacy_statement.private_to_group";switch(e.groupPrivacy){case"open":return"group_form.privacy_statement.public_on_web";case"closed":return"group_form.privacy_statement.public_on_web";case"secret":return"group_form.privacy_statement.private_to_group"}};am=function(e,t){return e.isNested()&&!t?"comment_replied_to":"new_comment"},lm=function(e,t){return e.isNested()&&t?"new_comment":"stance_created"},rm=function(e){var t;return t=e.customFields.changed_keys,(0,l.includes)(t,"title")?"discussion_title_edited":(0,l.includes)(t,"private")?"discussion_privacy_edited":(0,l.includes)(t,"description")?"discussion_context_edited":(0,l.includes)(t,"document_ids")?"discussion_attachments_edited":"discussion_edited"};var cg={props:{group:Object},data:function(){return{rules:{required:function(e){return!!e||"Required."}},uploading:!1,progress:0,hostname:i.theme.canonical_host,categories:["board","party","coop","union","nonprofit","professional","government","community","other"],parentGroups:[],loadingHandle:!1}},created:function(){return this.watchRecords({collections:["groups","memberships"],query:e=>(this.parentGroups=[{value:null,text:this.$t("common.none")}],this.parentGroups=this.parentGroups.concat(Rt.user().parentGroups().filter((function(e){return ms.canCreateSubgroups(e)})).map((function(e){return{value:e.id,text:e.name}}))))}),this.suggestHandle=(0,l.debounce)((function(){var e;if(this.group.isNew()||(0,l.isEmpty)(this.group.handle))return this.loadingHandle=!0,e=this.group.parentId?this.group.parent().handle:null,jt.groups.getHandle({name:this.group.name,parentHandle:e}).then((e=>(this.group.handle=e.handle,this.loadingHandle=!1)))}),250)},mounted:function(){return this.suggestHandle()},watch:{"group.parentId":function(){return this.group.handle="",this.group.name=""}},methods:{submit:function(){var e;return e=this.group.allowPublicThreads,this.group.discussionPrivacyOptions=function(){switch(this.group.groupPrivacy){case"open":return"public_only";case"closed":return e?"public_or_private":"private_only";case"secret":return"private_only"}}.call(this),this.group.parentMembersCanSeeDiscussions=function(){switch(this.group.groupPrivacy){case"open":return!0;case"closed":return this.group.parentMembersCanSeeDiscussions;case"secret":return!1}}.call(this),this.group.save().then((e=>{var t;return t=e.groups[0].key,Fn.success(`group_form.messages.group_${this.actionName}`),jt.groups.findOrFetchById(t,{},!0).then((e=>(D.$emit("closeModal"),this.$router.push(`/g/${t}`))))})).catch((e=>!0))},privacyStringFor:function(e){return this.$t(ag(this.group,e),{parent:this.group.parentName()})}},computed:{actionName:function(){return this.group.isNew()?"created":"updated"},titleLabel:function(){return this.group.isParent()?"group_form.group_name":"group_form.subgroup_name"},privacyOptions:function(){return this.group.parentId&&"secret"===this.group.parent().groupPrivacy?["closed","secret"]:["open","closed","secret"]},privacyStatement:function(){return this.$t(lg(this.group),{parent:this.group.parentName()})},groupNamePlaceholder:function(){return this.group.parentId?"group_form.subgroup_name_placeholder":"group_form.organization_name_placeholder"},groupNameLabel:function(){return this.group.parentId?"group_form.subgroup_name":"group_form.group_name"}}},ug=cg,dg=(0,Ut.Z)(ug,og,sg,!1,null,null,null),pg=dg.exports,mg=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"max-width-800 start-group-page px-0 px-sm-3"},[t(pg,{attrs:{group:e.group}})],1)],1)},hg=[],_g=(o(41609),{mixins:[x_],data:function(){return{group:jt.groups.build()}},mounted:function(){if(!Rt.isSignedIn())return this.openAuthModal()}}),fg=_g,gg=(0,Ut.Z)(fg,mg,hg,!1,null,null,null),vg=gg.exports,bg=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"contact-page d-flex justify-center"},[t(ns.Z,{directives:[{name:"show",rawName:"v-show",value:!e.submitted,expression:"!submitted"}],staticClass:"contact-form max-width-800 px-0 px-sm-3"},[t(lc,{attrs:{value:e.message.processing}}),t(is.EB,[t("p",{directives:[{name:"t",rawName:"v-t",value:"contact_message_form.alt_title",expression:"'contact_message_form.alt_title'"}],staticClass:"text-heading",attrs:{tabindex:"-1"}})]),t(is.Qq,{directives:[{name:"t",rawName:"v-t",value:"contact_message_form.title",expression:"'contact_message_form.title'"}]}),t(is.ZB,[t("p",{domProps:{innerHTML:e._s(e.$t("contact_message_form.this_is_for"))}}),t("p",{domProps:{innerHTML:e._s(e.$t("contact_message_form.read_the_manual",{link:e.helpLink}))}}),t("p"),e.isLoggedIn?e._e():t("div",[t("label",{directives:[{name:"t",rawName:"v-t"}]}),t(ci.Z,{attrs:{label:e.$t("contact_message_form.name_label"),placeholder:e.$t("contact_message_form.name_placeholder")},model:{value:e.message.name,callback:function(t){e.$set(e.message,"name",t)},expression:"message.name"}}),t(_c,{attrs:{subject:e.message,field:"name"}})],1),e.isLoggedIn?e._e():t("div",[t(ci.Z,{attrs:{label:e.$t("contact_message_form.email_label"),placeholder:e.$t("contact_message_form.email_placeholder")},model:{value:e.message.email,callback:function(t){e.$set(e.message,"email",t)},expression:"message.email"}}),t(_c,{attrs:{subject:e.message,field:"email"}})],1),t(ci.Z,{attrs:{label:e.$t("contact_message_form.subject_label"),placeholder:e.$t("contact_message_form.subject_placeholder")},model:{value:e.message.subject,callback:function(t){e.$set(e.message,"subject",t)},expression:"message.subject"}}),t(_c,{attrs:{subject:e.message,field:"subject"}}),t(fr.Z,{attrs:{label:e.$t("contact_message_form.message_label"),placeholder:e.$t("contact_message_form.message_placeholder")},model:{value:e.message.message,callback:function(t){e.$set(e.message,"message",t)},expression:"message.message"}}),t(_c,{attrs:{subject:e.message,field:"message"}}),t("p",{staticClass:"text--secondary",domProps:{innerHTML:e._s(e.$t("contact_message_form.contact_us_email",{email:e.contactEmail}))}}),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"contact_message_form.send_message",expression:"'contact_message_form.send_message'"}],attrs:{color:"primary"},on:{click:e.submit}})],1)],1)],1),t(ns.Z,{directives:[{name:"show",rawName:"v-show",value:e.submitted,expression:"submitted"}],staticClass:"contact-form__success"},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:e.$t("contact_message_form.success_via_email",{name:e.message.name}),expression:"$t('contact_message_form.success_via_email', { name: message.name })"}],staticClass:"headline",attrs:{tabindex:"-1"}})])],1)],1)],1)},yg=[],wg={data:function(){return{submitted:!1,message:jt.contactMessages.build(),isDisabled:!1,helpLink:"https://help.loomio.com",contactEmail:i.contactEmail}},mounted:function(){return D.$emit("currentComponent",{titleKey:"contact_message_form.contact_us",page:"inboxPage"})},created:function(){if(this.isLoggedIn)return this.message.name=Rt.user().name,this.message.email=Rt.user().email,this.message.userId=Rt.user().id},methods:{submit:function(){return this.message.save().then((()=>this.submitted=!0))}},computed:{isLoggedIn:function(){return Rt.isSignedIn()}}},xg=wg,kg=(0,Ut.Z)(xg,bg,yg,!1,null,null,null),Cg=kg.exports,Zg=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"change-volume-form"},[t("form",[t(lc,{attrs:{value:e.model.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:{path:e.translateKey()+".title",args:{title:e.title}},expression:"{ path: translateKey() + '.title', args: { title: title } }"}],staticClass:"headline change-volume-form__title"}),t(yn.Z),e.showClose?t(Bh):e._e()],1),t(is.ZB,[t("p",{directives:[{name:"t",rawName:"v-t",value:"change_volume_form.simple.question",expression:"'change_volume_form.simple.question'"}]}),t(eh.Z,{staticClass:"text-lowercase mb-4",attrs:{"hide-details":""},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}},[t(Xm.Z,{staticClass:"volume-loud",attrs:{value:"loud",label:e.labelFor("loud")}}),t(Xm.Z,{staticClass:"volume-normal",attrs:{value:"normal",label:e.labelFor("normal")}}),t(Xm.Z,{staticClass:"volume-quiet",attrs:{value:"quiet",label:e.labelFor("quiet")}})],1),e.model.isA("discussion")?t(Tc.Z,{attrs:{dense:"",text:"",type:"info"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"change_volume_form.explain_scope.thread",expression:"'change_volume_form.explain_scope.thread'"}]})]):e._e(),e.model.isA("membership")?t(Tc.Z,{directives:[{name:"t",rawName:"v-t",value:"change_volume_form.explain_scope.group",expression:"'change_volume_form.explain_scope.group'"}],attrs:{dense:"",text:"",type:"info"}}):e._e(),e.model.isA("membership")&&e.model.group().parentOrSelf().hasSubgroups()?t("div",[e.model.isA("membership")?t(Jm.Z,{staticClass:"mb-4",attrs:{id:"apply-to-all",label:e.$t("change_volume_form.membership.apply_to_organization",{organization:e.model.group().parentOrSelf().name}),"hide-details":""},model:{value:e.applyToAll,callback:function(t){e.applyToAll=t},expression:"applyToAll"}}):e._e()],1):e._e(),e.model.isA("discussion")?t("p",{staticClass:"mt-4"},[t("a",{directives:[{name:"t",rawName:"v-t",value:"change_volume_form.discussion.group",expression:"'change_volume_form.discussion.group'"}],on:{click:function(t){return e.openGroupVolumeModal()}}})]):e._e(),e.model.isA("membership")?t("p",{staticClass:"mt-4"},[t("a",{directives:[{name:"t",rawName:"v-t",value:"change_volume_form.discussion.user",expression:"'change_volume_form.discussion.user'"}],on:{click:function(t){return e.openUserPreferences()}}})]):e._e()],1),t(is.h7,{attrs:{"align-center":""}},[t(ir,{attrs:{path:"en/user_manual/users/email_settings/#group-email-notification-settings"}}),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.update",expression:"'common.action.update'"}],staticClass:"change-volume-form__submit",attrs:{type:"button",disabled:!e.formChanged,color:"primary"},on:{click:function(t){return e.submit()}}})],1)],1)])},Ig=[],Ag={methods:{openChangeVolumeModal:function(e){return D.$emit("openModal",{component:"ChangeVolumeForm",props:{model:e}})}}},$g={mixins:[Ag],props:{model:Object,close:Function,showClose:{default:!0,type:Boolean}},data:function(){return{includeInCatchUp:!0,volumeLevels:["loud","normal","quiet"],isDisabled:!1,applyToAll:this.defaultApplyToAll(),volume:this.defaultVolume()}},computed:{formChanged:function(){return this.volume!==this.defaultVolume()||this.applyToAll!==this.defaultApplyToAll()},title:function(){switch(this.model.constructor.singular){case"discussion":return this.model.title;case"membership":return this.model.group().name;case"user":return this.model.name}}},methods:{submit:function(){return this.model.saveVolume(this.volume,this.applyToAll).then((()=>(Fn.success("change_volume_form.saved"),this.closeModal())))},defaultApplyToAll:function(){return!!this.model.isA("user")},defaultVolume:function(){switch(this.model.constructor.singular){case"discussion":return this.model.volume();case"membership":return this.model.volume;case"user":return this.model.defaultMembershipVolume}},labelFor:function(e){return this.$t(`change_volume_form.simple.${e}_explain`)+" ("+this.$t(`change_volume_form.simple.${e}`)+")"},translateKey:function(e){return this.model.isA("user")?"change_volume_form.all_groups":`change_volume_form.${e||this.model.constructor.singular}`},groupName:function(){return this.model.groupName?this.model.groupName():""},openGroupVolumeModal:function(){return this.closeModal(),setTimeout((()=>T_.actions(this.model.group(),this).change_volume.perform()))},openUserPreferences:function(){return this.closeModal(),this.$router.push("/email_preferences")}}},Sg=$g,Ng=(0,Ut.Z)(Sg,Zg,Ig,!1,null,null,null),Tg=Ng.exports,jg=function(){var e=this,t=e._self._c;return t(ai.Z,[e.user?t(ri.Z,{staticClass:"email-settings-page max-width-1024 px-0 px-sm-3"},[e.user.deactivatedAt?t(ns.Z,{staticClass:"mb-4"},[t(is.ZB,[t("p",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.account_deactivated",expression:"'email_settings_page.account_deactivated'"}]})])],1):e._e(),e.user.deactivatedAt?e._e():t(ns.Z,{staticClass:"mb-4"},[t(is.ZB,[t("div",{staticClass:"email-settings-page__email-settings"},[t("div",{staticClass:"email-settings-page__global-settings"},[t("form",[t("div",{staticClass:"email-settings-page__global-settings"},[t(Jm.Z,{staticClass:"md-checkbox--with-summary email-settings-page__mentioned",attrs:{id:"mentioned-email"},model:{value:e.user.emailWhenMentioned,callback:function(t){e.$set(e.user,"emailWhenMentioned",t)},expression:"user.emailWhenMentioned"}},[t("div",{attrs:{slot:"label"},slot:"label"},[t("strong",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.mentioned_label",expression:"'email_settings_page.mentioned_label'"}]}),t("div",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.mentioned_description",expression:"'email_settings_page.mentioned_description'"}],staticClass:"email-settings-page__input-description"})])]),t(Jm.Z,{staticClass:"md-checkbox--with-summary email-settings-page__on-participation",attrs:{id:"on-participation-email"},model:{value:e.user.emailOnParticipation,callback:function(t){e.$set(e.user,"emailOnParticipation",t)},expression:"user.emailOnParticipation"}},[t("div",{attrs:{slot:"label"},slot:"label"},[t("strong",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.on_participation_label",expression:"'email_settings_page.on_participation_label'"}]}),t("div",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.on_participation_description",expression:"'email_settings_page.on_participation_description'"}],staticClass:"email-settings-page__input-description"})])]),t("div",{staticClass:"text-subtitle-1"},[t("strong",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.email_catch_up_day",expression:"'email_settings_page.email_catch_up_day'"}]})]),t("p",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.daily_summary_description",expression:"'email_settings_page.daily_summary_description'"}]}),t(Fi.Z,{attrs:{id:"email-catch-up-day",solo:"","max-width":"100px",items:e.emailDays,label:e.$t("email_settings_page.email_catch_up_day")},model:{value:e.user.emailCatchUpDay,callback:function(t){e.$set(e.user,"emailCatchUpDay",t)},expression:"user.emailCatchUpDay"}})],1)])])])]),t(is.h7,[t(ir,{attrs:{path:"en/user_manual/users/email_settings/#user-email-settings"}}),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.update_settings",expression:"'email_settings_page.update_settings'"}],staticClass:"email-settings-page__update-button",attrs:{color:"primary"},on:{click:function(t){return e.submit()}}})],1)],1),t(Tg,{staticClass:"mb-4",attrs:{model:e.user,"show-close":!1}}),t(ns.Z,[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.deactivate_header",expression:"'email_settings_page.deactivate_header'"}],staticClass:"headline",attrs:{tabindex:"-1"}})]),t(is.ZB,[t("p",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.deactivate_description",expression:"'email_settings_page.deactivate_description'"}]}),t(rs.Z,e._l(e.actions,(function(o,s){return o.canPerform()?t(zo.Z,{key:s,on:{click:function(e){return o.perform()}}},[t(Rs.Z,[t(Qt.Z,[e._v(e._s(o.icon))])],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:o.name,expression:"action.name"}]})],1):e._e()})),1)],1)],1)],1):e._e()],1)},Pg=[],Og={mixins:[Ag],data:function(){return{newsletterEnabled:i.newsletterEnabled,user:null,groups:[]}},created:function(){return this.init(),D.$on("signedIn",this.init),this.watchRecords({collections:["groups","memberships"],query:e=>{var t;return t=Rt.user().groups(),Rt.user(),this.groups=(0,l.sortBy)(t,"fullName")}})},beforeDestroy:function(){return D.$off("signedIn",this.init)},mounted:function(){return D.$emit("currentComponent",{titleKey:"email_settings_page.header",page:"emailSettingsPage"})},methods:{submit:function(){return jt.users.updateProfile(this.user).then((()=>Fn.success("email_settings_page.messages.updated"))).catch((e=>!0))},init:function(){if(Rt.isSignedIn()||null!=Rt.user().restricted)return Rt.user().attributeNames.push("unsubscribeToken"),this.originalUser=Rt.user(),this.user=Rt.user().clone()},groupVolume:function(e){return e.membershipFor(Rt.user()).volume},changeDefaultMembershipVolume:function(){return this.openChangeVolumeModal(Rt.user())},editSpecificGroupVolume:function(e){return this.openChangeVolumeModal(Rt.user())}},computed:{emailDays:function(){return[{value:null,text:this.$t("email_settings_page.never")},{value:7,text:this.$t("email_settings_page.every_day")},{value:8,text:this.$t("email_settings_page.every_second_day")},{value:1,text:this.$t("email_settings_page.monday")},{value:2,text:this.$t("email_settings_page.tuesday")},{value:3,text:this.$t("email_settings_page.wednesday")},{value:4,text:this.$t("email_settings_page.thursday")},{value:5,text:this.$t("email_settings_page.friday")},{value:6,text:this.$t("email_settings_page.saturday")},{value:0,text:this.$t("email_settings_page.sunday")}]},actions:function(){return(0,l.pick)(vc.actions(Rt.user(),this),["reactivate_user","deactivate_user"])},defaultSettingsDescription:function(){return`email_settings_page.default_settings.${Rt.user().defaultMembershipVolume}_description`}}},Rg=Og,qg=(0,Ut.Z)(Rg,jg,Pg,!1,null,null,null),Mg=qg.exports,Eg=function(){var e=this,t=e._self._c;return t("div",{staticClass:"discussion-form",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null}}},[t(lc,{attrs:{value:e.discussion.processing}}),t(is.EB,[t("h1",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.titleVisible},expression:"{callback: titleVisible}"}],staticClass:"text-h4"},[e.isMovingItems?t("span",{directives:[{name:"t",rawName:"v-t",value:"discussion_form.moving_items_title",expression:"'discussion_form.moving_items_title'"}]}):[e.discussion.template?[e.discussion.id?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"discussion_form.new_thread_template",expression:"'discussion_form.new_thread_template'"}]}),e.discussion.id?t("span",{directives:[{name:"t",rawName:"v-t",value:"discussion_form.edit_thread_template",expression:"'discussion_form.edit_thread_template'"}]}):e._e()]:[e.discussion.id?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"discussion_form.new_discussion_title",expression:"'discussion_form.new_discussion_title'"}]}),e.discussion.id?t("span",{directives:[{name:"t",rawName:"v-t",value:"discussion_form.edit_discussion_title",expression:"'discussion_form.edit_discussion_title'"}]}):e._e()]]],2),t(yn.Z),e.isPage?e._e():t(Bh,{attrs:{"aria-hidden":"true",model:e.discussion}}),e.isPage&&e.discussion.id?t($s.Z,{attrs:{icon:"","aria-hidden":"true",to:e.urlFor(e.discussion)}},[t(Qt.Z,[e._v("mdi-close")])],1):e._e()],1),t("div",{staticClass:"pa-4"},[t(Fi.Z,{staticClass:"pb-4",attrs:{disabled:!!e.discussion.id,items:e.groupItems,label:e.$t("common.group"),hint:e.discussion.groupId?e.$t("announcement.form.visible_to_group",{group:e.discussion.group().name}):e.$t("announcement.form.visible_to_guests"),"persistent-hint":""},model:{value:e.discussion.groupId,callback:function(t){e.$set(e.discussion,"groupId",t)},expression:"discussion.groupId"}}),e.showUpgradeMessage?t("div",[e.maxThreadsReached?t("p",{domProps:{innerHTML:e._s(e.$t("discussion.max_threads_reached",{upgradeUrl:e.upgradeUrl,maxThreads:e.maxThreads}))}}):e._e(),e.subscriptionActive?e._e():t("p",{domProps:{innerHTML:e._s(e.$t("discussion.subscription_canceled",{upgradeUrl:e.upgradeUrl}))}})]):e._e(),t(Qm,{attrs:{model:e.discussion}}),e.showUpgradeMessage?e._e():t("div",{staticClass:"discussion-form__group-selected"},[e.discussion.id?e._e():t("recipients-autocomplete",{attrs:{label:e.$t(e.discussion.groupId?"action_dock.notify":"common.action.invite"),placeholder:e.$t("announcement.form.discussion_announced."+(e.discussion.groupId?"notify_helptext":"helptext")),"initial-recipients":e.initialRecipients,hint:e.$t("announcement.form.placeholder"),model:e.discussion,reset:e.reset}}),t(ci.Z,{staticClass:"discussion-form__title-input",attrs:{id:"discussion-title",label:e.$t("discussion_form.title_label"),placeholder:e.$t("discussion_form.title_placeholder"),maxlength:"255",required:""},model:{value:e.discussion.title,callback:function(t){e.$set(e.discussion,"title",t)},expression:"discussion.title"}}),t(_c,{attrs:{subject:e.discussion,field:"title"}}),t(tc,{attrs:{model:e.discussion,field:"description",label:e.$t("discussion_form.context_label"),placeholder:e.$t("discussion_form.context_placeholder")}}),t(km,{attrs:{model:e.discussion}})],1)],1),t(is.h7,{staticClass:"ma-2"},[t(ir,{attrs:{path:"en/user_manual/threads/starting_threads"}}),e.discussion.id?t($s.Z,{staticClass:"discussion-form__edit-layout",on:{click:e.openEditLayout}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.edit",expression:"'thread_arrangement_form.edit'"}]})]):e._e(),t(yn.Z),t($s.Z,{staticClass:"discussion-form__submit",attrs:{color:"primary",disabled:e.submitIsDisabled,loading:e.discussion.processing},on:{click:function(t){return e.submit()}}},[e.discussion.id?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"discussion_form.start_thread",expression:"'discussion_form.start_thread'"}]}),e.discussion.id?t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}]}):e._e()])],1)],1)},Lg=[],Dg={components:{RecipientsAutocomplete:bm},props:{discussion:Object,isPage:Boolean,user:Object},data:function(){return{tab:0,upgradeUrl:i.baseUrl+"upgrade",submitIsDisabled:!1,searchResults:[],subscription:this.discussion.group().parentOrSelf().subscription,groupItems:[],initialRecipients:[]}},mounted:function(){return jt.users.fetchGroups(),this.watchRecords({collections:["groups","memberships"],query:e=>this.updateGroupItems()})},watch:{"discussion.groupId":{immediate:!0,handler:function(e){var t;return this.subscription=this.discussion.group().parentOrSelf().subscription,t=(0,l.compact)([this.user]).map((function(e){return{id:e.id,type:"user",name:e.nameOrEmail(),user:e}})),this.initialRecipients=[],this.initialRecipients=this.initialRecipients.concat(t),this.discussion.private=this.discussion.privateDefaultValue(),this.reset=!this.reset}}},methods:{submit:function(){var e;return e=this.discussion.id?"updated":"created",this.discussion.save().then((t=>{var o;return o=t.discussions[0].key,D.$emit("closeModal"),jt.discussions.findOrFetchById(o,{},!0).then((t=>(Fn.success(`discussion_form.messages.${e}`),this.$router.push(this.urlFor(t)))))})).catch((e=>!0))},updateGroupItems:function(){return this.groupItems=[{text:this.$t("discussion_form.none_invite_only_thread"),value:null}].concat(Rt.user().groups().map((function(e){return{text:e.fullName,value:e.id}})))},openEditLayout:function(){return zn.actions(this.discussion,this)["edit_arrangement"].perform()}},computed:{maxThreads:function(){return this.subscription.max_threads},threadCount:function(){return this.discussion.group().parentOrSelf().orgDiscussionsCount},maxThreadsReached:function(){return this.maxThreads&&this.threadCount>=this.maxThreads},subscriptionActive:function(){return this.subscription.active},canStartThread:function(){return this.subscriptionActive&&!this.maxThreadsReached},showUpgradeMessage:function(){return!this.discussion.id&&!this.canStartThread},isMovingItems:function(){return this.discussion.forkedEventIds.length}}},Fg=Dg,Ug=(0,Ut.Z)(Fg,Eg,Lg,!1,null,null,null),zg=Ug.exports,Bg=function(){var e=this,t=e._self._c;return e.discussion.template&&e.discussion.id?t(Tc.Z,{attrs:{color:"info",outlined:""}},[t("div",{staticClass:"d-flex align-center"},[t("div",{directives:[{name:"t",rawName:"v-t",value:"templates.this_thread_is_a_template",expression:"'templates.this_thread_is_a_template'"}]}),t(yn.Z),t($s.Z,{attrs:{to:"/d/new?template_id="+e.discussion.id}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"templates.make_a_copy",expression:"'templates.make_a_copy'"}]})])],1)]):e._e()},Vg=[],Hg={props:{discussion:Object}},Gg=Hg,Wg=(0,Ut.Z)(Gg,Bg,Vg,!1,null,null,null),Kg=Wg.exports,Yg=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"start-discussion-page max-width-800 px-0 px-sm-3"},[e.discussion?t(Kg,{attrs:{discussion:e.discussion}}):e._e(),t(ns.Z,[e.discussion?t(zg,{key:e.discussion.id,attrs:{discussion:e.discussion,"is-page":"",user:e.user}}):e._e(),!e.discussion&&e.groupId?t("div",[t("choose-template",{attrs:{"group-id":e.groupId}})],1):e._e()],1)],1)],1)},Qg=[],Jg=function(){var e=this,t=e._self._c;return t("div",[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"discussion_form.thread_templates",expression:"'discussion_form.thread_templates'"}],staticClass:"headline",attrs:{tabindex:"-1"}})]),t(rs.Z,[t(zo.Z,{attrs:{to:"/d/new?blank_template=1&group_id="+e.groupId}},[t(Vo.km,[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"discussion_form.blank",expression:"'discussion_form.blank'"}]})],1)],1),e._l(e.templates,(function(o){return t(zo.Z,{key:o.id,attrs:{to:"/d/new?template_id="+o.id}},[t(Vo.km,[t(Vo.V9,[e._v(e._s(o.title))])],1)],1)})),t(zo.Z,{attrs:{to:"/d/new?new_template=1&group_id="+e.$route.query.group_id}},[t(Vo.km,[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"discussion_form.new_template",expression:"'discussion_form.new_template'"}]})],1)],1)],2)],1)},Xg=[],ev={props:{groupId:Number,discussion:Object},data:function(){return{templates:[]}},mounted:function(){return jt.discussions.fetch({params:{group_id:this.groupId,filter:"templates",exclude_types:"user poll",per:50}}),this.watchRecords({key:`newDiscussionInGroup${this.groupId}`,collections:["discussions"],query:()=>this.templates=jt.discussions.collection.chain().find({groupId:this.groupId,template:!0}).data()})}},tv=ev,ov=(0,Ut.Z)(tv,Jg,Xg,!1,null,null,null),sv=ov.exports,nv={components:{ChooseTemplate:sv},data:function(){return{discussion:null,isDisabled:!1,groupId:null,user:null}},mounted:function(){return this.init()},watch:{"$route.query.group_id":"init","$route.query.blank_template":"init","$route.query.new_template":"init","$route.query.template_id":"init","$route.params.key":"init"},methods:{init:function(){var e,t;return this.discussion=null,this.$route.params.key?jt.discussions.findOrFetchById(this.$route.params.key).then((e=>this.discussion=e.clone())):(e=parseInt(this.$route.query.template_id))?jt.discussions.findOrFetchById(e).then((e=>{if(this.discussion=e.cloneTemplate(),e.groupId&&ms.canStartThread(e.group()))return this.discussion.groupId=e.groupId})):(this.groupId=parseInt(this.$route.query.group_id))?this.$route.query.blank_template?jt.groups.findOrFetchById(this.groupId).then((()=>this.discussion=jt.discussions.build({title:this.$route.query.title,groupId:this.groupId,descriptionFormat:Rt.defaultFormat()}))):this.$route.query.new_template?jt.groups.findOrFetchById(this.groupId).then((()=>this.discussion=jt.discussions.build({title:this.$route.query.title,groupId:this.groupId,template:!0,descriptionFormat:Rt.defaultFormat()}))):this.discussion=null:(t=parseInt(this.$route.query.user_id))?jt.users.findOrFetchById(t).then((e=>(this.user=e,this.discussion=jt.discussions.build({title:this.$route.query.title,groupId:null,descriptionFormat:Rt.defaultFormat()})))):this.discussion=jt.discussions.build({title:this.$route.query.title,descriptionFormat:Rt.defaultFormat()})}}},iv=nv,rv=(0,Ut.Z)(iv,Yg,Qg,!1,null,null,null),av=rv.exports,lv=function(){var e=this,t=e._self._c;return t(ai.Z,{staticClass:"user-page__profile"},[t(ri.Z,{staticClass:"user-page max-width-800 mt-4 px-0 px-sm-3"},[e.isEmptyUser?t(As):t("div",{staticClass:"user-page__content"},[t(ns.Z,[t(is.EB,[t(ys.Z,{staticClass:"align-center justify-center"},[t("h1",{staticClass:"headline"},[e._v(e._s(e.user.name))])])],1),t(is.ZB,[t(ys.Z,{staticClass:"user-page__info mb-5 align-center justify-center",attrs:{column:""}},[t(Ks,{staticClass:"mb-5",attrs:{user:e.user,size:192,"no-link":!0}}),t("div",{staticClass:"text--secondary"},[e._v("@"+e._s(e.user.username))]),e.user?t(Bl,{attrs:{model:e.user,column:"shortBio"}}):e._e(),e.user.localeName()?t("div",{directives:[{name:"t",rawName:"v-t",value:{path:"user_page.locale_field",args:{value:e.user.localeName()}},expression:"{ path: 'user_page.locale_field', args: { value: user.localeName() } }"}]}):e._e(),t("span",[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.time_zone",expression:"'common.time_zone'"}]}),t("span",[e._v(": "+e._s(e.user.timeZone))])]),e.user.location?t("div",{directives:[{name:"t",rawName:"v-t",value:{path:"user_page.location_field",args:{value:e.user.location}},expression:"{ path: 'user_page.location_field', args: { value: user.location } }"}]}):e._e(),e.user.lastSeenAt?t("div",{directives:[{name:"t",rawName:"v-t",value:{path:"user_page.online_field",args:{value:e.approximate(e.user.lastSeenAt)}},expression:"{ path: 'user_page.online_field', args: { value: approximate(user.lastSeenAt) } }"}]}):e._e(),e.canContactUser?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:{path:"user_page.message_user",args:{name:e.user.firstName()}},expression:"{ path: 'user_page.message_user', args: { name: user.firstName() } }"}],staticClass:"my-4 user-page__contact-user",attrs:{color:"accent",outlined:"",to:"/d/new?user_id="+e.user.id}}):e._e()],1)],1)],1),t(ns.Z,{staticClass:"mt-4 user-page__groups"},[t(is.ZB,[t("h3",{directives:[{name:"t",rawName:"v-t",value:"common.groups",expression:"'common.groups'"}],staticClass:"lmo-h3 user-page__groups-title"}),t(rs.Z,{attrs:{dense:""}},e._l(e.groups,(function(o){return t(zo.Z,{key:o.id,staticClass:"user-page__group",attrs:{to:e.urlFor(o)}},[t(Bo.Z,[t(zs.Z,{staticClass:"mr-2",attrs:{tile:"",size:"48"}},[t("img",{attrs:{src:o.logoUrl}})])],1),t(Vo.V9,[e._v(e._s(o.fullName))])],1)})),1),e.loadingGroupsForExecuting?t(As):e._e()],1)],1)],1)],1)],1)},cv=[],uv={data:function(){return{user:{},isMembershipsFetchingDone:!1,groups:[],canContactUser:!1,loadingGroupsForExecuting:!1}},created:function(){return this.init(),D.$emit("currentComponent",{page:"userPage"}),jt.users.findOrFetchById(this.$route.params.key).then(this.init,(function(e){return D.$emit("pageError",e)}))},methods:{approximate:He,init:function(){if(this.user=(jt.users.find(this.$route.params.key)||jt.users.find({username:this.$route.params.key}))[0])return jt.remote.get("profile/contactable",{user_id:this.user.id}).then((()=>this.canContactUser=!0)),D.$emit("currentComponent",{title:this.user.name,page:"userPage"}),this.loadGroupsFor(this.user),this.watchRecords({key:this.user.id,collections:["groups","memberships"],query:e=>this.groups=this.user.groups()})},loadGroupsFor:function(e){return this.loadingGroupsForExecuting=!0,jt.memberships.fetchByUser(e).then((()=>this.loadingGroupsForExecuting=!1))}},computed:{isEmptyUser:function(){return(0,l.isEmpty)(this.user)}}},dv=uv,pv=(0,Ut.Z)(dv,lv,cv,!1,null,null,null),mv=pv.exports,hv=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"threads-page max-width-1024 px-0 px-sm-3"},[t("h1",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.titleVisible},expression:"{callback: titleVisible}"},{name:"t",rawName:"v-t",value:"sidebar.invite_only_threads",expression:"'sidebar.invite_only_threads'"}],staticClass:"display-1 my-4",attrs:{tabindex:"-1"}}),t(ys.Z,{staticClass:"mb-3"}),e.loader.loading&&0==e.threads.length?t(ns.Z,{staticClass:"mb-3 dashboard-page__loading",attrs:{"aria-hidden":"true"}},[t(rs.Z,{attrs:{"two-line":""}},e._l([1,2,3],(function(e,o){return t(Bt,{key:o,attrs:{lineCount:2}})})),1)],1):t("div",[t("section",{staticClass:"threads-page__loaded"},[0==e.threads.length?t("div",{staticClass:"threads-page__empty"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"threads_page.no_invite_only_threads",expression:"'threads_page.no_invite_only_threads'"}]})]):t("div",{staticClass:"threads-page__collections"},[t(ns.Z,{staticClass:"mb-3 thread-preview-collection__container"},[t(rs.Z,{staticClass:"thread-previews",attrs:{"two-line":""}},e._l(e.threads,(function(e){return t(Gn,{key:e.id,attrs:{thread:e}})})),1)],1)],1)]),t("div",{staticClass:"d-flex align-center justify-center"},[t("div",[t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"members_panel.loaded_of_total",args:{loaded:e.threads.length,total:e.loader.total}},expression:"{path: 'members_panel.loaded_of_total', args: {loaded: threads.length, total: loader.total}}"}],staticClass:"text-center text--secondary"}),e.loader.exhausted?e._e():t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.load_more",expression:"'common.action.load_more'"}],attrs:{loading:e.loader.loading},on:{click:function(t){return e.loader.fetchRecords()}}})],1)])])],1)],1)},_v=[],fv={data:function(){return{threads:[],loader:{}}},created:function(){return D.$on("signedIn",this.init)},beforeDestroy:function(){return D.$off("signedIn",this.init)},mounted:function(){return D.$emit("content-title-visible",!1),D.$emit("currentComponent",{titleKey:this.titleKey,page:"threadsPage",search:{placeholder:this.$t("navbar.search_all_threads")}}),this.init()},watch:{"$route.query":"refresh"},methods:{init:function(){return this.loader=new hs({collection:"discussions",path:"direct",params:{exclude_types:"poll group outcome"}}),this.loader.fetchRecords(),this.watchRecords({key:"dashboard",collections:["discussions"],query:()=>this.threads=jt.discussions.collection.chain().find({groupId:null}).simplesort("lastActivityAt",!0).data()})}}},gv=fv,vv=(0,Ut.Z)(gv,hv,_v,!1,null,null,null),bv=vv.exports,yv=function(){var e=this,t=e._self._c;return e.discussion.forkedEventIds.length?t(Ec.Z,{staticClass:"discussion-fork-actions",style:e.styles,attrs:{"single-line":"",sticky:"",elevation:4,icon:"mdi-call-split",color:"primary"},scopedSlots:e._u([{key:"actions",fn:function(){return[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"discussion_fork_actions.move",expression:"'discussion_fork_actions.move'"}],attrs:{color:"primary"},on:{click:function(t){return e.openMoveCommentsModal()}}}),t($s.Z,{attrs:{icon:""},on:{click:function(t){e.discussion.forkedEventIds=[]}}},[t(Qt.Z,[e._v("mdi-close")])],1)]},proxy:!0}],null,!1,1076397127)},[t("span",{directives:[{name:"t",rawName:"v-t",value:"discussion_fork_actions.helptext",expression:"'discussion_fork_actions.helptext'"}]})]):e._e()},wv=[],xv={props:{discussion:Object},methods:{openMoveCommentsModal:function(){return Un({component:"MoveCommentsModal",props:{discussion:this.discussion}})}},computed:{styles:function(){var e,t;return({bar:e,top:t}=this.$vuetify.application),{display:"flex",position:"sticky",top:`${e+t}px`,zIndex:1}}}},kv=xv,Cv=(0,Ut.Z)(kv,yv,wv,!1,null,null,null),Zv=Cv.exports,Iv=function(){var e=this,t=e._self._c;return t("h3",{staticClass:"strand-item__headline thread-item__title text-body-2 pb-1",attrs:{tabindex:"-1"}},[t("div",{staticClass:"d-flex align-center"},[e._t("headline",(function(){return[t("span",{staticClass:"strand-item__headline text--secondary",domProps:{innerHTML:e._s(e.headline)}})]})),t(Mn,{staticClass:"text--secondary"}),t("router-link",{staticClass:"text--secondary text-body-2",attrs:{to:e.link}},[t(Xn,{attrs:{date:e.datetime}})],1),e.event.pinned?t(Mn):e._e(),e.event.pinned?t(Qt.Z,[e._v("mdi-pin-outline")]):e._e()],2)])},Av=[],$v={props:{event:Object,eventable:Object,collapsed:Boolean,dateTime:Date},computed:{datetime:function(){return this.dateTime||this.eventable.castAt||this.eventable.createdAt},headline:function(){var e;return e=this.event.actor(),"new_comment"===this.event.kind&&this.collapsed&&this.event.descendantCount>0?this.$t("reactions_display.name_and_count_more",{name:e.nameWithTitle(this.eventable.group()),count:this.event.descendantCount}):this.$t(ng(this.event,!0),{author:e.nameWithTitle(this.eventable.group()),username:e.username,key:this.event.model().key,title:ig(this.event),polltype:this.$t(rg(this.event)).toLowerCase()})},link:function(){return Pt.event(this.event)}}},Sv=$v,Nv=(0,Ut.Z)(Sv,Iv,Av,!1,null,null,null),Tv=Nv.exports,jv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"strand-list"},e._l(e.directedCollection,(function(o){return t("div",{key:o.event.id,staticClass:"strand-item",class:{"strand-item--deep":o.event.depth>1}},[!e.newestFirst&&o.missingEarlierCount?t("div",{staticClass:"strand-item__row"},[e._m(0,!0),t("strand-load-more",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{once:!0,callback:(t,s)=>t&&e.loader.autoLoadBefore(o)},expression:"{once: true, callback: (isVisible, entry) => isVisible && loader.autoLoadBefore(obj)}"}],attrs:{label:{path:"common.action.count_more",args:{count:o.missingEarlierCount}},loading:e.loader.loading=="before"+o.event.id},on:{click:function(t){return e.loader.loadBefore(o.event)}}})],1):e._e(),e.newestFirst&&o.missingAfterCount?t("div",{staticClass:"strand-item__row"},[e._m(1,!0),t("strand-load-more",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{once:!0,callback:(t,s)=>t&&e.loader.autoLoadAfter(o)},expression:"{once: true, callback: (isVisible, entry) => isVisible && loader.autoLoadAfter(obj)}"}],attrs:{label:{path:"common.action.count_more",args:{count:o.missingAfterCount}},loading:e.loader.loading=="after"+o.event.id},on:{click:function(t){return e.loader.loadAfter(o.event)}}})],1):e._e(),e.loader.collapsed[o.event.id]?e._e():t("div",{staticClass:"strand-item__row"},[o.event.depth>0?t("div",{staticClass:"strand-item__gutter"},[t("div",{staticClass:"d-flex justify-center"},[e.loader.discussion.forkedEventIds.length?t(Jm.Z,{staticClass:"thread-item__is-forking",attrs:{disabled:o.event.forkingDisabled()},on:{change:function(e){return o.event.toggleForking()}},model:{value:o.event.isForking(),callback:function(t){e.$set(o.event,"isForking()",t)},expression:"obj.event.isForking()"}}):[t(Ks,{attrs:{user:o.event.actor(),size:o.event.depth>1?28:36,"no-link":""}})]],2),t("div",{staticClass:"strand-item__stem-wrapper",on:{click:function(t){return t.stopPropagation(),e.loader.collapse(o.event)}}},[t("div",{staticClass:"strand-item__stem",class:{"strand-item__stem--unread":o.isUnread,"strand-item__stem--focused":e.isFocused(o.event)}})])]):e._e(),t("div",{staticClass:"strand-item__main",staticStyle:{overflow:"hidden"}},[t("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:(t,s)=>e.loader.setVisible(t,o.event)},expression:"{callback: (isVisible, entry) => loader.setVisible(isVisible, obj.event)}"}],class:e.classes(o.event)},[o.eventable&&o.eventable.discardedAt?t("strand-item-removed",{attrs:{event:o.event,eventable:o.eventable}}):t(e.componentForKind(o.event.kind),{tag:"component",attrs:{event:o.event,eventable:o.eventable}})],1),o.event.childCount?t("div",{staticClass:"strand-list__children"},[0==o.children.length?t("strand-load-more",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{once:!0,callback:(t,s)=>t&&e.loader.loadChildren(o.event)},expression:"{once: true, callback: (isVisible, entry) => isVisible && loader.loadChildren(obj.event)}"}],attrs:{label:{path:"common.action.count_more",args:{count:o.missingChildCount}},loading:e.loader.loading=="children"+o.event.id},on:{click:function(t){return e.loader.loadChildren(o.event)}}}):e._e(),t(Cy,{staticClass:"flex-grow-1",attrs:{loader:e.loader,collection:o.children,"newest-first":"new_discussion"==o.event.kind&&e.loader.discussion.newestFirst}})],1):e._e(),t("reply-form",{attrs:{eventId:o.event.id}})],1)]),e.loader.collapsed[o.event.id]?t("div",{staticClass:"strand-item__row"},[t("div",{staticClass:"d-flex align-center"},[e.loader.collapsed[o.event.id]?t("div",{staticClass:"strand-item__circle mr-2",on:{click:function(t){return t.stopPropagation(),e.loader.expand(o.event)}}},[t(Qt.Z,[e._v("mdi-unfold-more-horizontal")])],1):e._e(),t(Tv,{staticClass:"text--secondary",attrs:{event:o.event,eventable:o.eventable,collapsed:""}})],1)]):e._e(),e.newestFirst&&o.missingEarlierCount?t("div",{staticClass:"strand-item__row"},[t("strand-load-more",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{once:!0,callback:(t,s)=>t&&e.loader.autoLoadBefore(o)},expression:"{once: true, callback: (isVisible, entry) => isVisible && loader.autoLoadBefore(obj)}"}],attrs:{label:{path:"common.action.count_more",args:{count:o.missingEarlierCount}},loading:e.loader.loading=="before"+o.event.id},on:{click:function(t){return e.loader.loadBefore(o.event)}}})],1):e._e(),!e.newestFirst&&o.missingAfterCount?t("div",{staticClass:"strand-item__row"},[t("strand-load-more",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{once:!0,callback:(t,s)=>t&&e.loader.autoLoadAfter(o)},expression:"{once: true, callback: (isVisible, entry) => isVisible && loader.autoLoadAfter(obj)}"}],attrs:{label:{path:"common.action.count_more",args:{count:o.missingAfterCount}},loading:e.loader.loading=="after"+o.event.id},on:{click:function(t){return e.loader.loadAfter(o.event)}}})],1):e._e()])})),0)},Pv=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"strand-item__gutter"},[t("div",{staticClass:"strand-item__stem-wrapper"},[t("div",{staticClass:"strand-item__stem strand-item__stem--broken"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"strand-item__gutter"},[t("div",{staticClass:"strand-item__stem-wrapper"},[t("div",{staticClass:"strand-item__stem strand-item__stem--broken"})])])}],Ov=function(){var e=this,t=e._self._c;return t("section",{staticClass:"strand-item__new-comment new-comment",attrs:{id:"comment-"+e.eventable.id}},[t(Tv,{attrs:{event:e.event,eventable:e.eventable}}),t(Bl,{staticClass:"thread-item__body new-comment__body",attrs:{model:e.eventable,column:"body"}}),t(Ir,{attrs:{model:e.eventable}}),t(Yd,{attrs:{model:e.eventable}}),t(Bd,{attrs:{attachments:e.eventable.attachments}}),t(In,{attrs:{model:e.eventable,actions:e.dockActions,"menu-actions":e.menuActions,small:"",left:""}})],1)},Rv=[],qv=new class{actions(e,t,o){return e.authorId===Rt.userId,{translate_comment:{name:"common.action.translate",icon:"mdi-translate",dock:2,canPerform:function(){return e.body&&ms.canTranslate(e)},perform:function(){return Rt.user()&&e.translate(Rt.user().locale)}},notification_history:{name:"action_dock.notification_history",icon:"mdi-alarm-check",menu:!0,perform:function(){return Un({component:"AnnouncementHistory",props:{model:e}})},canPerform:function(){return!e.discardedAt}},react:{dock:1,canPerform:function(){return!e.discardedAt&&ms.canAddComment(e.discussion())}},reply_to_comment:{name:"common.action.reply",icon:"mdi-reply",dock:1,canPerform:function(){return ms.canRespondToComment(e)},perform:function(){return o.depth===e.discussion().maxDepth?D.$emit("toggle-reply",e,o.parentId):D.$emit("toggle-reply",e,o.id)}},edit_comment:{name:"common.action.edit",icon:"mdi-pencil",dock:1,canPerform:function(){return!e.discardedAt&&e.authorIs(Rt.user())&&ms.canEditComment(e)},perform:function(){return Un({component:"EditCommentForm",maxWidth:800,props:{comment:e.clone()}})}},admin_edit_comment:{name:"common.action.edit",icon:"mdi-pencil",menu:!0,canPerform:function(){return!e.authorIs(Rt.user())&&ms.canEditComment(e)},perform:function(){return Un({component:"EditCommentForm",props:{comment:e.clone()}})}},show_history:{name:"action_dock.edited",icon:"mdi-history",dock:3,canPerform:function(){return e.edited()&&(!e.discardedAt||e.discussion().adminsInclude(Rt.user()))},perform:function(){return Un({component:"RevisionHistoryModal",props:{model:e}})}},discard_comment:{name:"common.action.discard",icon:"mdi-delete-outline",menu:!0,canPerform:function(){return ms.canDiscardComment(e)},perform:function(){return e.discard()}},undiscard_comment:{name:"common.action.restore",icon:"mdi-delete-restore",menu:!0,canPerform:function(){return ms.canUndiscardComment(e)},perform:function(){return e.undiscard()}},delete_comment:{name:"common.action.delete",icon:"mdi-delete",menu:!0,canPerform:function(){return ms.canDeleteComment(e)},perform:function(){return Un({component:"ConfirmModal",props:{confirm:{submit:function(){return e.destroy().then((function(){return window.location.reload()}))},text:{title:"delete_comment_dialog.title",helptext:"delete_comment_dialog.question",confirm:"delete_comment_dialog.title",flash:"comment_form.messages.destroyed"}}}})}}}}},Mv=new class{actions(e,t){return{move_event:{name:"action_dock.move_item",menu:!0,icon:"mdi-call-split",kinds:["new_discussion","poll_created","new_comment"],perform:function(){return e.discussion().forkedEventIds.push(e.id)},canPerform:function(){return!e.model().discardedAt&&ms.canMoveThread(e.discussion())}},pin_event:{name:"action_dock.pin_event",icon:"mdi-pin-outline",menu:!0,kinds:["new_comment","poll_created"],canPerform:function(){return!e.model().discardedAt&&ms.canPinEvent(e)},perform:function(){return Un({component:"PinEventForm",props:{event:e}})}},unpin_event:{name:"action_dock.unpin_event",icon:"mdi-pin-off",menu:!0,kinds:["new_comment","poll_created"],canPerform:function(){return!e.model().discardedAt&&ms.canUnpinEvent(e)},perform:function(){return e.unpin().then((function(){return Fn.success("activity_card.event_unpinned")}))}},copy_url:{icon:"mdi-link",menu:!0,kinds:["new_comment","poll_created","stance_created","stance_updated"],canPerform:function(){return!e.model().discardedAt},perform:function(){var t;return t=Pt.event(e,{},{absolute:!0}),navigator.clipboard.writeText(t).then((function(){return Fn.success("action_dock.url_copied")}))}}}}},Ev={props:{event:Object,eventable:Object},data:function(){return{confirmOpts:null,commentActions:qv.actions(this.eventable,this,this.event),eventActions:Mv.actions(this.event,this)}},computed:{dockActions:function(){return(0,l.assign)((0,l.pickBy)(this.commentActions,(function(e){return e.dock})),(0,l.pick)(this.eventActions,[]))},menuActions:function(){var e;return e=(0,l.assign)((0,l.pick)(this.eventActions,["pin_event","unpin_event","move_event","copy_url"]),(0,l.pickBy)(this.commentActions,(function(e){return e.menu}))),(0,l.pick)(e,["pin_event","unpin_event","reply_to_comment","admin_edit_comment","copy_url","notification_history","move_event","discard_comment","undiscard_comment"])}}},Lv=Ev,Dv=(0,Ut.Z)(Lv,Ov,Rv,!1,null,null,null),Fv=Dv.exports,Uv=function(){var e=this,t=e._self._c;return t("div",{staticClass:"thread-title"},[t("h1",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.titleVisible},expression:"{callback: titleVisible}"}],staticClass:"text-h4 context-panel__heading py-3",attrs:{id:"sequence-0",tabindex:"-1"}},[e.discussion.translation.title?e._e():t("span",[e._v(e._s(e.discussion.title))]),e.discussion.translation.title?t("span",[t(El,{attrs:{model:e.discussion,field:"title"}})],1):e._e(),"pinned"==e.status?t("i",{staticClass:"mdi mdi-pin-outline context-panel__heading-pin"}):e._e()])])},zv=[],Bv={props:{discussion:Object},computed:{status:function(){if(this.discussion.pinned)return"pinned"}}},Vv=Bv,Hv=(0,Ut.Z)(Vv,Uv,zv,!1,null,null,null),Gv=Hv.exports,Wv=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.viewed,once:!0},expression:"{callback: viewed, once: true}"}],staticClass:"strand-new-discussion context-panel",attrs:{id:"context"}},[t(ys.Z,{staticClass:"ml-n2",attrs:{"align-center":"",wrap:""}},[t(Hu.Z,{staticClass:"context-panel__breadcrumbs",attrs:{items:e.groups},scopedSlots:e._u([{key:"divider",fn:function(){return[t(Qt.Z,[e._v("mdi-chevron-right")])]},proxy:!0}])}),t(yn.Z),e.discussion.private?t(qo.Z,{attrs:{small:"",outlined:"",title:e.$t("discussion_form.privacy_private")}},[t("i",{staticClass:"mdi mdi-lock-outline mr-1"}),t("span",{directives:[{name:"t",rawName:"v-t",value:"common.privacy.private",expression:"'common.privacy.private'"}]})]):e._e(),e.discussion.private?e._e():t(qo.Z,{attrs:{small:"",outlined:"",title:e.$t("discussion_form.privacy_public")}},[t("i",{staticClass:"mdi mdi-earth mr-1"}),t("span",{directives:[{name:"t",rawName:"v-t",value:"common.privacy.public",expression:"'common.privacy.public'"}]})])],1),t(Gv,{attrs:{discussion:e.discussion}}),e.discussion.tags.length?t("div",{staticClass:"my-1 mb-2"},[t(Uo,{attrs:{model:e.discussion}})],1):e._e(),t("div",{staticClass:"mb-2"},[t(Ks,{staticClass:"mr-2",attrs:{user:e.author,size:36}}),t("router-link",{staticClass:"text--secondary",attrs:{to:e.urlFor(e.author)}},[e._v(e._s(e.authorName))]),t(Mn),t("router-link",{staticClass:"text--secondary",attrs:{to:e.urlFor(e.discussion)}},[t(Xn,{attrs:{date:e.discussion.createdAt}})],1),t("span",{directives:[{name:"show",rawName:"v-show",value:e.discussion.seenByCount>0,expression:"discussion.seenByCount > 0"}]},[t(Mn),t("a",{directives:[{name:"t",rawName:"v-t",value:{path:"thread_context.seen_by_count",args:{count:e.discussion.seenByCount}},expression:"{ path: 'thread_context.seen_by_count', args: { count: discussion.seenByCount } }"}],staticClass:"context-panel__seen_by_count",on:{click:function(t){return e.openSeenByModal()}}})],1),t("span",{directives:[{name:"show",rawName:"v-show",value:null!=e.discussion.usersNotifiedCount,expression:"discussion.usersNotifiedCount != null"}]},[t(Mn),t("a",{directives:[{name:"t",rawName:"v-t",value:{path:"thread_context.count_notified",args:{count:e.discussion.usersNotifiedCount}},expression:"{ path: 'thread_context.count_notified', args: { count: discussion.usersNotifiedCount} }"}],staticClass:"context-panel__users_notified_count",on:{click:e.actions.notification_history.perform}})],1)],1),e.collapsed?e._e():[t(Bl,{staticClass:"context-panel__description",attrs:{model:e.discussion,column:"description"}}),t(Ir,{attrs:{model:e.discussion}}),t(Yd,{attrs:{model:e.discussion}}),t(Bd,{attrs:{attachments:e.discussion.attachments}}),t(In,{staticClass:"py-2",attrs:{model:e.discussion,actions:e.dockActions,"menu-actions":e.menuActions}})],e.discussion.newestFirst?t("strand-actions-panel",{attrs:{discussion:e.discussion}}):e._e()],2)},Kv=[],Yv=function(){var e=this,t=e._self._c;return t(ys.Z,{staticClass:"comment-form"},[t("div",{staticClass:"thread-item__avatar mr-3"},[t(Ks,{attrs:{user:e.comment.author()||e.actor,size:e.comment.parentId?28:36}})],1),t("form",{staticClass:"thread-item__body comment-form__body",on:{submit:function(t){return t.preventDefault(),e.submit()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null}}},[t(lc,{attrs:{value:e.comment.processing}}),t(tc,{staticClass:"ml-n1",attrs:{model:e.comment,field:"body",placeholder:e.placeholder,autofocus:e.autofocus,shouldReset:e.shouldReset},on:{"is-uploading":e.handleIsUploading},scopedSlots:e._u([{key:"actions",fn:function(){return[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:e.comment.isNew()?"comment_form.post_comment":"common.action.save",expression:"comment.isNew() ? 'comment_form.post_comment' : 'common.action.save' "}],staticClass:"comment-form__submit-button",attrs:{disabled:!e.canSubmit,color:"primary",type:"submit"}})]},proxy:!0}])}),e.comment.saveFailed?t(Tc.Z,{attrs:{color:"error"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.something_went_wrong",expression:"'common.something_went_wrong'"}]}),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"common.please_try_again",expression:"'common.please_try_again'"}]})],1):e._e()],1)])},Qv=[],Jv={props:{comment:Object,autofocus:Boolean},data:function(){return{actor:Rt.user(),canSubmit:!0,shouldReset:!1}},computed:{placeholder:function(){return this.comment.parentId?this.$t("comment_form.in_reply_to",{name:this.comment.parent().author().name}):this.$t("comment_form.aria_label")}},methods:{handleIsUploading:function(e){return this.canSubmit=!e},submit:function(){return this.comment.save().then((()=>{var e;return this.$emit("comment-submitted"),this.shouldReset=!this.shouldReset,e=this.comment.isNew()?this.comment.isReply()?"comment_form.messages.replied":"comment_form.messages.created":"comment_form.messages.updated",Fn.success(e,{name:this.comment.isReply()?this.comment.parent().author().name:void 0})})).catch((e=>Fn.error("common.something_went_wrong")))}}},Xv=Jv,eb=(0,Ut.Z)(Xv,Yv,Qv,!1,null,null,null),tb=eb.exports,ob=o(56975),sb=o(33163),nb=o(67731),ib=function(){var e=this,t=e._self._c;return t("section",{key:e.discussion.id,staticClass:"actions-panel",class:{"mt-2 px-2 px-sm-4":!e.discussion.newestFirst},attrs:{id:"add-comment"}},[t(em.Z,{attrs:{"aria-hidden":"true"}}),t($_.Z,{staticClass:"activity-panel__actions mb-3",attrs:{grow:"",text:""},model:{value:e.currentAction,callback:function(t){e.currentAction=t},expression:"currentAction"}},[t(nb.Z),t(A_.Z,{attrs:{href:"#add-comment"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"activity_card.add_comment",expression:"'activity_card.add_comment'"}]})]),e.canStartPoll?t(A_.Z,{staticClass:"activity-panel__add-poll",attrs:{href:"#add-poll"}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common.run_process",expression:"'poll_common.run_process'"}]})]):e._e()],1),t(sb.Z,{model:{value:e.currentAction,callback:function(t){e.currentAction=t},expression:"currentAction"}},[t(ob.Z,{attrs:{value:"add-comment"}},[t("div",{staticClass:"add-comment-panel"},[e.canAddComment?t(tb,{attrs:{comment:e.newComment},on:{"comment-submitted":e.resetComment}}):e._e(),e.canAddComment?e._e():t("div",{staticClass:"add-comment-panel__join-actions"},[e.isLoggedIn()?t(b_,{attrs:{group:e.discussion.group(),block:!0}}):e._e(),e.isLoggedIn()?e._e():t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"comment_form.sign_in",expression:"'comment_form.sign_in'"}],staticClass:"add-comment-panel__sign-in-btn",on:{click:function(t){return e.signIn()}}})],1)],1)]),e.canStartPoll?t(ob.Z,{attrs:{value:"add-poll"}},[t("div",{staticClass:"poll-common-start-form ma-3"},[e.poll?t(kh,{attrs:{poll:e.poll},on:{setPoll:e.setPoll,saveSuccess:e.resetPoll}}):e._e(),e.poll?e._e():t("poll-common-choose-template-wrapper",{attrs:{discussion:e.discussion,group:e.discussion.group()},on:{setPoll:e.setPoll}})],1)]):e._e()],1)],1)},rb=[],ab=function(){var e=this,t=e._self._c;return t("div",[e.selectedGroup.isNullGroup?t("div",{staticClass:"poll-templates-select-group"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"templates.which_templates_would_you_like_to_use",expression:"'templates.which_templates_would_you_like_to_use'"}]}),t(rs.Z,e._l(e.groups,(function(o){return t(zo.Z,{key:o.id,on:{click:function(t){return e.selectGroup(o)}}},[t(Bo.Z,{attrs:{"aria-hidden":"true"}},[o.parentId?e._e():t(Zi,{attrs:{group:o}})],1),t(Vo.km,[t(Vo.V9,[e._v(e._s(o.name))])],1)],1)})),1)],1):t("poll-common-choose-template",{attrs:{discussion:e.discussion,group:e.selectedGroup},on:{setPoll:e.setPoll}})],1)},lb=[],cb={components:{PollCommonChooseTemplate:jh},props:{discussion:Object,group:Object},data:function(){return{selectedGroup:this.group}},created:function(){return this.watchRecords({collections:["groups"],query:e=>this.fillGroups()})},methods:{fillGroups:function(){var e,t,o;return e=new F,e.isNullGroup=!1,e.name=M.t("templates.loomio_default_templates"),o=[e],t=Rt.user().groupIds(),jt.groups.collection.chain().find({id:{$in:t},archivedAt:null,parentId:null}).data().forEach((function(e){return e.pollTemplatesCount&&o.push(e),jt.groups.collection.chain().find({id:{$in:t},archivedAt:null,parentId:e.id}).data().forEach((function(e){if(e.pollTemplatesCount)return o.push(e)}))})),this.groups=o},selectGroup:function(e){return this.selectedGroup=e},setPoll:function(e){return this.$emit("setPoll",e)}}},ub=cb,db=(0,Ut.Z)(ub,ab,lb,!1,null,null,null),pb=db.exports,mb={components:{PollCommonForm:kh,PollCommonChooseTemplateWrapper:pb},mixins:[x_],props:{discussion:Object},data:function(){return{canAddComment:!1,currentAction:"add-comment",newComment:null,poll:null}},created:function(){return this.watchRecords({key:this.discussion.id,collections:["groups","memberships"],query:e=>this.canAddComment=ms.canAddComment(this.discussion)}),this.resetComment()},methods:{resetComment:function(){return this.newComment=jt.comments.build({bodyFormat:Rt.defaultFormat(),discussionId:this.discussion.id,authorId:Rt.user().id})},setPoll:function(e){return this.poll=e},resetPoll:function(){return this.poll=null,this.currentAction="add-comment"},signIn:function(){return this.openAuthModal()},isLoggedIn:function(){return Rt.isSignedIn()}},watch:{"discussion.id":()=>((void 0).resetComment(),(void 0).resetPoll())},computed:{canStartPoll:function(){return ms.canStartPoll(this.discussion)}}},hb=mb,_b=(0,Ut.Z)(hb,ib,rb,!1,null,null,null),fb=_b.exports,gb={components:{StrandActionsPanel:fb},props:{event:Object,eventable:Object,collapsed:Boolean},watch:{"eventable.newestFirst":function(){return this.actions=(0,l.omit)(zn.actions(this.eventable,this),["dismiss_thread"])}},data:function(){return{actions:(0,l.omit)(zn.actions(this.eventable,this),["dismiss_thread"])}},mounted:function(){return this.eventable.fetchUsersNotifiedCount()},computed:{author:function(){return this.discussion.author()},authorName:function(){return this.discussion.authorName()},discussion:function(){return this.eventable},group:function(){return this.discussion.group()},dockActions:function(){return(0,l.pickBy)(this.actions,(function(e){return e.dock}))},menuActions:function(){return(0,l.pickBy)(this.actions,(function(e){return e.menu}))},status:function(){if(this.discussion.pinned)return"pinned"},groups:function(){return this.discussion.group().parentsAndSelf().map((e=>({text:e.name,disabled:!1,to:this.urlFor(e)})))}},methods:{viewed:function(e){if(e)return this.discussion.markAsSeen()},openSeenByModal:function(){return Un({component:"SeenByModal",props:{discussion:this.discussion}})}}},vb=gb,bb=(0,Ut.Z)(vb,Wv,Kv,!1,null,null,null),yb=bb.exports,wb=function(){var e=this,t=e._self._c;return t("section",{staticClass:"strand-item__discussion-edited",attrs:{id:"'outcome-'+ eventable.id"}},[t(Tv,{attrs:{event:e.event,eventable:e.eventable,"dateTime:":"","event.createdAt":""}}),t("p",[e._v(e._s(e.event.recipientMessage))])],1)},xb=[],kb={props:{event:Object,eventable:Object}},Cb=kb,Zb=(0,Ut.Z)(Cb,wb,xb,!1,null,null,null),Ib=Zb.exports,Ab=function(){var e=this,t=e._self._c;return t("section",{staticClass:"strand-item poll-created"},[t(ys.Z,{attrs:{"justify-space-between":""}},[t("div",{staticClass:"poll-common-card__title headline pb-1",attrs:{tabindex:"-1"}},[t(Ro),e.poll.translation.title?e._e():t("router-link",{attrs:{to:e.urlFor(e.poll)}},[e._v(e._s(e.poll.title))]),e.poll.translation.title?t(El,{attrs:{model:e.poll,field:"title"}}):e._e(),t(Uo,{attrs:{model:e.poll}})],1)]),e.collapsed?e._e():t("div",{staticClass:"pt-2"},[e.poll.outcome()?e._e():t(_p,{attrs:{poll:e.poll}}),e.poll.outcome()?t(cp,{attrs:{outcome:e.poll.outcome()}}):e._e(),t("div",{staticClass:"poll-common-details-panel__started-by text--secondary mb-4"},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_card.poll_type_by_name",args:{name:e.poll.authorName(),poll_type:e.poll.translatedPollTypeCaps()}},expression:"{ path: 'poll_card.poll_type_by_name', args: { name: poll.authorName(), poll_type: poll.translatedPollTypeCaps() } }"}]}),t(Mn),t(Yt,{attrs:{poll:e.poll}})],1),t(Bl,{staticClass:"poll-common-details-panel__details",attrs:{model:e.poll,column:"details"}}),t(Ir,{attrs:{model:e.poll}}),t(Bd,{attrs:{attachments:e.poll.attachments}}),t(Yd,{attrs:{model:e.poll}}),t(Td,{attrs:{poll:e.poll}}),t(Vu,{attrs:{poll:e.poll}}),t(In,{staticClass:"my-2",attrs:{actions:e.dockActions,"menu-actions":e.menuActions}})],1)],1)},$b=[],Sb={props:{event:Object,collapsed:Boolean,eventable:Object},created:function(){return D.$on("stanceSaved",(()=>D.$emit("refreshStance"))),this.watchRecords({collections:["stances","polls"],query:e=>(this.pollActions=ld.actions(this.poll,this,this.event),this.eventActions=Mv.actions(this.event,this),this.myStance=this.poll.myStance())})},beforeDestroy:function(){return D.$off("stanceSaved")},data:function(){return{buttonPressed:!1,myStance:null,pollActions:null,eventActions:null}},computed:{poll:function(){return this.eventable},menuActions:function(){return(0,l.assign)((0,l.pickBy)(this.pollActions,(function(e){return e.menu})),(0,l.pickBy)(this.eventActions,(function(e){return e.menu})))},dockActions:function(){return(0,l.pickBy)(this.pollActions,(function(e){return e.dock}))}}},Nb=Sb,Tb=(0,Ut.Z)(Nb,Ab,$b,!1,null,null,null),jb=Tb.exports,Pb=function(){var e=this,t=e._self._c;return t("section",{staticClass:"strand-item__stance-created stance-created",attrs:{id:"'comment-'+ eventable.id",event:e.event}},[e.eventable.castAt?[e.eventable.hasOptionIcon()?[t("div",{staticClass:"d-flex"},[t(e.componentType,{tag:"component",staticClass:"text--secondary",attrs:{to:e.actor&&e.urlFor(e.actor)}},[e._v(e._s(e.actorName))]),t(Ro),t(Ro),e.poll.showResults()?t(Su,{attrs:{poll:e.poll,"stance-choice":e.eventable.stanceChoice()}}):e._e(),t(Ro),t("router-link",{staticClass:"text--secondary",attrs:{to:e.link}},[t(Ro),t(Xn,{attrs:{date:e.eventable.updatedAt||e.eventable.castAt}})],1),e.eventable.latest?e._e():[t(Mn,{staticClass:"text--secondary"}),t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common.superseded",expression:"'poll_common.superseded'"}],staticClass:"text--secondary"})]],2)]:e._e(),e.poll.showResults()&&!e.collapsed?t("div",{staticClass:"poll-common-stance"},[e.eventable.hasOptionIcon()?e._e():t(ys.Z,{attrs:{wrap:"","align-center":""}},[t(Tv,{staticClass:"text--secondary",attrs:{event:e.event,eventable:e.eventable,dateTime:e.eventable.updatedAt||e.eventable.castAt}})],1),t(Ap,{attrs:{stance:e.eventable}}),t(Bl,{staticClass:"poll-common-stance-created__reason",attrs:{model:e.eventable,column:"reason"}}),t(Ir,{attrs:{model:e.eventable}}),t(Bd,{attrs:{attachments:e.eventable.attachments}})],1):e._e(),t(In,{attrs:{model:e.eventable,actions:e.actions,small:"",left:""}})]:[t("div",{staticClass:"d-flex"},[t(e.componentType,{tag:"component",staticClass:"text--secondary",attrs:{to:e.actor&&e.urlFor(e.actor)}},[e._v(e._s(e.actorName))]),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_votes_panel.undecided",expression:"'poll_common_votes_panel.undecided'"}]}),t(Ro),t("router-link",{staticClass:"text--secondary",attrs:{to:e.link}},[t(Xn,{attrs:{date:e.eventable.updatedAt}})],1)],1),t(In,{attrs:{model:e.eventable,actions:e.actions,small:""}})]],2)},Ob=[],Rb={props:{event:Object,eventable:Object,collapsed:Boolean},computed:{actor:function(){return this.event.actor()},actorName:function(){return this.event.actorName()},poll:function(){return this.eventable.poll()},actions:function(){return ad.actions(this.eventable,this,this.event)},componentType:function(){return this.actor?"router-link":"div"},link:function(){return Pt.event(this.event)}}},qb=Rb,Mb=(0,Ut.Z)(qb,Pb,Ob,!1,null,null,null),Eb=Mb.exports,Lb=function(){var e=this,t=e._self._c;return t("stance-updated",{attrs:{event:e.event,eventable:e.eventable,collapsed:e.collapsed}})},Db=[],Fb={components:{StanceUpdated:Eb},props:{event:Object,eventable:Object,collapsed:Boolean}},Ub=Fb,zb=(0,Ut.Z)(Ub,Lb,Db,!1,null,null,null),Bb=zb.exports,Vb=function(){var e=this,t=e._self._c;return t("section",{staticClass:"outcome-created strand-item__outcome-created",attrs:{id:"'outcome-'+ eventable.id"}},[t(Tv,{attrs:{event:e.event,eventable:e.eventable}})],1)},Hb=[],Gb={props:{event:Object,eventable:Object},computed:{dockActions:function(){return ip.actions(this.eventable,this)},menuActions:function(){return(0,l.pick)(Mv.actions(this.event,this),["pin_event","unpin_event","notification_history"])}}},Wb=Gb,Kb=(0,Ut.Z)(Wb,Vb,Hb,!1,null,null,null),Yb=Kb.exports,Qb=function(){var e=this,t=e._self._c;return t("section",{staticClass:"strand-item__removed"},[t("h3",{staticClass:"strand-item__headline text-body-2 pb-1 d-flex align-center text--secondary"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_item.removed",expression:"'thread_item.removed'"}]}),t(Mn),t(Xn,{attrs:{date:e.eventable.discardedAt}})],1),t(In,{attrs:{model:e.eventable,"menu-actions":e.menuActions,small:""}})],1)},Jb=[],Xb={props:{event:Object,eventable:Object},computed:{menuActions:function(){return"new_comment"===this.event.kind?(0,l.pick)(qv.actions(this.eventable,this),"undiscard_comment","delete_comment"):{}}}},ey=Xb,ty=(0,Ut.Z)(ey,Qb,Jb,!1,null,null,null),oy=ty.exports,sy=function(){var e=this,t=e._self._c;return t("div",{staticClass:"strand-item__load-more"},[t($s.Z,{staticClass:"action-button",attrs:{block:"",text:"",outlined:"",loading:e.loading},on:{click:function(t){return e.$emit("click")}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:e.label,expression:"label"}]})])],1)},ny=[],iy={props:{label:Object,loading:Boolean}},ry=iy,ay=(0,Ut.Z)(ry,sy,ny,!1,null,null,null),ly=ay.exports,cy=function(){var e=this,t=e._self._c;return t("div",{staticClass:"strand-other-kind"},[t("span",{staticClass:"text--secondary",domProps:{innerHTML:e._s(e.headline)}}),t(Mn,{staticClass:"text--secondary"}),t(Xn,{staticClass:"text--secondary",attrs:{date:e.event.createdAt}}),t(Bl,{staticClass:"thread-item__body",attrs:{model:e.eventable,column:"statement"}})],1)},uy=[],dy={props:{event:Object,eventable:Object},computed:{headline:function(){var e;return e=this.event.actor(),this.$t(ng(this.event,!0),{author:e.nameWithTitle(this.eventable.group()),username:e.username,key:this.event.model().key,title:ig(this.event),polltype:this.$t(rg(this.event)).toLowerCase()})}}},py=dy,my=(0,Ut.Z)(py,cy,uy,!1,null,null,null),hy=my.exports,_y=function(){var e=this,t=e._self._c;return e.show?t("div",{staticClass:"reply-form"},[t(tb,{attrs:{comment:e.newComment,"avatar-size":"36",autofocus:""},on:{"comment-submitted":function(t){e.show=!1},"cancel-reply":function(t){e.show=!1}}})],1):e._e()},fy=[],gy={props:{eventId:Number},data:function(){return{show:!1,newComment:null}},created:function(){return D.$on("toggle-reply",((e,t)=>{var o,s;if(t===this.eventId){if(!this.show)return o="",s=e.author(),s.id!==Rt.user().id&&(o="html"===Rt.defaultFormat()?`<p><span class="mention" data-mention-id="${s.username}" label="${s.name}">@${s.name}</span></p>`:`@${s.username} `),this.newComment=jt.comments.build({bodyFormat:Rt.defaultFormat(),body:o,discussionId:e.discussion().id,authorId:Rt.user().id,parentId:e.id,parentType:(0,l.startCase)(e.constructor.singular)}),this.show=!0;if(Ql.okToLeave(this.newComment))return this.show=!1}}))},destroyed:function(){}},vy=gy,by=(0,Ut.Z)(vy,_y,fy,!1,null,null,null),yy=by.exports,wy={name:"strand-list",props:{loader:Object,newestFirst:Boolean,collection:{type:Array,required:!0}},components:{StrandList:Cy,NewDiscussion:yb,NewComment:Fv,PollCreated:jb,StanceCreated:Eb,StanceUpdated:Bb,OutcomeCreated:Yb,OtherKind:hy,StrandLoadMore:ly,DiscussionEdited:Ib,StrandItemRemoved:oy,ReplyForm:yy},computed:{directedCollection:function(){return this.newestFirst?this.collection.reverse():this.collection}},methods:{isFocused:function(e){return 1===e.depth&&e.position===this.loader.focusAttrs.position||e.positionKey===this.loader.focusAttrs.positionKey||e.sequenceId===this.loader.focusAttrs.sequenceId||"Comment"===e.eventableType&&e.eventableId===this.loader.focusAttrs.commentId},positionKeyPrefix:function(e){return e.depth<1?e.positionKey.split("-").slice(0,e.depth-1):null},componentForKind:function(e){return(0,l.camelCase)(["stance_created","stance_updated","discussion_edited","new_comment","outcome_created","poll_created","new_discussion"].includes(e)?e:"other_kind")},classes:function(e){return e?["lmo-action-dock-wrapper",`positionKey-${e.positionKey}`,`sequenceId-${e.sequenceId}`,`position-${e.position}`]:[]}}},xy=wy,ky=(0,Ut.Z)(xy,jv,Pv,!1,null,null,null),Cy=ky.exports,Zy=function(){var e=this,t=e._self._c;return t(an.Z,{staticClass:"strand-card thread-card mb-8"},[t(Cy,{staticClass:"pt-3 pr-1 pr-sm-3 px-sm-2",attrs:{loader:e.loader,collection:e.loader.collection}}),e.discussion.newestFirst?e._e():t("strand-actions-panel",{attrs:{discussion:e.discussion}})],1)},Iy=[];var Ay,$y={components:{StrandActionsPanel:fb},props:{loader:Object},computed:{discussion:function(){return this.loader.discussion},canStartPoll:function(){return ms.canStartPoll(this.discussion)},canEditThread:function(){return ms.canEditThread(this.discussion)}}},Sy=$y,Ny=(0,Ut.Z)(Sy,Zy,Iy,!1,null,null,null),Ty=Ny.exports,jy=o(52646),Py=function(){var e=this,t=e._self._c;return e.discussion?t(jy.Z,{staticClass:"lmo-no-print disable-select thread-sidebar",attrs:{permanent:e.$vuetify.breakpoint.mdAndUp,width:"230px",app:"",fixed:"",right:"",clipped:"",color:"background",floating:""},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t("div",{staticClass:"mt-12"}),t("div",{staticClass:"strand-nav__toc"},e._l(e.items,(function(o){return t("router-link",{key:o.key,staticClass:"strand-nav__entry text-caption",class:{"strand-nav__entry--visible":o.visible,"strand-nav__entry--selected":o.sequenceId==e.selectedSequenceId||o.commentId==e.selectedCommentId,"strand-nav__entry--unread":o.unread},style:{"border-width":2*o.depth+"px"},attrs:{to:e.baseUrl+"/"+o.sequenceId}},[o.poll?t("div",{staticClass:"strand-nav__stance-icon-container"},[t(No,{staticClass:"poll-proposal-chart-panel__chart mr-1",attrs:{poll:o.poll,"show-my-stance":"",size:18,stanceSize:12}})],1):e._e(),t("span",[e._v(e._s(o.title))])])})),1)]):e._e()},Oy=[],Ry={props:{discussion:Object,loader:Object},data:function(){return{open:null,items:[],visibleKeys:[],baseUrl:""}},computed:{selectedSequenceId:function(){return parseInt(this.$route.params.sequence_id)},selectedCommentId:function(){return parseInt(this.$route.params.comment_id)}},methods:{buildItems:function(e){var t,o,s,n,i;return s={},this.baseUrl=this.urlFor(this.discussion),e.forEach((e=>s[e[0]]={key:e[0],title:null,headings:[],sequenceId:e[1],createdAt:e[2],actorId:e[3],visible:!1,depth:e[4],descendantCount:e[5],unread:this.loader.sequenceIdIsUnread(e[1]),poll:null,stance:null,visible:this.visibleKeys.includes(e[0])})),jt.events.collection.chain().find({discussionId:this.discussion.id}).simplesort("positionKey",this.discussion.newestFirst).data().forEach((e=>{var t;if("poll_created"!==e.kind||(t=e.model().poll(),!t.discardedAt))return s[e.positionKey]={key:e.positionKey,commentId:"Comment"===e.eventableType?e.eventableId:null,sequenceId:e.sequenceId,createdAt:e.createdAt,actorId:e.actorId,title:e.pinned?e.pinnedTitle||e.fillPinnedTitle():null,visible:!1,unread:this.loader.sequenceIdIsUnread(e.sequenceId),headings:[],depth:e.depth,descendantCount:e.descendantCount,visible:this.visibleKeys.includes(e.positionKey),poll:t,stance:t&&t.myStance()||null}})),o=Object.values(s),this.discussion.newestFirst?(n=[],i=[],o.forEach(((e,t)=>{if(1===e.depth)return i.push(t)})),i.reverse(),i.forEach((e=>{var t,s;return t=o[e],s=o.slice(e,e+t.descendantCount+1),Array.prototype.push.apply(n,s)})),this.items=n):this.items=o,t=this.discussion.createdEvent(),this.items.unshift({key:t.positionKey,title:this.$t("activity_card.context"),headings:[],sequenceId:0,visible:this.visibleKeys.includes(t.positionKey),unread:!1,event:t,poll:null,stance:null,depth:1,descendantCount:0})}},mounted:function(){var e;return D.$on("toggleThreadNav",(()=>this.open=!this.open)),jt.events.fetch({params:{exclude_types:"group discussion",discussion_id:this.discussion.id,pinned:!0,per:200}}),e=[],jt.events.remote.fetch({path:"timeline",params:{discussion_id:this.discussion.id}}).then((t=>(e=t,this.buildItems(e)))),this.watchRecords({key:"thread-nav"+this.discussion.id,collections:["events","discussions"],query:()=>{if(e.length)return this.buildItems(e)}}),D.$on("visibleKeys",(e=>(this.visibleKeys=e,this.items.forEach((e=>e.visible=this.visibleKeys.includes(e.key))))))}},qy=Ry,My=(0,Ut.Z)(qy,Py,Oy,!1,null,null,null),Ey=My.exports,Ly=function(){var e=this,t=e._self._c;return e.event&&e.$route.params.sequence_id!=e.event.sequenceId?t(ns.Z,{staticClass:"current-poll-banner mb-4 py-2 px-4 lmo-no-print",style:e.styles,attrs:{elevation:3,"aria-label":e.$t("thread_context.current_poll_type_banner",{pollType:e.poll.translatedPollType()})}},[t(zs.Z,{staticClass:"mr-4",attrs:{size:36,tile:""}},[t(No,{attrs:{poll:e.poll,size:36}})],1),t("div",{staticClass:"current-poll-banner__title mr-4"},[t("span",[e._v(e._s(e.poll.title))])]),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.view",expression:"'common.view'"}],attrs:{color:"primary",to:e.urlFor(e.event)}})],1):e._e()},Dy=[],Fy={props:{discussion:Object},data:function(){return{poll:null}},created:function(){return this.watchRecords({collections:["polls","stances"],query:e=>this.poll=(0,l.find)(this.discussion.activePolls().filter((function(e){return e.pollOptionNames.length})),(function(e){return e.closingAt&&ms.canParticipateInPoll(e)&&!e.iHaveVoted()}))})},computed:{styles:function(){var e,t;return({bar:e,top:t}=this.$vuetify.application),{display:"flex",position:"sticky",top:`${e+t}px`,zIndex:1}},event:function(){return this.poll&&this.poll.createdEvent()}}},Uy=Fy,zy=(0,Ut.Z)(Uy,Ly,Dy,!1,null,null,null),By=zy.exports,Vy=function(){var e=this,t=e._self._c;return t("div",{staticClass:"strand-page"},[t(ai.Z,[e.discussion?t(ri.Z,{staticClass:"max-width-800 px-0 px-sm-3"},[e.discussion.groupId?t("demo-banner",{attrs:{group:e.discussion.group()}}):e._e(),t(By,{attrs:{discussion:e.discussion}}),t(Zv,{key:"fork-actions"+e.discussion.id,attrs:{discussion:e.discussion}}),t(Kg,{attrs:{discussion:e.discussion}}),e.loader?t(Ty,{attrs:{loader:e.loader}}):e._e()],1):e._e()],1),e.loader?t(Ey,{key:e.discussion.id,attrs:{discussion:e.discussion,loader:e.loader}}):e._e()],1)},Hy=[],Gy=class{constructor(e){this.discussion=e,this.reset()}reset(){return this.collection=s.ZP.observable([]),this.rules=[],this.ruleStrings=[],this.fetchedRules=[],this.readRanges=(0,l.cloneDeep)(this.discussion.readRanges),this.focusAttrs={},this.visibleKeys={},this.collapsed=s.ZP.observable({}),this.loading=!1,this.padding=50,this.maxAutoLoadMore=50}firstUnreadSequenceId(){return(N.subtractRanges(this.discussion.ranges,this.readRanges)[0]||[])[0]}setVisible(e,t){return e&&t.markAsRead(),this.visibleKeys[t.positionKey]=e,D.$emit("visibleKeys",Object.keys(this.visibleKeys).filter((e=>this.visibleKeys[e])).sort())}collapse(e){return Object.keys(this.visibleKeys).forEach((t=>{if(t.startsWith(e.positionKey))return this.visibleKeys[t]=!1})),s.ZP.set(this.collapsed,e.id,!0)}isUnread(e){return"new_discussion"===e.kind?this.discussion.updatedAt>this.discussion.lastReadAt:!N.includesValue(this.readRanges,e.sequenceId)}sequenceIdIsUnread(e){return 0===e?this.discussion.updatedAt>this.discussion.lastReadAt:!N.includesValue(this.readRanges,e)}expand(e){return s.ZP.set(this.collapsed,e.id,!1)}jumpToEarliest(){return this.addLoadOldestFirstRule(),this.fetch()}jumpToLatest(){return this.addLoadNewestFirstRule(),this.fetch()}jumpToUnread(){return this.addLoadUnreadRule(),this.fetch()}jumpToSequenceId(e){return this.addLoadSequenceIdRule(e),this.fetch()}loadEverything(){return this.loading=!0,this.addRuleAndFetch({local:{find:{discussionId:this.discussion.id}},remote:{discussion_id:this.discussion.id,per:1e3}})}autoLoadAfter(e){if(!this.discussion.newestFirst&&1===e.event.depth||e.missingAfterCount&&e.missingAfterCount<this.maxAutoLoadMore)return this.loadAfter(e.event)}loadChildren(e){return this.addLoadChildrenRule(e),this.fetch()}loadAfter(e){return this.addLoadAfterRule(e),this.fetch()}autoLoadBefore(e){if(this.discussion.newestFirst&&1===e.event.depth||e.missingEarlierCount&&e.missingEarlierCount<this.maxAutoLoadMore)return this.loadBefore(e.event)}loadBefore(e){return this.loading="before"+e.id,this.addLoadBeforeRule(e),this.fetch()}addLoadAfterRule(e){return this.addRule({name:`load after ${e.positionKey}`,local:{find:{discussionId:this.discussion.id,positionKey:{$jgt:e.positionKey}},simplesort:"positionKey",limit:this.padding},remote:{discussion_id:this.discussion.id,position_key_gt:e.positionKey,order_by:"position_key",per:this.padding}})}addLoadBeforeRule(e){return this.addRule({name:`load before ${e.positionKey}`,local:{find:{discussionId:this.discussion.id,positionKey:{$jlt:e.positionKey}},simplesort:"positionKey",simplesortDesc:!0,limit:this.padding},remote:{discussion_id:this.discussion.id,position_key_lt:e.positionKey,order_by:"position_key",order_desc:1,per:this.padding}})}addLoadChildrenRule(e){return this.addRule({name:`load children ${e.positionKey}`,local:{find:{discussionId:this.discussion.id,parentId:e.id},simplesort:"positionKey",simplesortDesc:!0,limit:this.padding},remote:{discussion_id:this.discussion.id,parent_id:e.id,order_by:"position_key",order_desc:1,per:this.padding}})}addLoadCommentRule(e){return this.addRule({name:"comment from url",local:{find:{discussionId:this.discussion.id,eventableId:e,eventableType:"Comment"}},remote:{order:"sequence_id",discussion_id:this.discussion.id,comment_id:e}})}addLoadPositionRule(e){return this.addRule({name:"position from url",local:{find:{discussionId:this.discussion.id,depth:1,position:{$gte:e}},simplesort:"positionKey",limit:this.padding},remote:{discussion_id:this.discussion.id,from_sequence_id_of_position:e,order:"position_key"}})}addLoadPositionKeyRule(e){return this.loading=e,this.addRule({name:"positionKey from url",local:{find:{discussionId:this.discussion.id,positionKey:{$jgte:e}},simplesort:"positionKey",limit:parseInt(this.padding/2)},remote:{discussion_id:this.discussion.id,position_key_gte:e,order_by:"position_key",per:parseInt(this.padding/2)}}),this.addRule({name:"positionKey rollback",local:{find:{discussionId:this.discussion.id,positionKey:{$jlt:e}},simplesort:"positionKey",simplesortDesc:!0,limit:parseInt(this.padding/2)},remote:{discussion_id:this.discussion.id,position_key_lt:e,order_by:"position_key",order_desc:1,per:parseInt(this.padding/2)}})}addLoadSequenceIdRule(e){var t;return t=(0,l.max)([parseInt(e)-parseInt(this.padding/2),0]),this.loading=t,this.addRule({name:"sequenceId from url",local:{find:{discussionId:this.discussion.id,sequenceId:{$jgte:t}},simplesort:"sequenceId",limit:this.padding},remote:{sequence_id_gte:t,discussion_id:this.discussion.id,order:"sequence_id",per:this.padding}})}addLoadNewestRule(){return this.addRule({local:{find:{discussionId:this.discussion.id},simplesort:"sequenceId",simplesortDesc:!0,limit:this.padding},remote:{discussion_id:this.discussion.id,order_by:"sequence_id",order_desc:!0,per:this.padding}})}addContextRule(){return this.addRule({name:"context",local:{find:{id:this.discussion.createdEvent().id}}})}addLoadOldestRule(){return this.addRule({name:"oldest",local:{find:{discussionId:this.discussion.id},simplesort:"sequenceId",limit:this.padding},remote:{discussion_id:this.discussion.id,order_by:"sequence_id",per:this.padding}})}addLoadUnreadRule(){var e;return this.discussion.updatedAt>this.discussion.lastReadAt&&this.addRule({name:"context updated",local:{find:{id:this.discussion.createdEvent().id}}}),e=(0,l.max)([this.firstUnreadSequenceId()-parseInt(this.padding/2),this.discussion.firstSequenceId()]),this.addRule({name:{path:"strand_nav.new_to_you"},local:{find:{discussionId:this.discussion.id,sequenceId:{$jgte:e}},limit:this.padding,order:"sequenceId"},remote:{discussion_id:this.discussion.id,sequence_id_gte:e,order_by:"sequence_id",per:this.padding}})}addRule(e){var t;return t=JSON.stringify(e),!this.ruleStrings.includes(t)&&(this.rules.push(e),this.ruleStrings.push(t),!0)}addRuleAndFetch(e){if(this.addRule(e))return this.fetch()}fetch(){var e,t;return e=[],t=this.rules.filter((function(e){return e.remote})).filter((e=>!this.fetchedRules.includes(JSON.stringify(e.remote)))).map((t=>{var o;return e.push(JSON.stringify(t.remote)),o=Object.assign({},t.remote,{exclude_types:"group discussion"}),jt.events.fetch({params:o})})),Promise.all(t).finally((()=>(this.fetchedRules=(0,l.uniq)(this.fetchedRules.concat(e)),this.loading=!1)))}updateCollection(){var e,t,o,s;return this.records=[],this.rules.forEach((e=>{var t;return t=jt.events.collection.chain(),t.find(e.local.find),e.local.simplesort&&(t=t.simplesort(e.local.simplesort,e.local.simplesortDesc)),e.local.limit&&(t=t.limit(e.local.limit)),this.records=this.records.concat(t.data())})),this.records=(0,l.uniq)(this.records.concat((0,l.compact)(this.records.map((function(e){return e.parent()}))))),this.records=(0,l.orderBy)(this.records,"positionKey"),e=this.records.map((function(e){return e.id})),s=this.records.filter((function(t){return null===t.parentId||!e.includes(t.parentId)})),t={},this.records.forEach((e=>t[e.parentId]=(t[e.parentId]||[]).concat([e]))),o=function(e){return e.map((function(e){return{event:e,children:t[e.id]&&o(t[e.id])||[],eventable:e.model()}}))},this.collection=o(s),this.addMetaData(this.collection),D.$emit("collectionUpdated",this.discussion.id),this.collection}addMetaData(e){var t,o,s,n;return s=e.map((function(e){return e.event.position})),n=N.arrayToRanges(s),o=e[0]&&e[0].event&&e[0].event.parent(),t=o&&e[0].event.parent().childCount||0,e.forEach((e=>{var s,i,r,a,c,u;if(e.isUnread=this.isUnread(e.event),s=(0,l.some)(n,(function(t){return t[0]===e.event.position})),i=(0,l.last)(n)[1]===e.event.position,c=o&&1!==e.event.position&&s,e.missingEarlierCount=0,c&&(r=1,u=0,n.forEach((function(t){return t[0]===e.event.position?u=e.event.position-r:r=t[1]})),e.missingEarlierCount=u),a=0!==t&&i&&e.event.position!==t,e.missingAfterCount=a&&t-(0,l.last)(n)[1]||0,e.missingChildCount=e.event.childCount-e.children.length,e.children.length)return this.addMetaData(e.children)}))}},Wy={components:{DemoBanner:z_},data:function(){return{discussion:null,loader:null,position:0,group:null,discussionFetchError:null,lastFocus:null}},mounted:function(){return this.init()},watch:{"$route.params.key":"init","$route.params.comment_id":"init","$route.params.sequence_id":"respondToRoute","$route.params.comment_id":"respondToRoute","$route.query.p":"respondToRoute","$route.query.k":"respondToRoute"},methods:{init:function(){return jt.discussions.findOrFetchById(this.$route.params.key,{exclude_types:"poll outcome"}).then((e=>(e.group().newHost&&(window.location.host=e.group().newHost),this.discussion=e,this.loader=new Gy(this.discussion),this.respondToRoute(),D.$emit("currentComponent",{focusHeading:!1,page:"threadPage",discussion:this.discussion,group:this.discussion.group(),title:this.discussion.title}),this.watchRecords({key:"strand"+this.discussion.id,collections:["events"],query:()=>this.loader.updateCollection()})))).catch((function(e){if(D.$emit("pageError",e),403===e.status&&!Rt.isSignedIn())return D.$emit("openAuthModal")}))},focusSelector:function(){return this.loader.focusAttrs.newest?this.discussion.lastSequenceId()?`.sequenceId-${this.discussion.lastSequenceId()}`:"#add-comment":this.loader.focusAttrs.unread?this.loader.firstUnreadSequenceId()?`.sequenceId-${this.loader.firstUnreadSequenceId()}`:".context-panel":this.loader.focusAttrs.oldest?".context-panel":this.loader.focusAttrs.commentId?`#comment-${this.loader.focusAttrs.commentId}`:this.loader.focusAttrs.sequenceId?`.sequenceId-${this.loader.focusAttrs.sequenceId}`:this.loader.focusAttrs.position?`.position-${this.loader.focusAttrs.position}`:this.loader.focusAttrs.positionKey?`.positionKey-${this.loader.focusAttrs.positionKey}`:void 0},scrollToFocusIfPresent:function(){var e;if(e=this.focusSelector(),document.querySelector(e))return this.scrollTo(e),this.lastFocus=e},scrollToFocusUnlessFocused:function(){var e;if(e=this.focusSelector(),this.lastFocus!==e)return this.scrollTo(e),this.lastFocus=e},elementInView:function(e){var t;return t=e.getBoundingClientRect(),t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},refocusIfOffscreen:function(){var e;if(this.lastFocus&&(e=document.querySelector(this.lastFocus)&&!this.elementInView(e)))return console.log(`refocusing ${this.lastFocus}`),this.scrollTo(this.lastFocus)},respondToRoute:function(){if(this.discussion&&this.discussion.key===this.$route.params.key&&0!==this.discussion.createdEvent.childCount)return this.$route.query.k&&(this.loader.addLoadPositionKeyRule(this.$route.query.k),this.loader.focusAttrs={positionKey:this.$route.query.k}),this.$route.query.p&&(this.loader.addLoadPositionRule(parseInt(this.$route.params.p)),this.loader.focusAttrs={position:this.$route.query.p}),this.$route.params.sequence_id&&(this.loader.addLoadSequenceIdRule(parseInt(this.$route.params.sequence_id)),this.loader.focusAttrs={sequenceId:parseInt(this.$route.params.sequence_id)}),this.$route.params.comment_id&&(this.loader.addLoadCommentRule(parseInt(this.$route.params.comment_id)),this.loader.addLoadNewestRule(),this.loader.focusAttrs={commentId:parseInt(this.$route.params.comment_id)}),0===this.loader.rules.length&&(this.discussion.newestFirst?(this.loader.addLoadNewestRule(),this.loader.focusAttrs={newest:1}):this.discussion.lastReadAt?0===this.discussion.unreadItemsCount()?(this.loader.addLoadNewestRule(),this.loader.focusAttrs={newest:1}):(this.loader.addLoadUnreadRule(),this.loader.focusAttrs={unread:1}):(this.loader.addLoadOldestRule(),this.loader.focusAttrs={oldest:1})),this.loader.addContextRule(),this.scrollToFocusIfPresent(),this.loader.fetch().finally((()=>setTimeout((()=>this.scrollToFocusUnlessFocused())))).catch((e=>console.log("promises failed",e)))}}},Ky=Wy,Yy=(0,Ut.Z)(Ky,Vy,Hy,!1,null,null,null),Qy=Yy.exports,Jy=function(){var e=this,t=e._self._c;return t(ai.Z,[t(ri.Z,{staticClass:"templates-page max-width-1024 px-0 px-sm-3"},[t("h1",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.titleVisible},expression:"{callback: titleVisible}"},{name:"t",rawName:"v-t",value:"templates.try_loomio",expression:"'templates.try_loomio'"}],staticClass:"display-1 my-4",attrs:{tabindex:"-1"}}),t("div",{staticClass:"d-flex justify-center"},[t("iframe",{staticClass:"mx-auto",attrs:{width:"560",height:"315",src:"https://www.youtube-nocookie.com/embed/oIEKA9WTIDc",title:"Loomio demo group introduction",frameborder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture;",allowfullscreen:""}})]),t(oc.Z,{attrs:{value:e.processing}}),e.loaded?t("div",{staticClass:"d-flex justify-center mt-8"},[t("div",[t("p",{directives:[{name:"t",rawName:"v-t",value:"templates.watch_then_start",expression:"'templates.watch_then_start'"}]}),e._l(e.demos,(function(o){return t("p",{key:o.id,staticClass:"text-center"},[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"templates.start_demo",expression:"'templates.start_demo'"}],attrs:{color:"primary"},on:{click:function(t){return e.startDemo(o.id)}}})],1)}))],2)]):e._e()],1)],1)},Xy=[],ew=o(58440);Ay=null;var tw=new class{boot(){var e;if(i.plausible_site)return e=new URL(i.plausible_src),Ay=(0,ew.Z)({domain:i.plausible_site,apiHost:e.origin,trackLocalhost:!0})}trackPageview(){if(Ay)return Ay.trackPageview()}trackEvent(e){if(Ay)return Ay.trackEvent(e)}},ow={mixins:[x_],data:function(){return{templates:[],loaded:!1,processing:!1,trials:i.features.app.trials}},created:function(){return D.$on("signedIn",this.init)},beforeDestroy:function(){return D.$off("signedIn",this.init)},mounted:function(){return D.$emit("content-title-visible",!1),D.$emit("currentComponent",{titleKey:"templates.try_loomio",page:"threadsPage",search:{placeholder:this.$t("navbar.search_all_threads")}}),this.init()},watch:{"$route.query":"refresh"},methods:{init:function(){return jt.fetch({path:"demos"}).then((e=>this.loaded=!0)),this.watchRecords({key:"demosIndex",collections:["demos"],query:()=>this.demos=jt.demos.collection.chain().find({id:{$ne:null}}).simplesort("priority",!0).data()})},startDemo:function(e){return Rt.isSignedIn()?this.cloneTemplate(e):this.openAuthModal()},cloneTemplate:function(e){return tw.trackEvent("start_demo"),Fn.wait("templates.generating_demo"),this.processing=!0,jt.post({path:"demos/clone",params:{id:e}}).then((e=>(Fn.success("templates.demo_created"),this.$router.push(this.urlFor(jt.groups.find(e.groups[0].id)))))).finally((()=>this.processing=!1))}}},sw=ow,nw=(0,Ut.Z)(sw,Jy,Xy,!1,null,null,null),iw=nw.exports,rw=o(78345);const aw=rw.ZP.prototype.push;var lw,cw;rw.ZP.prototype.push=function(e,t,o){return t||o?aw.call(this,e,t,o):aw.call(this,e).catch((e=>e))},s.ZP.use(rw.ZP),lw=[{path:"tags/:tag?",component:Nf,meta:{noScroll:!0}},{path:"polls",component:rf,meta:{noScroll:!0}},{path:"members",component:Cf,meta:{noScroll:!0}},{path:"membership_requests",component:tg,meta:{noScroll:!0}},{path:"members/requests",redirect:"membership_requests",meta:{noScroll:!0}},{path:"subgroups",component:qf,meta:{noScroll:!0}},{path:"files",component:zf,meta:{noScroll:!0}},{path:":stub?",component:X_,meta:{noScroll:!0}}],cw=new rw.ZP({mode:"history",scrollBehavior:function(e,t,o){return o||(e.meta.noScroll&&t.meta.noScroll?window.scrollHeight:{x:0,y:0})},routes:[{path:"/try",component:iw},{path:"/users/sign_in",redirect:"/dashboard"},{path:"/users/sign_up",redirect:"/dashboard"},{path:"/tasks",component:r_},{path:"/dashboard",component:bi},{path:"/dashboard/:filter",component:bi},{path:"/threads/direct",component:bv},{path:"/inbox",component:Mi},{path:"/explore",component:Xi},{path:"/profile",component:xc},{path:"/contact",component:Cg},{path:"/email_preferences",component:Mg},{path:"/p/:key/edit",component:qh},{path:"/p/new",component:qh},{path:"/p/:key/:stub?",component:Xp},{path:"/poll_templates/new",component:e_},{path:"/poll_templates/:id/edit",component:e_},{path:"/u/:key/:stub?",component:mv},{path:"/d/new",component:av},{path:"/d/:key/edit",component:av},{path:"/d/:key",component:Qy,children:[{path:"comment/:comment_id"},{path:":stub?/:sequence_id?"},{path:""}]},{path:"/g/new",component:vg},{path:"/g/:key",component:G_,children:lw,name:"groupKey"},{path:"/:key",component:G_,children:lw},{path:"/",redirect:"/dashboard"}]}),cw.beforeEach((function(e,t,o){return Ql.okToLeave()?o():o(!1)})),cw.afterEach((function(){return Ql.clear()}));var uw,dw,pw,mw,hw,_w,fw,gw,vw,bw,yw,ww,xw,kw,Cw,Zw,Iw,Aw=cw,$w=function(){var e=this,t=e._self._c;return t(ai.Z,{staticClass:"pb-12"},[t(ri.Z,[t("div",{staticClass:"error-page text-center"},[403==e.error.status?t("div",{directives:[{name:"t",rawName:"v-t",value:"error_page.forbidden_view",expression:"'error_page.forbidden_view'"}],staticClass:"error-page__forbidden"}):e._e(),404==e.error.status?t("div",{directives:[{name:"t",rawName:"v-t",value:"error_page.page_not_found",expression:"'error_page.page_not_found'"}],staticClass:"error-page__page-not-found"}):e._e(),500==e.error.status?t("div",{directives:[{name:"t",rawName:"v-t",value:"error_page.internal_server_error",expression:"'error_page.internal_server_error'"}],staticClass:"error-page__internal-server-error"}):e._e()])])],1)},Sw=[],Nw={props:["error"]},Tw=Nw,jw=(0,Ut.Z)(Tw,$w,Sw,!1,null,null,null),Pw=jw.exports,Ow=o(23073),Rw=o(4217),qw=function(){var e=this,t=e._self._c;return t(Rw.Z,{staticClass:"flash-root",attrs:{top:"",color:"success"==e.flash.level?"primary":e.flash.level,timeout:e.flash.duration},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[e.flash.message?t("span",{directives:[{name:"t",rawName:"v-t",value:{path:e.flash.message,args:e.flash.options},expression:"{path: flash.message, args: flash.options}"}],staticClass:"flash-root__message",attrs:{role:"status","aria-live":"assertive"}}):e._e(),e.flash.text?t("span",{staticClass:"flash-root__message",attrs:{role:"status","aria-live":"assertive"}}):e._e(),"wait"==e.flash.level?t(Ow.Z,{staticClass:"mt-2",attrs:{value:e.seconds}}):e._e(),e.flash.actionFn?t("div",{staticClass:"flash-root__action"},[t("a",{directives:[{name:"t",rawName:"v-t",value:e.flash.action,expression:"flash.action"}],on:{click:function(t){return e.flash.actionFn()}}})]):e._e()],1)},Mw=[],Ew={data:function(){return{flash:{},isOpen:!1,message:"",seconds:0,timer:null}},created:function(){return D.$on("flashMessage",(e=>(this.flash=e,this.isOpen=!0,this.timer=window.setInterval((()=>this.seconds+=3),1e3))))},destroyed:function(){return clearInterval(timer)}},Lw=Ew,Dw=(0,Ut.Z)(Lw,qw,Mw,!1,null,null,null),Fw=Dw.exports,Uw=o(61985),zw=function(){var e=this,t=e._self._c;return t(Uw.Z,[t(ys.Z,{attrs:{"justify-space-around":""}},[t("div",{staticClass:"powered-by caption"},[t("a",{directives:[{name:"t",rawName:"v-t",value:"powered_by.powered_by_loomio",expression:"'powered_by.powered_by_loomio'"}],attrs:{href:e.poweredUrl,target:"_blank"}}),e.privacyUrl?t("span",[e._v("Â "),t(Mn),e._v("Â "),t("a",{directives:[{name:"t",rawName:"v-t",value:"powered_by.privacy_policy",expression:"'powered_by.privacy_policy'"}],attrs:{href:e.privacyUrl,target:"_blank"}})],1):e._e(),e.termsUrl?t("span",[e._v("Â "),t(Mn),e._v("Â "),t("a",{directives:[{name:"t",rawName:"v-t",value:"powered_by.terms_of_service",expression:"'powered_by.terms_of_service'"}],attrs:{href:e.termsUrl,target:"_blank"}})],1):e._e(),e.helpUrl?t("span",[e._v("Â "),t(Mn),e._v("Â "),t("a",{directives:[{name:"t",rawName:"v-t",value:"common.help",expression:"'common.help'"}],attrs:{href:e.helpUrl,target:"_blank"}})],1):e._e()])])],1)},Bw=[],Vw={data:function(){return{privacyUrl:i.theme.privacy_url,helpUrl:i.theme.help_url,termsUrl:i.theme.terms_url,hostname:i.theme.canonical_host,poweredUrl:`https://www.loomio.com?utm_source=${i.theme.canonical_host}&utm_campaign=appfooter`}}},Hw=Vw,Gw=(0,Ut.Z)(Hw,zw,Bw,!1,null,null,null),Ww=Gw.exports,Kw=function(){var e=this,t=e._self._c;return t(va.Z,{ref:"modalLauncher",staticClass:"modal-launcher",attrs:{"max-width":e.maxWidth,persistent:"",fullscreen:e.$vuetify.breakpoint.xs},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[e.isOpen?t(ns.Z,[t(e.componentName,e._b({key:e.componentKey,tag:"component",attrs:{close:e.closeModal}},"component",e.componentProps,!1))],1):e._e()],1)},Yw=[],Qw=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"group-form"},[t(oc.Z,{attrs:{value:e.uploading}},[t(ws.Z,{attrs:{size:"64",value:e.progress}})],1),t(lc,{attrs:{value:e.group.processing}}),t(is.EB,[t(ys.Z,{staticStyle:{"align-items":"center"},attrs:{"justify-space-between":""}},[t("div",{staticClass:"group-form__group-title"},[e.group.parentId?t("h1",{directives:[{name:"t",rawName:"v-t",value:"group_form.subgroup_settings",expression:"'group_form.subgroup_settings'"}],staticClass:"headline",attrs:{tabindex:"-1"}}):e._e(),e.group.parentId?e._e():t("h1",{directives:[{name:"t",rawName:"v-t",value:"group_form.group_settings",expression:"'group_form.group_settings'"}],staticClass:"headline",attrs:{tabindex:"-1"}})]),t(Bh,{attrs:{model:e.group}})],1)],1),t($_.Z,{attrs:{"fixed-tabs":""}},[t(A_.Z,{directives:[{name:"t",rawName:"v-t",value:"group_form.profile",expression:"'group_form.profile'"}]}),t(A_.Z,{directives:[{name:"t",rawName:"v-t",value:"group_form.privacy",expression:"'group_form.privacy'"}],staticClass:"group-form__privacy-tab"}),t(A_.Z,{directives:[{name:"t",rawName:"v-t",value:"group_form.permissions",expression:"'group_form.permissions'"}],staticClass:"group-form__permissions-tab"}),t(A_.Z,{directives:[{name:"t",rawName:"v-t",value:"common.threads",expression:"'common.threads'"}],staticClass:"group-form__thread-defaults-tab"}),t(ob.Z,[t("div",{staticClass:"mt-8 px-4"},[t(Li.Z,{staticClass:"group_form__file-select rounded",attrs:{"aspect-ratio":4,src:e.realGroup.coverUrl},on:{click:function(t){return e.selectCoverPhoto()}}}),t(Zi,{staticClass:"group_form__file-select group_form__logo",attrs:{group:e.realGroup,size:64},on:{click:function(t){return e.selectLogo()}}}),t("div",{staticClass:"v-input"},[t("label",{staticClass:"v-label v-label--active lmo-font-12px"},[t("a",{directives:[{name:"t",rawName:"v-t",value:"group_form.change_cover_image",expression:"'group_form.change_cover_image'"}],on:{click:function(t){return e.selectCoverPhoto()}}}),t(Ro),e._v("(2048x512 px)"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"common.or",expression:"'common.or'"}]}),t(Ro),t("a",{directives:[{name:"t",rawName:"v-t",value:"group_form.change_logo",expression:"'group_form.change_logo'"}],on:{click:function(t){return e.selectLogo()}}}),t(Ro),e._v("(256x256 px)")],1)]),t(ci.Z,{staticClass:"group-form__name mt-4",attrs:{id:"group-name",placeholder:e.$t(e.groupNamePlaceholder),rules:[e.rules.required],maxlength:"255",label:e.$t(e.groupNameLabel)},model:{value:e.group.name,callback:function(t){e.$set(e.group,"name",t)},expression:"group.name"}}),!e.group.parentId||e.group.parentId&&e.group.parent().handle?t("div",[t(ci.Z,{staticClass:"group-form__handle",attrs:{id:"group-handle",hint:e.$t("group_form.group_handle_placeholder",{host:e.hostname,handle:e.group.handle}),maxlength:"100",label:e.$t("group_form.handle")},model:{value:e.group.handle,callback:function(t){e.$set(e.group,"handle",t)},expression:"group.handle"}}),t(_c,{attrs:{subject:e.group,field:"handle"}})],1):e._e(),t(yn.Z),t("input",{ref:"coverPhotoInput",staticClass:"hidden change-picture-form__file-input",attrs:{type:"file",accept:"image/png, image/jpeg, image/webp"},on:{change:e.uploadCoverPhoto}}),t("input",{ref:"logoInput",staticClass:"hidden change-picture-form__file-input",attrs:{type:"file",accept:"image/png, image/jpeg, image/webp"},on:{change:e.uploadLogo}}),t(tc,{staticClass:"group-form__group-description",attrs:{model:e.group,field:"description",placeholder:e.$t("group_form.description_placeholder"),label:e.$t("group_form.description")}}),t(_c,{attrs:{subject:e.group,field:"name"}})],1)]),t(ob.Z,[t("div",{staticClass:"mt-8 px-4"},[t("div",{staticClass:"group-form__section group-form__privacy"},[t(eh.Z,{model:{value:e.group.groupPrivacy,callback:function(t){e.$set(e.group,"groupPrivacy",t)},expression:"group.groupPrivacy"}},e._l(e.privacyOptions,(function(o){return t(Xm.Z,{key:o,class:"group-form__privacy-"+o,attrs:{value:o,"aria-label":o}},[t("template",{slot:"label"},[t("div",{staticClass:"group-form__privacy-title"},[t("strong",{directives:[{name:"t",rawName:"v-t",value:"common.privacy."+o,expression:"'common.privacy.' + privacy"}]}),t(Mn),t("span",[e._v(e._s(e.privacyStringFor(o)))])],1)])],2)})),1),t(_c,{attrs:{subject:e.group,field:"groupPrivacy"}})],1),t("p",{staticClass:"group-form__privacy-statement text--secondary"},[e._v(e._s(e.privacyStatement))]),e.group.privacyIsOpen()?t("div",{staticClass:"group-form__section group-form__joining lmo-form-group"},[t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"group_form.how_do_people_join",expression:"'group_form.how_do_people_join'"}]}),t(eh.Z,{model:{value:e.group.membershipGrantedUpon,callback:function(t){e.$set(e.group,"membershipGrantedUpon",t)},expression:"group.membershipGrantedUpon"}},e._l(["request","approval","invitation"],(function(e){return t(Xm.Z,{key:e,class:"group-form__membership-granted-upon-"+e,attrs:{value:e}},[t("template",{slot:"label"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.membership_granted_upon_"+e,expression:"'group_form.membership_granted_upon_' + granted"}]})])],2)})),1)],1):e._e()])]),t(ob.Z,[t("div",{staticClass:"mt-8 px-4 group-form__section group-form__permissions"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"group_form.permissions_explaination",expression:"'group_form.permissions_explaination'"}],staticClass:"group-form__privacy-statement text--secondary"}),e.group.parentId&&e.group.privacyIsClosed()?t(Jm.Z,{staticClass:"group-form__parent-members-can-see-discussions",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"group_form.parent_members_can_see_discussions",args:{parent:e.group.parent().name}},expression:"{path: 'group_form.parent_members_can_see_discussions', args: {parent: group.parent().name}}"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"group_form.parent_members_can_see_discussions_help",args:{parent:e.group.parent().name}},expression:"{path: 'group_form.parent_members_can_see_discussions_help', args: {parent: group.parent().name}}"}],staticClass:"caption"})])]},proxy:!0}],null,!1,1172745820),model:{value:e.group["parentMembersCanSeeDiscussions"],callback:function(t){e.$set(e.group,"parentMembersCanSeeDiscussions",t)},expression:'group["parentMembersCanSeeDiscussions"]'}}):e._e(),t(Jm.Z,{staticClass:"group-form__members-can-add-members",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_add_members",expression:"'group_form.members_can_add_members'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_add_members_help",expression:"'group_form.members_can_add_members_help'"}],staticClass:"caption"})])]},proxy:!0}]),model:{value:e.group["membersCanAddMembers"],callback:function(t){e.$set(e.group,"membersCanAddMembers",t)},expression:'group["membersCanAddMembers"]'}}),t(Jm.Z,{staticClass:"group-form__members-can-add-guests",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_add_guests",expression:"'group_form.members_can_add_guests'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_add_guests_help",expression:"'group_form.members_can_add_guests_help'"}],staticClass:"caption"})])]},proxy:!0}]),model:{value:e.group["membersCanAddGuests"],callback:function(t){e.$set(e.group,"membersCanAddGuests",t)},expression:'group["membersCanAddGuests"]'}}),t(Jm.Z,{staticClass:"group-form__members-can-announce",attrs:{label:e.$t("group_form.members_can_announce"),"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_announce",expression:"'group_form.members_can_announce'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_announce_help",expression:"'group_form.members_can_announce_help'"}],staticClass:"caption"})])]},proxy:!0}]),model:{value:e.group["membersCanAnnounce"],callback:function(t){e.$set(e.group,"membersCanAnnounce",t)},expression:'group["membersCanAnnounce"]'}}),e.group.isParent()?t(Jm.Z,{staticClass:"group-form__members-can-create-subgroups",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_create_subgroups",expression:"'group_form.members_can_create_subgroups'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_create_subgroups_help",expression:"'group_form.members_can_create_subgroups_help'"}],staticClass:"caption"})])]},proxy:!0}],null,!1,3448620572),model:{value:e.group["membersCanCreateSubgroups"],callback:function(t){e.$set(e.group,"membersCanCreateSubgroups",t)},expression:'group["membersCanCreateSubgroups"]'}}):e._e(),t(Jm.Z,{staticClass:"group-form__members-can-start-discussions",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_start_discussions",expression:"'group_form.members_can_start_discussions'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_start_discussions_help",expression:"'group_form.members_can_start_discussions_help'"}],staticClass:"caption"})])]},proxy:!0}]),model:{value:e.group["membersCanStartDiscussions"],callback:function(t){e.$set(e.group,"membersCanStartDiscussions",t)},expression:'group["membersCanStartDiscussions"]'}}),t(Jm.Z,{staticClass:"group-form__members-can-edit-discussions",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_edit_discussions",expression:"'group_form.members_can_edit_discussions'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_edit_discussions_help",expression:"'group_form.members_can_edit_discussions_help'"}],staticClass:"caption"})])]},proxy:!0}]),model:{value:e.group["membersCanEditDiscussions"],callback:function(t){e.$set(e.group,"membersCanEditDiscussions",t)},expression:'group["membersCanEditDiscussions"]'}}),t(Jm.Z,{staticClass:"group-form__members-can-edit-comments",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_edit_comments",expression:"'group_form.members_can_edit_comments'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_edit_comments_help",expression:"'group_form.members_can_edit_comments_help'"}],staticClass:"caption"})])]},proxy:!0}]),model:{value:e.group["membersCanEditComments"],callback:function(t){e.$set(e.group,"membersCanEditComments",t)},expression:'group["membersCanEditComments"]'}}),t(Jm.Z,{staticClass:"group-form__members-can-delete-comments",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_delete_comments",expression:"'group_form.members_can_delete_comments'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_delete_comments_help",expression:"'group_form.members_can_delete_comments_help'"}],staticClass:"caption"})])]},proxy:!0}]),model:{value:e.group["membersCanDeleteComments"],callback:function(t){e.$set(e.group,"membersCanDeleteComments",t)},expression:'group["membersCanDeleteComments"]'}}),t(Jm.Z,{staticClass:"group-form__members-can-raise-motions",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_raise_motions",expression:"'group_form.members_can_raise_motions'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.members_can_raise_motions_help",expression:"'group_form.members_can_raise_motions_help'"}],staticClass:"caption"})])]},proxy:!0}]),model:{value:e.group["membersCanRaiseMotions"],callback:function(t){e.$set(e.group,"membersCanRaiseMotions",t)},expression:'group["membersCanRaiseMotions"]'}}),t(Jm.Z,{staticClass:"group-form__admins-can-edit-user-content",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.admins_can_edit_user_content",expression:"'group_form.admins_can_edit_user_content'"}]}),t("br"),t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.admins_can_edit_user_content_help",expression:"'group_form.admins_can_edit_user_content_help'"}],staticClass:"caption"})])]},proxy:!0}]),model:{value:e.group["adminsCanEditUserContent"],callback:function(t){e.$set(e.group,"adminsCanEditUserContent",t)},expression:'group["adminsCanEditUserContent"]'}})],1)]),t(ob.Z,[t("div",{staticClass:"mt-8 px-4"},[t("div",{staticClass:"group-form__section group-form__defaults"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"group_form.thread_defaults_help",expression:"'group_form.thread_defaults_help'"}],staticClass:"text--secondary"}),t(is.Qq,{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.sorting",expression:"'thread_arrangement_form.sorting'"}]}),t(eh.Z,{model:{value:e.group.newThreadsNewestFirst,callback:function(t){e.$set(e.group,"newThreadsNewestFirst",t)},expression:"group.newThreadsNewestFirst"}},[t(Xm.Z,{attrs:{value:!1},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.earliest",expression:"'thread_arrangement_form.earliest'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.earliest_description",expression:"'thread_arrangement_form.earliest_description'"}]})]},proxy:!0}])}),t(Xm.Z,{attrs:{value:!0},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.latest",expression:"'thread_arrangement_form.latest'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.latest_description",expression:"'thread_arrangement_form.latest_description'"}]})]},proxy:!0}])})],1),t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.replies",expression:"'thread_arrangement_form.replies'"}]}),t(eh.Z,{model:{value:e.group.newThreadsMaxDepth,callback:function(t){e.$set(e.group,"newThreadsMaxDepth",t)},expression:"group.newThreadsMaxDepth"}},[t(Xm.Z,{attrs:{value:1},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.linear",expression:"'thread_arrangement_form.linear'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.linear_description",expression:"'thread_arrangement_form.linear_description'"}]})]},proxy:!0}])}),t(Xm.Z,{attrs:{value:2},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.nested_once",expression:"'thread_arrangement_form.nested_once'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.nested_once_description",expression:"'thread_arrangement_form.nested_once_description'"}]})]},proxy:!0}])}),t(Xm.Z,{attrs:{value:3},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.nested_twice",expression:"'thread_arrangement_form.nested_twice'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.nested_twice_description",expression:"'thread_arrangement_form.nested_twice_description'"}]})]},proxy:!0}])})],1)],1)])])],1),t(is.h7,{staticClass:"ml-2 mr-2 mt-4"},[t(ir,{attrs:{path:"en/user_manual/groups/settings"}}),t(yn.Z),t($s.Z,{staticClass:"group-form__submit-button",attrs:{color:"primary"},on:{click:function(t){return e.submit()}}},[e.group.isNew()&&e.group.isParent()?t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.submit_start_group",expression:"'group_form.submit_start_group'"}]}):e._e(),e.group.isNew()&&!e.group.isParent()?t("span",{directives:[{name:"t",rawName:"v-t",value:"group_form.submit_start_subgroup",expression:"'group_form.submit_start_subgroup'"}]}):e._e(),e.group.isNew()?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.update_settings",expression:"'common.action.update_settings'"}]})])],1)],1)},Jw=[],Xw={props:{group:Object},data:function(){return{isDisabled:!1,rules:{required:function(e){return!!e||"Required."}},uploading:!1,progress:0,hostname:i.theme.canonical_host,realGroup:jt.groups.find(this.group.id)}},mounted:function(){return this.suggestHandle()},created:function(){return this.suggestHandle=(0,l.debounce)((function(){var e;if(this.group.isNew()||(0,l.isEmpty)(this.group.handle))return e=this.group.parentId?this.group.parent().handle:null,jt.groups.getHandle({name:this.group.name,parentHandle:e}).then((e=>this.group.handle=e.handle))}),500)},methods:{submit:function(){var e;return e=this.group.allowPublicThreads,this.group.discussionPrivacyOptions=function(){switch(this.group.groupPrivacy){case"open":return"public_only";case"closed":return e?"public_or_private":"private_only";case"secret":return"private_only"}}.call(this),this.group.parentMembersCanSeeDiscussions=function(){switch(this.group.groupPrivacy){case"open":return!0;case"closed":return this.group.parentMembersCanSeeDiscussions;case"secret":return!1}}.call(this),this.group.save().then((e=>{var t;return this.isExpanded=!1,t=e.groups[0].key,Fn.success(`group_form.messages.group_${this.actionName}`),D.$emit("closeModal"),this.$router.push(`/g/${t}`)})).catch((e=>!0))},expandForm:function(){return this.isExpanded=!0},privacyStringFor:function(e){return this.$t(ag(this.group,e),{parent:this.group.parentName()})},selectCoverPhoto:function(){return this.$refs.coverPhotoInput.click()},selectLogo:function(){return this.$refs.logoInput.click()},uploadCoverPhoto:function(){return this.uploading=!0,jt.groups.remote.onUploadSuccess=e=>(jt.importJSON(e),this.uploading=!1),jt.groups.remote.upload(`${this.group.id}/upload_photo/cover_photo`,this.$refs.coverPhotoInput.files[0],{},(e=>this.progress=e.loaded/e.total*100))},uploadLogo:function(){return this.uploading=!0,jt.groups.remote.onUploadSuccess=e=>(jt.importJSON(e),this.uploading=!1),jt.groups.remote.upload(`${this.group.id}/upload_photo/logo`,this.$refs.logoInput.files[0],{},(e=>this.progress=e.loaded/e.total*100))}},computed:{actionName:function(){return this.group.isNew()?"created":"updated"},titleLabel:function(){return this.group.isParent()?"group_form.group_name":"group_form.subgroup_name"},privacyOptions:function(){return this.group.parentId&&"secret"===this.group.parent().groupPrivacy?["closed","secret"]:["open","closed","secret"]},privacyStatement:function(){return this.$t(lg(this.group),{parent:this.group.parentName()})},groupNamePlaceholder:function(){return this.group.parentId?"group_form.group_name_placeholder":"group_form.organization_name_placeholder"},groupNameLabel:function(){return this.group.parentId?"group_form.group_name":"group_form.organization_name"}}},ex=Xw,tx=(0,Ut.Z)(ex,Qw,Jw,!1,null,null,null),ox=tx.exports,sx=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"edit-comment-form"},[t(lc,{attrs:{value:e.comment.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"comment_form.edit_comment",expression:"'comment_form.edit_comment'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{model:e.comment}})],1),t(tb,{staticClass:"mx-4",attrs:{comment:e.comment,autofocus:""},on:{"comment-submitted":function(t){return e.close()}}})],1)},nx=[],ix={props:{comment:Object,close:Function},data:function(){return{isDisabled:!1}}},rx=ix,ax=(0,Ut.Z)(rx,sx,nx,!1,null,null,null),lx=ax.exports,cx=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"confirm-modal"},[t(lc,{attrs:{value:e.isDisabled}}),t(is.EB,[e.confirm.text.raw_title||e.confirm.text.title?t("h1",{staticClass:"headline",attrs:{tabindex:"-1"},domProps:{innerHTML:e._s(e.confirm.text.raw_title||e.$t(e.confirm.text.title,e.confirm.textArgs))}}):e._e(),t(yn.Z),e.confirm.forceSubmit?e._e():t(Bh)],1),t(is.ZB,[e.confirm.text.raw_helptext||e.confirm.text.helptext?t("p",{domProps:{innerHTML:e._s(e.confirm.text.raw_helptext||e.$t(e.confirm.text.helptext,e.confirm.textArgs))}}):e._e(),e.confirm.text.confirm_text?t("div",[t("p",{staticClass:"font-weight-bold"},[e._v(e._s(e.confirm.text.raw_confirm_text_placeholder))]),t(ci.Z,{staticClass:"confirm-text-field",on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.canProceed&&e.submit()}},model:{value:e.confirmText,callback:function(t){e.confirmText=t},expression:"confirmText"}})],1):e._e()]),t(is.h7,[e.confirm.forceSubmit?e._e():t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.cancel",expression:"'common.action.cancel'"}],attrs:{text:""},on:{click:function(t){return e.close()}}}),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:{path:e.confirm.text.submit||"common.action.ok",args:e.confirm.textArgs},expression:"{path: (confirm.text.submit || 'common.action.ok'), args: confirm.textArgs}"}],staticClass:"confirm-modal__submit",attrs:{disabled:!e.canProceed,color:"primary"},on:{click:function(t){e.confirm.submit&&e.submit()||e.close()}}})],1)],1)},ux=[],dx={props:{close:{type:Function,default:function(){return D.$emit("closeModal")}},confirm:Object},data:function(){return{isDisabled:!1,confirmText:""}},methods:{submit:function(){return this.isDisabled=!0,this.confirm.submit().then((()=>{if(this.close(),null!=this.confirm.redirect&&this.$router.push(`${this.confirm.redirect}`),"function"===typeof this.confirm.successCallback&&this.confirm.successCallback(),this.confirm.text.flash)return Fn.success(this.confirm.text.flash,this.confirm.textArgs)})).finally((()=>this.isDisabled=!1))}},computed:{canProceed:function(){return!this.confirm.text.confirm_text||this.confirmText.trim()===this.confirm.text.confirm_text.trim()}}},px=dx,mx=(0,Ut.Z)(px,cx,ux,!1,null,null,null),hx=mx.exports,_x=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"thread-arrangement-form"},[t(lc,{attrs:{value:e.discussion.processing}}),t(is.EB,[t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.title",expression:"'thread_arrangement_form.title'"}]}),t(yn.Z),t(Bh,{attrs:{"aria-hidden":"true",close:e.close}})],1),t("div",{staticClass:"px-4"},[t(Tc.Z,{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.for_everyone",expression:"'thread_arrangement_form.for_everyone'"}],attrs:{dense:"",text:"",type:"info"}}),t(is.Qq,{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.sorting",expression:"'thread_arrangement_form.sorting'"}]}),t(eh.Z,{model:{value:e.clone.newestFirst,callback:function(t){e.$set(e.clone,"newestFirst",t)},expression:"clone.newestFirst"}},[t(Xm.Z,{attrs:{value:!1},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.earliest",expression:"'thread_arrangement_form.earliest'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.earliest_description",expression:"'thread_arrangement_form.earliest_description'"}]})]},proxy:!0}])}),t(Xm.Z,{attrs:{value:!0},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.latest",expression:"'thread_arrangement_form.latest'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.latest_description",expression:"'thread_arrangement_form.latest_description'"}]})]},proxy:!0}])})],1),t(li.Z,{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.replies",expression:"'thread_arrangement_form.replies'"}]}),t(eh.Z,{model:{value:e.clone.maxDepth,callback:function(t){e.$set(e.clone,"maxDepth",t)},expression:"clone.maxDepth"}},[t(Xm.Z,{attrs:{value:1},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.linear",expression:"'thread_arrangement_form.linear'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.linear_description",expression:"'thread_arrangement_form.linear_description'"}]})]},proxy:!0}])}),t(Xm.Z,{attrs:{value:2},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.nested_once",expression:"'thread_arrangement_form.nested_once'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.nested_once_description",expression:"'thread_arrangement_form.nested_once_description'"}]})]},proxy:!0}])}),t(Xm.Z,{attrs:{value:3},scopedSlots:e._u([{key:"label",fn:function(){return[t("strong",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.nested_twice",expression:"'thread_arrangement_form.nested_twice'"}]}),t(Ro),e._v("-"),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.nested_twice_description",expression:"'thread_arrangement_form.nested_twice_description'"}]})]},proxy:!0}])})],1),e.clone.maxDepth!=e.discussion.maxDepth?t(Tc.Z,{directives:[{name:"t",rawName:"v-t",value:"thread_arrangement_form.changing_nesting_is_slow",expression:"'thread_arrangement_form.changing_nesting_is_slow'"}],attrs:{type:"warning"}}):e._e()],1),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}],attrs:{color:"primary",loading:e.clone.processing},on:{click:function(t){return e.submit()}}})],1)],1)},fx=[],gx={props:{discussion:Object,close:Function},data:function(){return{clone:this.discussion.clone()}},methods:{submit:function(){return this.clone.save().then((()=>(this.close(),Fn.success("discussion_form.messages.updated"))))}}},vx=gx,bx=(0,Ut.Z)(vx,_x,fx,!1,null,null,null),yx=bx.exports,wx=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"poll-common-modal pb-2",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null}}},[t(lc,{attrs:{value:e.poll.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:e.title_key,expression:"title_key"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{model:e.poll}})],1),t("div",{staticClass:"px-4"},[t(kh,{attrs:{poll:e.poll}})],1)],1)},xx=[],kx={props:{poll:Object},computed:{title_key:function(){var e;return e=this.poll.isNew()?"start":"edit","poll_"+this.poll.pollType+"_form."+e+"_header"},isEditing:function(){return this.poll.closingAt&&!this.poll.isNew()}}},Cx=kx,Zx=(0,Ut.Z)(Cx,wx,xx,!1,null,null,null),Ix=Zx.exports,Ax=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"poll-common-edit-vote-modal"},[t(lc,{attrs:{value:e.stance.processing}}),t(is.EB,[t("h1",{staticClass:"headline"},[e.stance.castAt?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common.have_your_say",expression:"'poll_common.have_your_say'"}]}),e.stance.castAt?t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common.change_your_response",expression:"'poll_common.change_your_response'"}]}):e._e()]),t(yn.Z),t(Bh,{attrs:{model:e.stance}})],1),t(an.Z,{staticClass:"pa-4"},[t(Lu,{attrs:{name:"vote-form",stance:e.stance}})],1)],1)},$x=[],Sx={props:{stance:Object},components:{PollCommonDirective:Lu},methods:{submit:function(){var e;return e=this.stance.castAt?"updated":"created",this.stance.save().then((()=>(Fn.success(`poll_${this.stance.poll().pollType}_vote_form.stance_${e}`),this.close()))).catch((e=>!0))}}},Nx=Sx,Tx=(0,Ut.Z)(Nx,Ax,$x,!1,null,null,null),jx=Tx.exports,Px=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"contact-user-modal"},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:{path:"contact_request_form.modal_title",args:{name:e.user.name}},expression:"{ path: 'contact_request_form.modal_title', args: { name: user.name }}"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(is.ZB,{staticClass:"contact-user-form"},[t(fr.Z,{staticClass:"contact-request-form__message",attrs:{maxlength:"500",label:e.$t("contact_request_form.message_placeholder")},model:{value:e.contactRequest.message,callback:function(t){e.$set(e.contactRequest,"message",t)},expression:"contactRequest.message"}}),t(_c,{attrs:{subject:e.contactRequest,field:"message"}}),t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"contact_request_form.helptext",args:{name:e.user.firstName()}},expression:"{ path: 'contact_request_form.helptext', args: { name: user.firstName() }}"}]})],1),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.send",expression:"'common.action.send'"}],staticClass:"contact-request-form__submit",attrs:{color:"primary"},on:{click:function(t){return e.submit()}}})],1)],1)},Ox=[],Rx={props:{user:Object},data:function(){return{contactRequest:jt.contactRequests.build({recipientId:this.user.id})}},methods:{submit:function(){return this.contactRequest.save().then((()=>(Fn.success("contact_request_form.email_sent",{name:this.user.name}),this.close())))}}},qx=Rx,Mx=(0,Ut.Z)(qx,Px,Ox,!1,null,null,null),Ex=Mx.exports,Lx=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"auth-complete text-center",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit()}}},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"auth_form.check_your_email",expression:"'auth_form.check_your_email'"}],staticClass:"headline",attrs:{tabindex:"-1",role:"status","aria-live":"assertive"}}),t(yn.Z),t($s.Z,{staticClass:"back-button",attrs:{icon:"",title:e.$t("common.action.back")},on:{click:function(t){e.user.authForm=null}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1),t(an.Z,{staticClass:"mx-4"},[t(lc,{attrs:{value:e.loading}}),e.user.sentLoginLink?t("p",{staticClass:"mb-4"},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.login_link_sent",args:{email:e.user.email}},expression:"{ path: 'auth_form.login_link_sent', args: { email: user.email }}"}]}),t("br"),e.attempts<3?t("span",{directives:[{name:"t",rawName:"v-t",value:"auth_form.instructions_code",expression:"'auth_form.instructions_code'"}]}):e._e()]):e._e(),e.attempts>=3?t("div",{directives:[{name:"t",rawName:"v-t",value:"auth_form.too_many_attempts",expression:"'auth_form.too_many_attempts'"}],staticClass:"lmo-validation-error"}):e._e(),e.user.sentPasswordLink?t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.password_link_sent",args:{email:e.user.email}},expression:"{ path: 'auth_form.password_link_sent', args: { email: user.email }}"}],staticClass:"mb-4"}):e._e(),e.user.sentLoginLink&&e.attempts<3?t("div",{staticClass:"auth-complete__code-input mb-4"},[t("div",{staticClass:"auth-complete__code mx-auto",staticStyle:{"max-width":"256px"}},[t(ci.Z,{staticClass:"headline lmo-primary-form-input",attrs:{outlined:"",label:"Code",placeholder:e.$t("auth_form.code"),type:"integer",maxlength:"6"},model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}})],1),t("span",{directives:[{name:"t",rawName:"v-t",value:"auth_form.check_spam_folder",expression:"'auth_form.check_spam_folder'"}]})]):e._e()],1),t(is.h7,[t(yn.Z),e.user.hasPassword?e._e():t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"auth_form.set_password",expression:"'auth_form.set_password'"}],attrs:{disabled:!e.user.code||e.loading},on:{click:function(t){return e.submitAndSetPassword()}}}),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"auth_form.sign_in",expression:"'auth_form.sign_in'"}],attrs:{color:"primary",loading:e.loading,disabled:!e.user.code||e.loading},on:{click:function(t){return e.submit()}}})],1)],1)},Dx=[],Fx=new class{emailStatus(e){var t;return t=(i.pendingIdentity||{}).token,jt.users.emailStatus(e.email,t).then((t=>this.applyEmailStatus(e,(0,l.head)(t.users))))}applyEmailStatus(e,t={}){var o;return o=["name","email","avatar_kind","avatar_initials","email_hash","avatar_url","has_password","email_status","email_verified","legal_accepted_at","auth_form"],e.update((0,l.pickBy)((0,l.mapKeys)((0,l.pick)(t,o),(function(e,t){return(0,l.camelCase)(t)})),(function(e){return!!e}))),e.update({hasToken:t.has_token}),e}authSuccess(e){return Rt.apply(e),D.$emit("closeModal"),Fn.success("auth_form.signed_in")}signIn(e={},t=function(){},o=function(){}){return jt.sessions.build((0,l.pick)(e,["email","name","password","code"])).save().then((e=>(this.authSuccess(e),t(e),e)),(function(t){var o;return o=e.hasToken?{token:[M.t("auth_form.invalid_token")]}:{password:[M.t("auth_form.invalid_password")]},e.update({errors:o})}))}signUp(e,t=function(){},o=function(){}){return jt.registrations.build((0,l.pick)(e,["email","name","recaptcha","legalAccepted","emailNewsletter"])).save().then((o=>(e.hasToken||o.signed_in?(this.authSuccess(o),t(o)):e.update({authForm:"complete",sentLoginLink:!0}),o)),(t=>e.errors=t.errors))}reactivate(e){return jt.users.reactivate(e).then((function(){return e.update({sentLoginLink:!0})}))}sendLoginLink(e){return jt.loginTokens.fetchToken(e.email).then((function(){return e.update({authForm:"complete",sentLoginLink:!0})}))}validSignup(e,t){return t.errors={},e.name||(t.errors.name=[M.t("auth_form.name_required")]),i.theme.terms_url&&!e.legalAccepted&&(t.errors.legalAccepted=[M.t("auth_form.terms_required")]),(0,l.keys)(t.errors)&&(t.name=e.name,t.legalAccepted=e.legalAccepted,t.emailNewsletter=e.emailNewsletter),0===(0,l.keys)(t.errors).length}},Ux={mixins:[x_],props:{user:Object},data:function(){return{attempts:0,loading:!1}},methods:{submitAndSetPassword:function(){return this.loading=!0,Fx.signIn(this.user).then((()=>D.$emit("openModal",{component:"ChangePasswordForm",props:{user:Rt.user()}}))).finally((()=>(this.attempts+=1,this.loading=!1)))},submit:function(){return this.loading=!0,Fx.signIn(this.user).finally((()=>(this.attempts+=1,this.loading=!1)))}}},zx=Ux,Bx=(0,Ut.Z)(zx,Lx,Dx,!1,null,null,null),Vx=Bx.exports,Hx=function(){var e=this,t=e._self._c;return t("div",{staticClass:"auth-email-form",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit()}}},[t("div",{staticClass:"auth-email-form__email"},[t(ci.Z,{staticClass:"lmo-primary-form-input",attrs:{id:"email",outlined:"",name:"email",type:"email",placeholder:e.$t("auth_form.email_placeholder"),label:e.$t("common.email_address"),autocomplete:"username email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(_c,{attrs:{subject:e.user,field:"email"}}),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"auth_form.continue_with_email",expression:"'auth_form.continue_with_email'"}],staticClass:"auth-email-form__submit",attrs:{color:"primary",disabled:!e.email,loading:e.loading},on:{click:function(t){return e.submit()}}})],1)])},Gx=[],Wx={props:{user:Object},data:function(){return{email:this.user.email,loading:!1}},watch:{"user.email":function(){return this.email=this.user.email}},methods:{submit:function(){if(this.validateEmail())return this.user.email=this.email,this.loading=!0,Fx.emailStatus(this.user).finally((()=>this.loading=!1))},validateEmail:function(){return this.user.errors={},this.email?this.email.match(/[^\s,;<>]+?@[^\s,;<>]+\.[^\s,;<>]+/g)||(this.user.errors.email=[this.$t("auth_form.invalid_email")]):this.user.errors.email=[this.$t("auth_form.email_not_present")],null==this.user.errors.email}}},Kx=Wx,Yx=(0,Ut.Z)(Kx,Hx,Gx,!1,null,null,null),Qx=Yx.exports,Jx=function(){var e=this,t=e._self._c;return e.providers.length?t("div",{staticClass:"auth-provider-form"},[t(ys.Z,{staticClass:"auth-provider-form__providers",attrs:{column:""}},[e._l(e.providers,(function(o){return t($s.Z,{key:o.id,staticClass:"auth-provider-form__provider my-2",attrs:{outlined:"",color:e.providerColor(o.name)},on:{click:function(t){return e.select(o)}}},[t(Qt.Z,[e._v(e._s(e.iconClass(o.name)))]),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.continue_with_provider",args:{provider:e.capitalize(o.name)}},expression:"{ path: 'auth_form.continue_with_provider', args: { provider: capitalize(provider.name) } }"}]})],1)})),e.emailLogin?t("p",{directives:[{name:"t",rawName:"v-t",value:"auth_form.or_enter_your_email",expression:"'auth_form.or_enter_your_email'"}],staticClass:"my-2 text-center auth-email-form__or-enter-email"}):e._e()],2)],1):e._e()},Xx=[],ek={props:{user:Object},methods:{capitalize:l.capitalize,select:function(e){return window.location=`${e.href}?back_to=${window.location.href}`},iconClass:function(e){return"mdi-"+("saml"===e?"key-variant":e)},providerColor:function(e){switch(e){case"facebook":return"#3b5998";case"google":return"#dd4b39";case"slack":return"#e9a820";case"saml":return this.$vuetify.theme.themes.light.primary}}},computed:{emailLogin:function(){return i.features.app.email_login},providers:function(){return i.identityProviders.filter((function(e){return"slack"!==e.name}))}}},tk=ek,ok=(0,Ut.Z)(tk,Jx,Xx,!1,null,null,null),sk=ok.exports,nk=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"auth-form"},[t(is.EB,[t("h1",{staticClass:"headline",attrs:{tabindex:"-1",role:"status","aria-live":"polite"}},[e.$te("auth_form.sign_up_or_log_in",{locale:e.userLocale})?t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.sign_up_or_log_in",args:{site_name:e.siteName}},expression:"{ path: 'auth_form.sign_up_or_log_in', args: { site_name: siteName } }"}]}):t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.sign_in_to_loomio",args:{site_name:e.siteName}},expression:"{ path: 'auth_form.sign_in_to_loomio', args: { site_name: siteName } }"}]})]),t(yn.Z),e.preventClose?e._e():t(Bh)],1),t(an.Z,{staticClass:"py-4 pb-4"},[e.startDemo?t("p",{directives:[{name:"t",rawName:"v-t",value:"templates.demo_needs_user",expression:"'templates.demo_needs_user'"}],staticClass:"text-center"}):e._e(),e.pendingGroup?t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.youre_invited",args:{group_name:e.pendingGroup.name}},expression:"{path: 'auth_form.youre_invited', args: {group_name: pendingGroup.name}}"}],staticClass:"headline text-center"}):e._e(),e.pendingDiscussion?t("p",{directives:[{name:"t",rawName:"v-t",value:"auth_form.youre_invited_discussion",expression:"'auth_form.youre_invited_discussion'"}],staticClass:"headline text-center"}):e._e(),e.pendingPoll?t("p",{directives:[{name:"t",rawName:"v-t",value:"auth_form.youre_invited_poll",expression:"'auth_form.youre_invited_poll'"}],staticClass:"headline text-center"}):e._e(),e.isInvitedNewUser?t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.existing_account_can_sign_in",args:{site_name:e.siteName}},expression:"{path: 'auth_form.existing_account_can_sign_in', args: { site_name: siteName } }"}],staticClass:"text-center caption"}):e._e(),t(sk,{attrs:{user:e.user}}),e.emailLogin?t(Qx,{attrs:{user:e.user}}):e._e(),t("div",{staticClass:"text-center caption mt-4"},[t("a",{directives:[{name:"t",rawName:"v-t",value:"auth_form.sign_in_help",expression:"'auth_form.sign_in_help'"}],staticClass:"auth-form__sign-in-help",attrs:{href:"https://help.loomio.org/en/user_manual/users/sign_in/",target:"_blank"}})]),e.privacyUrl?t("div",{staticClass:"auth-form__privacy-notice caption text-center mt-4",domProps:{innerHTML:e._s(e.$t("auth_form.privacy_notice",{siteName:e.siteName,privacyUrl:e.privacyUrl}))}}):e._e()],1)],1)},ik=[],rk={props:{user:Object,preventClose:Boolean},data:function(){return{emailLogin:i.features.app.email_login,siteName:i.theme.site_name,privacyUrl:i.theme.privacy_url,isDisabled:!1,pendingGroup:null}},created:function(){return this.watchRecords({key:"authForm",collections:["groups"],query:e=>this.pendingGroup=e.groups.find(this.pendingIdentity.group_id)})},computed:{userLocale:function(){return Rt.user().locale},isInvitedNewUser:function(){return!1===i.pending_identity.email_verified},loginComplete:function(){return this.user.sentLoginLink||this.user.sentPasswordLink},pendingDiscussion:function(){return"discussion_reader"===this.pendingIdentity.identity_type},pendingPoll:function(){return"stance"===this.pendingIdentity.identity_type},pendingIdentity:function(){return i.pending_identity||{}},startDemo:function(){return"/try"===this.$route.path}}},ak=rk,lk=(0,Ut.Z)(ak,nk,ik,!1,null,null,null),ck=lk.exports,uk=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"auth-identity-form",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit()}}},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.hello",args:{name:e.user.name||e.user.email}},expression:"{ path: 'auth_form.hello', args: { name: user.name || user.email } }"}],staticClass:"headline",attrs:{tabindex:"-1",role:"status","aria-live":"polite"}}),t(yn.Z),t($s.Z,{staticClass:"back-button",attrs:{icon:"",title:e.$t("common.action.back")},on:{click:function(t){e.user.authForm=null}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1),t(an.Z,{staticClass:"mx-4 pb-4"},[t("div",{staticClass:"mb-4 text-center"},[t(ys.Z,{attrs:{"justify-center":""}},[t(Ks,{attrs:{user:e.user}})],1)],1),t("div",{staticClass:"mb-4 text-center"}),t("div",{staticClass:"auth-identity-form__options"},[t("div",{staticClass:"auth-identity-form__new-account mb-8"},[t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.new_to_loomio",args:{site_name:e.siteName}},expression:"{ path: 'auth_form.new_to_loomio', args: { site_name: siteName } }"}],staticClass:"text-center"}),t(ys.Z,{attrs:{"justify-center":""}},[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"auth_form.create_account",expression:"'auth_form.create_account'"}],attrs:{color:"primary",disabled:e.email.length>0},on:{click:function(t){return e.createAccount()}}})],1)],1),t("div",{staticClass:"auth-identity-form__existing-account"},[t("div",{staticClass:"auth-email-form__email"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"auth_form.already_a_user",expression:"'auth_form.already_a_user'"}],staticClass:"text-center"}),t(ci.Z,{staticClass:"lmo-primary-form-input",attrs:{id:"email",name:"email",type:"text",placeholder:e.$t("auth_form.email_address_of_existing_account")},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(_c,{attrs:{subject:e.user,field:e.email}})],1),t(ys.Z,{attrs:{"justify-center":""}},[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"auth_form.link_accounts",expression:"'auth_form.link_accounts'"}],attrs:{color:"primary",loading:e.loading,disabled:0==e.email.length},on:{click:function(t){return e.submit()}}})],1)],1)])])],1)},dk=[],pk={props:{user:Object,identity:Object},data:function(){return{loading:!1,email:""}},methods:{submit:function(){return this.loading=!0,this.user.email=this.email,Fx.sendLoginLink(this.user).then((()=>{}),(()=>this.user.errors={email:[this.$t("auth_form.email_not_found")]})).finally((()=>this.loading=!1))},createAccount:function(){return this.user.createAccount=!0,this.user.authForm="signUp"}},computed:{siteName:function(){return i.theme.site_name}}},mk=pk,hk=(0,Ut.Z)(mk,uk,dk,!1,null,null,null),_k=hk.exports,fk=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"auth-signin-form",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit()}}},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.welcome_back",args:{name:e.user.name}},expression:"{ path: 'auth_form.welcome_back', args: { name: user.name } }"}],staticClass:"headline",attrs:{tabindex:"-1",role:"status","aria-live":"assertive"}}),t(yn.Z),t($s.Z,{staticClass:"back-button",attrs:{icon:"",title:e.$t("common.action.back")},on:{click:function(t){e.user.authForm=null}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1),t(an.Z,{staticClass:"mx-4 pb-4"},[t(lc,{attrs:{value:e.loading}}),t(ys.Z,{attrs:{"justify-center":""}},[t(Ks,{attrs:{user:e.user,size:128}})],1),e.user.hasToken?t("div",{staticClass:"auth-signin-form__token text-center"},[t(_c,{attrs:{subject:e.user,field:"token"}}),e.user.errors.token?e._e():t($s.Z,{staticClass:"my-4 auth-signin-form__submit",attrs:{color:"primary",loading:e.loading},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.sign_in_as",args:{name:e.user.name}},expression:"{ path: 'auth_form.sign_in_as', args: {name: user.name}}"}]})]),e.user.errors.token?t($s.Z,{staticClass:"my-4 auth-signin-form__submit",attrs:{color:"primary",loading:e.loading},on:{click:function(t){return e.sendLoginLink()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"auth_form.login_link",expression:"'auth_form.login_link'"}]})]):e._e(),t("p",[t("span",{directives:[{name:"t",rawName:"v-t",value:"auth_form.set_password_helptext",expression:"'auth_form.set_password_helptext'"}],staticClass:"mr-1"}),t("a",{directives:[{name:"t",rawName:"v-t",value:"auth_form.set_password",expression:"'auth_form.set_password'"}],staticClass:"lmo-pointer",on:{click:function(t){return e.signInAndSetPassword()}}})])],1):e._e(),e.user.hasToken?e._e():t("div",{staticClass:"auth-signin-form__no-token"},[e.user.hasPassword?t("div",{staticClass:"auth-signin-form__password"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"auth_form.enter_your_password",expression:"'auth_form.enter_your_password'"}],staticClass:"text-center my-2"}),t(ci.Z,{attrs:{id:"password",label:e.$t("auth_form.password"),name:"password",type:"password",outlined:"",autofocus:"",required:"",autocomplete:"current-password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),t(_c,{attrs:{subject:e.user,field:"password"}}),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:e.user.hasPassword?"auth_form.forgot_password":"auth_form.login_link",expression:"user.hasPassword ? 'auth_form.forgot_password' : 'auth_form.login_link'"}],staticClass:"auth-signin-form__login-link",attrs:{color:e.user.hasPassword?"":"primary",loading:!e.user.password&&e.loading},on:{click:function(t){return e.sendLoginLink()}}}),e.user.hasPassword?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"auth_form.sign_in",expression:"'auth_form.sign_in'"}],staticClass:"auth-signin-form__submit",attrs:{color:e.user.hasPassword?"primary":"",disabled:!e.user.password,loading:e.user.password&&e.loading},on:{click:function(t){return e.submit()}}}):e._e()],1)],1):e._e(),e.user.hasPassword?e._e():t("div",{staticClass:"auth-signin-form__no-password"},[t(is.h7,{staticClass:"justify-space-around"},[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"auth_form.sign_in_via_email",expression:"'auth_form.sign_in_via_email'"}],staticClass:"auth-signin-form__submit",attrs:{color:"primary",loading:e.loading},on:{click:function(t){return e.sendLoginLink()}}})],1)],1)])],1)],1)},gk=[],vk={mixins:[x_],props:{user:Object},data:function(){return{siteName:i.theme.site_name,vars:{},loading:!1}},methods:{signIn:function(){return null!=this.vars.name&&(this.user.name=this.vars.name),this.loading=!0,Fx.signIn(this.user).finally((()=>this.loading=!1))},signInAndSetPassword:function(){return this.loading=!0,this.signIn().then((()=>(this.loading=!1,D.$emit("openModal",{component:"ChangePasswordForm",props:{user:Rt.user()}}))))},sendLoginLink:function(){return this.loading=!0,Fx.sendLoginLink(this.user).finally((()=>this.loading=!1))},submit:function(){return this.user.hasPassword||this.user.hasToken?this.signIn():this.sendLoginLink()}}},bk=vk,yk=(0,Ut.Z)(bk,fk,gk,!1,null,null,null),wk=yk.exports,xk=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"auth-signup-form",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit()}}},[e.allow?[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.welcome",args:{siteName:e.siteName}},expression:"{ path: 'auth_form.welcome', args: { siteName: siteName } }"}],staticClass:"headline",attrs:{tabindex:"-1",role:"status","aria-live":"assertive"}}),t(yn.Z),t($s.Z,{staticClass:"back-button",attrs:{icon:"",title:e.$t("common.action.back")},on:{click:function(t){e.user.authForm=null}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1),t(an.Z,{staticClass:"mx-4"},[t(lc,{attrs:{value:e.loading}}),t("div",{staticClass:"auth-signup-form__welcome text-center my-2"},[t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"auth_form.sign_up_as",args:{email:e.user.email}},expression:"{path: 'auth_form.sign_up_as', args: {email: user.email}}"}]})]),t("div",{staticClass:"auth-signup-form__name"},[t(ci.Z,{attrs:{type:"text",label:e.$t("auth_form.name_placeholder"),placeholder:e.$t("auth_form.enter_your_name"),outlined:"",required:"true"},model:{value:e.vars.name,callback:function(t){e.$set(e.vars,"name",t)},expression:"vars.name"}}),t(_c,{attrs:{subject:e.user,field:"legalAccepted"}}),t(_c,{attrs:{subject:e.user,field:"email"}}),t(_c,{attrs:{subject:e.user,field:"recaptcha"}})],1),e.termsUrl?t("div",{staticClass:"auth-signup-form__consent"},[t(Jm.Z,{staticClass:"auth-signup-form__legal-accepted",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("i18n",{attrs:{path:"auth_form.i_accept_all",tag:"span"},scopedSlots:e._u([{key:"termsLink",fn:function(){return[t("a",{directives:[{name:"t",rawName:"v-t",value:"powered_by.terms_of_service",expression:"'powered_by.terms_of_service'"}],attrs:{href:e.termsUrl,target:"_blank"},on:{click:function(e){e.stopPropagation()}}})]},proxy:!0},{key:"privacyLink",fn:function(){return[t("a",{directives:[{name:"t",rawName:"v-t",value:"powered_by.privacy_policy",expression:"'powered_by.privacy_policy'"}],attrs:{href:e.privacyUrl,target:"_blank"},on:{click:function(e){e.stopPropagation()}}})]},proxy:!0}],null,!1,1354548841)})]},proxy:!0}],null,!1,2648833517),model:{value:e.vars.legalAccepted,callback:function(t){e.$set(e.vars,"legalAccepted",t)},expression:"vars.legalAccepted"}})],1):e._e(),e.newsletterEnabled?t("div",{staticClass:"auth-signup-form__newsletter"},[t(Jm.Z,{staticClass:"auth-signup-form__newsletter-accepted",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[t("i18n",{attrs:{path:"auth_form.newsletter_label",tag:"span"},scopedSlots:e._u([{key:"link",fn:function(){return[t("span",{directives:[{name:"t",rawName:"v-t",value:"email_settings_page.email_newsletter",expression:"'email_settings_page.email_newsletter'"}]})]},proxy:!0}],null,!1,2022889627)})]},proxy:!0}],null,!1,2682587088),model:{value:e.vars.emailNewsletter,callback:function(t){e.$set(e.vars,"emailNewsletter",t)},expression:"vars.emailNewsletter"}})],1):e._e()],1),t(is.h7,{staticClass:"mt-8"},[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"auth_form.create_account",expression:"'auth_form.create_account'"}],staticClass:"auth-signup-form__submit",attrs:{color:"primary",loading:e.loading,disabled:!e.vars.name||e.termsUrl&&!e.vars.legalAccepted},on:{click:function(t){return e.submit()}}})],1),e.useRecaptcha?t("vue-recaptcha",{ref:"invisibleRecaptcha",attrs:{sitekey:e.recaptchaKey,loadRecaptchaScript:!0,size:"invisible"},on:{verify:e.submitForm}}):e._e()]:[e.allow?e._e():t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"auth_form.invitation_required",expression:"'auth_form.invitation_required'"}],staticClass:"headline",attrs:{tabindex:"-1",role:"status","aria-live":"assertive"}}),t(yn.Z),t($s.Z,{staticClass:"back-button",attrs:{icon:"",title:e.$t("common.action.back")},on:{click:function(t){e.user.authForm=null}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1)]],2)},kk=[],Ck=o(97991),Zk={components:{VueRecaptcha:Ck.Z},mixins:[x_],props:{user:Object},mounted:function(){return D.$emit("set-auth-modal-title","auth_form.create_account")},data:function(){return{siteName:i.theme.site_name,vars:{name:this.user.name,site_name:i.theme.site_name},loading:!1}},methods:{submit:function(){return this.useRecaptcha?this.$refs.invisibleRecaptcha.execute():this.submitForm()},submitForm:function(e){if(this.user.recaptcha=e,Fx.validSignup(this.vars,this.user))return this.loading=!0,Fx.signUp(this.user).finally((()=>this.loading=!1))}},computed:{recaptchaKey:function(){return i.recaptchaKey},termsUrl:function(){return i.theme.terms_url},privacyUrl:function(){return i.theme.privacy_url},newsletterEnabled:function(){return i.newsletterEnabled},allow:function(){return i.features.app.create_user||null!=i.pendingIdentity.identity_type},useRecaptcha:function(){return this.recaptchaKey}}},Ik=Zk,Ak=(0,Ut.Z)(Ik,xk,kk,!1,null,null,null),$k=Ak.exports,Sk=function(){var e=this,t=e._self._c;return t("div",{staticClass:"auth-modal"},[e.user.authForm?e._e():t(ck,{attrs:{user:e.user,"prevent-close":e.preventClose}}),"signIn"==e.user.authForm?t(wk,{attrs:{user:e.user}}):e._e(),"signUp"==e.user.authForm?t($k,{attrs:{user:e.user}}):e._e(),"identity"==e.user.authForm?t(_k,{attrs:{user:e.user,identity:e.pendingProviderIdentity}}):e._e(),"complete"==e.user.authForm?t(Vx,{attrs:{user:e.user}}):e._e(),"inactive"==e.user.authForm?t("auth-inactive",{attrs:{user:e.user}}):e._e()],1)},Nk=[],Tk=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"auth-inactive text-center"},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"profile_page.messages.deactivated",expression:"'profile_page.messages.deactivated'"}],staticClass:"headline",attrs:{tabindex:"-1",role:"status","aria-live":"assertive"}}),t(yn.Z),t($s.Z,{staticClass:"back-button",attrs:{icon:"",title:e.$t("common.action.back")},on:{click:function(t){e.user.authForm=null}}},[t(Qt.Z,[e._v("mdi-close")])],1)],1),t(an.Z,{staticClass:"mx-4 pb-4"},[t("p",{staticClass:"title"},[e._v(e._s(e.user.email))]),t("p",{directives:[{name:"t",rawName:"v-t",value:"devise.failure.inactive",expression:"'devise.failure.inactive'"}]}),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:{path:"user_dropdown.contact_site_name",args:{site_name:e.siteName}},expression:"{path: 'user_dropdown.contact_site_name', args: {site_name: siteName}}"}],attrs:{to:"/contact"}})],1)],1)},jk=[],Pk={mixins:[x_],props:{user:Object},data:function(){return{siteName:i.theme.site_name}}},Ok=Pk,Rk=(0,Ut.Z)(Ok,Tk,jk,!1,null,null,null),qk=Rk.exports,Mk={components:{AuthInactive:qk},props:{preventClose:Boolean,close:Function},data:function(){return{siteName:i.theme.site_name,titleKey:"auth_form.sign_in_to_loomio",user:jt.users.build({createAccount:!1}),isDisabled:!1,pendingProviderIdentity:Rt.providerIdentity()}},mounted:function(){return Fx.applyEmailStatus(this.user,i.pendingIdentity)},methods:{back:function(){return this.user.emailStatus=null}},computed:{showBackButton:function(){return this.user.emailStatus&&!this.user.sentLoginLink&&!this.user.sentPasswordLink}}},Ek=Mk,Lk=(0,Ut.Z)(Ek,Sk,Nk,!1,null,null,null),Dk=Lk.exports,Fk=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"membership-request-form"},[t(lc,{attrs:{value:e.membershipRequest.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"membership_request_form.heading",expression:"'membership_request_form.heading'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{close:e.close}})],1),t(is.ZB,[e.isSignedIn?e._e():t("div",{staticClass:"membership-request-form__visitor"},[t(ci.Z,{staticClass:"membership-request-form__name",attrs:{required:!0,label:e.$t("membership_request_form.name_label")},model:{value:e.membershipRequest.name,callback:function(t){e.$set(e.membershipRequest,"name",t)},expression:"membershipRequest.name"}}),t(ci.Z,{staticClass:"membership-request-form__email",attrs:{required:!0,label:e.$t("membership_request_form.email_label")},model:{value:e.membershipRequest.email,callback:function(t){e.$set(e.membershipRequest,"email",t)},expression:"membershipRequest.email"}}),t(_c,{attrs:{subject:e.membershipRequest,field:"email"}})],1),t("div",{staticClass:"membership-request-form__reason"},[t(fr.Z,{staticClass:"membership-request-form__introduction",attrs:{required:!1,maxlength:"250",label:e.$t("membership_request_form.introduction_label")},model:{value:e.membershipRequest.introduction,callback:function(t){e.$set(e.membershipRequest,"introduction",t)},expression:"membershipRequest.introduction"}})],1)]),t(is.h7,[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.cancel",expression:"'common.action.cancel'"}],staticClass:"membership-request-form__cancel-btn",on:{click:function(t){return e.close()}}}),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"membership_request_form.submit_button",expression:"'membership_request_form.submit_button'"}],staticClass:"membership-request-form__submit-btn",attrs:{color:"primary"},on:{click:function(t){return e.submit()}}})],1)],1)},Uk=[],zk={props:{group:Object,close:Function},methods:{submit:function(){return this.membershipRequest.save().then((()=>(Fn.success("membership_request_form.messages.membership_requested",{group:this.group.fullName}),this.close())))}},data:function(){return{membershipRequest:jt.membershipRequests.build({groupId:this.group.id,name:Rt.user().name,email:Rt.user().email,introduction:null})}},computed:{isSignedIn:function(){return Rt.isSignedIn()}}},Bk=zk,Vk=(0,Ut.Z)(Bk,Fk,Uk,!1,null,null,null),Hk=Vk.exports,Gk=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"membership-modal"},[t(lc,{attrs:{value:e.membership.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"membership_form.modal_title.group",expression:"'membership_form.modal_title.group'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(is.ZB,{staticClass:"membership-form"},[t("p",{directives:[{name:"t",rawName:"v-t",value:{path:"membership_form.title_helptext.group",args:{name:e.membership.user().name}},expression:"{ path: 'membership_form.title_helptext.group', args: { name: membership.user().name } }"}],staticClass:"text--secondary membership-form__helptext"}),t("label",{directives:[{name:"t",rawName:"v-t",value:"membership_form.title_label",expression:"'membership_form.title_label'"}],attrs:{for:"membership-title"}}),t(ci.Z,{staticClass:"membership-form__title-input lmo-primary-form-input",attrs:{id:"membership-title",autofocus:"",placeholder:e.$t("membership_form.title_placeholder"),maxlength:"255"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.membership.title,callback:function(t){e.$set(e.membership,"title",t)},expression:"membership.title"}}),t(_c,{attrs:{subject:e.membership,field:"title"}})],1),t(is.h7,{staticClass:"membership-form-actions"},[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}],staticClass:"membership-form__submit",attrs:{color:"primary"},on:{click:function(t){return e.submit()}}})],1)],1)},Wk=[],Kk={props:{membership:Object},data:function(){return{isDisabled:!1}},methods:{submit:function(){return this.membership.save().then((()=>(Fn.success("membership_form.updated"),this.closeModal())))}}},Yk=Kk,Qk=(0,Ut.Z)(Yk,Gk,Wk,!1,null,null,null),Jk=Qk.exports,Xk=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"email-to-group-settings"},[e.confirmReset?e._e():t("div",[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"email_to_group.start_threads_via_email",expression:"'email_to_group.start_threads_via_email'"}],staticClass:"text-h6"}),t(yn.Z),t(Bh)],1),t(is.ZB,[t("p",{directives:[{name:"t",rawName:"v-t",value:"email_to_group.your_address_for_this_group",expression:"'email_to_group.your_address_for_this_group'"}]}),t(ci.Z,{attrs:{readonly:"",outlined:"","append-icon":"mdi-content-copy"},on:{"click:append":e.copyText},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),t("p",[t("span",{directives:[{name:"t",rawName:"v-t",value:"email_to_group.send_email_to_start_thread",expression:"'email_to_group.send_email_to_start_thread'"}]}),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"email_to_group.subject_body_attachments",expression:"'email_to_group.subject_body_attachments'"}]}),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"email_to_group.address_starts_threads_as_you",expression:"'email_to_group.address_starts_threads_as_you'"}]})],1),t("div",{staticClass:"d-flex flex-wrap"},[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.reset",expression:"'common.reset'"}],on:{click:function(t){e.confirmReset=!0}}}),t(yn.Z)],1)],1)],1),e.confirmReset?t("div",[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"email_to_group.generate_new_address_question",expression:"'email_to_group.generate_new_address_question'"}],staticClass:"text-h6"})]),t(is.ZB,[t("p",{directives:[{name:"t",rawName:"v-t",value:"email_to_group.generate_new_address_warning",expression:"'email_to_group.generate_new_address_warning'"}]}),t("div",{staticClass:"d-flex"},[t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.cancel",expression:"'common.action.cancel'"}],on:{click:function(t){e.confirmReset=!1}}}),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"email_to_group.generate_new_address",expression:"'email_to_group.generate_new_address'"}],attrs:{loading:e.loading},on:{click:e.resetKey}})],1)])],1):e._e()])},eC=[],tC={props:{group:Object},data:function(){return{key:null,confirmReset:!1,loading:!1}},created:function(){return jt.remote.get("profile/email_api_key").then((e=>this.key=e.email_api_key))},computed:{address:function(){return`${this.group.fullName} <${this.group.handle}+u=${Rt.user().id}&k=${this.key}@${i.theme["reply_hostname"]}>`}},methods:{resetKey:function(){return this.loading=!0,jt.remote.post("profile/reset_email_api_key").then((e=>(this.key=e.email_api_key,Fn.success("email_to_group.new_address_generated")))).finally((()=>(this.loading=!1,this.confirmReset=!1)))},copyText:function(){return navigator.clipboard.writeText(this.address),Fn.success("email_to_group.email_address_copied_to_clipboard")},sendGroupAddress:function(){return jt.remote.post("profile/send_email_to_group_address",{group_id:this.group.id}).then((()=>Fn.success("email_to_group.email_address_sent_to_you")))}}},oC=tC,sC=(0,Ut.Z)(oC,Xk,eC,!1,null,null,null),nC=sC.exports,iC=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"change-password-form",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit()}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.processing,expression:"processing"}],staticClass:"lmo-disabled-form"}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"change_password_form.set_password_title",expression:"'change_password_form.set_password_title'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{close:e.close}})],1),t(is.ZB,[t("p",{directives:[{name:"t",rawName:"v-t",value:"change_password_form.set_password_helptext",expression:"'change_password_form.set_password_helptext'"}],staticClass:"text--secondary"}),t("div",{staticClass:"change-password-form__password-container"},[t(ci.Z,{staticClass:"change-password-form__password",attrs:{label:e.$t("sign_up_form.password_label"),required:"",type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),t(_c,{attrs:{subject:e.user,field:"password"}})],1),t("div",{staticClass:"change-password-form__password-confirmation-container"},[t(ci.Z,{staticClass:"change-password-form__password-confirmation",attrs:{label:e.$t("sign_up_form.password_confirmation_label"),required:"true",type:"password",autocomplete:"new-password"},model:{value:e.user.passwordConfirmation,callback:function(t){e.$set(e.user,"passwordConfirmation",t)},expression:"user.passwordConfirmation"}}),t(_c,{attrs:{subject:e.user,field:"passwordConfirmation"}})],1)]),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"change_password_form.set_password",expression:"'change_password_form.set_password'"}],staticClass:"change-password-form__submit",attrs:{color:"primary"},on:{click:function(t){return e.submit()}}})],1)],1)},rC=[],aC={props:{user:Object,close:Function},data:function(){return{processing:!1}},created:function(){return this.user.password="",this.user.passwordConfirmation=""},methods:{submit:function(){return jt.users.updateProfile(this.user).then((()=>(Fn.success("change_password_form.password_changed"),this.close()))).catch((()=>!0))}}},lC=aC,cC=(0,Ut.Z)(lC,iC,rC,!1,null,null,null),uC=cC.exports,dC=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"chatbot-list"},[t(is.EB,[t("h1",{staticClass:"headline",attrs:{tabindex:"-1"}},[e._v("Chatbots")]),t(yn.Z),t(Bh)],1),t(is.ZB,[e.loading?t(As):e._e(),e.loading?e._e():e._l(e.chatbots,(function(o){return t(zo.Z,{key:o.id,on:{click:function(t){return e.editChatbot(o)}}},[t(Vo.km,[t(Vo.V9,[e._v(e._s(o.name))]),t(Vo.oZ,[e._v(e._s(o.kind)+" "+e._s(o.server)+" "+e._s(o.channel))])],1)],1)}))],2),t(is.h7,{staticClass:"px-4"},[t(ir,{attrs:{path:"en/user_manual/groups/integrations/chatbots"}}),t(yn.Z),t(Us,{attrs:{actions:e.addActions,name:e.$t("chatbot.add_chatbot")}})],1)],1)},pC=[],mC=new class{addActions(e){return{matrix:{name:"chatbot.matrix",icon:"mdi-matrix",menu:!0,canPerform:function(){return!0},perform:function(){return Un({component:"ChatbotMatrixForm",props:{chatbot:jt.chatbots.build({groupId:e.id,kind:"matrix"})}})}},slack:{name:"chatbot.slack",icon:"mdi-slack",menu:!0,canPerform:function(){return!0},perform:function(){return Un({component:"ChatbotWebhookForm",props:{chatbot:jt.chatbots.build({groupId:e.id,kind:"webhook",webhookKind:"slack"})}})}},discord:{name:"chatbot.discord",icon:"mdi-discord",menu:!0,canPerform:function(){return!0},perform:function(){return Un({component:"ChatbotWebhookForm",props:{chatbot:jt.chatbots.build({groupId:e.id,kind:"webhook",webhookKind:"discord"})}})}},microsoft:{name:"chatbot.microsoft_teams",icon:"mdi-microsoft-teams",menu:!0,canPerform:function(){return!0},perform:function(){return Un({component:"ChatbotWebhookForm",props:{chatbot:jt.chatbots.build({groupId:e.id,kind:"webhook",webhookKind:"microsoft"})}})}},mattermost:{name:"chatbot.mattermost",icon:"mdi-chat-processing",menu:!0,canPerform:function(){return!0},perform:function(){return Un({component:"ChatbotWebhookForm",props:{chatbot:jt.chatbots.build({groupId:e.id,kind:"webhook",webhookKind:"markdown"})}})}}}}},hC={props:{group:Object},data:function(){return{chatbots:[],kinds:["matrix","slack","discord","mattermost","teams"],loading:!0,addActions:{},icons:{matrix:"mdi-matrix",slack:"mdi-slack",discord:"mdi-discord",mattermost:"mdi-chat-processing",teams:"mdi-microsoft-teams"}}},mounted:function(){return this.addActions=mC.addActions(this.group),this.watchRecords({collections:["chatbots"],query:e=>this.chatbots=jt.chatbots.find({groupId:this.group.id})}),jt.chatbots.fetch({params:{group_id:this.group.id}}).then((()=>this.loading=!1))},methods:{deleteChatbot:function(e){return e.destroy()},editChatbot:function(e){return"webhook"===e.kind?Un({component:"ChatbotWebhookForm",props:{chatbot:e}}):Un({component:"ChatbotMatrixForm",props:{chatbot:e}})}}},_C=hC,fC=(0,Ut.Z)(_C,dC,pC,!1,null,null,null),gC=fC.exports,vC=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"chatbot-matrix-form"},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"chatbot.chatbot",expression:"'chatbot.chatbot'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(is.ZB,[t(ci.Z,{attrs:{label:e.$t("chatbot.name"),hint:"The name of your chatroom"},model:{value:e.chatbot.name,callback:function(t){e.$set(e.chatbot,"name",t)},expression:"chatbot.name"}}),t(ci.Z,{attrs:{label:e.$t("chatbot.homeserver_url"),hint:"https://example.com"},model:{value:e.chatbot.server,callback:function(t){e.$set(e.chatbot,"server",t)},expression:"chatbot.server"}}),t(ci.Z,{attrs:{label:e.$t("chatbot.access_token"),placeholder:"Looks like: syt_cm9ZXJ0Lmd1dGiaWNG9vbWWv_QsMCFvOcUxucxajF_1Ty2",hint:"Login as the bot user, then find: User menu > All settings > Help & about > Access token"},model:{value:e.chatbot.accessToken,callback:function(t){e.$set(e.chatbot,"accessToken",t)},expression:"chatbot.accessToken"}}),t(ci.Z,{attrs:{label:e.$t("chatbot.channel"),placeholder:"E.g. #general:example.com or !hZAAvLtRpxPTHIvfLC:example.com",hint:"As bot user: Room options > Settings > Advanced > Internal room ID"},model:{value:e.chatbot.channel,callback:function(t){e.$set(e.chatbot,"channel",t)},expression:"chatbot.channel"}}),t(is.h7,[e.chatbot.id?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.delete",expression:"'common.action.delete'"}],on:{click:e.destroy}}):e._e(),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}],attrs:{color:"primary"},on:{click:e.submit}})],1)],1)],1)},bC=[],yC={props:{chatbot:Object},data:function(){return{kinds:i.webhookEventKinds,testing:!1}},methods:{submit:function(){return this.chatbot.save().then((()=>(Fn.success("chatbot.saved"),D.$emit("closeModal")))).catch((e=>(Fn.error("common.something_went_wrong"),console.log(this.chatbot.errors))))},destroy:function(){return this.chatbot.destroy().then((()=>(Fn.success("poll_common_delete_modal.success"),D.$emit("closeModal")))).catch((e=>(Fn.error("common.something_went_wrong"),console.log(this.chatbot.errors))))},testConnection:function(){return this.testing=!0,jt.remote.post("chatbots/test",{server:this.chatbot.server,access_token:this.chatbot.accessToken,channel:this.chatbot.channel,group_name:"group name was here"}).finally((()=>(Fn.success("chatbot.check_for_test_message"),this.testing=!1)))}}},wC=yC,xC=(0,Ut.Z)(wC,vC,bC,!1,null,null,null),kC=xC.exports,CC=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"chatbot-matrix-form"},[t(is.EB,[t("h1",{staticClass:"headline",attrs:{tabindex:"-1"}},[t("span",[e._v("Webhook")]),t(Ro),t("span",{directives:[{name:"t",rawName:"v-t",value:"chatbot.chatbot",expression:"'chatbot.chatbot'"}]})],1),t(yn.Z),t(Bh)],1),t(is.ZB,[t(ci.Z,{attrs:{label:e.$t("chatbot.name"),hint:"The name of your chatroom"},model:{value:e.chatbot.name,callback:function(t){e.$set(e.chatbot,"name",t)},expression:"chatbot.name"}}),t(_c,{attrs:{subject:e.chatbot,field:"name"}}),t(ci.Z,{attrs:{label:e.$t("chatbot.webhook_url"),hint:"Looks like: https://hooks.example.com/services/abc/xyz/123"},model:{value:e.chatbot.server,callback:function(t){e.$set(e.chatbot,"server",t)},expression:"chatbot.server"}}),t(_c,{attrs:{subject:e.chatbot,field:"server"}}),t("p",{staticClass:"mt-2 mb-2",domProps:{innerHTML:e._s(e.$t("webhook.we_have_guides",{url:e.url}))}}),t(Jm.Z,{staticClass:"webhook-form__include-body",attrs:{label:e.$t("chatbot.notification_only_label"),"hide-details":""},model:{value:e.chatbot.notificationOnly,callback:function(t){e.$set(e.chatbot,"notificationOnly",t)},expression:"chatbot.notificationOnly"}}),t("p",{directives:[{name:"t",rawName:"v-t",value:"chatbot.event_kind_helptext",expression:"'chatbot.event_kind_helptext'"}],staticClass:"mt-4 text--secondary"}),e._l(e.kinds,(function(o){return t(Jm.Z,{key:o,staticClass:"webhook-form__event-kind",attrs:{"hide-details":"",label:e.$t("webhook.event_kinds."+o),value:o},model:{value:e.chatbot.eventKinds,callback:function(t){e.$set(e.chatbot,"eventKinds",t)},expression:"chatbot.eventKinds"}})})),t(is.h7,[e.chatbot.id?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.delete",expression:"'common.action.delete'"}],on:{click:e.destroy}}):e._e(),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"chatbot.test_connection",expression:"'chatbot.test_connection'"}],attrs:{loading:e.testing},on:{click:e.testConnection}}),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}],attrs:{color:"primary"},on:{click:e.submit}})],1)],2)],1)},ZC=[],IC={props:{chatbot:Object},data:function(){return{kinds:i.webhookEventKinds,testing:!1,formats:[{text:this.$t("webhook.formats.markdown"),value:"markdown"},{text:this.$t("webhook.formats.microsoft"),value:"microsoft"},{text:this.$t("webhook.formats.slack"),value:"slack"},{text:this.$t("webhook.formats.discord"),value:"discord"}]}},methods:{destroy:function(){return this.chatbot.destroy().then((()=>(Fn.success("poll_common_delete_modal.success"),D.$emit("closeModal")))).catch((e=>(Fn.error("common.something_went_wrong"),console.log(this.chatbot.errors))))},submit:function(){return this.chatbot.save().then((()=>(Fn.success("chatbot.saved"),D.$emit("closeModal")))).catch((e=>Fn.warning("common.check_for_errors_and_try_again")))},testConnection:function(){return this.testing=!0,jt.remote.post("chatbots/test",{server:this.chatbot.server,kind:"slack_webhook"}).finally((()=>(Fn.success("chatbot.check_for_test_message"),this.testing=!1)))}},computed:{url:function(){switch(this.chatbot.webhookKind){case"slack":return"https://help.loomio.com/en/user_manual/groups/integrations/slack";case"discord":return"https://help.loomio.com/en/user_manual/groups/integrations/discord";case"microsoft":return"https://help.loomio.com/en/user_manual/groups/integrations/microsoft_teams";case"mattermost":return"https://help.loomio.com/en/user_manual/groups/integrations/mattermost"}}}},AC=IC,$C=(0,Ut.Z)(AC,CC,ZC,!1,null,null,null),SC=$C.exports,NC=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"poll-common-outcome-modal",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null}}},[t(lc,{attrs:{value:e.outcome.processing}}),t(is.EB,[t("h1",{staticClass:"headline"},[e.outcome.isNew()?t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_outcome_form.new_title",expression:"'poll_common_outcome_form.new_title'"}]}):e._e(),e.outcome.isNew()?e._e():t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_outcome_form.update_title",expression:"'poll_common_outcome_form.update_title'"}]})]),t(yn.Z),t(Bh,{attrs:{model:e.outcome}})],1),t("div",{staticClass:"poll-common-outcome-form px-4"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"announcement.form.outcome_announced.helptext",expression:"'announcement.form.outcome_announced.helptext'"}],staticClass:"text--secondary"}),t("recipients-autocomplete",{attrs:{label:e.$t("action_dock.notify"),placeholder:e.$t("poll_common_outcome_form.who_to_notify"),"include-actor":e.outcome.calendarInvite,model:e.outcome}}),e.poll.datesAsOptions()?t("div",{staticClass:"poll-common-calendar-invite"},[t("div",{staticClass:"poll-common-calendar-invite__form"},[t("div",{staticClass:"poll-common-calendar-invite--pad-top"},[t(Fi.Z,{staticClass:"lmo-flex__grow",attrs:{items:e.options,"item-value":"id","item-text":"value",label:e.$t("poll_common_calendar_invite.poll_option_id")},model:{value:e.outcome.pollOptionId,callback:function(t){e.$set(e.outcome,"pollOptionId",t)},expression:"outcome.pollOptionId"}})],1),e.outcome.pollOptionId?t("div",{staticClass:"poll-common-calendar-invite--pad-top"},[t(ci.Z,{staticClass:"poll-common-calendar-invite__summary",attrs:{type:"text",placeholder:e.$t("poll_common_calendar_invite.event_summary_placeholder"),label:e.$t("poll_common_calendar_invite.event_summary")},model:{value:e.outcome.eventSummary,callback:function(t){e.$set(e.outcome,"eventSummary",t)},expression:"outcome.eventSummary"}}),t(_c,{attrs:{subject:e.outcome,field:"event_summary"}}),t(ci.Z,{staticClass:"poll-common-calendar-invite__location",attrs:{type:"text",placeholder:e.$t("poll_common_calendar_invite.location_placeholder"),label:e.$t("poll_common_calendar_invite.location")},model:{value:e.outcome.eventLocation,callback:function(t){e.$set(e.outcome,"eventLocation",t)},expression:"outcome.eventLocation"}})],1):e._e()])]):e._e(),"proposal"==e.outcome.poll().pollType?t("div",{staticClass:"outcome-review-on"},[t(qs.Z,{ref:"menu",attrs:{"close-on-content-click":!1,"offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t(ci.Z,e._g(e._b({attrs:{clearable:"",placeholder:"2050-12-31",label:e.$t("poll_common_outcome_form.review_date"),hint:e.$t("poll_common_outcome_form.review_date_hint"),"prepend-icon":"mdi-calendar"},model:{value:e.outcome.reviewOn,callback:function(t){e.$set(e.outcome,"reviewOn",t)},expression:"outcome.reviewOn"}},"v-text-field",s,!1),o))]}}],null,!1,3847503666),model:{value:e.isShowingDatePicker,callback:function(t){e.isShowingDatePicker=t},expression:"isShowingDatePicker"}},[t(ga.Z,{staticClass:"outcome-review-on__datepicker",attrs:{min:e.dateToday,"no-title":""},on:{input:function(t){e.isShowingDatePicker=!1}},model:{value:e.outcome.reviewOn,callback:function(t){e.$set(e.outcome,"reviewOn",t)},expression:"outcome.reviewOn"}})],1),e.outcome.reviewOn?t("p",{directives:[{name:"t",rawName:"v-t",value:e.$t("poll_common_outcome_form.you_will_be_notified"),expression:"$t('poll_common_outcome_form.you_will_be_notified')"}]}):e._e()],1):e._e(),t(tc,{staticClass:"poll-common-outcome-form__statement lmo-primary-form-input",attrs:{model:e.outcome,field:"statement",label:e.$t("poll_common.statement"),placeholder:e.$t("poll_common_outcome_form.statement_placeholder")},scopedSlots:e._u([{key:"actions",fn:function(){return[t($s.Z,{staticClass:"poll-common-outcome-form__submit",attrs:{color:"primary",loading:e.outcome.processing},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}]})])]},proxy:!0}])}),t(_c,{attrs:{subject:e.outcome,field:"statement"}})],1)],1)},TC=[],jC={components:{RecipientsAutocomplete:bm},props:{outcome:Object,close:Function},data:function(){return{options:[],bestOption:null,isDisabled:!1,review:!1,isShowingDatePicker:!1,dateToday:(0,Am.Z)(new Date,"yyyy-MM-dd")}},created:function(){if(this.poll.datesAsOptions())return this.options=(0,l.map)(this.outcome.poll().pollOptions(),(function(e){return{id:e.id,value:Ge((0,m.Z)(e.name)),attendees:e.stances().length}})),this.options.unshift({id:null,value:M.t("common.none"),attendees:0}),this.bestOption=(0,l.head)((0,l.sortBy)(this.options,(function(e){return-1*e.attendees}))),s.ZP.set(this.outcome,"calendarInvite",!0),this.outcome.pollOptionId=this.outcome.pollOptionId||this.bestOption.id,this.outcome.eventSummary=this.outcome.eventSummary||this.outcome.poll().title},computed:{poll:function(){return this.outcome.poll()}},methods:{submit:function(){var e;return this.poll.datesAsOptions()&&(this.outcome.eventDescription=this.outcome.statement),this.outcome.calendarInvite&&(this.outcome.includeActor=1),e=this.outcome.isNew()?"created":"updated",this.outcome.save().then((t=>(Fn.success(`poll_common_outcome_form.outcome_${e}`),this.closeModal()))).catch((e=>!0))},newRecipients:function(e){return this.recipients=e,this.outcome.recipientAudience=(e.find((function(e){return"audience"===e.type}))||{}).id,this.outcome.recipientUserIds=(0,l.map)((0,l.filter)(e,(function(e){return"user"===e.type})),"id"),this.outcome.recipientEmails=(0,l.map)((0,l.filter)(e,(function(e){return"email"===e.type})),"name")}}},PC=jC,OC=(0,Ut.Z)(PC,NC,TC,!1,null,null,null),RC=OC.exports,qC=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"poll-common-reopen-modal"},[t(lc,{attrs:{value:e.poll.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_reopen_form.title",args:{poll_type:e.poll.translatedPollType()}},expression:"{path: 'poll_common_reopen_form.title', args: {poll_type: poll.translatedPollType()}}"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(is.ZB,{staticClass:"poll-common-reopen-form"},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_reopen_form.helptext",args:{poll_type:e.poll.translatedPollType()}},expression:"{path: 'poll_common_reopen_form.helptext', args: {poll_type: poll.translatedPollType()}}"}],staticClass:"text--secondary"}),t(Lm,{attrs:{poll:e.poll}})],1),t(is.h7,[t(yn.Z),t($s.Z,{staticClass:"poll-common-reopen-form__submit",attrs:{color:"primary",loading:e.poll.processing},on:{click:e.submit}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.reopen",expression:"'common.action.reopen'"}]})])],1)],1)},MC=[],EC={props:{poll:Object,close:Function},created:function(){return this.poll.closingAt=(0,je.Z)(new Date,7)},methods:{submit:function(){return this.poll.reopen().then((()=>(this.poll.processing=!1,Fn.success("poll_common_reopen_form.success",{poll_type:this.poll.translatedPollType()}),this.close())))}},data:function(){return{isDisabled:!1}}},LC=EC,DC=(0,Ut.Z)(LC,qC,MC,!1,null,null,null),FC=DC.exports,UC=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"poll-common-option-form"},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:e.$t("poll_option_form.edit_option"),expression:"$t('poll_option_form.edit_option')"}],staticClass:"headline"}),t(yn.Z),t(Bh)],1),t(is.ZB,[t(ci.Z,{attrs:{label:e.$t("poll_option_form.option_name"),hint:e.$t("poll_option_form.option_name_hint"),counter:"85"},model:{value:e.clone.name,callback:function(t){e.$set(e.clone,"name",t)},expression:"clone.name"}}),e.hasOptionIcon?t(Fi.Z,{attrs:{label:e.$t("poll_option_form.icon"),items:e.icons},model:{value:e.clone.icon,callback:function(t){e.$set(e.clone,"icon",t)},expression:"clone.icon"}}):e._e(),e.hasOptionMeaning?t(fr.Z,{attrs:{label:e.$t("poll_option_form.meaning"),hint:e.$t("poll_option_form.meaning_hint")},model:{value:e.clone.meaning,callback:function(t){e.$set(e.clone,"meaning",t)},expression:"clone.meaning"}}):e._e(),e.hasOptionPrompt?t(ci.Z,{attrs:{label:e.$t("poll_option_form.prompt"),hint:e.$t("poll_option_form.prompt_hint"),placeholder:e.$t("poll_common.reason_placeholder")},model:{value:e.clone.prompt,callback:function(t){e.$set(e.clone,"prompt",t)},expression:"clone.prompt"}}):e._e()],1),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.done",expression:"'common.action.done'"}],on:{click:e.submit}})],1)],1)},zC=[],BC={props:{pollOption:Object,poll:Object},data:function(){return{clone:(0,l.pick)(this.pollOption,"name","icon","meaning","prompt"),icons:[{text:"Thumbs up",value:"agree"},{text:"Thumbs down",value:"disagree"},{text:"Thumbs sideways",value:"abstain"},{text:"Hand up",value:"block"}]}},computed:{hasOptionIcon:function(){return this.poll.config().has_option_icon},hasOptionPrompt:function(){return this.poll.config().per_option_reason_prompt},hasOptionMeaning:function(){return this.poll.config().options_have_meaning}},methods:{submit:function(){return Object.assign(this.pollOption,this.clone),D.$emit("closeModal")}}},VC=BC,HC=(0,Ut.Z)(VC,UC,zC,!1,null,null,null),GC=HC.exports,WC=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"move-thread-form"},[t(lc,{attrs:{value:e.discussion.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"move_thread_form.title",expression:"'move_thread_form.title'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(is.ZB,[t(Fi.Z,{staticClass:"move-thread-form__group-dropdown",attrs:{id:"group-dropdown",required:!0,items:e.availableGroups,"item-value":"id","item-text":"fullName",label:e.$t("move_thread_form.body")},on:{change:function(t){return e.updateTarget()}},scopedSlots:e._u([{key:"item",fn:function(o){return[t(Vo.km,{staticClass:"group-dropdown-item"},[t(Vo.V9,{staticClass:"group-dropdown-item-group-name"},[t("span",[e._v(e._s(o.item.fullName))])])],1)]}}]),model:{value:e.discussion.groupId,callback:function(t){e.$set(e.discussion,"groupId",t)},expression:"discussion.groupId"}})],1),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"move_thread_form.confirm",expression:"'move_thread_form.confirm'"}],staticClass:"move-thread-form__submit",attrs:{color:"primary",type:"button"},on:{click:function(t){return e.moveThread()}}})],1)],1)},KC=[],YC={props:{discussion:Object},data:function(){return{targetGroup:null,availableGroups:[]}},created:function(){return this.updateTarget(),this.watchRecords({collections:["groups","memberships"],query:e=>this.availableGroups=(0,l.filter)(Rt.user().groups(),(e=>e.id!==this.discussion.groupId))})},methods:{submit:function(){return this.discussion.move().then((e=>{var t;return Fn.success("move_thread_form.messages.success",{name:this.discussion.group().name}),t=e.discussions[0].key,jt.discussions.findOrFetchById(t,{},!0).then((e=>(this.close(),this.$router.push(`/d/${t}`))))})).catch((()=>!0))},updateTarget:function(){return this.targetGroup=jt.groups.find(this.discussion.groupId)},moveThread:function(){return this.discussion.private&&this.targetGroup.privacyIsOpen()?confirm(M.t("move_thread_form.confirm_change_to_private_thread",{groupName:this.targetGroup.name}))?this.submit():void 0:this.submit()}}},QC=YC,JC=(0,Ut.Z)(QC,WC,KC,!1,null,null,null),XC=JC.exports,eZ=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"poll-common-move-form",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.submit():null},"!keydown":function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.metaKey?(t.stopPropagation(),e.submit()):null}}},[t(lc,{attrs:{value:e.poll.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:{path:"poll_common_move_form.title",args:{poll_type:e.poll.translatedPollType()}},expression:"{path: 'poll_common_move_form.title', args: {poll_type: poll.translatedPollType() }}"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(is.ZB,[e.groups.length?e._e():t(As),e.groups.length?t(Fi.Z,{attrs:{items:e.groups,label:e.$t("move_thread_form.body")},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}}):e._e()],1),t(is.h7,{staticClass:"poll-common-form-actions"},[t(yn.Z),t($s.Z,{staticClass:"poll-common-form__submit",attrs:{color:"primary",loading:e.poll.processing},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.move",expression:"'common.action.move'"}]})])],1)],1)},tZ=[],oZ={props:{poll:Object,close:Function},data:function(){return{groupId:this.poll.groupId,groups:[]}},mounted:function(){var e;return e=this.poll.group().parentOrSelf(),jt.groups.fetchByParent(e).then((()=>{var t;return t=[e].concat(jt.groups.find({parentId:e.id})).filter((e=>e.adminsInclude(Rt.user()))),(0,l.orderBy)(t,"fullName"),this.groups=(0,l.map)(t,(e=>({text:e.fullName,value:e.id,disabled:e.id===this.poll.groupId})))}))},methods:{submit:function(){return this.poll.setErrors({}),this.poll.groupId=this.groupId,this.poll.save().then((e=>{var t;return t=jt.groups.find(this.groupId),Fn.success("poll_common_move_form.success",{poll_type:this.poll.translatedPollType(),group:t.name}),this.close()})).catch((e=>!0))}}},sZ=oZ,nZ=(0,Ut.Z)(sZ,eZ,tZ,!1,null,null,null),iZ=nZ.exports,rZ=function(){var e=this,t=e._self._c;return t("div",{staticClass:"html-diff",domProps:{innerHTML:e._s(e.diff())}})},aZ=[];vw=function(e){return">"===e},bw=function(e){return"<"===e},ww=function(e){return/^\s+$/.test(e)},yw=function(e){return/^\s*<[^>]+>\s*$/.test(e)},xw=function(e){return!yw(e)},uw=class{constructor(e,t,o){this.start_in_before=e,this.start_in_after=t,this.length=o,this.end_in_before=this.start_in_before+this.length-1,this.end_in_after=this.start_in_after+this.length-1}},gw=function(e){var t,o,s,n,i,r;for(i="char",o="",r=[],s=0,n=e.length;s<n;s++)switch(t=e[s],i){case"tag":vw(t)?(o+=">",r.push(o),o="",i=ww(t)?"whitespace":"char"):o+=t;break;case"char":bw(t)?(o&&r.push(o),o="<",i="tag"):/\s/.test(t)?(o&&r.push(o),o=t,i="whitespace"):/[\w\#@]+/i.test(t)?o+=t:(o&&r.push(o),o=t);break;case"whitespace":bw(t)?(o&&r.push(o),o="<",i="tag"):ww(t)?o+=t:(o&&r.push(o),o=t,i="char");break;default:throw new Error(`Unknown mode ${i}`)}return o&&r.push(o),r},_w=function(e,t,o,s,n,i,r){var a,l,c,u,d,p,m,h,_,f,g,v,b,y,w,x;for(l=s,a=i,c=0,v={},p=u=w=s,x=n;w<=x?u<x:u>x;p=w<=x?++u:--u){for(y={},f=e[p],_=o[f],m=0,h=_.length;m<h;m++)if(d=_[m],!(d<i)){if(d>=r)break;null==v[d-1]&&(v[d-1]=0),b=v[d-1]+1,y[d]=b,b>c&&(l=p-b+1,a=d-b+1,c=b)}v=y}return 0!==c&&(g=new uw(l,a,c)),g},Cw=function(e,t,o,s,n,i,r,a){var l;return l=_w(e,t,o,s,n,i,r),null!=l&&(s<l.start_in_before&&i<l.start_in_after&&Cw(e,t,o,s,l.start_in_before,i,l.start_in_after,a),a.push(l),l.end_in_before<=n&&l.end_in_after<=r&&Cw(e,t,o,l.end_in_before+1,n,l.end_in_after+1,r,a)),a},mw=function(e){var t,o,s,n,i,r;if(null==e.find_these)throw new Error("params must have find_these key");if(null==e.in_these)throw new Error("params must have in_these key");for(s={},i=e.find_these,t=0,n=i.length;t<n;t++){r=i[t],s[r]=[],o=e.in_these.indexOf(r);while(-1!==o)s[r].push(o),o=e.in_these.indexOf(r,o+1)}return s},fw=function(e,t){var o,s;return s=[],o=mw({find_these:e,in_these:t}),Cw(e,t,o,0,e.length,0,t.length,s)},dw=function(e,t){var o,s,n,i,r,a,l,c,u,d,p,m,h,_,f,g,v,b;if(null==e)throw new Error("before_tokens?");if(null==t)throw new Error("after_tokens?");for(v=g=0,f=[],o={"false,false":"replace","true,false":"insert","false,true":"delete","true,true":"none"},h=fw(e,t),h.push(new uw(e.length,t.length,0)),i=n=0,c=h.length;n<c;i=++n)d=h[i],m=v===d.start_in_before,p=g===d.start_in_after,s=o[[m,p].toString()],"none"!==s&&f.push({action:s,start_in_before:v,end_in_before:"insert"!==s?d.start_in_before-1:void 0,start_in_after:g,end_in_after:"delete"!==s?d.start_in_after-1:void 0}),0!==d.length&&f.push({action:"equal",start_in_before:d.start_in_before,end_in_before:d.end_in_before,start_in_after:d.start_in_after,end_in_after:d.end_in_after}),v=d.end_in_before+1,g=d.end_in_after+1;for(b=[],l={action:"none"},r=function(t){return"equal"===t.action&&(t.end_in_before-t.start_in_before===0&&/^\s$/.test(e.slice(t.start_in_before,+t.end_in_before+1||9e9)))},a=0,u=f.length;a<u;a++)_=f[a],r(_)&&"replace"===l.action||"replace"===_.action&&"replace"===l.action?(l.end_in_before=_.end_in_before,l.end_in_after=_.end_in_after):(b.push(_),l=_);return b},pw=function(e,t,o){var s,n,i,r,a,l;for(t=t.slice(e,+t.length+1||9e9),r=void 0,i=n=0,a=t.length;n<a;i=++n)if(l=t[i],s=o(l),!0===s&&(r=i),!1===s)break;return null!=r?t.slice(0,+r+1||9e9):[]},Iw=function(e,t){var o,s,n,i,r;i="",n=0,o=t.length;while(1){if(n>=o)break;if(s=pw(n,t,xw),n+=s.length,0!==s.length&&(i+=`<${e}>${s.join("")}</${e}>`),n>=o)break;r=pw(n,t,yw),n+=r.length,i+=r.join("")}return i},kw={equal:function(e,t,o){return t.slice(e.start_in_before,+e.end_in_before+1||9e9).join("")},insert:function(e,t,o){var s;return s=o.slice(e.start_in_after,+e.end_in_after+1||9e9),Iw("ins",s)},delete:function(e,t,o){var s;return s=t.slice(e.start_in_before,+e.end_in_before+1||9e9),Iw("del",s)}},kw.replace=function(e,t,o){return kw.delete(e,t,o)+kw.insert(e,t,o)},Zw=function(e,t,o){var s,n,i,r;for(r="",s=0,n=o.length;s<n;s++)i=o[s],r+=kw[i.action](i,e,t);return r},hw=function(e,t){var o;return e===t?e:(e=gw(e),t=gw(t),o=dw(e,t),Zw(e,t,o))},hw.html_to_tokens=gw,hw.find_matching_blocks=fw,fw.find_match=_w,fw.create_index=mw,hw.calculate_operations=dw,hw.render_operations=Zw;var lZ=hw,cZ={props:{before:String,after:String},methods:{diff:function(){return lZ(this.before||"",this.after)}}},uZ=cZ,dZ=(0,Ut.Z)(uZ,rZ,aZ,!1,null,null,null),pZ=dZ.exports,mZ=o(26954),hZ=function(){var e=this,t=e._self._c;return t("div",{staticClass:"revision-history-content"},[e.titleChanges?t("div",{staticClass:"mb-3"},[t(mZ.Z,{directives:[{name:"t",rawName:"v-t",value:"discussion_form.title_label",expression:"'discussion_form.title_label'"}]}),t(pZ,{staticClass:"headline",attrs:{before:e.titleChanges[0],after:e.titleChanges[1]}})],1):e._e(),!e.stanceChoices&&e.otherFields.length?t("div",{staticClass:"mb-3"},[t(_d.Z,{attrs:{dense:""}},[t("thead",[t("tr",[t("th",{directives:[{name:"t",rawName:"v-t",value:"revision_history_modal.field",expression:"'revision_history_modal.field'"}]}),t("th",{directives:[{name:"t",rawName:"v-t",value:"revision_history_modal.before",expression:"'revision_history_modal.before'"}]}),t("th",{directives:[{name:"t",rawName:"v-t",value:"revision_history_modal.after",expression:"'revision_history_modal.after'"}]})])]),t("tbody",e._l(e.otherFields,(function(o){return t("tr",[t("td",[e._v(e._s(o.key))]),t("td",[e._v(e._s(o.was))]),t("td",[e._v(e._s(o.now))])])})),0)])],1):e._e(),e.stanceChoices?t("div",{staticClass:"mb-3"},[t("div",{directives:[{name:"t",rawName:"v-t",value:"revision_history_modal.before",expression:"'revision_history_modal.before'"}],staticClass:"text-secondary"}),t(_d.Z,{staticClass:"mb-4",attrs:{dense:""}},e._l(e.stanceChoices.was,(function(o){return t("tr",[t("td",{style:"border-left: 2px solid "+o.color},[e._v(e._s(o.name))]),t("td",[e._v(e._s(o.score))])])})),0),t("div",{directives:[{name:"t",rawName:"v-t",value:"revision_history_modal.after",expression:"'revision_history_modal.after'"}],staticClass:"text-secondary"}),t(_d.Z,{staticClass:"mb-4",attrs:{dense:""}},e._l(e.stanceChoices.now,(function(o){return t("tr",[t("td",{style:"border-left: 2px solid "+o.color},[e._v(e._s(o.name))]),t("td",[e._v(e._s(o.score))])])})),0)],1):e._e(),e.bodyChanges?t("div",{staticClass:"mb-3"},[t(mZ.Z,{directives:[{name:"t",rawName:"v-t",value:e.bodyLabel,expression:"bodyLabel"}]}),t(pZ,{staticClass:"lmo-markdown-wrapper",attrs:{before:e.bodyChanges[0],after:e.bodyChanges[1]}})],1):e._e()])},_Z=[];Ki.TU.setOptions(Object.assign({renderer:Br()},Vr));var fZ,gZ,vZ={props:{model:Object,version:Object},methods:{exact:Ge},computed:{modelKind:function(){return this.model.constructor.singular},bodyField:function(){switch(this.model.constructor.singular){case"comment":return"body";case"stance":return"reason";case"discussion":return"description";case"poll":return"details";case"outcome":return"statement"}},bodyChanges:function(){return this.version&&this.version.objectChanges&&this.version.objectChanges[this.bodyField]?"md"===this.model[this.bodyField+"Format"]?this.version.objectChanges[this.bodyField].map((function(e){return(0,Ki.TU)(e||"")})):this.version.objectChanges[this.bodyField]:""},titleChanges:function(){return(this.version.objectChanges||{}).title},bodyLabel:function(){switch(this.model.constructor.singular){case"comment":return"activity_card.comment";case"stance":return"poll_common.reason";case"discussion":return"discussion_form.context_label";case"poll":return"poll_common.details";case"outcome":return"poll_common.statement"}},objectKeys:function(){var e;return e=function(){switch(this.model.constructor.singular){case"comment":return["body","body_format"];case"stance":return["reason","reason_format"];case"discussion":return["title","description","description_format"];case"poll":return["title","details","details_format"];case"outcome":return["statement","statement_format"]}}.call(this),(0,l.reject)(Object.keys(this.version.objectChanges||{}),(function(t){return e.includes(t)}))},otherFields:function(){return this.objectKeys.map((e=>{var t;return t=this.version.objectChanges[e].map((t=>t?e.match(/_at$/)&&Ge((0,m.Z)(t))||t:this.$t("common.empty"))),{key:e,was:t[0],now:t[1]}}))},stanceChoices:function(){var e,t,o,s;return!("stance"!==this.model.constructor.singular||!this.version.objectChanges["option_scores"])&&(o=this.version.objectChanges["option_scores"][0],e=this.version.objectChanges["option_scores"][1],s=(0,l.map)(o,((e,t)=>{var o;return o=jt.pollOptions.find((0,l.parseInt)(t)),{name:o.optionName(),color:o.color,score:e}})),t=(0,l.map)(e,((e,t)=>{var o;return o=jt.pollOptions.find((0,l.parseInt)(t)),{name:o.optionName(),color:o.color,score:e}})),{was:s,now:t})},labelFor:function(e){return e}}},bZ=vZ,yZ=(0,Ut.Z)(bZ,hZ,_Z,!1,null,null,null),wZ=yZ.exports,xZ=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"revision-history-modal"},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"revision_history_modal."+e.model.constructor.singular+"_header",expression:"'revision_history_modal.' + model.constructor.singular + '_header'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{close:e.close}})],1),t("div",{staticClass:"revision-history-modal__body pa-4"},[t(ys.Z,{attrs:{"align-center":"","justify-space-between":""}},[t($s.Z,{staticClass:"revision-history-nav--previous",attrs:{icon:"",disabled:e.isOldest},on:{click:function(t){return e.getPrevious()}}},[t(Qt.Z,[e._v("mdi-arrow-left")])],1),e.version?t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"revision_history_modal.edit_by",args:{name:e.version.authorName(),date:e.versionDate}},expression:"{path: 'revision_history_modal.edit_by', args: {name: version.authorName(), date: versionDate}}"}]}):e._e(),t($s.Z,{staticClass:"revision-history-nav--next",attrs:{icon:"",disabled:e.isNewest},on:{click:function(t){return e.getNext()}}},[t(Qt.Z,[e._v("mdi-arrow-right")])],1)],1),t(em.Z,{staticClass:"mb-3"}),e.version?t(wZ,{attrs:{model:e.model,version:e.version}}):e._e()],1)],1)},kZ=[],CZ={props:{model:Object,close:Function},created:function(){return this.getVersion(this.model.versionsCount-1)},data:function(){return{index:1,version:null}},methods:{getVersion:function(e){return this.index=e,this.version=null,jt.versions.fetchVersion(this.model,e).then((e=>this.version=jt.versions.find(e.versions[0].id)))},getNext:function(){if(!this.isNewest)return this.getVersion(this.index+1)},getPrevious:function(){if(!this.isOldest)return this.getVersion(this.index-1)}},computed:{versionDate:function(){return Ge(this.version.createdAt)},isOldest:function(){return 0===this.index},isNewest:function(){return this.index===this.model.versionsCount-1}}},ZZ=CZ,IZ=(0,Ut.Z)(ZZ,xZ,kZ,!1,null,null,null),AZ=IZ.exports,$Z=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"tags-modal"},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"loomio_tags.card_title",expression:"'loomio_tags.card_title'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{close:e.close}})],1),t("div",{staticClass:"px-4 pb-2"},[t("p",{staticClass:"text--secondary"},[e.canAdminTags?t("span",{directives:[{name:"t",rawName:"v-t",value:"loomio_tags.helptext",expression:"'loomio_tags.helptext'"}]}):t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"loomio_tags.only_admins_can_edit_tags",args:{group:e.model.group().parentOrSelf().name}},expression:"{path: 'loomio_tags.only_admins_can_edit_tags', args: {group: model.group().parentOrSelf().name}}"}]})])]),e.canAdminTags?t("div",[0==e.allTags.length?t("div",{staticClass:"pa-4"},[t("p",{directives:[{name:"t",rawName:"v-t",value:"loomio_tags.no_tags_in_group",expression:"'loomio_tags.no_tags_in_group'"}],staticClass:"text--secondary"})]):e._e(),t(du,{attrs:{useDragHandle:!0,"append-to":".app-is-booted","lock-axis":"y",axis:"y"},on:{"sort-end":e.sortEnded},model:{value:e.allTags,callback:function(t){e.allTags=t},expression:"allTags"}},e._l(e.allTags,(function(o,s){return t(iu,{key:o.id,attrs:{index:s}},[t(zo.Z,[t("div",{directives:[{name:"handle",rawName:"v-handle"}],staticClass:"handle"},[t(Qt.Z,[e._v("mdi-drag-vertical")])],1),t(qo.Z,{directives:[{name:"handle",rawName:"v-handle"}],attrs:{outlined:"",color:o.color}},[e._v(e._s(o.name))]),t(yn.Z),t($s.Z,{attrs:{icon:""},on:{click:function(t){return e.openEditTagModal(o)}}},[t(Qt.Z,{staticClass:"text--secondary"},[e._v("mdi-pencil")])],1)],1)],1)})),1),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"loomio_tags.new_tag",expression:"'loomio_tags.new_tag'"}],staticClass:"tag-form_new-tag",attrs:{color:"primary"},on:{click:e.openNewTagModal}})],1)],1):e._e()],1)},SZ=[],NZ={props:{model:{type:Object,required:!0},close:Function},directives:{handle:tu.HandleDirective},data:function(){return{allTags:this.model.group().tags()}},mounted:function(){return this.watchRecords({key:"tags"+this.model.id,collections:["tags"],query:()=>this.allTags=this.model.group().tags()})},computed:{canAdminTags:function(){return this.model.group().adminsInclude(Rt.user())}},methods:{openNewTagModal:function(){return D.$emit("openModal",{component:"TagsModal",props:{tag:jt.tags.build({groupId:this.model.group().parentOrSelf().id}),close:()=>D.$emit("openModal",{component:"TagsSelect",props:{model:this.model}})}})},openEditTagModal:function(e){return D.$emit("openModal",{component:"TagsModal",props:{tag:e.clone(),close:()=>D.$emit("openModal",{component:"TagsSelect",props:{model:this.model}})}})},submit:function(){return D.$emit("closeModal")},sortEnded:function(){return setTimeout((()=>jt.remote.post("tags/priority",{group_id:this.model.groupId||this.model.id,ids:this.allTags.map((function(e){return e.id}))})))}}},TZ=NZ,jZ=(0,Ut.Z)(TZ,$Z,SZ,!1,null,null,null),PZ=jZ.exports,OZ=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"tags-modal"},[t(is.EB,[e.tag.id?t("h1",{directives:[{name:"t",rawName:"v-t",value:"loomio_tags.modal_edit_title",expression:"'loomio_tags.modal_edit_title'"}],staticClass:"headline",attrs:{tabindex:"-1"}}):e._e(),e.tag.id?e._e():t("h1",{directives:[{name:"t",rawName:"v-t",value:"loomio_tags.modal_title",expression:"'loomio_tags.modal_title'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{close:e.close}})],1),t(is.ZB,[t(ci.Z,{attrs:{label:e.$t("loomio_tags.name_label"),autofocus:"",disabled:e.tag.id},model:{value:e.tag.name,callback:function(t){e.$set(e.tag,"name",t)},expression:"tag.name"}}),t(_c,{attrs:{subject:e.tag,field:"name"}}),t("label",{directives:[{name:"t",rawName:"v-t",value:"loomio_tags.color_label",expression:"'loomio_tags.color_label'"}],staticClass:"v-label caption",attrs:{for:"input-708"}},[e._v("Color")]),t("div",{staticClass:"tag-colors d-flex"},e._l(e.tag.constructor.colors,(function(o){return t("span",{key:o,staticClass:"color-swatch"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.tag.color,expression:"tag.color"}],attrs:{id:o,type:"radio"},domProps:{value:o,checked:e._q(e.tag.color,o)},on:{change:function(t){return e.$set(e.tag,"color",o)}}}),t("label",{style:{"background-color":o,color:o},attrs:{for:o}},[e._v(e._s(o))])])})),0)],1),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}],staticClass:"tag-form__submit",attrs:{color:"primary",loading:e.loading},on:{click:e.submit}})],1)],1)},RZ=[],qZ={props:{tag:{type:Object,required:!0},close:Function},data:function(){return{loading:!1,destroying:!1}},methods:{deleteTag:function(){return D.$emit("openModal",{component:"ConfirmModal",props:{confirm:{submit:this.tag.destroy,text:{title:"loomio_tags.destroy_tag",helptext:"loomio_tags.destroy_helptext",submit:"common.action.delete",flash:"loomio_tags.tag_destroyed"}}}})},submit:function(){return this.loading=!0,this.tag.save().then((()=>this.close())).finally((()=>this.loading=!1))}}},MZ=qZ,EZ=(0,Ut.Z)(MZ,OZ,RZ,!1,null,null,null),LZ=EZ.exports,DZ=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"webhook-form"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:e.webhook.id?"webhook.edit_api_key":"webhook.add_api_key",expression:"!webhook.id ? 'webhook.add_api_key' : 'webhook.edit_api_key'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{close:e.close}})],1),t(is.ZB,{staticClass:"install-webhook-form"},[t(ci.Z,{staticClass:"webhook-form__name",attrs:{required:"",label:e.$t("webhook.name_label"),placeholder:e.$t("webhook.name_placeholder")},model:{value:e.webhook.name,callback:function(t){e.$set(e.webhook,"name",t)},expression:"webhook.name"}}),t(_c,{attrs:{subject:e.webhook,field:"name"}}),e.webhook.id?t("a",{directives:[{name:"t",rawName:"v-t",value:"webhook.show_docs",expression:"'webhook.show_docs'"}],attrs:{href:e.docsUrl(e.webhook.token),target:"_blank"}}):e._e(),e.webhook.id?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"webhook.save_to_show_docs",expression:"'webhook.save_to_show_docs'"}]}),t("p",{directives:[{name:"t",rawName:"v-t",value:"webhook.permissions_explaination",expression:"'webhook.permissions_explaination'"}],staticClass:"pt-4 text--secondary"}),e._l(e.permissions,(function(o){return t(Jm.Z,{key:o,staticClass:"webhook-form__permission",attrs:{"hide-details":"",label:e.$t("webhook.permissions."+o),value:o},model:{value:e.webhook.permissions,callback:function(t){e.$set(e.webhook,"permissions",t)},expression:"webhook.permissions"}})}))],2),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}],attrs:{color:"primary",type:"submit",loading:e.webhook.processing}})],1)],1)])},FZ=[],UZ={props:{close:Function,webhook:Object},data:function(){return{tab:"webhook",kinds:i.webhookEventKinds,permissions:["show_discussion","create_discussion","show_poll","create_poll","read_memberships","manage_memberships"]}},methods:{docsUrl:function(e){return i.baseUrl+`help/api?api_key=${e}`},submit:function(){return this.webhook.save().then((()=>(Fn.success("webhook.success"),this.close()))).catch((e=>console.log(this.webhook.errors)))}}},zZ=UZ,BZ=(0,Ut.Z)(zZ,DZ,FZ,!1,null,null,null),VZ=BZ.exports,HZ=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"webhook-list"},[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"webhook.api_keys",expression:"'webhook.api_keys'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{close:e.close}})],1),t(is.ZB,[t("p",{directives:[{name:"t",rawName:"v-t",value:"webhook.subtitle",expression:"'webhook.subtitle'"}],staticClass:"text--secondary"}),e.loading?t(As):e._e(),e.loading?e._e():t(rs.Z,e._l(e.webhooks,(function(o){return t(zo.Z,{key:o.id},[t(Vo.km,[t(Vo.V9,[e._v(e._s(o.name))])],1),t(En.Z,[t(Us,{attrs:{actions:e.webhookActions(o),icon:""}})],1)],1)})),1)],1),t(is.h7,[t(ir,{attrs:{path:"en/user_manual/groups/integrations/api"}}),t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:e.addAction(e.group).name,expression:"addAction(group).name"}],attrs:{color:"primary"},on:{click:function(t){e.addAction(e.group).perform()}}})],1)],1)},GZ=[],WZ=new class{addAction(e){return{name:"webhook.add_integration",icon:"mdi-plus",canPerform:function(){return!0},perform:function(){return D.$emit("openModal",{component:"WebhookForm",props:{webhook:jt.webhooks.build({groupId:e.id})}})}}}webhookActions(e){return{showApiDocs:{name:"webhook.show_docs",icon:"mdi-key-variant",canPerform:function(){return e.permissions.length},perform:function(){return window.open(i.baseUrl+`help/api?api_key=${e.token}`,"_blank")}},editWebhook:{name:"common.action.edit",icon:"mdi-pencil",canPerform:function(){return!0},perform:function(){return D.$emit("openModal",{component:"WebhookForm",props:{webhook:e}})}},destroyWebhook:{name:"common.action.delete",icon:"mdi-delete",canPerform:function(){return!0},perform:function(){return D.$emit("openModal",{component:"ConfirmModal",props:{confirm:{submit:e.destroy,text:{title:"webhook.remove",raw_helptext:M.t("webhook.confirm_remove",{name:e.name}),flash:"webhook.removed"}}}})}}}}},KZ={props:{close:Function,group:Object},data:function(){return{webhooks:[],loading:!0}},mounted:function(){return jt.webhooks.fetch({params:{group_id:this.group.id}}).then((()=>this.loading=!1)),this.watchRecords({collections:["webhooks"],query:e=>this.webhooks=e.webhooks.find({groupId:this.group.id})})},methods:{addAction:function(e){return WZ.addAction(e)},webhookActions:function(e){return WZ.webhookActions(e)}}},YZ=KZ,QZ=(0,Ut.Z)(YZ,HZ,GZ,!1,null,null,null),JZ=QZ.exports,XZ=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"change-picture-form"},[t(oc.Z,{attrs:{value:e.uploading}},[t(ws.Z,{attrs:{size:"64",value:e.progress}})],1),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"change_picture_form.title",expression:"'change_picture_form.title'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(is.ZB,[t("p",{staticClass:"text--secondary",domProps:{innerHTML:e._s(e.$t("change_picture_form.helptext"))}}),t(rs.Z,{staticClass:"change-picture-form__options-list"},[t(zo.Z,{staticClass:"change-picture-form__option",on:{click:function(t){return e.selectFile()}}},[t(Bo.Z,[t(Qt.Z,[e._v("mdi-camera")])],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"change_picture_form.use_uploaded",expression:"'change_picture_form.use_uploaded'"}]},[t("input",{ref:"fileInput",staticClass:"hidden change-picture-form__file-input",attrs:{type:"file",accept:"image/png, image/jpeg, image/webp"},on:{change:e.uploadFile}})])],1),e.previous_uploaded_avatar?t(zo.Z,{staticClass:"change-picture-form__option",on:{click:function(t){return e.submit("uploaded")}}},[t(Bo.Z,[t("img",{attrs:{src:e.previous_uploaded_avatar}})]),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"change_picture_form.existing_upload",expression:"'change_picture_form.existing_upload'"}]})],1):e._e(),e._l(e.providers,(function(o){return t(zo.Z,{key:o.id,on:{click:function(t){return e.selectProvider(o)}}},[t(Bo.Z,[t(Qt.Z,[e._v(e._s(e.iconClass(o.name)))])],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:{path:"change_picture_form.use_provider",args:{provider:e.capitalize(o.name)}},expression:"{ path: 'change_picture_form.use_provider', args: { provider: capitalize(provider.name) } }"}]})],1)})),t(zo.Z,{staticClass:"change-picture-form__option",on:{click:function(t){return e.submit("gravatar")}}},[t(Bo.Z,[t("v-gravatar",{attrs:{email:e.user.email,alt:e.user.name,size:128}})],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"change_picture_form.use_gravatar",expression:"'change_picture_form.use_gravatar'"}]})],1),t(zo.Z,{staticClass:"change-picture-form__option",on:{click:function(t){return e.submit("initials")}}},[t(Bo.Z,{staticClass:"user-avatar"},[t(zs.Z,{staticClass:"user-avatar__initials--small"},[e._v(e._s(e.user.avatarInitials))])],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"change_picture_form.use_initials",expression:"'change_picture_form.use_initials'"}]})],1)],2)],1)],1)},eI=[],tI=o(56459),oI=o.n(tI),sI={components:{"v-gravatar":oI()},data:function(){return{user:Rt.user().clone(),providers:i.identityProviders,uploading:!1,progress:0,previous_uploaded_avatar:void 0}},methods:{capitalize:l.capitalize,iconClass:function(e){return"mdi-"+("saml"===e?"key-variant":e)},providerColor:function(e){switch(e){case"facebook":return"#3b5998";case"google":return"#dd4b39";case"slack":return"#e9a820";default:return this.$vuetify.theme.themes.light.primary}},selectProvider:function(e){return window.location=`${e.href}?back_to=${window.location.href}`},selectFile:function(){return this.$refs.fileInput.click()},uploadFile:function(){return this.uploading=!0,jt.users.remote.onUploadSuccess=e=>(jt.importJSON(e),D.$emit("updateProfile"),D.$emit("closeModal"),this.uploading=!1),jt.users.remote.upload("upload_avatar",this.$refs.fileInput.files[0],{},(e=>this.progress=e.loaded/e.total*100))},submit:function(e){return this.user.avatarKind=e,jt.users.updateProfile(this.user).then((()=>(Fn.success("profile_page.messages.picture_changed"),D.$emit("updateProfile"),D.$emit("closeModal")))).catch((()=>!0))}},created:function(){return jt.users.saveExperience("changePicture"),jt.users.fetch({path:"avatar_uploaded"}).then((e=>this.previous_uploaded_avatar=e.avatar_uploaded))}},nI=sI,iI=(0,Ut.Z)(nI,XZ,eI,!1,null,null,null),rI=iI.exports,aI=function(){var e=this,t=e._self._c;return t(ns.Z,{staticClass:"pin-event-form"},[t(is.EB,[t("span",{directives:[{name:"t",rawName:"v-t",value:"pin_event_form.title",expression:"'pin_event_form.title'"}]}),t(yn.Z),t(Bh,{attrs:{"aria-hidden":"true"}})],1),t(is.ZB,[t(Lc.Z,{on:{submit:function(t){return t.preventDefault(),e.submit()}}},[t(ci.Z,{ref:"focus",attrs:{disabled:e.loading,label:e.$t("pin_event_form.title_label")},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),t(is.h7,[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}],attrs:{color:"primary",loading:e.loading},on:{click:function(t){return e.submit()}}})],1)],1)},lI=[],cI={props:{event:Object},data:function(){return{title:null,loading:!1}},mounted:function(){return this.title=window.getSelection()&&window.getSelection().toString()||this.event.pinnedTitle||this.event.suggestedTitle(),this.$nextTick((()=>this.$refs.focus.focus()))},methods:{submit:function(){return this.loading=!0,this.event.pin(this.title).then((()=>(Fn.success("activity_card.event_pinned"),D.$emit("closeModal"))))}}},uI=cI,dI=(0,Ut.Z)(uI,aI,lI,!1,null,null,null),pI=dI.exports,mI=function(){var e=this,t=e._self._c;return t(ns.Z,[t(lc,{attrs:{value:e.selectedDiscussion&&e.selectedDiscussion.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"action_dock.move_items",expression:"'action_dock.move_items'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{"aria-hidden":"true"}})],1),t(is.ZB,[t(Fi.Z,{attrs:{items:e.groups,"item-text":"fullName","item-value":"id"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}}),t(sm.Z,{attrs:{"hide-no-data":"","return-object":"","search-input":e.searchFragment,items:e.searchResults,"item-text":"title",placeholder:e.$t("discussion_fork_actions.search_placeholder"),label:e.$t("discussion_fork_actions.move_to_existing_thread"),loading:e.loading},on:{"update:searchInput":function(t){e.searchFragment=t},"update:search-input":function(t){e.searchFragment=t}},model:{value:e.selectedDiscussion,callback:function(t){e.selectedDiscussion=t},expression:"selectedDiscussion"}})],1),t(is.h7,[t(yn.Z),t($s.Z,{attrs:{color:"primary",outlined:"",loading:e.discussion.processing},on:{click:function(t){return e.startNewThread()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"discussion_fork_actions.start_new_thread",expression:"'discussion_fork_actions.start_new_thread'"}]})]),t($s.Z,{attrs:{color:"primary",disabled:!e.selectedDiscussion,loading:e.discussion.processing},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}]})])],1)],1)},hI=[],_I={data:function(){return{selectedDiscussion:null,searchFragment:"",searchResults:[],groupId:this.discussion.groupId,groups:(0,l.sortBy)(Rt.user().groups(),"fullName"),loading:!1}},props:{discussion:Object},mounted:function(){return jt.discussions.fetch({path:"dashboard",params:{exclude_types:"user group poll",per:50}}).then((()=>this.getSuggestions()))},methods:{getSuggestions:function(){return this.searchResults=jt.discussions.collection.chain().find({groupId:this.groupId}).where((function(e){return!!ms.canStartPoll(e)})).simplesort("id",!0).data()},resetSourceDiscussion:function(){return this.discussion.update({forkedEventIds:[]})},startNewThread:function(){return this.selectedDiscussion=jt.discussions.build({groupId:this.groupId}),this.setIsForking(),this.resetSourceDiscussion(),D.$emit("openModal",{component:"DiscussionForm",props:{discussion:this.selectedDiscussion}})},submit:function(){return this.loading=!0,this.selectedDiscussion.moveComments().then((()=>(this.loading=!1,this.resetSourceDiscussion(),this.selectedDiscussion.update({forkedEventIds:[]}),D.$emit("closeModal"),Fn.success("discussion_fork_actions.moved"),this.$router.push(this.urlFor(this.selectedDiscussion)))))},setIsForking:function(){return this.selectedDiscussion.update({forkedEventIds:this.discussion.forkedEventIds})},fetch:(0,l.debounce)((function(){if(this.searchFragment)return this.loading=!0,jt.discussions.search(this.groupId,this.searchFragment).then((e=>(this.loading=!1,this.searchResults=jt.discussions.collection.chain().find({groupId:this.groupId}).find({id:{$ne:this.discussion.id}}).find({title:{$regex:[this.searchFragment,"i"]}}).where((function(e){return!!ms.canAddComment(e)})).simplesort("title").data())))}),500)},watch:{selectedDiscussion:"setIsForking",searchFragment:"fetch",groupId:"getSuggestions"}},fI=_I,gI=(0,Ut.Z)(fI,mI,hI,!1,null,null,null),vI=gI.exports,bI=function(){var e=this,t=e._self._c;return t(ns.Z,[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"export_data_modal.title",expression:"'export_data_modal.title'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(is.ZB,[t(ir,{attrs:{path:"en/user_manual/groups/data_export"}}),t("h4",{directives:[{name:"t",rawName:"v-t",value:"export_data_modal.as_csv",expression:"'export_data_modal.as_csv'"}],staticClass:"my-4"}),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"group_page.options.export_data_as_csv",expression:"'group_page.options.export_data_as_csv'"}],attrs:{href:e.baseUrl+"g/"+e.group.key+"/export.csv?export=1",target:"_blank"}}),t("h4",{directives:[{name:"t",rawName:"v-t",value:"export_data_modal.as_html",expression:"'export_data_modal.as_html'"}],staticClass:"my-4"}),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"group_page.options.export_data_as_html",expression:"'group_page.options.export_data_as_html'"}],attrs:{href:e.baseUrl+"g/"+e.group.key+"/export.html?export=1",target:"_blank"}}),t("h4",{directives:[{name:"t",rawName:"v-t",value:"export_data_modal.as_json",expression:"'export_data_modal.as_json'"}],staticClass:"my-4"}),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"group_page.options.export_data_as_json",expression:"'group_page.options.export_data_as_json'"}],on:{click:e.openConfirmModalForJson}})],1)],1)},yI=[],wI={props:{group:Object},methods:{openConfirmModalForJson:function(){return Un({component:"ConfirmModal",props:{confirm:{submit:this.group.export,text:{title:"group_export_modal.title",helptext:"group_export_modal.body",submit:"group_export_modal.submit",flash:"group_export_modal.flash"}}}})}},computed:{baseUrl:function(){return i.baseUrl}}},xI=wI,kI=(0,Ut.Z)(xI,bI,yI,!1,null,null,null),CI=kI.exports,ZI=function(){var e=this,t=e._self._c;return t(ns.Z,[t(lc,{attrs:{value:e.poll.processing}}),t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"action_dock.add_poll_to_thread",expression:"'action_dock.add_poll_to_thread'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh,{attrs:{"aria-hidden":"true"}})],1),t(is.ZB,[t(Fi.Z,{attrs:{items:e.groups,"item-text":"fullName","item-value":"id"},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}}),t(sm.Z,{staticClass:"add-to-thread-modal__search",attrs:{"hide-no-data":"","return-object":"","search-input":e.searchFragment,items:e.searchResults,"item-text":"title",placeholder:e.$t("discussion_fork_actions.search_placeholder"),label:e.$t("discussion_fork_actions.move_to_existing_thread"),loading:e.loading},on:{"update:searchInput":function(t){e.searchFragment=t},"update:search-input":function(t){e.searchFragment=t}},model:{value:e.selectedDiscussion,callback:function(t){e.selectedDiscussion=t},expression:"selectedDiscussion"}})],1),t(is.h7,[t(yn.Z),t($s.Z,{staticClass:"add-to-thread-modal__submit",attrs:{color:"primary",disabled:!e.selectedDiscussion,loading:e.poll.processing},on:{click:function(t){return e.submit()}}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.save",expression:"'common.action.save'"}]})])],1)],1)},II=[],AI={data:function(){return{selectedDiscussion:null,searchFragment:"",searchResults:[],groupId:this.poll.groupId,groups:(0,l.sortBy)(Rt.user().groups(),"fullName"),loading:!1}},props:{poll:Object},mounted:function(){return jt.discussions.fetch({path:"dashboard",params:{per:50}}).then((()=>this.getSuggestions()))},methods:{getSuggestions:function(){return this.searchResults=jt.discussions.collection.chain().find({groupId:this.groupId}).where((function(e){return!!ms.canStartPoll(e)})).simplesort("id",!0).data()},submit:function(){return this.poll.addToThread(this.selectedDiscussion.id).then((()=>(Fn.success("add_poll_to_thread_modal.success",{pollType:this.poll.translatedPollType()}),D.$emit("closeModal"))))},fetch:(0,l.debounce)((function(){if(this.searchFragment)return this.loading=!0,jt.discussions.search(this.groupId,this.searchFragment).then((e=>(this.loading=!1,this.searchResults=jt.discussions.collection.chain().find({groupId:this.groupId}).find({title:{$regex:[this.searchFragment,"i"]}}).where((function(e){return!!ms.canStartPoll(e)})).simplesort("title").data())))}),500)},watch:{searchFragment:"fetch",groupId:"getSuggestions"}},$I=AI,SI=(0,Ut.Z)($I,ZI,II,!1,null,null,null),NI=SI.exports,TI=function(){var e=this,t=e._self._c;return t("div",{staticClass:"strand-members-list"},[t("div",{staticClass:"px-4 pt-4"},[t("div",{staticClass:"d-flex justify-space-between"},[t("h1",{directives:[{name:"t",rawName:"v-t",value:"announcement.form.discussion_announced.title",expression:"'announcement.form.discussion_announced.title'"}],staticClass:"headline"}),t(Bh)],1),t("recipients-autocomplete",{attrs:{label:e.$t("announcement.form.discussion_announced.helptext"),placeholder:e.$t("announcement.form.placeholder"),model:e.discussion,"excluded-audiences":["discussion_group"],reset:e.reset},on:{"new-query":e.newQuery,"new-recipients":e.newRecipients}}),e.hasRecipients?t(fr.Z,{attrs:{rows:"3",label:e.$t("announcement.form.invitation_message_label"),placeholder:e.$t("announcement.form.invitation_message_placeholder")},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}):e._e(),t("div",{staticClass:"d-flex"},[t(yn.Z),t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"common.action.invite",expression:"'common.action.invite'"}],staticClass:"strand-members-list__submit",attrs:{color:"primary",disabled:!e.recipients.length,loading:e.saving},on:{click:e.inviteRecipients}})],1)],1),t(rs.Z,{attrs:{"two-line":""}},[t(li.Z,[t("span",{directives:[{name:"t",rawName:"v-t",value:"membership_card.discussion_members",expression:"'membership_card.discussion_members'"}]}),t(Ro),t("span",[e._v("("+e._s(e.discussion.membersCount)+")")])],1),e._l(e.readers,(function(o){return t(zo.Z,{key:o.id,attrs:{user:o.user()}},[t(Bo.Z,[t(Ks,{attrs:{user:o.user(),size:24}})],1),t(Vo.km,[t(Vo.V9,[t("span",{staticClass:"mr-2"},[e._v(e._s(o.user().nameWithTitle(e.discussion.group())))]),e.discussion.groupId&&e.isGuest(o)?t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"members_panel.guest",expression:"'members_panel.guest'"}],staticClass:"mr-1",attrs:{outlined:"","x-small":"",label:"",title:e.$t("announcement.inviting_guests_to_thread")}}):e._e(),o.admin?t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"announcement.members_list.thread_admin",expression:"'announcement.members_list.thread_admin'"}],staticClass:"mr-1",attrs:{outlined:"","x-small":"",label:""}}):e._e(),e.isGroupAdmin(o)?t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"announcement.members_list.group_admin",expression:"'announcement.members_list.group_admin'"}],staticClass:"mr-1",attrs:{outlined:"","x-small":"",label:""}}):e._e()],1),t(Vo.oZ,[o.lastReadAt?t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"announcement.members_list.last_read_at",args:{time:e.approximateDate(o.lastReadAt)}},expression:"{ path: 'announcement.members_list.last_read_at', args: { time: approximateDate(reader.lastReadAt) } }"}]}):t("span",{directives:[{name:"t",rawName:"v-t",value:"announcement.members_list.has_not_read_thread",expression:"'announcement.members_list.has_not_read_thread'"}]})])],1),t(En.Z,[t(qs.Z,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"membership-dropdown__button",attrs:{icon:""}},"v-btn",s,!1),o),[t(Qt.Z,[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t(rs.Z,e._l(e.actionNames,(function(s){return e.service[s].canPerform(o)?t(zo.Z,{key:s,on:{click:function(t){return e.service[s].perform(o)}}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:e.service[s].name,expression:"service[action].name"}]})],1):e._e()})),1)],1)],1)],1)})),e.query&&0==e.readers.length?t(zo.Z,[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:{path:"discussions_panel.no_results_found",args:{search:e.query}},expression:"{ path: 'discussions_panel.no_results_found', args: { search: query }}"}]})],1):e._e()],2),t("div",{staticClass:"d-flex justify-end pa-4"},[t(ir,{attrs:{path:"en/user_manual/threads/notifying_people"}})],1)],1)},jI=[],PI=new(function(){class e{}return e.prototype.makeAdmin={name:"membership_dropdown.make_coordinator",canPerform:function(e){return!e.discussion().group().adminsInclude(e.user())&&!e.admin&&e.discussion().adminsInclude(Rt.user())},perform:function(e){return jt.discussionReaders.remote.postMember(e.id,"make_admin",{exclude_types:"discussion"})}},e.prototype.removeAdmin={name:"membership_dropdown.demote_coordinator",canPerform:function(e){return e.admin&&e.discussion().adminsInclude(Rt.user())},perform:function(e){return jt.discussionReaders.remote.postMember(e.id,"remove_admin",{exclude_types:"discussion"})}},e.prototype.resend={name:"membership_dropdown.resend",canPerform:function(e){return e.discussion().adminsInclude(Rt.user())},perform:function(e){return jt.discussionReaders.remote.postMember(e.id,"resend",{exclude_types:"discussion"}).then((function(){return Fn.success("membership_dropdown.invitation_resent")}))}},e.prototype.revoke={name:"membership_dropdown.remove_from.discussion",canPerform:function(e){return e.discussion().adminsInclude(Rt.user())},perform:function(e){return jt.discussionReaders.remote.postMember(e.id,"revoke").then((function(){return Fn.success("membership_remove_modal.invitation.flash")}))}},e}.call(void 0)),OI={components:{RecipientsAutocomplete:bm},props:{discussion:Object},data:function(){return{readers:[],query:"",searchResults:[],recipients:[],membershipsByUserId:{},readerUserIds:[],reset:!1,saving:!1,message:"",actionNames:[],service:PI}},mounted:function(){return this.actionNames=["makeAdmin","removeAdmin","revoke"],this.watchRecords({collections:["discussionReaders","memberships"],query:e=>this.updateReaders()})},computed:{hasRecipients:function(){return this.discussion.recipientAudience||this.discussion.recipientUserIds.length||this.discussion.recipientChatbotIds.length||this.discussion.recipientEmails.length},model:function(){return this.discussion},excludedUserIds:function(){return this.readerUserIds.concat(Rt.user().id)}},methods:{isGroupAdmin:function(e){return this.membershipsByUserId[e.userId]&&this.membershipsByUserId[e.userId].admin},isGuest:function(e){return!this.membershipsByUserId[e.userId]},inviteRecipients:function(){var e,t;return e=this.recipients.length,this.saving=!0,t=Object.assign({discussion_id:this.discussion.id},{recipient_audience:this.discussion.recipientAudience,recipient_user_ids:this.discussion.recipientUserIds,recipient_chatbot_ids:this.discussion.recipientChatbotIds,recipient_emails:this.discussion.recipientEmails,recipient_message:this.message}),jt.remote.post("announcements",t).then((()=>(this.reset=!this.reset,Fn.success("announcement.flash.success",{count:e})))).finally((()=>this.saving=!1))},newQuery:function(e){return this.query=e,this.updateReaders(),this.fetchReaders()},newRecipients:function(e){return this.recipients=e},fetchReaders:(0,l.debounce)((function(){return jt.discussionReaders.fetch({params:{exclude_types:"discussion",query:this.query,discussion_id:this.discussion.id}}).then((e=>{var t;return t=(0,l.map)(e["users"],"id"),jt.memberships.fetch({params:{exclude_types:"group inviter",group_id:this.discussion.groupId,user_xids:t.join("x")}})})).finally((()=>this.updateReaders()))}),300),updateReaders:function(){var e,t;return e=jt.discussionReaders.collection.chain().find({discussionId:this.discussion.id}).find({revokedAt:null}),this.query&&(t=jt.users.collection.find({$or:[{name:{$regex:[`^${this.query}`,"i"]}},{email:{$regex:[`${this.query}`,"i"]}},{username:{$regex:[`^${this.query}`,"i"]}},{name:{$regex:[` ${this.query}`,"i"]}}]}),e=e.find({userId:{$in:(0,l.map)(t,"id")}})),e=e.simplesort("id",!0),this.readers=e.data(),this.readerUserIds=(0,l.map)(jt.discussionReaders.collection.find({discussionId:this.discussion.id}),"userId"),this.membershipsByUserId={},jt.memberships.collection.find({userId:{$in:this.readerUserIds}},{groupId:this.discussion.groupId}).forEach((e=>this.membershipsByUserId[e.userId]=e))}}},RI=OI,qI=(0,Ut.Z)(RI,TI,jI,!1,null,null,null),MI=qI.exports,EI=function(){var e=this,t=e._self._c;return t(ns.Z,[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"discussion_last_seen_by.title",expression:"'discussion_last_seen_by.title'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(ys.Z,{attrs:{"justify-center":""}},[e.historyLoading?t(ws.Z,{attrs:{color:"primary",indeterminate:""}}):e._e()],1),e.historyLoading?e._e():t(is.ZB,[e.historyError&&0==e.historyData.length?t("p",{directives:[{name:"t",rawName:"v-t",value:"announcement.history_error",expression:"'announcement.history_error'"}]}):e._e(),e.historyError||0!=e.historyData.length?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"discussion_last_seen_by.no_one",expression:"'discussion_last_seen_by.no_one'"}]}),e._l(e.historyData,(function(o){return t("div",{key:o.id},[t("strong",[e._v(e._s(o.user_name))]),t(Mn),t(Xn,{attrs:{date:o.last_read_at}})],1)}))],2)],1)},LI=[],DI={props:{discussion:Object},data:function(){return{historyData:[],historyLoading:!1,historyError:!1}},created:function(){return this.historyLoading=!0,jt.fetch({path:`discussions/${this.discussion.id}/history`}).then((e=>(this.historyLoading=!1,this.historyData=(0,l.orderBy)(e,["last_read_at"],["desc"])||[])),(e=>(this.historyLoading=!1,this.historyError=!0)))}},FI=DI,UI=(0,Ut.Z)(FI,EI,LI,!1,null,null,null),zI=UI.exports,BI=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-members-form"},[t("div",{staticClass:"px-4 pt-4"},[t("div",{staticClass:"d-flex justify-space-between"},[t("h1",{directives:[{name:"t",rawName:"v-t",value:"announcement.form."+e.wipOrEmpty+"poll_announced.title",expression:"'announcement.form.'+wipOrEmpty+'poll_announced.title'"}],staticClass:"headline"}),t(Bh)],1),t("recipients-autocomplete",{attrs:{label:e.poll.notifyRecipients?e.$t("announcement.form."+e.wipOrEmpty+"poll_announced.helptext"):e.$t("poll_common_form.who_may_vote",{poll_type:e.poll.translatedPollType()}),placeholder:e.$t("announcement.form.placeholder"),model:e.poll,reset:e.reset,excludedAudiences:["voters","undecided_voters","non_voters","decided_voters"],excludedUserIds:e.userIds,initialRecipients:e.initialRecipients,includeActor:"",excludeMembers:!0},on:{"new-query":e.newQuery}}),t("div",{staticClass:"d-flex align-center"},[t(Jm.Z,{attrs:{disabled:!e.someRecipients,label:e.$t("poll_common_form.notify_invitees")},model:{value:e.poll.notifyRecipients,callback:function(t){e.$set(e.poll,"notifyRecipients",t)},expression:"poll.notifyRecipients"}}),t(yn.Z),t($s.Z,{staticClass:"poll-members-form__submit",attrs:{color:"primary",disabled:!e.someRecipients,loading:e.saving},on:{click:e.inviteRecipients}},[e.poll.notifyRecipients?t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.invite",expression:"'common.action.invite'"}]}):t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.add_voters",expression:"'poll_common_form.add_voters'"}]})])],1),e.someRecipients&&!e.poll.notifyRecipients?t(Tc.Z,{attrs:{dense:"",type:"warning",text:""}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"poll_common_form.no_notifications_warning",expression:"'poll_common_form.no_notifications_warning'"}]})]):e._e(),e.poll.notifyRecipients&&e.someRecipients?t(fr.Z,{attrs:{rows:"3",label:e.$t("announcement.form.invitation_message_label"),placeholder:e.$t("announcement.form.invitation_message_placeholder")},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}):e._e()],1),t(rs.Z,{staticClass:"poll-members-form__list"},[t(li.Z,[t("span",{directives:[{name:"t",rawName:"v-t",value:"membership_card.voters",expression:"'membership_card.voters'"}]}),t(Ro),t("span",[e._v("("+e._s(e.users.length)+" / "+e._s(e.poll.votersCount)+")")])],1),e._l(e.users,(function(o){return t(zo.Z,{key:o.id},[t(Bo.Z,[t(Ks,{attrs:{user:o,size:24}})],1),t(Vo.km,[t(Vo.V9,[t("span",{staticClass:"mr-2"},[e._v(e._s(o.nameWithTitle(e.poll.group())))]),e.isMember[o.id]?e._e():t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"members_panel.guest",expression:"'members_panel.guest'"}],staticClass:"mr-1",attrs:{outlined:"","x-small":"",label:"",title:e.$t("announcement.inviting_guests_to_thread")}}),e.isMemberAdmin[o.id]||e.isStanceAdmin[o.id]?t(qo.Z,{directives:[{name:"t",rawName:"v-t",value:"members_panel.admin",expression:"'members_panel.admin'"}],staticClass:"mr-1",attrs:{outlined:"","x-small":"",label:""}}):e._e()],1)],1),t(En.Z,[t(qs.Z,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:o,attrs:s}){return[t($s.Z,e._g(e._b({staticClass:"membership-dropdown__button",attrs:{icon:""}},"v-btn",s,!1),o),[t(Qt.Z,[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t(rs.Z,e._l(e.actionNames,(function(s){return e.canPerform(s,e.poll,o)?t(zo.Z,{key:s,on:{click:function(t){return e.perform(s,e.poll,o)}}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:{path:e.service[s].name,args:{pollType:e.poll.translatedPollType()}},expression:"{ path: service[action].name, args: { pollType: poll.translatedPollType() } }"}]})],1):e._e()})),1)],1)],1)],1)})),e.query&&0==e.users.length?t(zo.Z,[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:{path:"discussions_panel.no_results_found",args:{search:e.query}},expression:"{ path: 'discussions_panel.no_results_found', args: { search: query }}"}]})],1):e._e()],2),t("div",{staticClass:"d-flex justify-end mx-4 pb-4"},[t(ir,{attrs:{path:"en/user_manual/polls/starting_proposals/index.html#invite-members"}}),t(yn.Z)],1)],1)},VI=[],HI={components:{RecipientsAutocomplete:bm},props:{poll:Object},data:function(){return{users:[],userIds:[],isMember:{},isMemberAdmin:{},isStanceAdmin:{},reset:!1,saving:!1,loading:!1,initialRecipients:[],actionNames:[],service:ad,query:"",message:""}},mounted:function(){return this.poll.notifyRecipients=!0,this.actionNames=["makeAdmin","removeAdmin","revoke"],this.fetchStances(),this.updateStances(),this.watchRecords({collections:["stances","memberships","users"],query:e=>this.updateStances()})},computed:{wipOrEmpty:function(){return this.poll.closingAt?"":"wip_"},someRecipients:function(){return this.poll.recipientAudience||this.poll.recipientUserIds.length||this.poll.recipientEmails.length||this.poll.recipientChatbotIds.length}},methods:{canPerform:function(e,t,o){switch(e){case"makeAdmin":return t.adminsInclude(Rt.user())&&!this.isStanceAdmin[o.id]&&!this.isMemberAdmin[o.id];case"removeAdmin":return t.adminsInclude(Rt.user())&&this.isStanceAdmin[o.id];case"revoke":return t.adminsInclude(Rt.user())}},perform:function(e,t,o){return this.userIds=[],this.isMember={},this.isMemberAdmin={},this.isStanceAdmin={},this.service[e].perform(t,o).then((()=>this.fetchStances()))},inviteRecipients:function(){return this.saving=!0,jt.remote.post("announcements",{poll_id:this.poll.id,recipient_audience:this.poll.recipientAudience,recipient_user_ids:this.poll.recipientUserIds,recipient_chatbot_ids:this.poll.recipientChatbotIds,recipient_emails:this.poll.recipientEmails,include_actor:!0,recipient_message:this.message,exclude_members:!0,notify_recipients:this.poll.notifyRecipients}).then((e=>{var t;return t=e.stances.length,this.poll.notifyRecipients?Fn.success("announcement.flash.success",{count:t}):Fn.success("poll_common_form.count_voters_added",{count:t}),this.reset=!this.reset})).finally((()=>this.saving=!1))},toHash:function(e){var t;return t={},e.forEach((function(e){return t[e]=!0})),t},newQuery:function(e){return this.query=e,this.updateStances(),this.fetchStances()},fetchStances:(0,l.debounce)((function(){return this.loading=!0,jt.fetch({path:"stances/users",params:{exclude_types:"poll group",poll_id:this.poll.id,query:this.query}}).then((e=>(this.isMember=this.toHash(e["meta"]["member_ids"]),this.isMemberAdmin=this.toHash(e["meta"]["member_admin_ids"]),this.isStanceAdmin=this.toHash(e["meta"]["stance_admin_ids"]),this.userIds=(0,l.uniq)((0,l.compact)(this.userIds.concat((0,l.map)(e["users"],"id")))),this.updateStances()))).finally((()=>this.loading=!1))}),300),updateStances:function(){var e;return e=jt.users.collection.chain(),e=e.find({id:{$in:this.userIds}}),this.query&&(e=e.find({$or:[{name:{$regex:[`^${this.query}`,"i"]}},{email:{$regex:[`${this.query}`,"i"]}},{username:{$regex:[`^${this.query}`,"i"]}},{name:{$regex:[` ${this.query}`,"i"]}}]})),this.users=e.data()}}},GI=HI,WI=(0,Ut.Z)(GI,BI,VI,!1,null,null,null),KI=WI.exports,YI=function(){var e=this,t=e._self._c;return t("div",{staticClass:"poll-remind"},[t("div",{staticClass:"pa-4"},[t("div",{staticClass:"d-flex justify-space-between"},[t("h1",{directives:[{name:"t",rawName:"v-t",value:"announcement.form."+e.wipOrEmpty+"poll_reminder.title",expression:"'announcement.form.'+wipOrEmpty+'poll_reminder.title'"}],staticClass:"headline"}),t(Bh)],1),t("recipients-autocomplete",{attrs:{existingOnly:"",label:e.$t("announcement.form."+e.wipOrEmpty+"poll_reminder.helptext"),placeholder:e.$t("announcement.form.placeholder"),model:e.poll,reset:e.reset,excludedUserIds:e.userIds,excludedAudiences:["group","discussion_group"],initialRecipients:e.initialRecipients}}),t(fr.Z,{attrs:{label:e.$t("announcement.form.poll_reminder.message_label"),placeholder:e.$t("announcement.form.poll_reminder.message_placeholder")},model:{value:e.poll.recipientMessage,callback:function(t){e.$set(e.poll,"recipientMessage",t)},expression:"poll.recipientMessage"}}),t("div",{staticClass:"d-flex"},[t(yn.Z),t($s.Z,{staticClass:"poll-members-form__submit",attrs:{color:"primary",disabled:!e.someRecipients,loading:e.saving},on:{click:e.submit}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.remind",expression:"'common.action.remind'"}]})])],1)],1)])},QI=[],JI={components:{RecipientsAutocomplete:bm},props:{poll:Object},data:function(){return{users:[],userIds:[],isMember:{},isMemberAdmin:{},isStanceAdmin:{},reset:!1,saving:!1,loading:!1,initialRecipients:[],actionNames:[],service:ad,query:""}},computed:{wipOrEmpty:function(){return this.poll.closingAt?"":"wip_"},someRecipients:function(){return this.poll.recipientAudience||this.poll.recipientUserIds.length||this.poll.recipientEmails.length||this.poll.recipientChatbotIds.length}},methods:{submit:function(){return this.saving=!0,jt.remote.post(`polls/${this.poll.id}/remind`,{poll:{recipient_audience:this.poll.recipientAudience,recipient_user_ids:this.poll.recipientUserIds,recipient_chatbot_ids:this.poll.recipientChatbotIds,recipient_message:this.poll.recipientMessage}}).then((e=>{var t;return t=e.count,Fn.success("announcement.flash.success",{count:t}),D.$emit("closeModal")})).finally((()=>this.saving=!1))}}},XI=JI,eA=(0,Ut.Z)(XI,YI,QI,!1,null,null,null),tA=eA.exports,oA=function(){var e=this,t=e._self._c;return t("div",{staticClass:"group-invitation-form"},[t("div",{staticClass:"px-4 pt-4"},[t("div",{staticClass:"d-flex justify-space-between"},[t("h1",{directives:[{name:"t",rawName:"v-t",value:{path:"announcement.send_group",args:{name:e.group.name}},expression:"{path: 'announcement.send_group', args: {name: group.name} }"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(Bh)],1),e.cannotInvite?t("div",{staticClass:"py-4"},[t("div",{staticClass:"announcement-form__invite"},[e.invitationsRemaining<1?t("p",{domProps:{innerHTML:e._s(e.$t("announcement.form.no_invitations_remaining",{upgradeUrl:e.upgradeUrl,maxMembers:e.subscription.max_members}))}}):e._e(),e.subscription.active?e._e():t("p",{domProps:{innerHTML:e._s(e.$t("discussion.subscription_canceled",{upgradeUrl:e.upgradeUrl}))}})])]):t("div",[t("recipients-autocomplete",{attrs:{label:e.$t("announcement.form.who_to_invite"),placeholder:e.$t("announcement.form.placeholder"),"excluded-user-ids":e.excludedUserIds,reset:e.reset,model:e.group},on:{"new-query":e.newQuery,"new-recipients":e.newRecipients}}),e.subscription.max_members?t("div",[e.tooManyInvitations?e._e():t("p",{staticClass:"caption",domProps:{innerHTML:e._s(e.$t("announcement.form.invitations_remaining",{count:e.invitationsRemaining,upgradeUrl:e.upgradeUrl}))}}),e.tooManyInvitations?t("p",{staticClass:"caption",domProps:{innerHTML:e._s(e.$t("announcement.form.too_many_invitations",{upgradeUrl:e.upgradeUrl}))}}):e._e()]):e._e(),e.invitableGroups.length>1?t("div",{staticClass:"mb-4"},[t("label",{directives:[{name:"t",rawName:"v-t",value:"announcement.select_groups",expression:"'announcement.select_groups'"}],staticClass:"lmo-label"}),e._l(e.invitableGroups,(function(o){return t("div",{key:o.id},[t(Jm.Z,{staticClass:"invitation-form__select-groups",class:{"ml-4":!o.isParent()},attrs:{label:o.name,value:o.id,"hide-details":""},model:{value:e.groupIds,callback:function(t){e.groupIds=t},expression:"groupIds"}})],1)}))],2):e._e(),t(fr.Z,{attrs:{rows:"3",label:e.$t("announcement.form.invitation_message_label"),placeholder:e.$t("announcement.form.invitation_message_placeholder")},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),t(is.h7,[t(ir,{attrs:{path:"en/user_manual/groups/membership"}}),t(yn.Z),t($s.Z,{staticClass:"announcement-form__submit",attrs:{color:"primary",disabled:!e.recipients.length||e.tooManyInvitations||0==e.groupIds.length,loading:e.saving},on:{click:e.inviteRecipients}},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.action.invite",expression:"'common.action.invite'"}]})])],1)],1)])])},sA=[],nA={components:{RecipientsAutocomplete:bm},props:{group:Object},data:function(){return{query:"",recipients:[],reset:!1,saving:!1,groupIds:[this.group.id],excludedUserIds:[],message:"",subscription:{},cannotInvite:!1,upgradeUrl:i.baseUrl+"upgrade"}},mounted:function(){return this.updateSuggestions(),this.watchRecords({collections:["memberships"],query:e=>this.updateSuggestions()}),this.subscription=this.group.parentOrSelf().subscription,this.cannotInvite=!this.subscription.active||this.subscription.max_members&&this.invitationsRemaining<1},methods:{fetchMemberships:(0,l.debounce)((function(){return this.loading=!0,jt.memberships.fetch({params:{exclude_types:"group",q:this.query,group_id:this.group.id,per:20}}).finally((()=>this.loading=!1))}),300),inviteRecipients:function(){return this.saving=!0,jt.remote.post("announcements",{group_id:this.group.id,invited_group_ids:this.groupIds,recipient_emails:this.recipients.filter((function(e){return"email"===e.type})).map((function(e){return e.id})),recipient_user_ids:this.recipients.filter((function(e){return"user"===e.type})).map((function(e){return e.id})),recipient_message:this.message}).then((e=>(Fn.success("announcement.flash.success",{count:e.memberships.length}),D.$emit("closeModal")))).finally((()=>this.saving=!1))},newQuery:function(e){return this.query=e,this.fetchMemberships(),this.updateSuggestions()},newRecipients:function(e){return this.recipients=e},updateSuggestions:function(){return this.excludedUserIds=this.group.memberIds()}},computed:{invitableGroups:function(){return this.group.parentOrSelf().selfAndSubgroups().filter((function(e){return ms.canAddMembersToGroup(e)}))},tooManyInvitations:function(){return this.subscription.max_members&&this.invitationsRemaining<0},invitationsRemaining:function(){return(this.subscription.max_members||0)-this.group.parentOrSelf().orgMembershipsCount-this.recipients.length}}},iA=nA,rA=(0,Ut.Z)(iA,oA,sA,!1,null,null,null),aA=rA.exports,lA=function(){var e=this,t=e._self._c;return t(ns.Z,[t(is.EB,[t("h1",{directives:[{name:"t",rawName:"v-t",value:"announcement."+e.modelKind+"_notification_history",expression:"'announcement.' + modelKind + '_notification_history'"}],staticClass:"headline",attrs:{tabindex:"-1"}}),t(yn.Z),t(Bh)],1),t(ys.Z,{attrs:{"justify-center":""}},[e.historyLoading?t(ws.Z,{attrs:{color:"primary",indeterminate:""}}):e._e()],1),e.historyLoading?e._e():t(is.ZB,[e.historyError&&0==e.historyData.length?t("p",{directives:[{name:"t",rawName:"v-t",value:"announcement.history_error",expression:"'announcement.history_error'"}]}):e._e(),e.historyError||0!=e.historyData.length?e._e():t("p",{directives:[{name:"t",rawName:"v-t",value:"announcement.no_notifications_sent",expression:"'announcement.no_notifications_sent'"}]}),e.historyData.length?t("p",{directives:[{name:"t",rawName:"v-t",value:"announcement.notification_history_explanation",expression:"'announcement.notification_history_explanation'"}]}):e._e(),e._l(e.historyData,(function(o){return t("div",{key:o.id},[t("h4",{staticClass:"mt-4 mb-2"},[t(Xn,{attrs:{date:o.created_at}}),t(Mn),t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"announcement."+o.kind,args:{name:o.author_name,length:o.notifications.length}},expression:"{ path: 'announcement.'+event.kind, args: { name: event.author_name, length: event.notifications.length } }"}]})],1),t("ul",{staticStyle:{"list-style-type":"none","padding-left":"0"}},e._l(o.notifications,(function(o){return t("li",{key:o.id},[t("span",[e._v(e._s(o.to))]),t(Ro),o.viewed?t("span",[e._v("âœ“")]):e._e()],1)})),0)])}))],2)],1)},cA=[],uA={props:{close:Function,model:{type:Object,required:!0}},data:function(){return{historyData:[],historyLoading:!1,historyError:!1}},created:function(){return this.historyLoading=!0,jt.fetch({path:"announcements/history",params:this.model.namedId()}).then((e=>(this.historyLoading=!1,this.historyData=e||[])),(e=>(this.historyLoading=!1,this.historyError=!0)))},computed:{modelKind:function(){return this.model.constructor.singular},pollType:function(){return this.model.pollType},translatedPollType:function(){if(this.model.isA("poll")||this.model.isA("outcome"))return this.model.poll().translatedPollType()}}},dA=uA,pA=(0,Ut.Z)(dA,lA,cA,!1,null,null,null),mA=pA.exports,hA={components:{AnnouncementHistory:mA,GroupForm:ox,DiscussionForm:zg,EditCommentForm:lx,ConfirmModal:hx,ChangeVolumeForm:Tg,ChatbotList:gC,ChatbotMatrixForm:kC,ChatbotWebhookForm:SC,EmailToGroupSettings:nC,PollCommonModal:Ix,PollCommonEditVoteModal:jx,ContactRequestForm:Ex,AuthModal:Dk,MembershipRequestForm:Hk,MembershipModal:Jk,ChangePasswordForm:uC,PollCommonOutcomeModal:RC,PollCommonReopenModal:FC,PollCommonMoveForm:iZ,PollOptionForm:GC,MoveThreadForm:XC,RevisionHistoryModal:AZ,PollTemplateForm:Yh,TagsModal:LZ,TagsSelect:PZ,WebhookForm:VZ,WebhookList:JZ,ChangePictureForm:rI,GroupNewForm:pg,PinEventForm:pI,MoveCommentsModal:vI,ExportDataModal:CI,AddPollToThreadModal:NI,StrandMembersList:MI,PollMembers:KI,PollReminderForm:tA,GroupInvitationForm:aA,SeenByModal:zI,ArrangementForm:yx},data:function(){return{isOpen:!1,componentName:"",componentProps:{},componentKey:"defaultKey",maxWidth:null}},created:function(){return D.$on("openModal",this.openModal),D.$on("closeModal",this.closeModal)},destroyed:function(){return D.$off("openModal",this.openModal),D.$off("closeModal",this.closeModal)},methods:{openModal:function(e){return this.maxWidth=e.maxWidth||720,this.componentName=e.component,this.componentProps=e.props,this.componentKey=(new Date).getTime(),this.isOpen=!0,setTimeout((()=>{if(this.$refs.modalLauncher&&document.querySelector(".modal-launcher h1"))return document.querySelector(".modal-launcher h1").focus()}))},closeModal:function(){return this.isOpen&&(this.componentProps||{}).close?this.componentProps.close():this.isOpen=!1}}},_A=hA,fA=(0,Ut.Z)(_A,Kw,Yw,!1,null,null,null),gA=fA.exports,vA=o(55885),bA=function(){var e=this,t=e._self._c;return t(qs.Z,{staticClass:"notifications",attrs:{"offset-y":"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function({attrs:o}){return[t($s.Z,e._b({staticClass:"notifications__button",attrs:{icon:"","aria-label":e.$t("navbar.notifications")},on:{click:e.clicked}},"v-btn",o,!1),[t(vA.Z,{attrs:{color:"primary"},scopedSlots:e._u([{key:"badge",fn:function(){return[t("span",{staticClass:"notifications__activity"},[e._v(e._s(e.unread.length))])]},proxy:!0}],null,!0),model:{value:e.unread.length,callback:function(t){e.$set(e.unread,"length",t)},expression:"unread.length"}},[t(Qt.Z,[e._v("mdi-bell")])],1)],1)]}}]),model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(an.Z,{staticClass:"notifications__dropdown"},[e.notifications.length>0?t(rs.Z,{attrs:{dense:""}},e._l(e.notifications,(function(o){return t(zo.Z,{key:o.id,staticClass:"notification",class:{"v-list-item--active":e.unreadIds.includes(o.id)},attrs:{to:o.href()}},[t(Bo.Z,[o.actor()?t(Ks,{attrs:{user:o.actor(),size:36}}):e._e()],1),t(Vo.km,[t(Vo.V9,{staticClass:"notification__content"},[t("span",{directives:[{name:"t",rawName:"v-t",value:{path:"notifications.with_title."+o.kind,args:o.args()},expression:"{path: 'notifications.with_title.'+n.kind, args: n.args()}"}]}),t(Ro),t(Mn),t(Ro),t(Xn,{attrs:{date:o.createdAt}})],1)],1)],1)})),1):e._e(),0==e.notifications.length?[t(zo.Z,{directives:[{name:"t",rawName:"v-t",value:"notifications.no_notifications",expression:"'notifications.no_notifications'"}],staticClass:"notification"})]:e._e()],2)],1)},yA=[],wA={data:function(){return{notifications:[],unread:[],unreadCount:0,unreadIds:[],open:!1}},methods:{clicked:function(){return this.open=!this.open,this.open?(this.unread=jt.notifications.find({viewed:{$ne:!0}}),this.unreadIds=this.unread.map((function(e){return e.id})),jt.notifications.viewed()):(this.unreadIds=[],this.unreadCount=0)}},created:function(){return jt.notifications.fetchNotifications(),this.watchRecords({collections:["notifications"],query:e=>(this.notifications=e.notifications.collection.chain().simplesort("id",!0).data(),this.unread=e.notifications.find({viewed:{$ne:!0}}),this.unreadCount=this.unreadCount)})}},xA=wA,kA=(0,Ut.Z)(xA,bA,yA,!1,null,null,null),CA=kA.exports,ZA=o(78259),IA=o(73845),AA=function(){var e=this,t=e._self._c;return t(ZA.Z,{staticClass:"lmo-no-print",attrs:{app:"","clipped-right":"","elevate-on-scroll":"",color:"background"}},[t($s.Z,{staticClass:"navbar__sidenav-toggle",attrs:{icon:"","aria-label":e.$t(e.sidebarOpen?"navbar.close_sidebar":"navbar.open_sidebar")},on:{click:function(t){return e.toggleSidebar()}}},[t(zs.Z,{attrs:{tile:"",size:"36px"}},[t(Qt.Z,[e._v("mdi-menu")])],1)],1),e.showTitle?t(IA.qW,{on:{click:function(t){return e.$vuetify.goTo("head",{duration:0})}}},[e._v(e._s(e.title))]):e._e(),t(yn.Z),e.isLoggedIn?t(CA):e._e(),t(IA.lj),e.isLoggedIn?e._e():t($s.Z,{directives:[{name:"t",rawName:"v-t",value:"auth_form.sign_in",expression:"'auth_form.sign_in'"}],staticClass:"navbar__sign-in",attrs:{text:""},on:{click:function(t){return e.signIn()}}})],1)},$A=[],SA={mixins:[x_],data:function(){return{title:i.theme.site_name,isLoggedIn:Rt.isSignedIn(),group:null,breadcrumbs:null,sidebarOpen:!1,activeTab:"",showTitle:!0,page:null}},methods:{toggleSidebar:function(){return D.$emit("toggleSidebar")},toggleThreadNav:function(){return D.$emit("toggleThreadNav")},signIn:function(){return this.openAuthModal()},last:l.last},mounted:function(){return D.$on("sidebarOpen",(e=>this.sidebarOpen=e)),D.$on("signedIn",(e=>this.isLoggedIn=!0)),D.$on("content-title-visible",(e=>this.showTitle=!e)),D.$on("currentComponent",(e=>{if(e=Object.assign({focusHeading:!0},e),null!=e.title?this.title=e.title:null!=e.titleKey&&(this.title=this.$t(e.titleKey)),this.group=e.group,this.discussion=e.discussion,this.page=e.page,e.focusHeading)return setTimeout((()=>{if(document.querySelector(".v-main h1"))return document.querySelector(".v-main h1").focus()}))}))},computed:{groupName:function(){if(this.group)return this.group.name},parentName:function(){if(this.group)return this.group.parentOrSelf().name},groupPage:function(){return"groupPage"===this.page},threadPage:function(){return"threadPage"===this.page},logo:function(){return i.theme.app_logo_src},icon:function(){return i.theme.icon_src}}},NA=SA,TA=(0,Ut.Z)(NA,AA,$A,!1,null,null,null),jA=TA.exports,PA=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-dropdown"},[e.user.experiences["sidebar"]?e._e():t(zo.Z,{attrs:{dense:""},on:{click:e.togglePinned}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"user_dropdown.pin_sidebar",expression:"'user_dropdown.pin_sidebar'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-pin")])],1)],1),e.user.experiences["sidebar"]?t(zo.Z,{attrs:{dense:""},on:{click:e.togglePinned}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"user_dropdown.unpin_sidebar",expression:"'user_dropdown.unpin_sidebar'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-pin-off")])],1)],1):e._e(),t(zo.Z,{staticClass:"user-dropdown__list-item-button--profile",attrs:{to:"/profile",dense:""}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"user_dropdown.edit_profile",expression:"'user_dropdown.edit_profile'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-account")])],1)],1),t(zo.Z,{staticClass:"user-dropdown__list-item-button--email-settings",attrs:{to:"/email_preferences",dense:""}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"user_dropdown.email_settings",expression:"'user_dropdown.email_settings'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-cog-outline")])],1)],1),e.isDark?e._e():t(zo.Z,{attrs:{dense:""},on:{click:e.toggleDark}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"user_dropdown.enable_dark_mode",expression:"'user_dropdown.enable_dark_mode'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-weather-night")])],1)],1),e.isDark?t(zo.Z,{attrs:{dense:""},on:{click:e.toggleDark}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"user_dropdown.disable_dark_mode",expression:"'user_dropdown.disable_dark_mode'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-white-balance-sunny")])],1)],1):e._e(),t(zo.Z,{attrs:{dense:""},on:{click:function(t){return e.signOut()}}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"user_dropdown.sign_out",expression:"'user_dropdown.sign_out'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-exit-to-app")])],1)],1),t(zo.Z,{attrs:{href:"https://github.com/loomio/loomio/releases",target:"_blank",dense:"",title:e.release}},[t(Vo.V9,{staticClass:"text--secondary"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"common.version",expression:"'common.version'"}]}),t(Ro),t("span",[e._v(e._s(e.version))])],1)],1)],1)},OA=[],RA={methods:{togglePinned:function(){return this.user.experiences["sidebar"]?jt.users.saveExperience("sidebar",!1):jt.users.saveExperience("sidebar",!0)},toggleDark:function(){return this.isDark?(jt.users.saveExperience("darkMode",!1),this.$vuetify.theme.dark=!1):(jt.users.saveExperience("darkMode",!0),this.$vuetify.theme.dark=!0)},defaultDark:function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},signOut:function(){return Rt.signOut()}},computed:{isDark:function(){return this.$vuetify.theme.dark},version:function(){return i.version},release:function(){return i.release},siteName:function(){return i.theme.site_name},user:function(){return Rt.user()},showBeta:function(){return!i.features.app.thread_page_v3}}},qA=RA,MA=(0,Ut.Z)(qA,PA,OA,!1,null,null,null),EA=MA.exports,LA=o(49378),DA=function(){var e=this,t=e._self._c;return t(jy.Z,{staticClass:"sidenav-left lmo-no-print",attrs:{app:""},scopedSlots:e._u([{key:"prepend",fn:function(){},proxy:!0},{key:"append",fn:function(){return[t(ys.Z,{staticClass:"mx-10 my-2",staticStyle:{"max-height":"64px"},attrs:{column:"","align-center":""}},[t(Li.Z,{attrs:{src:e.logoUrl}})],1)]},proxy:!0}]),model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(LA.Z,{staticClass:"sidebar__user-dropdown",scopedSlots:e._u([{key:"activator",fn:function(){return[t(Rs.Z,{staticClass:"mr-2"},[t(Ks,{attrs:{user:e.user}})],1),t(Vo.km,[t(Vo.V9,[e._v(e._s(e.user.name))]),t(Vo.oZ,[e._v(e._s(e.user.email))])],1)]},proxy:!0}])},[t(EA)],1),e.needProfilePicture?[t(em.Z),t(zo.Z,{staticClass:"sidebar__list-item-button--recent",attrs:{color:"warning"},on:{click:e.setProfilePicture}},[t(Rs.Z,[t(Qt.Z,[e._v("mdi-emoticon-outline")])],1),t(Vo.km,[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"profile_page.incomplete_profile",expression:"'profile_page.incomplete_profile'"}]}),t(Vo.oZ,{directives:[{name:"t",rawName:"v-t",value:"profile_page.set_your_profile_picture",expression:"'profile_page.set_your_profile_picture'"}]})],1)],1)]:e._e(),t(em.Z),t(zo.Z,{staticClass:"sidebar__list-item-button--recent",attrs:{dense:"",to:"/dashboard"}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"dashboard_page.aria_label",expression:"'dashboard_page.aria_label'"}]})],1),t(zo.Z,{attrs:{dense:"",to:"/inbox"}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:{path:"sidebar.unread_threads",args:{count:e.unreadThreadCount()}},expression:"{ path: 'sidebar.unread_threads', args: { count: unreadThreadCount() } }"}]})],1),t(zo.Z,{staticClass:"sidebar__list-item-button--private",attrs:{dense:"",to:"/threads/direct"}},[t(Vo.V9,[t("span",{directives:[{name:"t",rawName:"v-t",value:"sidebar.invite_only_threads",expression:"'sidebar.invite_only_threads'"}]}),e.unreadDirectThreadsCount>0?t("span",[t(Ro),t("span",[e._v("("+e._s(e.unreadDirectThreadsCount)+")")])],1):e._e()])],1),t(zo.Z,{staticClass:"sidebar__list-item-button--start-thread",attrs:{dense:"",to:"/d/new"}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"sidebar.start_thread",expression:"'sidebar.start_thread'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-plus")])],1)],1),t(zo.Z,{attrs:{dense:"",to:"/tasks"}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"tasks.tasks",expression:"'tasks.tasks'"}]})],1),t(em.Z),t(rs.Z,{staticClass:"sidebar__groups",attrs:{dense:""}},[e._l(e.organizations,(function(o){return[e.memberGroups(o).length?[t(LA.Z,{on:{click:function(t){return e.goToGroup(o)}},scopedSlots:e._u([{key:"activator",fn:function(){return[t(Bo.Z,{attrs:{"aria-hidden":"true"}},[t(Zi,{attrs:{group:o}})],1),t(Vo.km,[t(Vo.V9,[t("span",[e._v(e._s(o.name))]),e.closedCounts[o.id]?[e._v("Â "),t("span",[e._v("("+e._s(e.closedCounts[o.id])+")")])]:e._e()],2)],1)]},proxy:!0}],null,!0),model:{value:e.openGroups[o.id],callback:function(t){e.$set(e.openGroups,o.id,t)},expression:"openGroups[parentGroup.id]"}},[t(zo.Z,{attrs:{to:e.urlFor(o)+"?subgroups=none"}},[t(Vo.km,[t(Vo.V9,[t("span",[e._v(e._s(o.name))]),e.openCounts[o.id]?[e._v("Â "),t("span",[e._v("("+e._s(e.openCounts[o.id])+")")])]:e._e()],2)],1)],1),e._l(e.memberGroups(o),(function(o){return t(zo.Z,{key:o.id,attrs:{to:e.urlFor(o)}},[t(Vo.km,[t(Vo.V9,[t("span",[e._v(e._s(o.name))]),e.openCounts[o.id]?[e._v("Â "),t("span",[e._v("("+e._s(e.openCounts[o.id])+")")])]:e._e()],2)],1)],1)}))],2)]:[t(zo.Z,{attrs:{to:e.urlFor(o)}},[t(Bo.Z,[t(Zi,{attrs:{group:o}})],1),t(Vo.km,[t(Vo.V9,[t("span",[e._v(e._s(o.name))]),e.openCounts[o.id]?[e._v("Â "),t("span",[e._v("("+e._s(e.openCounts[o.id])+")")])]:e._e()],2)],1)],1)]]})),e.canStartGroups?t(zo.Z,{staticClass:"sidebar__list-item-button--start-group",attrs:{to:"/g/new"}},[t(Bo.Z,[t(Qt.Z,{attrs:{tile:""}},[e._v("mdi-plus")])],1),t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"group_form.new_group",expression:"'group_form.new_group'"}]})],1):e._e()],2),t(em.Z),e.canStartDemo?t(zo.Z,{staticClass:"sidebar__list-item-button--start-group",attrs:{to:"/try",dense:""}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"templates.demo_group",expression:"'templates.demo_group'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-car-convertible")])],1)],1):e._e(),e.showHelp?t(zo.Z,{attrs:{href:e.helpURL,target:"_blank",dense:""}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"common.help_and_guides",expression:"'common.help_and_guides'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-book-open-page-variant")])],1)],1):e._e(),e.showTemplateGallery?t(zo.Z,{staticClass:"sidebar__list-item-button--example-templates",attrs:{to:"/templates",dense:""}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"sidebar.examples_and_templates",expression:"'sidebar.examples_and_templates'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-lightbulb-on")])],1)],1):e._e(),e.showExploreGroups?t(zo.Z,{attrs:{dense:"",to:"/explore"}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"sidebar.explore_groups",expression:"'sidebar.explore_groups'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-map-search")])],1)],1):e._e(),e.showContact?t(zo.Z,{attrs:{to:"/contact",dense:""}},[t(Vo.V9,{directives:[{name:"t",rawName:"v-t",value:"user_dropdown.contact_support",expression:"'user_dropdown.contact_support'"}]}),t(Rs.Z,[t(Qt.Z,[e._v("mdi-face-agent")])],1)],1):e._e()],2)},FA=[],UA=new(function(){class e{load(e={}){return jt.discussions.fetchInbox(e).then((()=>this.loaded=!0))}unreadCount(){return this.loaded?this.query().length:"..."}query(){return mi({filters:this.filters})}}return e.prototype.filters=["only_threads_in_my_groups","show_unread","show_recent","hide_muted","hide_dismissed"],e}.call(void 0)),zA={data:function(){return{organization:null,open:!1,group:null,version:i.version,tree:[],myGroups:[],otherGroups:[],organizations:[],unreadCounts:{},expandedGroupIds:[],openGroups:[],unreadDirectThreadsCount:0}},created:function(){if(D.$on("toggleSidebar",(()=>this.open=!this.open)),D.$on("currentComponent",(e=>(this.group=e.group,this.group?(this.organization=e.group.parentOrSelf(),this.expandedGroupIds=[this.organization.id]):this.organization=null))),this.watchRecords({collections:["groups","memberships","discussions"],query:e=>(this.unreadDirectThreadsCount=jt.discussions.collection.chain().find({groupId:null}).where((function(e){return e.isUnread()})).data().length,this.updateGroups())}),D.$on("signedIn",(e=>(this.fetchData(),this.openIfPinned()))),Rt.isSignedIn())return this.fetchData()},mounted:function(){return this.openIfPinned()},watch:{organization:"updateGroups",open:function(e){return D.$emit("sidebarOpen",e)}},methods:{memberGroups:function(e){return e.subgroups().filter((function(e){return!e.archivedAt&&e.membershipFor(Rt.user())}))},openIfPinned:function(){return this.open=!!Rt.isSignedIn()&&!!Rt.user().experiences["sidebar"]&&this.$vuetify.breakpoint.lgAndUp},fetchData:function(){return jt.users.fetchGroups().then((()=>{if("/dashboard"===this.$router.history.current.path&&1===Rt.user().groups().length&&this.$router.replace(`/g/${Rt.user().groups()[0].key}`),"/dashboard"===this.$router.history.current.path&&0===Rt.user().groups().length)return i.features.app.subscriptions?this.$router.replace("/try"):this.$router.replace("/g/new")})),UA.load()},goToGroup:function(e){return this.$router.push(this.urlFor(e))},updateGroups:function(){return this.organizations=(0,l.compact)(Rt.user().parentGroups().concat(Rt.user().orphanParents()))||[],this.openCounts={},this.closedCounts={},this.openGroups=[],Rt.user().groups().forEach((e=>this.openCounts[e.id]=(0,l.filter)(e.discussions(),(function(e){return e.isUnread()})).length)),Rt.user().parentGroups().forEach((e=>(this.organization&&this.organization.id===e.parentOrSelf().id&&(this.openGroups[e.id]=!0),this.closedCounts[e.id]=this.openCounts[e.id]+(0,l.sum)((0,l.map)(this.memberGroups(e),(e=>this.openCounts[e.id]))))))},unreadThreadCount:function(){return UA.unreadCount()},canViewPublicGroups:function(){return ms.canViewPublicGroups()},setProfilePicture:function(){return D.$emit("openModal",{component:"ChangePictureForm"})}},computed:{helpURL:function(){var e;return e=new URL(i.baseUrl),`https://help.loomio.com/en/?utm_source=${e.host}`},isSignedIn:function(){return Rt.isSignedIn()},showHelp:function(){return i.features.app.help_link},user:function(){return Rt.user()},activeGroup:function(){return this.group?[this.group.id]:[]},logoUrl:function(){return i.theme.app_logo_src},showContact:function(){return i.features.app.show_contact},canStartGroups:function(){return ms.canStartGroups()},canStartDemo:function(){return i.features.app.demos},showTemplateGallery:function(){return i.features.app.template_gallery},showExploreGroups:function(){return i.features.app.explore_public_groups},needProfilePicture:function(){return Rt.isSignedIn()&&this.user&&!this.user.avatarUrl&&!this.user.hasExperienced("changePicture")}}},BA=zA,VA=(0,Ut.Z)(BA,DA,FA,!1,null,null,null),HA=VA.exports,GA=o(29954),WA=function(){var e=this,t=e._self._c;return e.showNotice?t(GA.Z,{staticClass:"system-notice",attrs:{app:"",color:"primary",height:"40"}},[t("div",{staticClass:"d-flex justify-space-between",staticStyle:{width:"100%"}},[t("div",{staticClass:"system-notice__message text-subtitle-1"},[e.notice?t("span",{directives:[{name:"marked",rawName:"v-marked",value:e.notice,expression:"notice"}]}):t("span",{directives:[{name:"t",rawName:"v-t",value:"global.messages.app_update",expression:"'global.messages.app_update'"}]})]),e.showDismiss?t($s.Z,{directives:[{name:"t",rawName:"v-t",value:e.reload?"global.messages.reload":"dashboard_page.dismiss",expression:"(reload && 'global.messages.reload') || 'dashboard_page.dismiss'"}],staticClass:"system-notice__hide",attrs:{small:"",outlined:""},on:{click:e.accept}}):e._e()],1)]):e._e()},KA=[],YA=o(2568),QA=o.n(YA),JA={data:function(){return{notice:!1,showNotice:!1,showDismiss:!1,reload:!1}},mounted:function(){return setInterval((()=>jt.fetch({path:"boot/version",params:{version:i.version,release:i.release,now:Date.now()}}).then(this.eatData)),3e5),D.$on("systemNotice",this.eatData),D.$on("signedIn",(()=>this.showNotice=!1)),this.eatData({version:i.version,notice:i.systemNotice})},methods:{eatData:function(e){return this.reload=e.reload,this.notice=e.notice||i.features.app.trials&&this.$route.path.startsWith("/d/")&&!Rt.isSignedIn()&&M.t("powered_by.this_is_loomio_md"),this.showNotice=this.reload||this.notice&&!Rt.user().hasExperienced(QA()(this.notice)),this.showDismiss=e.reload||e.notice},accept:function(){if(this.showNotice=!1,this.notice&&jt.users.saveExperience(QA()(this.notice)),this.reload)return setTimeout((function(){return location.reload()}),100)}}},XA=JA,e$=(0,Ut.Z)(XA,WA,KA,!1,null,null,null),t$=e$.exports,o$=o(36008),s$=function(){var e=this,t=e._self._c;return t(o$.Z,{staticClass:"app-is-booted"},[t(t$),t(jA),t(HA),e.pageError?e._e():t("router-view"),e.pageError?t(Pw,{attrs:{error:e.pageError}}):e._e(),t(yn.Z),t(Ww),t(gA),t(Fw)],1)},n$=[],i$=o(9367);gZ={},fZ=null;var r$,a$,l$,c$=function(){var e;return e=[i.theme.channels_uri,"records"].join("/"),fZ=(0,i$.ZP)(e,{query:{channel_token:i.channel_token}}),fZ.on("update",(e=>e.notice?D.$emit("systemNotice",e):(gZ[e.room]=e.score,jt.importJSON(e.records)))),fZ.on("reconnect",(e=>(console.log("socket.io reconnect",{roomScores:gZ}),fZ.emit("catchup",gZ,(e=>(console.log("catchup reply",e),e.forEach((e=>jt.importJSON(e))))))))),fZ.on("disconnect",(e=>console.log("socket.io disconnect"))),fZ.on("connect",(e=>console.log("socket.io connect")))},u$=function(){return fZ.close()},d$={},p$=(0,Ut.Z)(d$,r$,a$,!1,null,null,null),m$=p$.exports,h$={components:{CustomCss:m$},mixins:[x_],data:function(){return{pageError:null}},created:function(){return this.$route.query.locale&&Rt.updateLocale(this.$route.query.locale),null!=Rt.user().experiences.darkMode?this.$vuetify.theme.dark=Rt.user().experiences["darkMode"]:this.$vuetify.theme.dark=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,(0,l.each)(i.theme.vuetify,((e,t)=>(e&&(this.$vuetify.theme.themes.light[t]=e),e&&(this.$vuetify.theme.themes.dark[t]=e),!0)))},mounted:function(){if(c$(),!Rt.isSignedIn()&&this.shouldForceSignIn()&&this.openAuthModal(!0),D.$on("currentComponent",this.setCurrentComponent),D.$on("openAuthModal",(()=>this.openAuthModal())),D.$on("pageError",(e=>this.pageError=e)),D.$on("signedIn",(()=>this.pageError=null)),D.$on("VueForceUpdate",(()=>this.$nextTick((()=>(console.log("forceupdate"),this.$forceUpdate()))))),i.flash.notice)return Fn.success(i.flash.notice)},destroyed:function(){return u$()},watch:{$route:function(){return this.pageError=null}},methods:{setCurrentComponent:function(e){var t;return this.pageError=null,t=(0,l.truncate)(e.title||this.$t(e.titleKey),{length:300}),document.querySelector("title").text=(0,l.compact)([t,i.theme.site_name]).join(" | "),i.currentGroup=e.group,i.currentDiscussion=e.discussion,i.currentPoll=e.poll},shouldForceSignIn:function(e={}){if(this.$route.query.sign_in)return!0;if(null!=(i.pendingIdentity||{}).identity_type)return!0;if(Rt.isSignedIn())return!1;switch(this.$route.path){case"/email_preferences":return null==Rt.user().restricted;case"/dashboard":case"/inbox":case"/profile":case"/polls":case"/p/new":case"/g/new":return!0}}}},_$=h$,f$=(0,Ut.Z)(_$,s$,n$,!1,null,null,null),g$=f$.exports;Ki.TU.setOptions(Object.assign({renderer:Br()},Vr)),l$=function(e,t,o){if(t.value)return e.innerHTML=he((0,Ki.TU)(t.value))};s.ZP.directive("marked",{update:l$,bind:l$});var v$=o(74347);s.ZP.directive("observe-visibility",v$.Sq);o(44132);var b$=o(64487),y$={data:function(){return{watchedRecords:[]}},methods:{watchRecords:function({collections:e,query:t,key:o=""}){var s;return s=`${e.join("_")}_${this._uid}_${o}`,this.watchedRecords.push(s),jt.view({name:s,collections:e,query:t})}},beforeDestroy:function(){return this.watchedRecords.forEach((function(e){return delete jt.views[e]}))}},w$={methods:{closeModal:function(){return D.$emit("closeModal")}}},x$={computed:{$pollTypes:function(){return i.pollTypes},currentUser:function(){return Rt.user()},currentUserId:function(){return i.currentUserId}},methods:{titleVisible:function(e){return D.$emit("content-title-visible",e)},scrollTo:function(e,t){var o;return o=function(e,t){return document.querySelector(e)?t():setTimeout((function(){return o(e,t)}),500)},o(e,(()=>{if(this.$vuetify.goTo(e,{duration:0,offset:32}),(0,l.each)([1,2,3],(t=>{var o;return o=e+` h${t}[tabindex="-1"]`,!document.querySelector(o)||(document.querySelector(o).focus(),!1)})),t)return t()}))},approximateDate:function(e){return He(e)},exactDate:function(e){return Ge(e)},timelineDate:function(e){return Ke(e)}}},k$=o(78627),C$=o.n(k$),Z$=o(70404),I$=o(64816),A$=o(97811);function $$(e){var t;return t=new p("boot"),t.get("site").then((function(t){return t.timeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,(0,l.forEach)(t,(function(e,t){return s.ZP.set(i,t,e)})),i.sentry_dsn&&(Z$.S({ignoreErrors:["Avoided redundant navigation to current location","NotFoundError: Node.removeChild","NotFoundError: Failed to execute 'removeChild' on 'Node'","NotFoundError: The object can not be found here","NotFoundError: Node was not found","null is not an object (evaluating 'r.addEventListener')","Cannot read property 'addEventListener' of null","evaluating 't.addEventListener'","ResizeObserver loop limit exceeded","MetaMask detected another web3","AbortError: The operation was aborted","ResizeObserver loop completed with undelivered notifications","TypeError: cancelled","UnhandledRejection: Non-Error promise rejection captured with value","ChunkLoadError: Loading chunk chunk-","TypeError: annulÃ©",'Permission denied to access property "dispatchEvent" on cross-origin object',"TypeError: Failed to fetch","Object captured as promise rejection with keys: error, ok, status, statusText","Object captured as promise rejection with keys: exception, ok, status, statusText","Non-Error promise rejection captured with keys: exception, ok, status, statusText"],dsn:i.sentry_dsn,tunnel:"/bug_tunnel",integrations:[new A$.gE({routingInstrumentation:I$.x(Aw),tracingOrigins:["localhost",i.baseUrl,/^\//]})],tracesSampleRate:i.features.app.sentry_sample_rate}),b$.e((function(e){return e.setTag("loomio_version",i.version)}))),["shortcut icon"].forEach((function(e){var t;return t=document.createElement("link"),t.rel=e,t.href=i.theme.icon_src,document.getElementsByTagName("head")[0].appendChild(t)})),(0,l.forEach)(jt,(function(e,t){var o;if(o=Object.getPrototypeOf(e).model,o&&i.permittedParams[(0,l.snakeCase)(o.singular)])return o.serializableAttributes=i.permittedParams[(0,l.snakeCase)(o.singular)]})),e(t)}))}s.ZP.use(C$()),s.ZP.mixin(w$),s.ZP.mixin(y$),s.ZP.mixin(Bi),s.ZP.mixin(x$),s.ZP.config.productionTip=!1,$$((function(e){return Rt.apply(e),tw.boot(),tw.trackPageview(),i.sentry_dsn&&b$.e((function(e){return e.setUser((0,l.pick)(Rt.user(),["id","name","email","username"]))})),new s.ZP({render:function(e){return e(g$)},router:Aw,vuetify:Mt,i18n:M}).$mount("#app")}))},37052:function(e,t,o){var s={"./_lib/buildFormatLongFn/index.js":[20289,7],"./_lib/buildLocalizeFn/index.js":[16245,7],"./_lib/buildMatchFn/index.js":[43421,7],"./_lib/buildMatchPatternFn/index.js":[78926,7],"./af/_lib/formatDistance/index.js":[41146,7,41146],"./af/_lib/formatLong/index.js":[60358,7,60358],"./af/_lib/formatRelative/index.js":[31310,7,31310],"./af/_lib/localize/index.js":[82714,7,82714],"./af/_lib/match/index.js":[33185,7,33185],"./af/index.js":[74156,7,74156],"./ar-DZ/_lib/formatDistance/index.js":[10258,7,10258],"./ar-DZ/_lib/formatLong/index.js":[38384,7,38384],"./ar-DZ/_lib/formatRelative/index.js":[12923,7,12923],"./ar-DZ/_lib/localize/index.js":[50996,7,50996],"./ar-DZ/_lib/match/index.js":[53463,7,53463],"./ar-DZ/index.js":[79307,7,79307],"./ar-EG/_lib/formatDistance/index.js":[70405,7,70405],"./ar-EG/_lib/formatLong/index.js":[59137,7,59137],"./ar-EG/_lib/formatRelative/index.js":[19798,7,19798],"./ar-EG/_lib/localize/index.js":[20303,7,20303],"./ar-EG/_lib/match/index.js":[2527,7,2527],"./ar-EG/index.js":[56379,7,56379],"./ar-MA/_lib/formatDistance/index.js":[56716,7,56716],"./ar-MA/_lib/formatLong/index.js":[92086,7,92086],"./ar-MA/_lib/formatRelative/index.js":[79302,7,79302],"./ar-MA/_lib/localize/index.js":[89105,7,89105],"./ar-MA/_lib/match/index.js":[18092,7,18092],"./ar-MA/index.js":[22739,7,22739],"./ar-SA/_lib/formatDistance/index.js":[56224,7,56224],"./ar-SA/_lib/formatLong/index.js":[22041,7,22041],"./ar-SA/_lib/formatRelative/index.js":[90046,7,90046],"./ar-SA/_lib/localize/index.js":[16274,7,16274],"./ar-SA/_lib/match/index.js":[7161,7,7161],"./ar-SA/index.js":[51730,7,51730],"./ar-TN/_lib/formatDistance/index.js":[98818,7,98818],"./ar-TN/_lib/formatLong/index.js":[19048,7,19048],"./ar-TN/_lib/formatRelative/index.js":[30005,7,30005],"./ar-TN/_lib/localize/index.js":[7649,7,7649],"./ar-TN/_lib/match/index.js":[34357,7,34357],"./ar-TN/index.js":[37650,7,37650],"./ar/_lib/formatDistance/index.js":[29226,7,29226],"./ar/_lib/formatLong/index.js":[45604,7,45604],"./ar/_lib/formatRelative/index.js":[77237,7,77237],"./ar/_lib/localize/index.js":[72890,7,72890],"./ar/_lib/match/index.js":[53372,7,53372],"./ar/index.js":[18137,7,18137],"./az/_lib/formatDistance/index.js":[67580,7,67580],"./az/_lib/formatLong/index.js":[3381,7,3381],"./az/_lib/formatRelative/index.js":[5895,7,5895],"./az/_lib/localize/index.js":[79557,7,79557],"./az/_lib/match/index.js":[74390,7,74390],"./az/index.js":[77356,7,77356],"./be-tarask/_lib/formatDistance/index.js":[45515,7,45515],"./be-tarask/_lib/formatLong/index.js":[49505,7,49505],"./be-tarask/_lib/formatRelative/index.js":[37233,7,55827,37233],"./be-tarask/_lib/localize/index.js":[22623,7,22623],"./be-tarask/_lib/match/index.js":[96427,7,96427],"./be-tarask/index.js":[53336,7,55827,53336],"./be/_lib/formatDistance/index.js":[564,7,564],"./be/_lib/formatLong/index.js":[87682,7,87682],"./be/_lib/formatRelative/index.js":[28206,7,55827,28206],"./be/_lib/localize/index.js":[13533,7,13533],"./be/_lib/match/index.js":[71682,7,71682],"./be/index.js":[9624,7,55827,9624],"./bg/_lib/formatDistance/index.js":[79681,7,79681],"./bg/_lib/formatLong/index.js":[45930,7,45930],"./bg/_lib/formatRelative/index.js":[21185,7,21185],"./bg/_lib/localize/index.js":[91641,7,91641],"./bg/_lib/match/index.js":[45152,7,45152],"./bg/index.js":[94719,7,94719],"./bn/_lib/formatDistance/index.js":[67835,7,67835],"./bn/_lib/formatLong/index.js":[32076,7,32076],"./bn/_lib/formatRelative/index.js":[36520,7,36520],"./bn/_lib/localize/index.js":[12674,9,12674],"./bn/_lib/match/index.js":[35920,7,35920],"./bn/index.js":[82182,7,82182],"./bs/_lib/formatDistance/index.js":[95963,7,95963],"./bs/_lib/formatLong/index.js":[25711,7,25711],"./bs/_lib/formatRelative/index.js":[44374,7,44374],"./bs/_lib/localize/index.js":[28113,7,28113],"./bs/_lib/match/index.js":[69866,7,69866],"./bs/index.js":[32181,7,32181],"./ca/_lib/formatDistance/index.js":[49280,7,49280],"./ca/_lib/formatLong/index.js":[16686,7,16686],"./ca/_lib/formatRelative/index.js":[54470,7,54470],"./ca/_lib/localize/index.js":[50683,7,50683],"./ca/_lib/match/index.js":[73146,7,73146],"./ca/index.js":[44732,7,44732],"./cs/_lib/formatDistance/index.js":[79434,7,79434],"./cs/_lib/formatLong/index.js":[18336,7,18336],"./cs/_lib/formatRelative/index.js":[3003,7,3003],"./cs/_lib/localize/index.js":[48793,7,48793],"./cs/_lib/match/index.js":[63626,7,63626],"./cs/index.js":[76105,7,76105],"./cy/_lib/formatDistance/index.js":[90305,7,90305],"./cy/_lib/formatLong/index.js":[32132,7,32132],"./cy/_lib/formatRelative/index.js":[68527,7,68527],"./cy/_lib/localize/index.js":[17863,7,17863],"./cy/_lib/match/index.js":[53494,7,53494],"./cy/index.js":[96227,7,96227],"./da/_lib/formatDistance/index.js":[96569,7,96569],"./da/_lib/formatLong/index.js":[20658,7,20658],"./da/_lib/formatRelative/index.js":[31002,7,31002],"./da/_lib/localize/index.js":[55578,7,55578],"./da/_lib/match/index.js":[3393,7,3393],"./da/index.js":[80925,7,80925],"./de-AT/_lib/localize/index.js":[56443,7,56443],"./de-AT/index.js":[73210,7,73210],"./de/_lib/formatDistance/index.js":[82376,7,82376],"./de/_lib/formatLong/index.js":[6749,7,6749],"./de/_lib/formatRelative/index.js":[91805,7,91805],"./de/_lib/localize/index.js":[56105,7,56105],"./de/_lib/match/index.js":[83996,7,83996],"./de/index.js":[76119,7,76119],"./el/_lib/formatDistance/index.js":[96170,7,96170],"./el/_lib/formatLong/index.js":[22761,7,22761],"./el/_lib/formatRelative/index.js":[5093,7,5093],"./el/_lib/localize/index.js":[79919,7,79919],"./el/_lib/match/index.js":[20320,7,20320],"./el/index.js":[71511,7,71511],"./en-AU/_lib/formatLong/index.js":[47483,7,47483],"./en-AU/index.js":[51971,7,51971],"./en-CA/_lib/formatDistance/index.js":[16925,7,16925],"./en-CA/_lib/formatLong/index.js":[17156,7,17156],"./en-CA/index.js":[23654,7,23654],"./en-GB/_lib/formatLong/index.js":[90125,7,90125],"./en-GB/index.js":[22709,7,22709],"./en-IE/index.js":[84511,7,84511],"./en-IN/_lib/formatLong/index.js":[44649,7,44649],"./en-IN/index.js":[20078,7,56635],"./en-NZ/_lib/formatLong/index.js":[88738,7,88738],"./en-NZ/index.js":[3557,7,3557],"./en-US/_lib/formatDistance/index.js":[71924,7],"./en-US/_lib/formatLong/index.js":[95062,7],"./en-US/_lib/formatRelative/index.js":[5102,7],"./en-US/_lib/localize/index.js":[87839,7],"./en-US/_lib/match/index.js":[9796,7],"./en-US/index.js":[82512,7],"./en-ZA/_lib/formatLong/index.js":[12820,7,12820],"./en-ZA/index.js":[55585,7,55585],"./eo/_lib/formatDistance/index.js":[60509,7,60509],"./eo/_lib/formatLong/index.js":[61709,7,61709],"./eo/_lib/formatRelative/index.js":[76297,7,76297],"./eo/_lib/localize/index.js":[83419,7,83419],"./eo/_lib/match/index.js":[66460,7,66460],"./eo/index.js":[46050,7,46050],"./es/_lib/formatDistance/index.js":[17308,7,17308],"./es/_lib/formatLong/index.js":[19983,7,19983],"./es/_lib/formatRelative/index.js":[54011,7,54011],"./es/_lib/localize/index.js":[389,7,389],"./es/_lib/match/index.js":[71365,7,71365],"./es/index.js":[19962,7,19962],"./et/_lib/formatDistance/index.js":[37961,7,37961],"./et/_lib/formatLong/index.js":[50363,7,50363],"./et/_lib/formatRelative/index.js":[87335,7,87335],"./et/_lib/localize/index.js":[50794,7,50794],"./et/_lib/match/index.js":[60084,7,60084],"./et/index.js":[58170,7,58170],"./eu/_lib/formatDistance/index.js":[85454,7,85454],"./eu/_lib/formatLong/index.js":[56183,7,56183],"./eu/_lib/formatRelative/index.js":[94237,7,94237],"./eu/_lib/localize/index.js":[5966,7,5966],"./eu/_lib/match/index.js":[64402,7,64402],"./eu/index.js":[9042,7,9042],"./fa-IR/_lib/formatDistance/index.js":[87201,7,87201],"./fa-IR/_lib/formatLong/index.js":[81884,7,81884],"./fa-IR/_lib/formatRelative/index.js":[91912,7,91912],"./fa-IR/_lib/localize/index.js":[97188,7,97188],"./fa-IR/_lib/match/index.js":[43043,7,43043],"./fa-IR/index.js":[13537,7,13537],"./fi/_lib/formatDistance/index.js":[67380,7,67380],"./fi/_lib/formatLong/index.js":[99532,7,99532],"./fi/_lib/formatRelative/index.js":[15561,7,15561],"./fi/_lib/localize/index.js":[64354,7,61622],"./fi/_lib/match/index.js":[27530,7,27530],"./fi/index.js":[95999,7,95999],"./fr-CA/_lib/formatLong/index.js":[53860,7,53860],"./fr-CA/index.js":[82580,7,82580],"./fr-CH/_lib/formatLong/index.js":[96065,7,96065],"./fr-CH/_lib/formatRelative/index.js":[16372,7,16372],"./fr-CH/index.js":[89718,7,89718],"./fr/_lib/formatDistance/index.js":[66522,7,66522],"./fr/_lib/formatLong/index.js":[34325,7,34325],"./fr/_lib/formatRelative/index.js":[22162,7,22162],"./fr/_lib/localize/index.js":[38803,7,38803],"./fr/_lib/match/index.js":[58213,7,58213],"./fr/index.js":[63126,7,63126],"./fy/_lib/formatDistance/index.js":[36945,7,36945],"./fy/_lib/formatLong/index.js":[84905,7,84905],"./fy/_lib/formatRelative/index.js":[50776,7,50776],"./fy/_lib/localize/index.js":[82930,7,82930],"./fy/_lib/match/index.js":[98756,7,98756],"./fy/index.js":[8848,7,8848],"./gd/_lib/formatDistance/index.js":[64312,7,52646],"./gd/_lib/formatLong/index.js":[88030,7,88030],"./gd/_lib/formatRelative/index.js":[11398,7,11398],"./gd/_lib/localize/index.js":[77390,7,77390],"./gd/_lib/match/index.js":[34044,7,34044],"./gd/index.js":[93698,7,93698],"./gl/_lib/formatDistance/index.js":[22523,7,22523],"./gl/_lib/formatLong/index.js":[75618,7,75618],"./gl/_lib/formatRelative/index.js":[2698,7,2698],"./gl/_lib/localize/index.js":[68154,7,68154],"./gl/_lib/match/index.js":[27475,7,27475],"./gl/index.js":[68846,7,68846],"./gu/_lib/formatDistance/index.js":[22933,7,22933],"./gu/_lib/formatLong/index.js":[82513,7,82513],"./gu/_lib/formatRelative/index.js":[46840,7,46840],"./gu/_lib/localize/index.js":[98528,7,98528],"./gu/_lib/match/index.js":[18201,7,73691],"./gu/index.js":[56209,7,56209],"./he/_lib/formatDistance/index.js":[75736,7,75736],"./he/_lib/formatLong/index.js":[45218,7,45218],"./he/_lib/formatRelative/index.js":[64125,7,64125],"./he/_lib/localize/index.js":[20379,7,20379],"./he/_lib/match/index.js":[15430,7,15430],"./he/index.js":[16309,7,16309],"./hi/_lib/formatDistance/index.js":[51734,7,51734],"./hi/_lib/formatLong/index.js":[78241,7,78241],"./hi/_lib/formatRelative/index.js":[56683,7,56683],"./hi/_lib/localize/index.js":[65282,9,65282],"./hi/_lib/match/index.js":[50248,7,50248],"./hi/index.js":[37056,7,37056],"./hr/_lib/formatDistance/index.js":[7792,7,57507],"./hr/_lib/formatLong/index.js":[77910,7,77910],"./hr/_lib/formatRelative/index.js":[45339,7,45339],"./hr/_lib/localize/index.js":[77677,7,77677],"./hr/_lib/match/index.js":[16436,7,16436],"./hr/index.js":[97276,7,97276],"./ht/_lib/formatDistance/index.js":[61245,7,61245],"./ht/_lib/formatLong/index.js":[67737,7,67737],"./ht/_lib/formatRelative/index.js":[39803,7,39803],"./ht/_lib/localize/index.js":[19400,7,19400],"./ht/_lib/match/index.js":[97695,7,97695],"./ht/index.js":[55389,7,55389],"./hu/_lib/formatDistance/index.js":[91898,7,91898],"./hu/_lib/formatLong/index.js":[19266,7,19266],"./hu/_lib/formatRelative/index.js":[41544,7,41544],"./hu/_lib/localize/index.js":[69353,7,69353],"./hu/_lib/match/index.js":[85370,7,85370],"./hu/index.js":[79675,7,79675],"./hy/_lib/formatDistance/index.js":[41839,7,41839],"./hy/_lib/formatLong/index.js":[45625,7,45625],"./hy/_lib/formatRelative/index.js":[80528,7,80528],"./hy/_lib/localize/index.js":[74391,7,74391],"./hy/_lib/match/index.js":[1824,7,1824],"./hy/index.js":[74403,7,74403],"./id/_lib/formatDistance/index.js":[95223,7,95223],"./id/_lib/formatLong/index.js":[27166,7,27166],"./id/_lib/formatRelative/index.js":[65673,7,65673],"./id/_lib/localize/index.js":[98045,7,98045],"./id/_lib/match/index.js":[10798,7,10798],"./id/index.js":[51872,7,51872],"./is/_lib/formatDistance/index.js":[67527,7,67527],"./is/_lib/formatLong/index.js":[73003,7,73003],"./is/_lib/formatRelative/index.js":[75440,7,75440],"./is/_lib/localize/index.js":[53162,7,53162],"./is/_lib/match/index.js":[75101,7,75101],"./is/index.js":[28677,7,28677],"./it-CH/_lib/formatLong/index.js":[98347,7,98347],"./it-CH/index.js":[12264,7,12264],"./it/_lib/formatDistance/index.js":[12642,7,12642],"./it/_lib/formatLong/index.js":[96714,7,96714],"./it/_lib/formatRelative/index.js":[74501,7,74501],"./it/_lib/localize/index.js":[82713,7,82713],"./it/_lib/match/index.js":[37281,7,37281],"./it/index.js":[59629,7,59629],"./ja-Hira/_lib/formatDistance/index.js":[65047,7,65047],"./ja-Hira/_lib/formatLong/index.js":[44818,7,44818],"./ja-Hira/_lib/formatRelative/index.js":[20942,7,20942],"./ja-Hira/_lib/localize/index.js":[97031,7,97031],"./ja-Hira/_lib/match/index.js":[71636,7,71636],"./ja-Hira/index.js":[81590,7,81590],"./ja/_lib/formatDistance/index.js":[15525,7,15525],"./ja/_lib/formatLong/index.js":[45161,7,45161],"./ja/_lib/formatRelative/index.js":[85071,7,85071],"./ja/_lib/localize/index.js":[85598,7,85598],"./ja/_lib/match/index.js":[93509,7,93509],"./ja/index.js":[42180,7,42180],"./ka/_lib/formatDistance/index.js":[87414,7,87414],"./ka/_lib/formatLong/index.js":[27355,7,27355],"./ka/_lib/formatRelative/index.js":[91402,7,91402],"./ka/_lib/localize/index.js":[5552,7,5552],"./ka/_lib/match/index.js":[75108,7,75108],"./ka/index.js":[36501,7,36501],"./kk/_lib/formatDistance/index.js":[52071,7,52071],"./kk/_lib/formatLong/index.js":[99466,7,99466],"./kk/_lib/formatRelative/index.js":[52400,7,52400],"./kk/_lib/localize/index.js":[31814,7,31814],"./kk/_lib/match/index.js":[5574,7,5574],"./kk/index.js":[34996,7,34996],"./km/_lib/formatDistance/index.js":[97263,7,97263],"./km/_lib/formatLong/index.js":[66355,7,66355],"./km/_lib/formatRelative/index.js":[34833,7,34833],"./km/_lib/localize/index.js":[99273,7,99273],"./km/_lib/match/index.js":[7916,7,7916],"./km/index.js":[38684,7,38684],"./kn/_lib/formatDistance/index.js":[56071,7,56071],"./kn/_lib/formatLong/index.js":[78505,7,78505],"./kn/_lib/formatRelative/index.js":[8440,7,8440],"./kn/_lib/localize/index.js":[23283,7,23283],"./kn/_lib/match/index.js":[27211,7,27211],"./kn/index.js":[43434,7,43434],"./ko/_lib/formatDistance/index.js":[36136,7,36136],"./ko/_lib/formatLong/index.js":[91257,7,91257],"./ko/_lib/formatRelative/index.js":[52593,7,52593],"./ko/_lib/localize/index.js":[93558,7,93558],"./ko/_lib/match/index.js":[97948,7,97948],"./ko/index.js":[2666,7,2666],"./lb/_lib/formatDistance/index.js":[40714,7,40714],"./lb/_lib/formatLong/index.js":[73815,7,73815],"./lb/_lib/formatRelative/index.js":[1395,7,1395],"./lb/_lib/localize/index.js":[45973,7,45973],"./lb/_lib/match/index.js":[34308,7,34308],"./lb/index.js":[84048,7,84048],"./lt/_lib/formatDistance/index.js":[42067,7,42067],"./lt/_lib/formatLong/index.js":[83573,7,83573],"./lt/_lib/formatRelative/index.js":[63963,7,63963],"./lt/_lib/localize/index.js":[16687,7,16687],"./lt/_lib/match/index.js":[79884,7,79884],"./lt/index.js":[2536,7,2536],"./lv/_lib/formatDistance/index.js":[41340,7,41340],"./lv/_lib/formatLong/index.js":[47090,7,47090],"./lv/_lib/formatRelative/index.js":[54550,7,54550],"./lv/_lib/localize/index.js":[44306,7,44306],"./lv/_lib/match/index.js":[94305,7,94305],"./lv/index.js":[3610,7,3610],"./mk/_lib/formatDistance/index.js":[83350,7,83350],"./mk/_lib/formatLong/index.js":[30299,7,30299],"./mk/_lib/formatRelative/index.js":[21154,7,21154],"./mk/_lib/localize/index.js":[49324,7,49324],"./mk/_lib/match/index.js":[45603,7,45603],"./mk/index.js":[1057,7,1057],"./mn/_lib/formatDistance/index.js":[64216,7,64216],"./mn/_lib/formatLong/index.js":[10562,7,10562],"./mn/_lib/formatRelative/index.js":[69683,7,69683],"./mn/_lib/localize/index.js":[48637,7,94476],"./mn/_lib/match/index.js":[64094,7,64094],"./mn/index.js":[14893,7,14893],"./ms/_lib/formatDistance/index.js":[79522,7,79522],"./ms/_lib/formatLong/index.js":[14333,7,14333],"./ms/_lib/formatRelative/index.js":[51140,7,51140],"./ms/_lib/localize/index.js":[97118,7,97118],"./ms/_lib/match/index.js":[14396,7,14396],"./ms/index.js":[83148,7,83148],"./mt/_lib/formatDistance/index.js":[92252,7,92252],"./mt/_lib/formatLong/index.js":[64778,7,64778],"./mt/_lib/formatRelative/index.js":[69682,7,69682],"./mt/_lib/localize/index.js":[57669,7,57669],"./mt/_lib/match/index.js":[7438,7,7438],"./mt/index.js":[22598,7,22598],"./nb/_lib/formatDistance/index.js":[5979,7,5979],"./nb/_lib/formatLong/index.js":[54727,7,54727],"./nb/_lib/formatRelative/index.js":[91423,7,91423],"./nb/_lib/localize/index.js":[99726,7,99726],"./nb/_lib/match/index.js":[38558,7,38558],"./nb/index.js":[46815,7,46815],"./nl-BE/_lib/formatDistance/index.js":[70218,7,70218],"./nl-BE/_lib/formatLong/index.js":[14661,7,14661],"./nl-BE/_lib/formatRelative/index.js":[51573,7,51573],"./nl-BE/_lib/localize/index.js":[20174,7,20174],"./nl-BE/_lib/match/index.js":[87601,7,87601],"./nl-BE/index.js":[25778,7,25778],"./nl/_lib/formatDistance/index.js":[98562,7,98562],"./nl/_lib/formatLong/index.js":[30221,7,30221],"./nl/_lib/formatRelative/index.js":[96665,7,96665],"./nl/_lib/localize/index.js":[90384,7,90384],"./nl/_lib/match/index.js":[15009,7,15009],"./nl/index.js":[70390,7,70390],"./nn/_lib/formatDistance/index.js":[49714,7,49714],"./nn/_lib/formatLong/index.js":[29983,7,29983],"./nn/_lib/formatRelative/index.js":[35458,7,35458],"./nn/_lib/localize/index.js":[87563,7,87563],"./nn/_lib/match/index.js":[12324,7,12324],"./nn/index.js":[72495,7,72495],"./oc/_lib/formatDistance/index.js":[77553,7,77553],"./oc/_lib/formatLong/index.js":[79329,7,79329],"./oc/_lib/formatRelative/index.js":[10556,7,10556],"./oc/_lib/localize/index.js":[86354,7,86354],"./oc/_lib/match/index.js":[23180,7,23180],"./oc/index.js":[3824,7,3824],"./pl/_lib/formatDistance/index.js":[7325,7,7325],"./pl/_lib/formatLong/index.js":[50807,7,50807],"./pl/_lib/formatRelative/index.js":[66002,7,66002],"./pl/_lib/localize/index.js":[12885,7,12885],"./pl/_lib/match/index.js":[84817,7,84817],"./pl/index.js":[63618,7,63618],"./pt-BR/_lib/formatDistance/index.js":[38877,7,38877],"./pt-BR/_lib/formatLong/index.js":[23903,7,23903],"./pt-BR/_lib/formatRelative/index.js":[41897,7,41897],"./pt-BR/_lib/localize/index.js":[78076,7,78076],"./pt-BR/_lib/match/index.js":[13550,7,13550],"./pt-BR/index.js":[81333,7,81333],"./pt/_lib/formatDistance/index.js":[1092,7,48637],"./pt/_lib/formatLong/index.js":[10063,7,10063],"./pt/_lib/formatRelative/index.js":[29479,7,29479],"./pt/_lib/localize/index.js":[81235,7,81235],"./pt/_lib/match/index.js":[51549,7,51549],"./pt/index.js":[63086,7,63086],"./ro/_lib/formatDistance/index.js":[6666,7,6666],"./ro/_lib/formatLong/index.js":[60333,7,60333],"./ro/_lib/formatRelative/index.js":[67125,7,67125],"./ro/_lib/localize/index.js":[39408,7,39408],"./ro/_lib/match/index.js":[9480,7,9480],"./ro/index.js":[66088,7,66088],"./ru/_lib/formatDistance/index.js":[88770,7,88770],"./ru/_lib/formatLong/index.js":[83233,7,83233],"./ru/_lib/formatRelative/index.js":[53566,7,53566],"./ru/_lib/localize/index.js":[81348,7,81348],"./ru/_lib/match/index.js":[45195,7,45195],"./ru/index.js":[66754,7,66754],"./sk/_lib/formatDistance/index.js":[46732,7,46732],"./sk/_lib/formatLong/index.js":[21831,7,21831],"./sk/_lib/formatRelative/index.js":[50560,7,50560],"./sk/_lib/localize/index.js":[31044,7,31044],"./sk/_lib/match/index.js":[58923,7,58923],"./sk/index.js":[86737,7,78259],"./sl/_lib/formatDistance/index.js":[76930,7,76930],"./sl/_lib/formatLong/index.js":[9273,7,9273],"./sl/_lib/formatRelative/index.js":[83070,7,83070],"./sl/_lib/localize/index.js":[42958,7,42958],"./sl/_lib/match/index.js":[83296,7,83296],"./sl/index.js":[1139,7,1139],"./sq/_lib/formatDistance/index.js":[36794,7,36794],"./sq/_lib/formatLong/index.js":[62624,7,62624],"./sq/_lib/formatRelative/index.js":[19232,7,19232],"./sq/_lib/localize/index.js":[76880,7,76880],"./sq/_lib/match/index.js":[57930,7,57930],"./sq/index.js":[43852,7,43852],"./sr-Latn/_lib/formatDistance/index.js":[26261,7,26261],"./sr-Latn/_lib/formatLong/index.js":[40214,7,40214],"./sr-Latn/_lib/formatRelative/index.js":[619,7,619],"./sr-Latn/_lib/localize/index.js":[25494,7,25494],"./sr-Latn/_lib/match/index.js":[70091,7,70091],"./sr-Latn/index.js":[62394,7,62394],"./sr/_lib/formatDistance/index.js":[94963,7,94963],"./sr/_lib/formatLong/index.js":[9572,7,9572],"./sr/_lib/formatRelative/index.js":[32195,7,32195],"./sr/_lib/localize/index.js":[63747,7,63747],"./sr/_lib/match/index.js":[59555,7,59555],"./sr/index.js":[32397,7,32397],"./sv/_lib/formatDistance/index.js":[93283,7,93283],"./sv/_lib/formatLong/index.js":[45853,7,45853],"./sv/_lib/formatRelative/index.js":[46304,7,46304],"./sv/_lib/localize/index.js":[62185,7,62185],"./sv/_lib/match/index.js":[31379,7,31379],"./sv/index.js":[29779,7,29779],"./ta/_lib/formatDistance/index.js":[74639,7,74639],"./ta/_lib/formatLong/index.js":[83101,7,83101],"./ta/_lib/formatRelative/index.js":[14179,7,14179],"./ta/_lib/localize/index.js":[88574,7,88574],"./ta/_lib/match/index.js":[6042,7,6042],"./ta/index.js":[32718,7,32718],"./te/_lib/formatDistance/index.js":[15919,7,15919],"./te/_lib/formatLong/index.js":[23003,7,23003],"./te/_lib/formatRelative/index.js":[15927,7,15927],"./te/_lib/localize/index.js":[28739,7,28739],"./te/_lib/match/index.js":[46028,7,46028],"./te/index.js":[52275,7,52275],"./th/_lib/formatDistance/index.js":[73448,7,73448],"./th/_lib/formatLong/index.js":[29011,7,29011],"./th/_lib/formatRelative/index.js":[46945,7,46945],"./th/_lib/localize/index.js":[44017,7,44017],"./th/_lib/match/index.js":[65534,7,65534],"./th/index.js":[98492,7,98492],"./tr/_lib/formatDistance/index.js":[91742,7,91742],"./tr/_lib/formatLong/index.js":[66075,7,66075],"./tr/_lib/formatRelative/index.js":[38897,7,38897],"./tr/_lib/localize/index.js":[81281,7,81281],"./tr/_lib/match/index.js":[20941,7,20941],"./tr/index.js":[41062,7,41062],"./ug/_lib/formatDistance/index.js":[31914,7,31914],"./ug/_lib/formatLong/index.js":[70065,7,70065],"./ug/_lib/formatRelative/index.js":[4128,7,4128],"./ug/_lib/localize/index.js":[19758,7,19758],"./ug/_lib/match/index.js":[60663,7,60663],"./ug/index.js":[61505,7,61505],"./uk/_lib/formatDistance/index.js":[2647,7,2647],"./uk/_lib/formatLong/index.js":[71831,7,71831],"./uk/_lib/formatRelative/index.js":[80507,7,55827,80507],"./uk/_lib/localize/index.js":[31882,7,31882],"./uk/_lib/match/index.js":[88845,7,88845],"./uk/index.js":[25490,7,55827,25490],"./uz-Cyrl/_lib/formatDistance/index.js":[59074,7,59074],"./uz-Cyrl/_lib/formatLong/index.js":[16798,7,16798],"./uz-Cyrl/_lib/formatRelative/index.js":[65283,7,65283],"./uz-Cyrl/_lib/localize/index.js":[10755,7,10755],"./uz-Cyrl/_lib/match/index.js":[56523,7,56523],"./uz-Cyrl/index.js":[93757,7,93757],"./uz/_lib/formatDistance/index.js":[55965,7,55965],"./uz/_lib/formatLong/index.js":[59606,7,59606],"./uz/_lib/formatRelative/index.js":[81632,7,81632],"./uz/_lib/localize/index.js":[52970,7,52970],"./uz/_lib/match/index.js":[29633,7,29633],"./uz/index.js":[26466,7,26466],"./vi/_lib/formatDistance/index.js":[72198,7,72198],"./vi/_lib/formatLong/index.js":[32592,7,32592],"./vi/_lib/formatRelative/index.js":[20022,7,20022],"./vi/_lib/localize/index.js":[48125,7,48125],"./vi/_lib/match/index.js":[8624,7,8624],"./vi/index.js":[52358,7,52358],"./zh-CN/_lib/formatDistance/index.js":[31526,7,31526],"./zh-CN/_lib/formatLong/index.js":[87969,7,87969],"./zh-CN/_lib/formatRelative/index.js":[6915,7,6915],"./zh-CN/_lib/localize/index.js":[6890,7,6890],"./zh-CN/_lib/match/index.js":[95454,7,95454],"./zh-CN/index.js":[24602,7,24602],"./zh-HK/_lib/formatDistance/index.js":[84231,7,84231],"./zh-HK/_lib/formatLong/index.js":[47076,7,47076],"./zh-HK/_lib/formatRelative/index.js":[53082,7,53082],"./zh-HK/_lib/localize/index.js":[13653,7,13653],"./zh-HK/_lib/match/index.js":[88357,7,88357],"./zh-HK/index.js":[96835,7,96835],"./zh-TW/_lib/formatDistance/index.js":[63106,7,63106],"./zh-TW/_lib/formatLong/index.js":[27177,7,27177],"./zh-TW/_lib/formatRelative/index.js":[13238,7,13238],"./zh-TW/_lib/localize/index.js":[46341,7,46341],"./zh-TW/_lib/match/index.js":[7768,7,7768],"./zh-TW/index.js":[68368,7,18201]};function n(e){if(!o.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return Promise.all(t.slice(2).map(o.e)).then((function(){return o.t(n,16|t[1])}))}n.keys=function(){return Object.keys(s)},n.id=37052,e.exports=n},73491:function(e){const t=[{en:{tasks:{tasks:"Tasks",your_tasks:"Your tasks",permission_denied:"You don't have permission to update this task",due_date:"Due date",send_reminder:"Send reminder (if not done)",no_reminder:"No reminder",on_due_date:"On due date","1_day_before":"1 day before","2_day_before":"2 days before","3_day_before":"3 days before","7_day_before":"7 days before",task_placeholder:"Enter a task and @mention someone to assign it",add_due_date:"Add due date",task_updated_done:"Task marked as done!",task_updated_not_done:"Task marked as not done",no_tasks_assigned:"There are no tasks assigned to you"},templates:{title_template:"%{title} Template",title_templates:"%{title} Templates",title_copy:"%{title} Copy",copy_of_title:"Copy of %{title}",loomio_default_templates:"Loomio default templates",which_templates_would_you_like_to_use:"Which templates would you like to use?",login_to_start_demo:"This a demo of Loomio in action. You're welcome to take a look around.\n",sign_in_to_try_features:'If you\'d like to try voting in a demo decision, or to start a free trial for your organization, click "sign in".\n',click_button_to_start_demo:"Welcome! To try voting and other features, click start demo.\n",welcome_to_your_demo:"This is your very own demo group!",try_voting_to_see_it_work:"Try voting in a proposal to get a sense of how Loomio works.",delete_will_be_deleted_in_x_days:"This demo will be deleted in %{x} days.",to_use_loomio_with_your_org_start_trial:"When you're ready to try Loomio with your organization, start a free trial.",templates:"Templates",make_a_copy:"Make a copy",this_thread_is_a_template:"This thread is a template. Make a copy if you want to use it.",this_is_a_poll_template:"This a poll template. Make a copy if you want to start voting.",try_loomio:"Try Loomio",start_a_demo_group:"Start a demo group",start_a_demo:"Start a demo",demo_group:"Demo group",look_and_feel:"See what Loomio looks like for a small organization. Learn the app by trying it out.",watch_then_start:'Please watch the video, then click "Start Demo" to try Loomio',generating_demo:"Ok, wait right there! Generating a demo takes around 20 seconds.",start_a_x_day_free_trial:"Start a {day} day free trial",ready_to_trial:"Ready to try Loomio with your organization?",start_a_no_obligation_x_day_trial:"Start a Loomio group for your orgnization with a free {day} day trial.",you_can_test_it_out:"You can invite other people to join, integrate it with your other tools, and try making some decisions.\n",demo_created:"Demo group created, just for you!",start_demo:"Start demo",view_demo:"View demo",start_trial:"Start trial",start_free_trial:"Start free trial",demo_needs_user:"To start a demo, you need to sign up (or sign in) as a Loomio user. This is free and only takes a minute.",this_is_a_template_for_new_threads:"This is a template for new threads",share_a_custom_configuration:"Share a custom configuration with others in your group"},doctypes:{youtube_video:"YouTube Video",image:"Image",pdf:"PDF",excel:"Excel Spreadsheet",document:"Document",csv:"CSV File",video:"Video",text:"Text File",google_doc:"Google Doc",google_sheet:"Google Spreadsheet",google_drive:"Google Drive",pull_request:"Pull Request",trello_board:"Trello Board",trello_card:"Trello Card"},loomio_onboarding:{group_progress_card:{title:"Let's get started!",activities:{set_description:"Set your group's description",set_cover_photo:"Upload a cover photo & logo for your group",customize_group:"Add a group picture, logo and description",setup_chatbot:"Add a Loomio bot to your chatroom (e.g. Slack, Discord, Teams or other)",invite_people_in:"Invite people in by email, or with a link to join.",start_thread:"Start a discussion thread",make_decision:"Start a decision"},learn_more:"Learn more at Loomio Help",celebration_message:"Nice! Your group is good to go!  ğŸ‰",dismiss_this_card:"Dismiss this card"}},plan_names:{free:"Free",starter:"Starter",trial:"Trial",pro:"Pro",pro_nonprofit:"Pro Nonprofit",community:"Community",small:"Small",medium:"Medium",large:"Large",monthly:"Monthly",yearly:"Annually"},current_plan_button:{upgrade:"Upgrade",buy_now:"Buy now",is_old_plan:"Loomio has new simple pricing plans",change_plan:"Change plan",view_plans:"View plans",free_trial:"Free trial. {days} days remaining.",trial_expired:"Your trial has expired. Upgrade to continue using Loomio.",tooltip:"Our prices are fantastic! Upgrade today and enjoy what Loomio can offer your group.",was_gift_trial:"Your group has been using Loomio for free since {createdDate}. We are unable to continue providing a free service. Please upgrade to continue using Loomio. <a href='https://help.loomio.org/en/plan-changes/' target='_blank' style='text-decoration: underline;'>Read more.</a>",was_gift_remaining:"{days} days remaining.",was_gift_expired:"Your free plan has now expired."},subscription_status:{plan:"Plan",state:"Status",members:"Members",active_members:"Active members",max_threads:"Max threads",max_members:"Max members",expires_at:"Expires",renews_at:"Renews",referral_code:"Referral code",chargify_link:"Billing portal",referral_code_help:"Give a friend a discount, get yourself some credit!",manage_payment_details:"Manage payment details",manage_subscription:"Manage Subscription",amount:"Amount"},loomio_tags:{all_tags:"All tags",tags:"Tags",apply_tags:"Apply tags",new_tag:"New tag",name_label:"Name",color_label:"Color",card_title:"Category tags",modal_title:"Create a new tag",modal_edit_title:"Edit tag",modal_destroy_title:"Remove tag",destroy_tag:"Delete tag",destroy_helptext:"This will delete this tag and remove it from all threads in the group. Are you sure?",helptext:"Tags allow you to categorize conversations and easily find them later",discussions_count_singular:"(%{count} thread)",discussions_count_plural:"(%{count} threads)",tag_created:"Tag saved",tag_destroyed:"Tag deleted",tags_marked:"Threads marked '{name}' in {groupName}",no_tags_present:"No threads were found with that tag! Try selecting another one",no_tags_in_group:"This group has no category tags yet",only_admins_can_edit_tags:"Sorry, only admins of {group} can create, rename or delete tags"},poll_types:{proposal:"proposal",count:"opt-in",check:"sense check",poll:"poll",dot_vote:"dot vote",meeting:"time poll",ranked_choice:"ranked choice",score:"score poll",question:"question round"},timezones:{local:"Local time ({value})"},common:{prefix_eg:"e.g. {val}",are_you_sure:"Are you sure?",loomio_help:"Loomio help",visit_loomio_help:"Visit Loomio help",help_and_guides:"Help & guides",please_wait:"Please wait",optional:"(Optional)",version:"Version",none:"None",empty:"Empty",no_results_found:"No results found",view:"View",or:"or",history:"History",option:"Option",add:"Add",you:"You",off:"Off",expand:"Expand",all_day:"All day",ok_got_it:"Ok, got it",learn_more:"Learn more",not_found:"Not found",time_zone:"Time zone",local_time:"Local time",attachments:"Attachments",template:"Template",links:"Links",active_time_ago:"Last active {time_ago}",confirm_discard_changes:"Discard your changes?",something_went_wrong:"Uh oh! Something went wrong",check_for_errors_and_try_again:"Please check the form for errors and try again",please_try_again:"Please try again",time:{am:"am",pm:"pm"},closing_in:"Closing {time}",closed_ago:"Closed {time}",volume:"Volume",notification_volume:"Notification Volume",group:"Group",groups:"Groups",organization:"Organization",organizations:"Organizations",threads:"Threads",decisions:"Decisions",settings:"Settings",help:"Help",anonymous:"Anonymous",required:"Required",email_address:"Email address",minutes:"Minutes",privacy:{privacy:"Privacy",public:"Public",open:"Open",closed:"Closed",private:"Private",secret:"Secret"},selected:"Selected",today:"today",in_x_days:"in %{x} days",date_range:{today:"Today",yesterday:"Yesterday",thisweek:"This Week",thismonth:"This Month",older:"Older"},more_help:"More help",copy:"Copy",reset:"Reset",copy_text:"Copy text",copied:"Copied to clipboard",points_abbrev:"Each vote worth {score} points",total:"Total",action:{print:"Print",preview:"Preview",pin:"Pin",unpin:"Unpin",search:"Search",filter:"Filter",back:"Back",next:"Next",close:"Close",reopen:"Reopen",save:"Save",move:"Move",save_changes:"Save changes",update_settings:"Update settings",reply:"Reply",edit:"Edit",remove:"Remove",undo_remove:"Undo remove",like:"Like",unlike:"Unlike",update:"Update",cancel:"Cancel",hide:"Hide",unhide:"Unhide",show_more:"Show more",show_fewer:"Show fewer",view_count_more:"View %{count} more",view_count_responses:"View %{count} responses",count_more:"%{count} more",count_responses:"%{count} responses",view_all:"View All",new_thread:"New thread",add_subgroup:"New subgroup",loading:"Loading",translate:"Translate",upload:"Upload",uploading:"Uploading",load_more:"Load More",share:"Share",ok:"Ok",retry:"Retry",clear:"Clear",done:"Done",start:"Start",delete:"Delete",discard:"Discard",restore:"Restore",unsubscribe:"Unsubscribe",subscribe:"Subscribe",unignore:"Unignore",remind:"Remind",resend:"Resend",send:"Send",joined:"Joined",last_seen:"Last seen",invite:"Invite",resent:"Invitation resent",export:"Export",fork:"Fork",apply:"Apply",add_people:"Add People",zoom:"Zoom",align:"Align"},formatting_help:{label:"Formatting",title:"Learn how to use Markdown to format your text"}},merge_accounts:{modal:{title:"Merge accounts",helptext:"You can merge the account under <strong>{sourceEmail}</strong> into that of <strong>{targetEmail}</strong>. Click Verify and a verification email will be sent to {targetEmail} to begin the process.",submit:"Verify",flash:"Verification email sent!"},email_taken:"Sorry, that email is already associated with another user. Does that email belong to you?",find_out_more:"Find out more.",placeholder_modal_text:'<p>If you would like to merge two accounts together, simply enter the respective email address (belonging to the other account) into your Profile page email field, and follow the instructions that appear.</p>\n<p>Need help? <a href="/contact" target="_blank">Contact us</a>.\n'},emoji_picker:{search:"Search",common:"Frequently used",expressions:"Faces",hands:"Hands",people:"People",nature:"Nature",objects:"Things",places:"Places"},ordinal:{_1:"1st",_2:"2nd",_3:"3rd",_4:"4th",_5:"5th",_6:"6th",_7:"7th",_8:"8th",_9:"9th",_10:"10th"},devise:{sessions:{signed_up:"Signed up successfully!"},failure:{inactive:"There is a deactivated account associated with this email address. If you want to reactivate your account, contact us."}},error_page:{forbidden:"You do not have permission to do this.",forbidden_view:"You do not have permission to view this.",page_not_found:"We were unable to find that. It may have been deleted or moved.",internal_server_error:"We're sorry, but something went wrong. Please try again."},verify_email_notice:{please_verify:"Thanks for participating! Please check your email for a link to verify your vote."},previous_polls_page:{heading:"Activities in {name}",polls_count:"Showing {loaded} of {total} decisions",search_activities:"Search decisions"},email_to_group:{email_to_group_settings:"Email-to-group settings",email_to_group_address:"Email-to-group address",start_threads_via_email:"Start threads via email",your_address_for_this_group:"Your email address for this group",send_email_to_start_thread:"Send email to this address to start a thread in your group.",subject_body_attachments:"The thread will use the email subject, body and attached files.",address_starts_threads_as_you:"Don't share this address - anyone who has it can start threads as you.",generate_new_address:"Generate new address",copy_address:"Copy address",email_me_this_address:"Email me this address",email_address_sent_to_you:"Email address sent to you",email_address_copied_to_clipboard:"Email address copied to clipboard",new_address_generated:"New email-to-group address generated",generate_new_address_question:"Generate new email-to-group address?",generate_new_address_warning:"All your existing email-to-loomio addresses will stop working. There is no undo. Go ahead?"},email_to_group_mailer:{your_email_address_to_start_threads_in_group:"Your email address to start threads in %{group}"},volume_levels:{loud:"Loud",normal:"Normal",quiet:"Quiet",mute:"Mute",unmute:"Unmute"},pin_event_form:{title:"Pin to timeline",title_label:"Title",hint:'Hint for next time: Try highlighting some text before you click "Pin".'},change_volume_form:{explain_scope:{thread:"This changes when you'll be notified about this thread",group:"This changes when you'll be notified about all threads in the group"},simple:{label:"Notifications",loud:"Subscribed",normal:"Normal",quiet:"Ignore",question:"When do you want to be notified?",loud_explain:"whenever there is activity",normal_explain:"when someone asks for your attention",quiet_explain:"no notifications"},aria_label:"Change email settings form",loud_label:"All activity",normal_label:"Announcements",quiet_label:"No emails",mute_label:"Mute",saved:"Notification settings updated",discussion:{title:"Thread notifications",loud_description:"You will be emailed all activity in this thread.",normal_description:"You will only be emailed important activity in this thread.",quiet_description:"You won't be emailed any activity in this thread.",apply_to_all:"Apply these settings to all threads in this group.",only_this_thread:"Applies to this thread only",group:"Change notifications for group",user:"Change user notification settings",messages:{loud:"You will be emailed activity in this thread.",normal:"You will be emailed about proposals in this thread.",quiet:"You won't be emailed about this thread."}},membership:{title:"Notifications for {title}",loud_description:"You will be emailed whenever there is activity in this group.",normal_description:"You will be emailed whenever there is activity in this group.",quiet_description:"You won't be emailed about activity in this group.",apply_to_all:"Apply these settings to all my groups.",apply_to_organization:"Apply to all groups in {organization}",messages:{loud:"You will be emailed all activity in this group.",normal:"You will only be emailed announcements in this group.",quiet:"You won't be emailed about this group."}},all_groups:{title:"Notification preferences for all groups",loud_description:"You will be emailed all activity in all your groups.",normal_description:"You will only be emailed important activity in all your groups.",quiet_description:"You won't be emailed any activity in any of your groups.",messages:{loud:"You will be emailed all activity in all your groups.",normal:"You will only be emailed announcements in all your groups.",quiet:"You won't be emailed about any of your groups."}},user:{title:"Email settings for new groups",loud_description:"You will be emailed whenever there is activity in any new groups you join.",normal_description:"You will be emailed about announcements in any new groups you join.",quiet_description:"You won't be emailed about activity in any new groups you join.",apply_to_all:"Apply these settings to all my groups.",messages:{loud:"You will be emailed all activity in new groups.",normal:"You will be emailed about announcements in new groups.",quiet:"You won't be emailed about new groups."}}},close_explanation_modal:{aria_label:"Close thread",close_thread:"Close thread",body:"<p>Close old or irrelevant threads to remove them from view and indicate the discussion has closed.</p>\n<p>Anyone may still comment or start a poll in a closed thread, but it will not appear in the group's thread list or on the dashboard.</p>\n",image_alt:"Closing threads all"},inbox:{clear:"Clear",latest:"Latest",unread:"Unread",closing_in:"Closing "},sign_up_form:{password_label:"Password:",password_confirmation_label:"That password again:"},signed_out_modal:{aria_label:"Session ended",title:"Your session has ended",message:"You have been logged out from another window. Please sign back in to continue.",ok:"Ok"},comment_reply_form:{aria_label:"Add a reply"},comment_form:{aria_label:"Add a comment",attachments:{add_attachment:"Attach file",remove_attachment:"Remove attachment"},messages:{created:"Comment added",replied:"{name} notified of reply",updated:"Comment updated",destroyed:"Comment deleted",removed:"Comment removed"},say_something:"Say something...",edit_comment:"Edit comment",delete_comment:"Delete comment",cancel_reply:"Cancel Reply",confirm_delete_message:"Are you sure you want to delete this comment?",confirm_delete:"Delete comment",in_reply_to:"Reply to {name}",write_a_comment:"Write a comment...",post_comment:"Post comment",submit_button:{label:"Post"},private_privacy_notice:"Your comment will only be visible to members of {groupName}.",public_privacy_notice:"Your comment will be visible to anyone on the web.",sign_in:"Log in to join the conversation"},thread_nav:{participants:"Participants"},sidebar:{threads:"Threads",my_groups:"My groups",other_groups:"Other groups",all_groups:"All groups",recent_threads:"Recent threads",invite_only_threads:"Invite-only threads",direct_threads:"Direct threads",unread_threads:"Unread threads (%{count})",muted_threads:"Muted threads",start_group:"New organization",start_subgroup:"New subgroup",explore:"Public groups",explore_groups:"Explore groups",start_thread:"New thread",start_decision:"New decision",more_groups:"More groups",template_gallery:"Template gallery",examples_and_templates:"Examples & templates",aria_labels:{heading:"Sidebar",threads_list:"Threads actions",groups_list:"Groups",user_list:"User actions"}},strand_nav:{newest:"Newest",oldest:"Oldest",newest_first:"Newest first",oldest_first:"Oldest first",all_pinned:"All pinned items",whole_thread:"The whole thread",from_comment:"From a comment url",from_sequence_id:"From a thread item url",unread:"New to you"},navbar:{search_all_threads:"Search all threads",search_threads:"Search threads in {name}",search_polls:"Search polls in {name}",search_members:"Search members in {name}",search_subgroups:"Search members in {name}",search_files:"Search files in {name}",recent_title:"Go to dashboard",unread_title:"View unread activity",start_thread:"New thread",notifications:"Notifications panel",search:{label:"Search field; search for groups and threads",results_aria_label:"Search results",no_results:"No threads found",close:"Close search panel",placeholder:"Search",loading:"Loading results...",discussions:"Threads",proposals:"Proposals",comments:"Comments"},sign_in:"Log In",toggle_sidebar:"Toggle sidebar",open_sidebar:"Open sidebar",close_sidebar:"Close sidebar",logo_title:"Home page",group_and_subgroups:"{group} & subgroups"},user_dropdown:{pin_sidebar:"Pin sidebar",unpin_sidebar:"Unpin sidebar",enable_beta_features:"Enable beta features",disable_beta_features:"Disable beta features",enable_dark_mode:"Enable dark mode",disable_dark_mode:"Disable dark mode",button_label:"User menu",edit_profile:"Edit profile",email_settings:"Notification settings",help:"Help",contact_site_name:"Contact {site_name}",contact_support:"Contact support",sign_out:"Sign out",beta_collab:"ğŸ§ª Beta features enabled!"},membership_card:{group_members:"Group members",discussion_members:"Thread members",poll_members:"{pollType} members",voters:"Voters",invite_to_group:"Invite to group",invite_to_discussion:"Invite to thread",invite_to_poll:"Invite to vote",invite_to_wip_poll:"Invite to give feedback",invitations:"Invitations"},membership_dropdown:{set_title:"Set title",resend:"Resend invitation",invitation_resent:"Invitation resent",make_coordinator:"Make admin",demote_coordinator:"Demote admin",remove_from:{discussion:"Remove from thread",group:"Remove from group",poll:"Remove from {pollType}"},cancel_invitation:"Cancel invitation"},notification_models:{discussion:"thread: ",comment:"comment in ",poll:"poll: ",outcome:"outcome: ",stance:"vote: "},notifications:{header:"Notifications",no_notifications:"You don't have any notifications",with_title:{comment_replied_to:"%{actor} replied to you in: %{title}",discussion_announced:"%{actor} invited you to the thread: %{title}",discussion_edited:"%{actor} edited the thread context: %{title}",discussion_closed:"%{actor} closed the thread: %{title}",invitation_accepted:"%{actor} accepted your invitation to join %{title}",membership_created:"%{actor} invited you to join %{title} on %{site_name}",membership_requested:"%{actor} requested to join %{title}",membership_request_approved:"%{actor} approved your request to join %{title}",new_comment:"%{actor} commented in: %{title}",new_coordinator:"%{actor} made you an admin of %{title}",new_discussion:"%{actor} started a thread: %{title}",outcome_announced:"%{actor} shared a %{poll_type} outcome: %{title}",outcome_created:"%{actor} shared a %{poll_type} outcome: %{title}",outcome_updated:"%{actor} updated the %{poll_type} outcome: %{title}",outcome_review_due:"It's time to review the outcome of: %{title}",poll_announced:"%{actor} invited you to vote: %{title}",poll_closed_by_user:"%{actor} closed the %{poll_type}: %{title}",poll_closing_soon:"%{poll_type} closing in 24 hours: %{title}",poll_closing_soon_author:"Your %{poll_type} is closing in 24 hours: %{title}",poll_created:"%{actor} started a %{poll_type}: %{title}",poll_edited:"%{actor} updated the %{poll_type}: %{title}",poll_expired:"%{poll_type} has closed: %{title}",poll_expired_author:"Share the outcome of your %{poll_type}: %{title}",poll_option_added:"%{actor} added options to %{title}",poll_reopened:"%{actor} reopened the %{poll_type}: %{title}",poll_reminder:"%{actor} is reminding you to vote on %{title}",poll_reminder_wip:"%{actor} is reminding you to give feedback: %{title}",reaction_created:"%{actor} reacted %{reaction} to your %{model} in %{title}",stance_created:"%{actor} voted in: %{title}",stance_updated:"%{actor} voted in: %{title}",stance_created_option:"%{actor} voted %{option} in %{title}",user_added_to_group:"%{actor} added you to the group: %{title}",user_mentioned:"%{actor} mentioned you in: %{title}",user_reminded:"%{actor} is reminding you to vote in: %{title}"},without_title:{discussion_announced:"%{actor} invited you to a thread",discussion_edited:"%{actor} edited the thread context",discussion_closed:"%{actor} closed the thread",group_announced:"%{actor} invited you to a group",comment_replied_to:"%{actor} replied to you",new_discussion:"%{actor} started a thread",new_comment:"%{actor} commented in a thread",membership_created:"%{actor} invited you to join a group",membership_requested:"%{actor} requested to join your group",membership_request_approved:"%{actor} approved your request to join %{title}",outcome_announced:"%{actor} shared a %{poll_type} outcome",outcome_created:"%{actor} shared a %{poll_type} outcome",outcome_updated:"%{actor} updated the outcome",outcome_review_due:"It's time to review the %{poll_type} outcome",poll_announced:"%{actor} invited you to vote on a %{poll_type}",poll_announced_wip:"%{actor} wants your feedback on a %{poll_type}",poll_closed_by_user:"%{actor} closed the %{poll_type}",poll_closing_soon:"%{poll_type} closing in 24 hours",poll_closing_soon_author:"Your %{poll_type} is closing in 24 hours",poll_created:"%{actor} started a %{poll_type}",poll_edited:"%{actor} updated the %{poll_type}",poll_expired:"%{poll_type} has closed",poll_expired_author:"Share the outcome of your %{poll_type}",poll_option_added:"%{actor} added options to the %{poll_type}",poll_reopened:"%{actor} reopened the %{poll_type}",poll_reminder:"%{actor} is reminding you to vote",poll_reminder_wip:"%{actor} is reminding you to give feedback",reaction_created:"%{actor} reacted %{reaction} to your %{model}",stance_created:"%{actor} voted",stance_updated:"%{actor} voted",stance_created_option:"%{actor} voted %{option}",user_mentioned:"%{actor} mentioned you",user_reminded:"%{actor} is reminding you to vote"},hints:{poll_closing_soon:"Now is a good time to vote, change your mind or encourage others to participate.",poll_closing_soon_author:"You may wish to remind people to vote or extend the deadline.",outcome_review_due:"Consider starting a feedback poll or a new thread inviting reflections on how the decision has been implemented."}},discussion_fork_actions:{helptext:"Select items you'd like to move to another thread",move:"Move",search_placeholder:"Find thread by title",moved:"Moving comments, this might take a moment",move_to_existing_thread:"Move to existing thread",start_new_thread:"Or, start new thread"},discussion_form:{thread_templates:"Thread templates",new_thread_template:"New thread template",edit_thread_template:"Edit thread template",blank:"Blank",blank_subtitle:"Start a discussion and see where it takes you",new_template:"New template",new_template_subtitle:"Create an example that others can copy",to:"To",direct_thread:"Direct thread",invite_only_thread:"Invite-only thread",none_direct_thread:"Direct thread (no group)",none_invite_only_thread:"Invite-only thread (no group)",change_log_placeholder:"Optionally, describe your changes. This message will be added to the thread.",change_log_label:"What's changed?",invite:"Invite",aria_label:"Thread form",start_thread:"Start thread",messages:{created:"Thread started",updated:"Thread updated",forked:"Thread fork created"},new_discussion_title:"Start new thread",moving_items_title:"Move items to new thread",edit_discussion_title:"Edit thread",group_label:"Group",group_placeholder:"Select a group",title_label:"Title",title_placeholder:"What is the topic you want to discuss?",context_label:"Context",context_placeholder:"Provide some context for this discussion, so people know how to participate",privacy_label:"Privacy",privacy_public:"Anyone can view this thread if they have the link",privacy_private:"Only members of the group can view this thread",privacy_organisation:"The thread will be visible to members of {parent} and members of {group}.",fork_notice:"A new thread will be created with %{count} items from {title}",notify_group:"Notify group"},announcement:{send_discussion:"Send thread",send_group:"Invite people to {name}",send_group_explain:"",send_poll:"Send {type}",send_outcome:"Send outcome",cannot_reveal_when_anonymous:"Sorry, we cannot reveal who has or has not voted on an anonymous poll.",discussion_notification_history:"Thread notification history",group_notification_history:"Group invitation history",poll_notification_history:"Poll notification history",outcome_notification_history:"Outcome notification history",comment_notification_history:"Comment notification history",notification_history_explanation:"âœ“ indicates that the notification has been read or the email has been opened",quick_add:"Quick add:",any_other_groups:"Any other groups?",notified_people:"{name} notified {length} people:",preview:"Preview Email",no_notifications_sent:"No notifications have been sent",history_error:"Something went wrong! Could not load history.",inviting_guests_to_thread:"Guests do not belong to your group, and have access to this thread only",select_groups:"Select groups",search_by_name_or_email:"Search by name, or enter emails to invite",search_by_name:"Search for people by name",only_admins_can_announce:"Only admins can notify the whole group",only_admins_can_invite:"Only admins can invite guests",only_admins_can_announce_or_invite:"Only admins can notify the whole group or invite guests",user_mentioned:"{name} mentioned {length} people:",comment_replied_to:"{name} replied to {length} people:",new_discussion:"{name} invited {length} people to the thread:",discussion_announced:"{name} invited {length} people to the thread:",poll_created:"{name} invited {length} people to vote:",poll_announced:"{name} invited {length} people to vote:",outcome_created:"{name} shared an outcome with {length} people:",outcome_announced:"{name} shared an outcome with {length} people:",announcement_created:"{name} invited {length} people to the thread:",discussion_edited:"{name} edited the thread, notifying {length} people:",poll_edited:"{name} edited a poll, notifying {length} people:",outcome_edited:"{name} edited an outcome, notifying {length} people:",outcome_updated:"{name} edited an outcome, notifying {length} people:",poll_closing_soon:"{name}'s poll closing reminder notified {length} people:",poll_reminder:"{name} reminded {length} people to vote:",audiences:{group:"Members of {name}",discussion_group:"Everyone in the thread",voters:"Everyone invited to vote",decided_voters:"Everyone who voted",undecided_voters:"Undecided voters",non_voters:"Members of {name} not yet invited"},form:{too_many_invitations:'Invitation limit exceeded. <a href="{upgradeUrl}" target="_blank">Upgrade</a>\n',no_invitations_remaining:'<p>You have used all {maxMembers} invitations available to this group.</p>\n<p>Next step, <a href="{upgradeUrl}" target="_blank">choose a plan</a> to continue collaborating on Loomio.</p>\n',invitations_remaining:'%{count} invitations remaining. <a href="{upgradeUrl}" target="_blank">Upgrade</a>',who_to_invite:"Who would you like to invite?",invitation_message_placeholder:"A message to include in the invitation email. (optional)",invitation_message_label:"Message",group_announced:{title:"Invite to group",helptext:"Who would you like to invite to the group?"},discussion_announced:{title:"Invite to thread",helptext:"Who would you like to invite to the thread?",notify_helptext:"Who would you like to notify about the thread?"},discussion_edited:{title:"Notify of edits",helptext:"Who would you like to notify about this update? (optional)"},poll_announced:{title:"Invite to vote",helptext:"Who would you like to invite to vote?"},wip_poll_announced:{title:"Invite to give feedback",helptext:"Who would you like to invite to give feedback?"},poll_reminder:{title:"Remind to vote",helptext:"Who would you like to remind to vote?",message_label:"Message",message_placeholder:"Optional message to tell people why they should vote"},wip_poll_reminder:{title:"Remind to give feedback",helptext:"Who would you like to remind to give feedback?",message_label:"Message",message_placeholder:"Optional message to include in notification email"},poll_edited:{title:"Notify of edits",helptext:"Who would you like to notify about this update?"},outcome_announced:{title:"Share outcome",helptext:"Summarise the results of the process, including any understandings found or issues brought to light."},anyone_can_participate:"Anyone with link can participate",placeholder:"You can enter names or email addresses",notified_empty:"Nobody selected yet",single_notification:"1 notification will be sent.",multiple_notifications:"{notified} notifications will be sent.",notified:"{notified} people will be notified.",notified_singular:"1 person will be notified.",notified_none:"Nobody will be notified.",added:"%{count} people will be added.",added_singular:"1 person will be added.",added_none:"Nobody will be added.",group_title:"{name} (%{count} people)",visible_to_group:"Anyone in {group} will be able to see this thread.",visible_to_guests:"Only invited people can see this thread.",click_group_to_see_individuals:"Click group to see individuals"},members_list:{title:"Shared with",last_notified:"Notified",not_notified:"Not notified yet",no_members:"This hasn't been shared with anyone yet!",group_admin:"Group admin",thread_admin:"Thread admin",last_read_at:"Last viewed {time}",has_not_read_thread:"Has not viewed thread"},group_form:{search_placeholder:"Search for people...",modal_title:"Select group members"},flash:{success:"%{count} notifications sent"}},action_dock:{actions_menu:"Actions menu",more_actions:"More actions",react:"React",notify:"Notify",add_resource:"Add an attachment",edit_group:"Edit group context",add_comment:"Comment",copy_url:"Copy link",edit_thread:"Edit context",announce_thread:"Send thread",invite_guests:"Invite guests",translate_thread:"Translate context",edit_poll:"Edit poll",edit_poll_type:"Edit {pollType}",new_poll_type:"New {pollType}",move_items:"Move items",announce_poll:"Invite people to vote",announce_poll_active:"(No one has been invited yet)",translate_poll:"Translate poll",edit_stance:"Change position",translate_stance:"Translate vote",edit_comment:"Edit comment",delete_comment:"Delete comment",reply_to_comment:"Reply",fork_comment:"Fork thread",translate_comment:"Translate comment",edit_outcome:"Edit outcome",announce_outcome:"Notify people about this outcome",announce_outcome_active:"(No one has been notified of this outcome yet)",translate_outcome:"Translate outcome",show_history:"Show edit history",edited:"Edited",show_edits:"Show edits",show_notifications:"Show notifications",history:"History",pin_thread:"Pin thread",unpin_thread:"Un-pin thread",pin_event:"Pin to timeline",unpin_event:"Unpin from timeline",comment_copied:"Comment URL copied to clipboard",move_thread:"Move to group",poll_copied:"Decision URL copied to clipboard",discussion_copied:"Thread URL copied to clipboard",url_copied:"Link copied to clipboard",tag_thread:"Manage tags",close_thread:"Close thread",reopen_thread:"Re-open thread",delete_thread:"Delete thread",notification_history:"Notification history",move_item:"Move item",add_poll_to_thread:"Add to thread",count_members:"%{count} members",count_voters:"%{count} voters"},formatting:{formatting_tools:"Text formatting tools",colors:"Colors",highlight:"Highlight",alignment:"Alignment",lists:"Lists",expand:"Show more formatting tools",collapse:"Show fewer formatting tools",bold:"Bold",italicize:"Italicize",blockquote:"Quote",strikethrough:"Strikethrough",underline:"Underline",link:"Insert link",code_block:"Code block",insert_image:"Insert image",insert_emoji:"Insert emoji",attach:"Attach file",heading_size:"Heading size",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",left_align:"Left align",center_align:"Center align",right_align:"Right align",justify_align:"Justify align",paragraph:"Paragraph",bullet_list:"List",number_list:"Numbered list",check_list:"Checklist",task_list:"Task list",reset:"Reset",text_color:"Text color",background_color:"Background color",quote:"Quote",embed:"Embed video",divider:"Divider",add_table:"Add table",remove_table:"Remove table",add_column_before:"Add column before",add_column_after:"Add column after",remove_column:"Remove column",add_row_before:"Add row before",add_row_after:"Add row after",remove_row:"Remove row",merge_selected:"Merge selected cells",wysiwyg:"wysiwyg",edit_markdown:"Edit Markdown",markdown_confirm:"Some formatting may be lost converting wysiwyg content to markdown.",upload_failed:"Upload failed"},cover_photo_form:{heading:"New cover photo",upload_link:"Upload new cover photo",image_size_helptext:"Ideal image size is 1400Ã—320px",upload_success:"Cover photo successfully updated"},logo_photo_form:{heading:"New group logo",upload_link:"Upload new group logo",image_size_helptext:"Ideal image size is 100Ã—100px",upload_success:"Logo successfully updated"},join_group_button:{not_a_member:"You're not currently a member of this group.",join_group:"Join group",membership_requested:"Membership requested",messages:{joined_group:"You are now a member of {group}"}},membership_request_form:{aria_label:"Membership request form",heading:"Ask to join group",name_label:"Name",email_label:"Email",introduction_label:"Why do you want to join?",submit_button:"Ask to join",introduction_over_limit:"Response too long",messages:{membership_requested:"You have requested to join {group}"}},revision_history_modal:{aria_label:"Revision history",discussion_header:"Discussion edits",comment_header:"Comment edits",poll_header:"Poll edits",outcome_header:"Outcome edits",stance_header:"Vote edits",started_by:"Started by <strong>{name}</strong>",edited_by:"Edited by <strong>{name}</strong>",edit_by:"Edit by {name} Â· {date}",posted:"Posted",field:"Field",before:"Before",after:"After",original_text:"Original",current_revision:"Latest",closing_at_changed:"closing time set to {time}",private_changed:"privacy set to {private}",group_id_changed:"moved to {name}"},reactions_input:{add_your_reaction:"Add your reaction"},reactions_display:{more_reactions:"%{count} more",you:"You",you_and_name:"You and {name}",you_and_name_and_count_more:"You, {name} and %{count} more",name_and_count_more:"{name} and %{count} more"},context_panel:{thread_status:{pinned:"This thread has been pinned. It will remain at the top of the group's list of threads for all users.",closed:"This thread has been closed. It will no longer appear on the dashboard, and will be listed under 'closed' on the group page"}},delete_group_modal:{title:"Delete group",subgroup_title:"Delete subgroup",parent_body:"<h2>This is your parent group - not a subgroup!</h2>\n<br>\nIf you delete this, any subgroups will also be permanently deleted.\n\nYour Loomio subscription will also be cancelled.\n\nIt is highly recommended to export your group data and manually download any important files before doing this.\nAre you sure you want to continue?\n",body:"Are you sure you want to delete this subgroup?\nAll threads, polls, files and other group content will be permanently deleted.\nIt is recommended that you export the group data and manually download any important files before you continue.\n",confirm:"Type '%{name}' to confirm you want to delete this group.",success:"This group has been archived and is scheduled for permanent deletion in 2 weeks."},group_page:{stats:"Group stats",threads:"Threads",polls:"Polls",members:"Members",files:"Files",settings:"Settings",subgroups:"Subgroups",show_opened:"%{count} Open",show_closed:"%{count} Closed",no_threads_here:"No threads to see here!",search_threads:"Search for threads...",private_threads:"You'll need to be a member to view private threads in this group",no_more_threads:"No more threads to load",view_closed_threads:"View closed threads",messages:{privacy:{members:"This group is now visible only to members",parent_members:"This group is now visible only to members of your organization",public:"This group is now visible to the public"},leave_group_success:"You have left this group",archive_group_success:"This group has been deactivated"},group_logo:"Group logo",new_photo:"new photo",new_cover_photo:"Upload new cover photo",new_group_logo:"Upload new group logo",open_discussions:"Open threads",closed_discussions:"Closed threads",discussions_placeholder:"A thread is where everyone can discuss a topic and make decisions together.",members_placeholder:"You're the only one here: invite some people to join you!",member_options:"Member options",see_all_members:"See all %{count} members",pending_invitations:"+ %{count} pending",subgroups_placeholder:"Subgroups give teams their own space and keep notifications focused to the right people.",invite_people:"Invite",visibility_label:"Visibility",options_label:"Options",options:{label:"Options",edit_group:"Edit group settings",become_coordinator:"Become admin",export_data:"Export group data",export_data_as_json:"Export group data as JSON",export_data_as_csv:"Export group data as CSV",export_data_as_html:"Export group data as HTML",manage_members:"Manage Members",add_subgroup:"Add Subgroup",manage_subscription:"Manage group subscription",email_settings:"Email preferences",leave_group:"Leave group",deactivate_group:"Deactivate group",subscription_status:"Subscription status"},volume:{loud:"Email whenever there is activity.",loud_aria_description:"Your notification volume for this group is set to Loud. You will be emailed whenever there is activity.",loud_message:'You will be emailed about all activity in "{name}."',normal:"Just email important activity: New threads and proposals, outcomes etc.",normal_aria_description:"Your notification volume for this group is set to Normal. You will just be emailed important activity, such as when someone starts a new thread, raises a proposal, or sets an outcome.",normal_message:'You will only be emailed about important events in "{name}".',quiet:"Don't email about this group. Activity will be displayed on the dashboard.",quiet_aria_description:"Your notification volume for this group is set to Quiet. You won't be emailed about activity in this group. Group activity will be displayed on your Dashboard.",quiet_message:'You won\'t be emailed about activity in "{name}".',mute:"Hide this group from the dashboard and do not notify unless @mentioned.",mute_aria_description:"Your notification volume for this group is set to Mute. You won't be emailed unless someone mentions you, and group activity will not be displayed on your Dashboard.",mute_message:'"{name}" has been removed from your dashboard.'},privacy:{private:"Privacy: This group is only visible to members",parent_members:"Privacy: This group is visible to members of {parentGroupName} and members of {groupName}",public:"Privacy: This group is visible on the web",aria_label:"Group privacy: {privacy}"}},export_data_modal:{title:"How do you want to use your data?",as_csv:"Open it in a spreadsheet",as_html:"Open it in a browser",as_json:"Host this group on my own server"},description_card:{title:"Group description",placeholder:"Group admins can use this area to describe the groupâ€™s purpose, so everyone knows why they are here.",messages:{description_updated:"Description updated"}},leave_group_form:{aria_label:"Leave group",title:"Leave group",question:"Are you sure you want to leave this group?",submit:"Yes, leave this group"},archive_group_form:{aria_label:"Deactivate group",title:"Deactivate group",question:"Are you sure you want to deactivate this group?",submit:"Yes, Deactivate this group"},group_form:{thread_defaults_help:"Default settings for new threads",click_to_change_image:"Click to change the cover image (4x1) or logo (1x1)",change_cover_image:"change cover image",change_logo:"change logo",permissions_explaination:"There are two levels of membership a person can have to a group: admin and member.\nAdmins can edit group settings, make other people admins, and perform all the actions listed below.\n",aria_label:"Group form",parent_group:"Parent group",new_organisation:"New organization",new_group:"New group",new_subgroup:"New subgroup",new_group_explainer:"Start a new Loomio group - an online home for your organization's discussions and decisions",new_subgroup_explainer:"Start a subgroup within an existing group - a private space for a team of people from the organization",start_group_heading:"Start a group",start_subgroup_heading:"Start a subgroup",edit_group_heading:"Edit group settings",edit_subgroup_heading:"Edit subgroup settings",group_settings:"Group settings",subgroup_settings:"Subgroup settings",group_name:"Group name",subgroup_name:"Subgroup name",organization_name:"Organization name",handle:"Handle",group_handle_placeholder:"Used in your group URL: {host}/{handle}",start_organization_heading:"New organization",edit_organization_heading:"Edit organization settings",group_name_placeholder:"What is the name of your group?",subgroup_name_placeholder:"What is the name of your subgroup?",organization_name_placeholder:"What is the name of your organization?",description:"Description",description_placeholder:"Describe the purpose of your group so your group members know why they are here.",secret_by_default:"Your group will only be accessible by those who are invited to join. You can change this later.",privacy_statement:{public_on_web:"Name, description, and attachments to the group context will be visible to the public",private_to_group:"Name and description will only be visible to members.",private_to_parent_members:"Name and description will be visible to members of {parent}"},privacy:"Privacy",group_privacy_is_open_description:"Publicly listed. All threads are public.",group_privacy_is_closed_description:"Unlisted. Anyone with the link can ask to join. All threads are private.",group_privacy_is_closed_public_threads_description:"Unlisted. Anyone with the link can ask to join. Threads can be public or private.",group_privacy_is_secret_description:"Only invited people can find the group. All threads are private.",confirm_change_to_secret:"If you proceed, all threads in this group and its subgroups will be made private.",confirm_change_to_secret_subgroup:"If you proceed, all threads will be made private.",confirm_change_to_public:"If you proceed, all threads in this group will be made public on the web.",confirm_change_to_private_discussions_only:"If you proceed, any public threads in this group will be made private.",profile:"Profile",subgroup_privacy_is_open_description:"Anyone can find this subgroup and ask to join. Only members can see who is in the group. All threads are public.",subgroup_privacy_is_closed_description:"Anyone can find this subgroup and ask to join. Only members can see who is in the group. All threads are private.",subgroup_privacy_is_closed_public_threads_description:"Anyone can find this subgroup and ask to join. Only members can see who is in the group. Threads can be public or private.",subgroup_privacy_is_closed_secret_parent_description:"Members of {parent} can find this subgroup and ask to join. All threads are private. Only members can see who is in the group.",subgroup_privacy_is_secret_description:"Only invited members can find this subgroup, see who is in it and see threads.",advanced_settings:"Advanced settings",how_do_people_join:"How do people join?",membership_granted_upon_request:"Anyone can join the group.",membership_granted_upon_approval:"Anyone can request to join but must be approved.",membership_granted_upon_invitation:"Invitation only.",membership_granted_upon_approval_secret_parent:"<strong>By request</strong>  anyone from {parent} can ask to join the group.",permissions:"Permissions",thread_privacy:"Thread privacy",public_threads:"Public threads only",public_discussions_subgroup:"Anyone in {parentGroupName} can see discussions",public_or_private_threads:"Allow public and private threads",private_threads:"Only members can see discussions",allow_public_threads:"Allow public threads in this group.",parent_members_can_see_discussions:"Members of {parent} can see private threads",parent_members_can_see_discussions_help:"Allow members of the parent group to see, but not participate in, threads and polls within this group",members_can_announce:"Members can notify everyone in the group",members_can_announce_help:"Allow members to notify everyone in the group about a thread or poll",members_can_add_members:"Members can invite members",members_can_add_members_help:"Allow members to invite people to join this group",members_can_add_guests:"Members can invite guests",members_can_add_guests_help:"Allow members to invite guests into threads or polls in this group",members_can_create_subgroups:"Members can create subgroups",members_can_create_subgroups_help:"Allow members to create and become admins of new subgroups",members_can_edit_discussions:"Members can manage threads and comments",members_can_edit_discussions_help:"Allow members to edit, move, pin, tag or close threads",members_can_edit_comments:"Members can edit their own comments",members_can_edit_comments_help:"Allow members to edit their own comments at any time",members_can_delete_comments:"Members can delete their own comments",members_can_delete_comments_help:"Allow members to delete their own comments from threads",members_can_start_discussions:"Members can start new threads",members_can_start_discussions_help:"Allow members to start new threads within the group",members_can_raise_motions:"Members can start polls",members_can_raise_motions_help:"Allow members to start polls and proposals within discussions or the group",admins_can_edit_user_content:"Admins can edit members' comments",admins_can_edit_user_content_help:"Allow admins to edit content written by members",submit_start_group:"Start group",submit_start_subgroup:"Start subgroup",submit_update:"Update settings",messages:{group_created:"Group started",group_updated:"Group updated"},upload_logo:"Upload logo",upload_cover_photo:"Upload cover photo"},group_export_modal:{title:"Export group data",body:"<p>\n  You may download a copy of your group's data at any time.\n  <a href=\"https://help.loomio.org/en/user_manual/groups/data_export/\">Find out more.</a>\n</p>\n<p>\n  It takes a few minutes to complete, depending on the size of your group.\n  When it's ready you'll receive an email with a link to download the file.\n</p>\n",submit:"Start export",flash:"Group data export started"},membership_requests_card:{heading:"Membership Requests",manage_requests:"Manage requests",manage_requests_with_count:"Manage requests (%{count})"},membership_requests_page:{heading:"Membership Requests",approve:"Approve",ignore:"Ignore",no_pending_requests:"There are currently no pending membership requests for this group.",no_previous_requests:"There are currently no previous membership requests for this group.",previous_requests:"Previous Requests",previous_request_response:"{response} by {responder} ",messages:{request_approved_success:"Membership request approved",request_ignored_success:"Membership request ignored"}},invitation_form:{group_url:"Group URL",reusable_invitation_link:"Reusable invitation link",error:"Error when trying to copy to clipboard",aria_label:"Invitation form",invite_people:"Invite people",invite_guests:"Invite guests",notify_people:"Notify people",invite_people_to_group:"Invite to {name}",group:"Group",group_placeholder:"Select a group",shareable_link:"Shareable link",share_group:"Share your group",copy_link:"Copy",email_addresses:"Email addresses",email_addresses_placeholder:"e.g. helperbot@loomio.org, friendlybot@loomio.org",secret_group_url_explanation:"This is the address for your group. Only invited members will be able to see the group.",shareable_group_url_explanation:"You can share this link publicly. People can request to join and you can approve or ignore requests.",shareable_invitation_explanation:"Do not share this link publicly. Anyone with it can join your group without your approval. Share this only within private communications to allow people in your organization to join.",shareable_link_reset:"Shareable link reset. The previous link will no longer work.",email_explanation:"Alternatively, enter email addresses below to send invitations by email.",add_custom_message:"Make your invite personal, ",add_custom_message_link:"add a custom message.",custom_message:"Custom message",custom_message_placeholder:"Enter a personal message to include with the invitation.",add_members:"Add members",from_parent_group:"from {name}.",send:"Send",done:"Done",messages:{invitation_sent:"Invitation sent.",invitations_sent:"%{count} invitations sent.",no_invitations:"Uhoh! Please verify the email address is correct and try again.",max_invitations:"If you want to send more than 100 invitations, use a team link."}},memberships_page:{members:"Members",name_label:"Name",coordinator_label:"Admin",remove_member_label:"Remove",fragment_placeholder:"Filter users by name or username...",only_one_admin:"There is only one admin in this group. It's recommended that you appoint at least one more member as an admin.",messages:{remove_member_success:"Removed {name}",make_admin_success:"{name} is now an admin",remove_admin_success:"{name} is no longer an admin"},remove_admin_from_self:{question:"Are you sure you no longer want to be an admin?"}},membership_remove_modal:{invitation:{title:"Cancel invitation",message:"Are you sure you want to cancel the invitation to {name}?",flash:"Invitation cancelled",submit:"Cancel invitation"},membership:{title:"Remove member",message:"Are you sure you want to remove {name}?",impact_for_subgroup:"This will remove their access to the subgroup (including threads and polls), but they will remain a member of the parent group.",impact_for_group:"This will remove their access to the group (including threads and polls) and any subgroups.",flash:"Member removed",submit:"Remove member"}},memberships_panel:{add_coordinator:"Make Admin",remove_coordinator:"Demote admin"},membership_form:{modal_title:{group:"Set group title"},title_helptext:{group:"This title will appear beside {name}'s name within this group. Use it to let people know their role."},title_label:"title",title_placeholder:"E.g. 'Coordinator', or 'Facilitator'",updated:"Membership title updated"},user_page:{contact_user:"Contact {name}",location_field:"Location: {value}",locale_field:"Language: {value}",online_field:"Online: {value}",invited:"Invited {value}",message_user:"Message {name}"},contact_request_form:{modal_title:"Email {name}",message_placeholder:"Introduce yourself and share why you'd like to make contact.",helptext:"{name} will be emailed your name, email address, and message",email_sent:"Email sent to {name}"},profile_page:{incomplete_profile:"Incomplete profile!",set_your_profile_picture:"Set your profile picture",messages:{updated:"Profile updated",picture_changed:"Profile picture updated",password_changed:"Password updated",deactivated:"Account deactivated"},date_time_pref_label:"Date and time format",merge_accounts:"Merge accounts",change_picture_link:"Change picture",change_password_link:"Reset password",delete_account:"Permanently Delete account",delete_user_link:"Delete account",profile:"Profile",edit_profile:"Edit Profile",picture_label:"Picture",name_label:"Name",username_label:"Username",username_helptext:"All lowercase letters and numbers, maximum 30 characters",email_label:"Email",short_bio_label:"Introduction",locale_label:"Language",short_bio_placeholder:"Please introduce yourself, include areas of expertise, topics of interest, and any affiliated organizations",locale_placeholder:"Select your preferred language",location_label:"Location",location_placeholder:"Where are you based?",update_profile:"Update profile",deactivate_account:"Deactivate user account",help_translate:"Can you help us translate Loomio?",updated_on_sign_in:"Provided by your browser and updated when you sign in"},text_editor:{x_of_y_characters:"{x} / {y} characters",select_text_to_link:"Select text to link and try again",insert_link:"Insert link",insert_embedded_url:"Embed video"},change_picture_form:{aria_label:"Profile photo form",title:"Set profile photo",helptext:'You can upload your own profile picture, or if you have a <a href="https://en.gravatar.com/support/whatisgravatar/">Gravatar</a> account, you can use that.',use_initials:"Use initials",use_gravatar:"Use Gravatar",use_uploaded:"Upload new photo",existing_upload:"Existing upload",use_provider:"Use {provider} photo"},change_password_form:{set_password_title:"Set your password",set_password_helptext:"Please enter a password - minimum 8 characters",set_password:"Set password",password_changed:"Your password has been updated"},deactivation_modal:{introduction:"When you delete your account:",you_will_be_deleted:"Your user account including your name, email address and other personally identifying data will be deleted from our systems.",name_removed:"Comments, proposals and discussions youâ€™ve made will remain but your name will be removed from them",no_longer_group_member:"You will no longer be listed as a member of any groups",no_emails:"You will no longer receive notification emails",submit_delete:"Delete my account now"},email_settings_page:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday",every_day:"Every day",every_second_day:"Every second day",never:"Off",header:"Notification settings",account_deactivated:"Your account has been deactivated. You will not receive any emails, ever.",deactivate_header:"Stop all emails forever",deactivate_description:"If you never want to get another email from us ever again, you can deactivate your user account.",email_newsletter:"Loomio Newsletter",email_newsletter_description:"Get updates about new features, training, events in your city and the future of Loomio. Usually 2 or 3 emails per year.",email_catch_up_day:"Catch-up summary email",daily_summary_description:"Choose when to receive the catch-up summary email. This email contains any new activity that you have not seen. A good way to stay up-to-date if you're not a regular user.\n",on_participation_label:"Subscribe on participation",on_participation_description:"When you participate in a thread, all further activity will be emailed to you immediately.",announcement_label:"Announcements",announcement_description:"You will receive an email about all content that has been announced by people in your groups",mentioned_label:"Mentions & Replies",mentioned_description:"When someone @mentions you in a comment or replies to you, you'll get a notification email",update_settings:"Save changes",specific_groups:"Settings for specific groups",default_settings:{loud_description:"When you join a new group, you will be emailed <strong>whenever there is activity</strong>.",normal_description:"When you join a new group, you will be emailed about <strong>new threads and proposals</strong>.",quiet_description:"When you join a new group, you <strong>won't be emailed about activity</strong>."},edit:"Edit",messages:{updated:"Email settings updated"},learn_more:"Learn more about email settings..."},thread_preview:{replies_count:"%{count} replies",unread_count:"%{count} unread"},dashboard_page:{aria_label:"Dashboard",polls_to_vote_on:"Polls to vote on",no_polls_to_vote_on:"There are no polls you need to vote on",recent_polls:"Recent polls",current_polls:"Current polls",recent_threads:"Recent threads",no_groups:{show_all:'Welcome! You are not a member of any groups yet. <a href="/explore">Browse public groups</a> or <a href="/g/new">Start a group</a>.',show_muted:"You don't have any muted threads because you are not a member of any groups."},no_threads:{show_all:"You don't have any recent threads.",show_proposals:"There are no proposals currently active.",show_muted:"You don't have any muted threads."},view_recent:"View all recent threads?",load_more:"Load more threads",mark_as_read:"Mark as read",dismiss:"Dismiss",thread_dismissed:"Thread marked as read",thread_recalled:"Thread recalled",explain_mute:{title:"You haven't muted any threads yet.",explanation_html:"Muting is a way to hide or silence threads you're not interested in.\nMuting means you won't see it in <strong>Recent</strong> or <strong>Unread</strong>, and you won't be notified about activity in that thread, like proposals.\nYou'll only be alerted if someone <strong>@mentions</strong> your name.\n",instructions:"To mute a thread, hover over it and click the mute icon.",see_muted_html:'To see your muted threads, click <strong>"Muted"</strong>. You can unmute by hovering and clicking the same icon.'},filtering:{filter_threads:"Filter Threads",filter_threads_aria_label:"Filter Threads",dropdown_heading:"Filter dashboard",all:"Recent Threads",all_aria_label:"Currently showing recent threads",all_description:"View recent threads",proposals:"Proposals",proposals_aria_label:"Currently showing threads with active proposals",proposals_description:"View only threads with active proposals",muted:"Muted Threads",muted_aria_label:"Current showing muted threads",muted_description:"View only threads which have been muted"},thread_preview:{you_voted:"You voted {position}",undecided:"You are undecided"},threads_from:{group:"Threads from",pinned:"Pinned threads",proposals:"Threads with active decisions",starred:"Starred threads",today:"Today",yesterday:"Yesterday",thisweek:"This week",thismonth:"This month",older:"Older than a month"}},threads_page:{no_direct_threads:"You have no direct threads",no_invite_only_threads:"You have no invite-only threads"},inbox_page:{no_threads:"Woohoo! You've read all the threads in your inbox.",unread_threads:"Unread Threads",view_more:"View More",no_groups:{explanation:"You have no unread threads because you are not a member of any groups.",start:"Start",or:"or",join_group:'<a href="/explore">join</a> a group to see threads.'}},discussion:{invite_only:"Invite-only",private_thread:"Private thread",max_threads_reached:'<p>You have used all {maxThreads} threads available to this group.</p>\n<p>Next step, <a href="{upgradeUrl}" target="_blank">choose a plan</a> to continue collaborating on Loomio.</p>\n',subscription_canceled:'<p>Your subscription is not active.</p>\n<p>Please <a href="{upgradeUrl}" target="_blank">upgrade</a> to continue using Loomio.</p>\n',activity:"Activity",activity_placeholder:"No activity yet!",load_previous:"Load earlier activity",started_by:"Started by <strong>{name}</strong>",pin:{pinned:"Thread pinned",unpinned:"Thread unpinned"},volume:{mute_message:"Thread muted",unmute_message:"Thread unmuted"},closed:{reopened:"Thread reopened",closed:"Thread closed"}},discussion_last_seen_by:{title:"Seen by",no_one:"No one has seen this yet"},activity_card:{count_responses:"%{count} responses",event_pinned:"Pinned to timeline",event_unpinned:"Unpinned from timeline",beginning:"Beginning",end:"End",unread:"Unread (%{count})",latest:"Latest",context:"Context",chronological:"Chronological",nested:"Nested",attachment_display:{aria_label:"File attached:",image_alt:"Attached image"},n_previous:"Load %{count} previous responses",n_more:"Load %{count} responses",add_comment:"Add comment",add_poll:"Add poll",add_outcome:"Add outcome",comment:"Comment",facilitate:"Facilitate",start_decision:"Start decision",start_vote:"Start vote"},thread_group:{aria_label:"Group name"},thread_context:{current_poll_type_banner:"Current {pollType}",item_maybe_deleted:"Cannot find the requested location within the thread. It may have been deleted.",aria_label:"Thread context",thread_options:"Thread options",email_settings:"Notification settings",edit:"Edit",edit_thread:"Edit",close_thread:"Close",reopen_thread:"Reopen",pin_thread:"Pin",unpin_thread:"Unpin",mute_thread:"Mute",move_thread:"Move",print_thread:"Print",delete_thread:"Delete",add_comment:"Comment",seen_by_count:"Seen by %{count}",count_notified:"Notified %{count}",forked_from:"Forked from"},pin_thread_modal:{title:"Pin thread",helptext:"Pinned threads always appear at the top of their group's list of threads. They can be used to inform members of important announcements, or to promote common material like a code of conduct or community guidelines.",helptext_two:"You may remove pins at any time by selecting 'Unpin' from the thread dropdown",pin_thread:"Pin thread"},thread_arrangement_form:{edit:"Edit layout",title:"Thread layout",for_everyone:"This changes the layout for everyone, not just you.",sorting:"Oldest or Newest first?",latest:"Newest",latest_description:"Read the newest items first",earliest:"Oldest",earliest_description:"Catch up on older comments before seeing newer ones",replies:"How to display replies?",linear:"Flat list",linear_description:"Items listed as they happened, one after the other.",nested_once:"Nest replies - first reply only",nested_once_description:"Indent replies under original comment",nested_twice:"Two levels of nested replies",nested_twice_description:"Indent replies at most two times.",changing_nesting_is_slow:"Changes to nesting can take a couple of minutes to process."},delete_thread_form:{aria_label:"Delete thread",title:"Delete thread",body:"Are you sure you want to delete this thread?",confirm:"Delete thread",messages:{success:"Thread deleted"}},move_thread_form:{aria_label:"Move thread",title:"Move thread",body:"Destination group",confirm:"Move thread",confirm_change_to_private_thread:"{groupName} is an open group. If you proceed, this thread will be made public.",messages:{success:"Thread has been moved to {name}"}},delete_comment_dialog:{title:"Delete comment",question:"This will permanently delete this comment. If you proceed, it cannot be restored."},contact_message_form:{alt_title:"Contact Loomio Support",title:"Hi there! How can we help?",this_is_for:"This is a great place for sales, training or subscription enquiries, or to ask for support using Loomio.",read_the_manual:'Did you know our <a href="{link}" target="_blank">Help Manual</a> contains FAQs as well as detailed guides to facilitating discussions and decisions on Loomio?\n',contact_us_email:'You can also email us: <a href="mailto:{email}">{email}</a>',contact_us:"Contact Us",name_label:"Your name",name_placeholder:"Enter your name...",subject_label:"Subject",subject_placeholder:"Eg: Trouble signing in, or Feature suggestion\n",email_label:"Your email address",email_placeholder:"Enter your email address...",message_label:"Your message",message_placeholder:"If requesting support please try to provide as much information as you can.",send_message:"Send Message",new_contact_message:"Thanks for getting in touch; we'll get back to you soon!",consent_message:"By contacting us you consent to our staff accessing your account as necessary. <br />\nOur support team speak English and will translate your message with Google Translate if required. <br />\nWe aim to respond to all messages within 24 hours.\n",success:"Thanks for your message, {name}. You'll hear back from us soon.",success_via_email:"Thanks for your message, {name}. We'll respond via email within 24 hours."},explore_page:{header:"Explore groups",search_placeholder:"Search for public groups",single_search_result:"1 public group matching <strong>{searchTerm}:</strong>",multiple_search_results:"{resultCount} public groups matching <strong>{searchTerm}:</strong>",no_results_found:"<strong>Can't find the group you're looking for?</strong> If a group's privacy is set to 'secret', it won't appear here.",newest_first:"Newest first",biggest_first:"Biggest first",order_by:"Order groups by"},global:{messages:{app_update:"A new version of Loomio has been released. Please save your work and reload.",reload:"Reload"}},decision_tools_card:{choose_type:"Choose poll type",title:"Facilitate",question_title:"Question round",advice_title:"Advice",consent_title:"Consent",consensus_title:"Consensus",proposal_title:"Proposal",count_title:"Opt-in",check_title:"Sense check",poll_title:"Poll",meeting:"Meeting",score_title:"Score poll",dot_vote_title:"Dot vote",meeting_title:"Time poll",ranked_choice_title:"Ranked choice",gradients_of_agreement_title:"Gradients of agreement"},poll_option_form:{edit_option:"Edit option",option_name:"Option name",option_name_hint:"A short name for this option",icon:"Icon",meaning:"Meaning",meaning_hint:"A sentence that explains what choosing this option means",prompt:"Reason prompt",prompt_hint:"A question to prompt voters to provide their reasoning or reconsider their position."},poll_common:{superseded:"Superseded",need_help_with_templates:"Need help creating your own process templates?",new_templates_are_here:"Loomio has new proposal templates to help with decision-making.",categorize_poll_templates:"Categorize poll templates",show_all_templates_in_one_list:"Show all templates in one list",advice_process:"Advice process",consent_process:"Consent process",consensus_process:"Consensus process",question_round:"Question round",edit_template:"Edit template",proposal:"Proposal",run_process:"Run process",proposal_templates:"Proposal templates",custom:"Custom",custom_process:"Custom process",custom_poll:"Custom poll",delete_poll:"Delete poll",select_count_options:"Select {count} options",select_minimum_to_maximum_options:"Select {minimum} to {maximum} options",custom_poll_types:"Custom poll types",example_polls_from_thread_template:"Examples from thread template",hidden_poll_templates:"Hidden poll templates",poll_template:"Poll template",poll_template_saved:"Poll template saved",poll_templates:"Poll templates",poll_types:"Poll types",new_proposal_template:"New proposal template",edit_proposal_template:"Edit proposal template",new_poll_template:"New poll template",edit_poll_template:"Edit poll template",new_poll_type:"New poll type",edit_poll_type:"Edit poll type",new_custom_poll:"New custom poll",edit_custom_poll:"Edit custom poll",create_a_custom_poll_type:"Create a new poll type with custom terminology and settings",create_a_custom_process:"Create a new process with your own terminology and options",create_a_custom_poll:"Create a poll with custom terminology and settings",decision:"Decision",decision_templates:"Decision templates",remove_your_vote:"Remove your vote",remove_your_response:"Remove your response",vote_now:"Vote now",review_due:"Review due",have_your_say:"Have your say",your_response:"Your response",change_your_response:"Edit response",please_vote:"Please vote",reason:"Reason",response:"Response",reason_placeholder:"Briefly explain why you voted this way, then click 'Submit Vote'",message:"Message",results:"Results",current_results:"Current results",responses:"Responses",close_poll_type:"Close {pollType}",close_early:"Close early",totals:"Totals",participate:"Participate",vote:"Vote",votes:"Votes",update_outcome:"Update outcome",outcome:"Outcome",statement:"Statement",change_your_stance:"Edit response",load_more:"Load more",details:"Details",participant_name:"Your name",participant_email:"Email address",submit_vote:"Submit vote",submit_response:"Submit response",update_vote:"Update vote",update_response:"Update response",share_poll:"Share poll",share_proposal:"Share proposal",share_count:"Share check",start_poll:"Start a decision",publish_poll:"Share poll",share_outcome:"Share outcome",view_all:"View all",save_changes:"Save",change_vote:"Change your vote",change_response:"Change your response",max_score:"Maximum score",min_score:"Minimum score",too_long:"Too long",edit_warning:"Editing is only recommended for minor changes or fixing spelling errors. For significant changes, close this {pollType} and start a new one.",no_voting:"For discussion only, voting disabled"},poll_common_attachment_form:{label:"Attachments"},poll_common_add_option:{button:{add_option:"Add another option"},modal:{title:"Add an option"},form:{add_options:"Add options",options_added:"New options added"}},poll_common_card:{show_results:"Show results",hide_results:"Hide results",until_vote:"Until vote is cast",until_you_vote:"Until you vote",until_poll_type_closed:"Until {pollType} is closed",until_voting_is_closed:"Until voting is closed",deleted:"This poll has been deleted"},discussions_panel:{open:"Open",all:"All",unread:"Unread (%{count})",closed:"Closed",include_subgroups_mine:"{name} and my subgroups",include_subgroups_all:"{name} and all subgroups",no_results_found:'No results for "{search}"'},members_panel:{no_results:"No members found",everyone:"Everyone",sort:"Sort",order_label:"Order",order_by_name:"Name",order_by_created:"Oldest",show_users_in_subgroups:"Show users in subgroups as well",order_by_created_desc:"Newest",order_by_admin_desc:"Admins",loaded_of_total:"{loaded} of {total}",view_requests:"View requests",header_name:"Name",header_username:"Username",header_role:"Role",header_invited_by:"Invited by",header_invited:"Invited",header_actions:"Actions",directory:"Directory",invitations:"Invitations",requests:"Requests",admin:"Admin",guest:"Guest",sharable_link:"Shareable Link",last_seen:"Last seen {date}",invited_by_name:"Invited by {name}",accepted:"Members"},polls_panel:{new_poll:"New poll",any_type:"All types",any_status:"Any status",all:"All",open:"Open",closed:"Closed",need_vote:"Need Vote",no_polls:"No polls found"},group_files_panel:{no_files:"No files found",filename:"Filename",uploaded_by:"Uploaded by",uploaded_at:"Uploaded at",delete_confirmation:"Are you sure you want to delete this attachment? It will be removed from any associated comment or thread. This cannot be undone.\n"},subgroups_panel:{search_subgroups_of_name:"Search subgroups of {name}",group_without_subgroups:"{name} without subgroups"},poll_common_action_panel:{from_the_thread:"From the thread template",from_the_group:"From the group",default_templates:"Default templates",default_template:"Default template",custom_template:"Custom template",default_poll_types:"Default poll types",suggested_templates:"Suggested templates",group_templates:"Group templates",basic_templates:"Basic templates",anonymous:"Votes are anonymous",results_hidden_until_closed:"Results will be shown after voting has closed",results_hidden_until_vote:"Results will be shown after you vote",unable_to_vote:"You have not been invited to vote in this %{poll_type}.",draft_mode:"Voting disabled. This is not open for voting yet.",voting_disabled_poll_is_template:"Voting disabled. This is a template."},poll_common_collapsed:{by_who:"by {name}"},poll_common_calendar_invite:{calendar_invite:"Include a calendar invitation with this outcome",poll_option_id:"Meeting time",helptext_on:"Users will be able to add this meeting to their calendar",helptext_off:"No meeting invite will be sent",event_duration:"Duration",event_summary:"Meeting name",event_summary_placeholder:"What would you like to call this meeting?",event_description:"Meeting description",event_description_placeholder:"What is the agenda for this meeting?",location:"Location",location_placeholder:"Where will this meeting take place?"},poll_common_settings:{who_can_vote:"Who can vote?",short_reason_can_be_helpful:"Keeping vote reasons short makes them easier to understand. A collection of concise reasons is a great resource for making a decision.",specified_voters_only_true:"Invited people only",specified_voters_only_false_group:"Anyone in the group",specified_voters_only_false_discussion:"Anyone in the thread",invite_people_next:"You can choose who is invited to vote after you start the {poll_type}",shuffle_options:{shuffle_options:"Shuffle options",title:"Show options in random order",helptext:"An option being first on the list can give it a bias. Use this setting to counter that effect."},multiple_choice:{title:"Multiple choice",helptext_on:"When selected, participants will be able to select multiple options."},anyone_can_participate:{title:"Anyone with link can participate",helptext_on:"When selected, anyone with the link to the poll can participate."},notify_on_closing_soon:{voting_closes_too_soon:"Because voting closes within 24 hours, no closing soon reminders will be sent.",closes_too_soon:"Because this {pollType} closes within 24 hours, no closing soon reminders will be sent.",title:"24 hours before {pollType} closes, send a reminder to",voting_title:"24 hours before voting closes, send a reminder to",nobody:"Nobody",author:"Author (me)",undecided_voters:"Undecided voters",voters:"All voters"},notify_on_participate:{title:"Notify me when people participate",helptext_on:"When selected, you will be notified whenever someone participates."},anonymous:{title:"Anonymous voters",helptext_on:"When selected, participant info will not be shown with each response."},voter_can_add_options:{title:"Voters can add alternative options"},can_respond_maybe:{title:'Voters can respond "if need be"'},allow_long_reason:{title:"Allow vote 'reason' to be longer than 500 characters"},hide_results_until_closed:{title:"Hide results until closed",helptext_on:"Don't show the how people have voted until the poll is closed"}},poll_common_close_form:{title:"Close %{poll_type} now?",helptext:"Are you sure you want to close this %{poll_type} early and share an outcome?",close_poll_type:"Close %{poll_type}",poll_type_closed:"%{poll_type} closed"},poll_common_reopen_form:{title:"Reopen {poll_type}",helptext:"Reopen the {poll_type} if people need more time to participate",success:"{poll_type} reopened"},poll_common_move_form:{title:"Move {poll_type}",success:"{poll_type} moved to {group}"},poll_common_wip_field:{voting_enabled:"Voting enabled",enable_voting:"Enable voting",title:"Disable voting",past_tense:"Voting disabled",draft_mode:"Draft mode",disable_voting_during_development:"This %{poll_type} is not ready to be voted on",helptext:"This %{poll_type} is a work in progress. You can enable voting later.",voting_open:"Voting open",this_is_ready_for_voting:"this %{poll_type} is ready for voting"},poll_common_closing_at_field:{closing:"Closing",no_closing_date:"No closing date",closing_date:"Closing date",closing_hour:"Closing time",invalid_date:"Invalid date"},poll_card:{poll_type_by_name:"%{poll_type} by %{name}",started_by:"Started by {name}"},poll_common_votes_panel:{undecided:"Undecided",newest_first:"Newest first",oldest_first:"Oldest first",priority_first:"Agree first",priority_last:"Block first",undecided_first:"Undecided first",no_votes_yet:"No votes have been placed yet.",change_results_order:"Change results order",none_of_the_above:"(None of the above)"},poll_common_undecided_panel:{show_undecided:"Show %{count} undecided",show_invitations:"Show Pending Invitations",undecided_users:"Undecided (%{count})",invitation_count_singular:"1 additional person has been invited to participate via email",invitation_count_plural:"%{count} additional people have been invited to participate via email"},poll_common_undecided_user:{reminded:"Reminder sent!",reminder_sent:"Reminder notification sent"},poll_common_set_outcome_panel:{enter_outcome:"Enter outcome",poll_type:"This %{poll_type} has closed. Take time to consider the results then share an outcome so people know what will happen next."},poll_common_outcome_form:{review_date:"Review date",review_date_hint:"Set a date to review the decision (optional)",who_to_notify:"Who do you want to notify about this outcome? (optional)",new_title:"State outcome",update_title:"Update outcome",outcome_created:"Outcome created",outcome_updated:"Outcome updated",statement_placeholder:"Summarise the responses and explain what will happen next.",you_will_be_notified:"You will be notified on the review date.",submit:"Share outcome"},poll_common_outcome_panel:{authored_by:"By {name}"},poll_common_delete_modal:{question:"Are you sure you want to delete this?",title:"Delete {pollType}",success:"Successfully deleted"},poll_common_form:{option_has_votes_confirm_delete:"Some people have voted for this option, are you sure you want to delete it?",example_title:"Example title",example_title_hint:"Give an example of a good proposal title",example_details_placeholder:"Provide a starting point for a proposal or poll. Questions can be useful prompts to get people writing. Include any rules or reminders that participants will need to know.",confirm_delete:"Are you sure you want to delete this poll template? This cannot be undone.",show_advanced_settings:"Show advanced settings",hide_advanced_settings:"Hide advanced settings",choose_at_least:"Choose at least",choose_at_most:"Choose at most",please_review_the_form:"Please review the form",option_added_please_add_details:"Option added! Please add some details so people know what it means.",default_duration_in_days:"Default duration in days",default_duration_in_days_hint:"How many days should be given for people to vote?",how_many_options_can_a_voter_choose:"How many of these options may a voter choose?",minimum_choices:"Minimum choices",maximum_choices:"Maximum choices",content:"Content",reminder:"Reminder",your_in_zone:"Current time zone: %{zone}",show_other_zones:"Show other time zones",hide_other_zones:"Hide other time zones",this_is_a_template_for_new_polls:"This is a template for new polls",voting_method:"Voting method",voting_methods:{question:"Question round",question_hint:"Invite questions and comments on your proposal",show_thumbs:"Show of thumbs",show_thumbs_hint:"Voters choose thumb up, down, sideways, or hand up",choose:"Choose",simple_poll:"Simple poll",choose_hint:"Voters choose the best option (or options)",score:"Score",score_hint:"Voters assign a score to each option",allocate:"Allocate",allocate_hint:"Voters allocate a budget of points between the options",ranked_choice:"Ranked choice",ranked_choice_hint:"Voters arrange options in order from most to least preferred",time_poll:"Time poll",time_poll_hint:"Voters indicate when they are available to meet"},process:"Process",process_name:"Template title",process_name_hint:"What do you call this template? E.g. Role advice, Temperature check, Minutes approval",process_subtitle:"Template subtitle",process_subtitle_hint:"A one-line description of when or why to use this template",process_introduction:"Template help",process_introduction_hint:"A few paragraphs that explain how to use the template. Include links to resources that might be helpful.",you_can_set_a_prompt_per_option:"Edit the prompt for each option from the details tab",chart_type:"Chart type",title:"Title",title_hint:"What is the decision you need to make?",no_options_add_some:"This poll has no options, add some below.",details:"Details",example_details:"Example details",details_placeholder:"This is your opportunity to explain what people are voting on",options:"Options",options_placeholder:"List the options available",no_options:"You haven't added any options yet.",closing:"Closing",closed:"Closed",start:"Start",start_poll:"Start poll",stance_reason_required_label:"Providing a reason when voting is ...",stance_reason_required:"Required",stance_reason_optional:"Optional",stance_reason_disabled:"Disabled",stance_reason_is_required:"Please provide a reason with your vote",limit_reason_length:"Limit reason to maximum 500 characters",save_poll:"Save poll",start_poll_type:"Start {poll_type}",share_poll_type:"Share {poll_type}",who_may_vote:"Who may vote in this {poll_type}?",update:"Update",add_voters:"Add voters",notify_invitees:"Send notifications",no_notifications_warning:"Voters will not be notified. This is useful if you're running a lot of polls and plan to notify everyone later on.",count_voters_added:"%{count} voters added",poll_type_created:"%{poll_type} created",poll_type_started:"%{poll_type} started",reason_prompt:"Reason prompt",anonymous_voting:"Anonymous voting",anonymous_voting_description:"If enabled, the identity of voters will not be associated to their votes. This cannot be undone.",votes_are_anonymous:"Votes are anonymous",vote_reason:"Vote reason",vote_reason_description:"It can be helpful to understand why people voted the way they did. With this setting, you can prompt people to share their thoughts when they vote.",hide_results_description:"If you want people to vote without knowing how others have voted, you can hide the results of the poll.",process_helptext:"Name and describe the process that is being used to run this poll.\n",reminder_helptext:"Send a 'Closing soon' notification before the poll closes.\nThis can be an opportunity for people to see how others have voted and reconsider their own vote, or just a way to increase participation in the poll. \n"},poll_proposal_form:{start_header:"Start proposal",edit_header:"Edit proposal",title_placeholder:"E.g. Let's go to the moon!",details_placeholder:"What are the details of your proposal?",proposal_created:"Proposal started",proposal_updated:"Proposal updated"},poll_poll_form:{multiple_choice_subtitle:"A simple way to assess the popularity of options",start_header:"Start poll",edit_header:"Edit poll",tip:"Offer a choice between options",title_placeholder:"E.g. Where do you want to go on holiday?",details_placeholder:"Provide any clarifying details people might need to answer the question.",add_option_placeholder:"Add option",new_option:"New option",add_option_hint:"Enter a short name for the option",remove_option:"Remove option",poll_created:"Poll created",poll_updated:"Poll updated",option_added:"Option added",option_already_added:"Option already added to poll"},poll_dot_vote_form:{dots_per_person:"Points per person",dots_per_person_helptext:"The total number of points each person is asked to allocate."},poll_meeting_form:{timeslots:"Time slots",no_options:"Enter times in your current time zone ({zone}). Participants see times translated to their local time zone.",meeting_duration:"Meeting duration",add_option_placeholder:"Add new time",time_slot_added:"Time slot added",time_slot_already_added:"Time slot already added",participants_see_local_times:"Pariticpants will see times localized to their time zone",use_24_hour_format:"Error! Use 24 hour format e.g. %{time}"},poll_ranked_choice_form:{no_options:"You haven't added any options yet.",add_option_placeholder:"Enter a new choice",minimum_stance_choices:"Options to rank",minimum_stance_choices_helptext:"How many choices does the voter get?",minimum_stance_choices_hint:"i.e. Rank your top 3 flavours of ice cream",ranked_choice_created:"Ranked choice created",ranked_choice_updated:"Ranked choice updated",rank:"Rank",points:"Points",average:"Average",mean:"Mean",pct_of_points:"% of points",pct_of_voters:"% of voters",percent:"Percent"},poll_meeting_time_field:{add_time_slot:"Add time slot",new_time_slot:"New time slot",closing_hour:"Closing hour"},poll_proposal_vote_form:{default_reason_placeholder:"Please explain your reasoning",abstain_reason_placeholder:"Let people know why youâ€™re opting out of this decision",agree_reason_placeholder:"What do you like about the proposal and how will it benefit the group?",disagree_reason_placeholder:"How could this proposal be improved so that you can support it?",block_reason_placeholder:"Explain your objection to this proposal and why it should not go ahead",stance_created:"Vote created",stance_updated:"Vote updated",vote:"Vote"},poll_proposal_options:{select_an_option:"Select an option",yes:"Yes",no:"No",agree:"Agree",consent:"Consent",abstain:"Abstain",unsure:"Unsure",disagree:"Disagree",objection:"Objection",object:"Object",block:"Block",no_voting:"No voting"},poll_count_form:{pct_of_target:"% of target",agree_target_helptext:"What is the target number of volunteers you'd like to have?",agree_target_label:"Target number"},poll_count_options:{accept:"Accept",decline:"Decline",yes:"Yes",no:"No"},poll_common_percent_voted:{sentence:"{numerator} of {denominator} people have participated ({percent}%)",target_progress:"{percent}% of target reached. ({num} / {target})"},poll_meeting_chart_panel:{total:"Total"},poll_remove_vote:{title:"Remove your vote?",helptext:"Are you sure you want to remove your vote? You will be listed as undecided and can vote again later if you wish.",confirm:"Remove vote",success:"Vote removed"},poll_poll_vote_form:{stance_created:"Vote created",stance_updated:"Vote updated"},poll_score_vote_form:{stance_created:"Vote created",stance_updated:"Vote updated"},poll_meeting_vote_form:{local_time_zone:"Local time - {zone}",can_attend:"Can attend",unable:"Unable",if_need_be:"If need be",your_response:"When can you attend?",stance_created:"Availability saved",stance_updated:"Availability updated",reason_placeholder:"Explain when you're free (or busy), in case the author wants to add options."},poll_dot_vote_vote_form:{dots_remaining:"%{count} dots remaining",too_many_dots:"You have used too many dots",stance_created:"Vote created",stance_updated:"Vote updated"},poll_ranked_choice_vote_form:{helptext:"Drag and drop options in order of preference (1 being your most preferred option). Your top %{count} choices will be recorded.",stance_created:"Choice recorded",stance_updated:"Choice updated"},poll_templates:{proposal:{process_subtitle:"Raise a proposal to make a decision",process_introduction:'<p>The classic Loomio proposal helps you make a decision, converting a discussion into a clear outcome.</p><p>Suggest a course of action and invite people to respond by voting agree, abstain or disagree.</p><p>As people vote, they can give a reason why they have voted this way. You can see where everyone else stands on the matter, and why.</p><p>In this way you can use a proposal to prompt people for a response, uncover new information, and build shared understanding - to help your group make a better, more informed decision.</p><p>A proposal and associated discussion creates its own record of how the decision came about.</p><p><a target="_blank" href="https://help.loomio.com/en/user_manual/polls/decisions/index.html"><u>Read more about using the classic Loomio proposal in the Simple decision process</u></a>.</p>',title:"Approve the new Brand concept",details:'<h3 id="what-is-the-decision-you-need-to-make"><strong>What is the decision you need to make?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-people-to-do"><strong>What are you asking people to do?</strong></h3><p></p> <p>For this proposal to pass, we need the majority of members to vote Agree.</p><p>If you Disagree, say why and what needs to change for you to Agree.</p>',agree:"Agree",agree_meaning:"I support the proposal",agree_prompt:"What do you like about the proposal and how will it benefit the group?",abstain:"Abstain",abstain_meaning:"Choosing not to, or unable to vote in this decision.",abstain_prompt:"Why are you abstaining, or do not feel able to vote in this decision?",disagree:"Disagree",disagree_meaning:"Something in this proposal needs to be changed before I can support it.",disagree_prompt:"How could this proposal be improved so that you can support it?"},advice:{process_subtitle:"Seek advice on a decision you need to make",process_introduction:'<p>Seek advice on a decision you need to make, with the advice of people impacted or who have expertise, so you can make a better decision for your organization.</p><ul><li><p>Advice helps you make a better decision for your organization.</p></li><li><p>Foster relationships, learning opportunities and diverse input.&nbsp;&nbsp;</p></li><li><p>Stimulate initiative and creativity, and more enjoyable work.</p></li></ul><p><a target="_blank" href="https://help.loomio.com/en/guides/advice_process/index.html"><u>Read more about the Advice process</u></a>.</p>',title:"Help Takashi buy a new computer",details:'<h3 id="what-is-the-decision-you-need-to-make"><strong>What is the decision you need to make?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-advice-are-you-asking-from-people-to-help-you-make-a-go"><strong>What advice are you asking from people to help you make a good decision?</strong></h3><p></p><p>I am seeking your input to help me make a good decision for our organization.</p>',agree:"Agree",agree_meaning:"I have offered my advice about this decision",agree_prompt:"Summarize your advice or make a helpful comment",abstain:"Abstain",abstain_meaning:"I don't have any advice to offer",abstain_prompt:"Do you have any comments that may be helpful?"},consent:{process_subtitle:"Make a decision that is â€˜safe to tryâ€™, without objections",process_introduction:'<p>Seek consent on a decision you need to make, where there are no meaningful objections to your proposal, so you can make a fast decision for your organization that is \'safe to try\'.</p><ul><li><p>Aim for a â€˜good enoughâ€™ decision</p></li><li><p>Involve many voices to develop a workable proposal</p></li><li><p>Ask if anyone has a valid objection</p></li><li><p>Amend the proposal to resolve objections</p></li></ul> <p><a target="_blank" href="https://help.loomio.com/en/guides/consent_process/index.html">Read more about the Consent process</a>.</p>',title:"Hire Chloe for design role",details:'<h3 id="what-is-the-decision-you-need-to-make"><strong>What is the decision you need to make?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-of-people-in-this-proposal"><strong>What are you asking of people in this proposal?</strong></h3><p></p><p>If you have an Objection, please say why and propose a change to the proposal that makes it safe.</p><p>Remember we are seeking consent for a â€˜good enoughâ€™ decision that is \'safe to try\', so we can make a good decision for our organization.</p>',consent:"Consent",consent_meaning:"The proposal is safe to try",consent_prompt:"What do you like about the proposal and how will it benefit the organization?",objection:"Objection",objection_meaning:"I have a valid objection and think the proposal will cause harm",objection_prompt:"What change to this proposal is needed to make it 'safe to try', so that you can support it?"},consensus:{process_subtitle:"Reach collective agreement with everyone involved",process_introduction:'<p>Build consensus for a decision you need to make, to reach an agreement that satisfies the needs and concerns of all participants.</p><ul><li><p>Discuss and develop a proposal together</p></li><li><p>Include and respect everyone involved</p></li><li><p>Seek agreement from most people&nbsp;</p></li></ul><p><a target="_blank" href="https://help.loomio.com/en/guides/consensus_process/index.html">Read more about the Consensus process</a>.</p>',title:"Approve the new Brand concept",details:'<h3 id="what-is-the-decision-you-need-to-make"><strong>What is the decision you need to make?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-people-to-do"><strong>What are you asking people to do?</strong></h3><p></p><p>For this proposal to pass, we need the majority of members to vote Agree. </p><p>If you Disagree, say why and what needs to change for you to Agree.</p>',agree:"Agree",agree_meaning:"I support the proposal",agree_prompt:"What do you like about the proposal and how will it benefit the organization?",abstain:"Abstain",abstain_meaning:"This decision does not affect me and I am happy with whatever the group decides",abstain_prompt:"Why are you abstaining, or do not feel able to vote in this decision?",disagree:"Disagree",disagree_meaning:"Something in this proposal needs to be changed before I can support it",disagree_prompt:"How could this proposal be improved so that you can support it?",block:"Block",block_meaning:"I block this proposal and think it should not proceed",block_prompt:"Explain your objection to this proposal and why it should not go ahead"},question_round:{process_subtitle:"Invite clarifying questions to help people understand a proposal",process_introduction:'<p>A Question round is an opportunity for people to ask clarifying questions about the proposal, so that everyone understands the proposal before they say what they think about it.</p><p>The Loomio Question round is a special proposal with no voting options. It enables participants to ask questions within a duration you set for the round.</p><p>A Question round is commonly used as a step in the Consent process.</p><p><a target="_blank" href="https://help.loomio.com/en/guides/consent_process/index.html">Read more about the Consent process</a>.</p>',title:"What questions to you have about the Health and Safety policy?",details:'<h3 id="what-are-you-proposing"><strong>What are you proposing?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-people-to-do"><strong>What are you asking people to do?</strong></h3><p></p><p>This is a question round, where you are invited to ask clarifying questions.</p> <p>What do you need to know so you understand the proposal?</p> <p>Please respond before the Question round closes.</p>',reason_prompt:"What do you need to know so you understand the proposal?"},sense_check:{process_subtitle:"Ask for feedback, questions and concerns",process_introduction:'<p>The Sense check proposal is a good way to get feedback, invite questions and uncover concerns. It helps to clarify and improve a proposal before moving to a decision.</p><p>Sense check lets people know a proposal is forming and encourages them to engage. It is an opportunity to listen to people, sense how they feel and respond appropriately - opening the potential to incorporate their contributions to make a better decision.</p> <p>Use the Sense check proposal in the Consent process to invite reactions and comments to improve the proposal, and in a Consensus process to test for consensus.</p><p><a target="_blank" rel="noopener noreferrer nofollow" href="https://help.loomio.com/en/user_manual/polls/decisions/index.html"><u>Read more about using Sense check in the Simple decision process</u></a><span>.</span></p>',title:"How do you feel about the new brand concepts?",details:'<h3 id="what-are-you-proposing"><strong>What are you proposing?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-people-to-do"><strong>What are you asking people to do?</strong></h3><p></p><p>How do you feel about the proposal?  Leave a comment or make a suggestion for improvement.</p><p>This Sense check is an opportunity for your input and contribution, to help us make a better decision.</p>',looks_good:"Looks good",looks_good_meaning:"I'm happy with where this is going",looks_good_prompt:"Do you have any comments or suggestions to make the proposal better?",abstain:"Abstain",abstain_meaning:"I donâ€™t have anything to add, nor any objection to this work.",abstain_prompt:"Abstaining implies consent with the direction of this proposal. Is there a reason you are voting to abstain?",concerned:"Concerned",concerned_meaning:"Something about this may need to change for me to consent or agree",concerned_prompt:"What is your concern and how might it be addressed?"},gradients_of_agreement:{process_subtitle:"Express support for a proposal on an 8-point scale",process_introduction:"<p>The Gradients of agreement proposal enables members of a group to express their support for a proposal in degrees on a scale, offering more ways of expressing support than in terms of â€œagreeâ€ and â€œdisagreeâ€.</p> <p>Use Gradients of agreement as a preliminary round, to test support for a proposal before moving to a formal agreement.</p><p>Gradients of agreement lets people know a proposal is forming and encourages them to engage. It is an opportunity to listen to people, sense how they feel and respond appropriately - opening the potential to incorporate their contributions to make a better decision.</p>",title:"How do you like the new statement of values?",details:'<h3 id="what-are-you-proposing"><strong>What are you proposing?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-people-to-do"><strong>What are you asking people to do?</strong></h3><p></p><p>How do you like the proposal?  Express your support on the scale below and leave a comment or suggestion for improvement.</p><p>This Gradients of agreement proposal is to test support for the proposal, and an opportunity for your input before moving to a formal agreement.</p>',whole_hearted_endorsement:"Whole-hearted Endorsement",whole_hearted_endorsement_meaning:"I really like it!",whole_hearted_endorsement_prompt:"What do you like about it?",agreement_with_minor_contention:"Agreement with minor contention",agreement_with_minor_contention_meaning:"Not perfect, but it's good enough",agreement_with_minor_contention_prompt:"What is your concern?",support_with_reservations:"Support with reservations",support_with_reservations_meaning:"I can live with it",support_with_reservations_prompt:"What are your reservations?",abstain_meaning:"This issue does not affect me",abstain_prompt:"Do you have anything you would like to add?",more_discussion_needed:"More discussion needed",more_discussion_needed_meaning:"I don't understand the issues well enough yet",more_discussion_needed_prompt:"What do you not understand?",don_t_like_but_will_support:"Don't like but will support",don_t_like_but_will_support_meaning:"It's not great but I don't want to hold up the group",don_t_like_but_will_support_prompt:"What would you like to see improved?",serious_disagreement:"Serious disagreement",serious_disagreement_meaning:"I am not on board with this - don't count on me",serious_disagreement_prompt:"What do you disagree with?",veto:"Veto",veto_meaning:"I block this proposal",veto_prompt:"Why do you block the proposal? What needs to change for you to support it?"},simple_poll:{process_subtitle:"Find the most popular option",process_introduction:'<p>Before making a decision, find which option(s) people care most about.</p><p>Simple poll helps you find the most popular option or options with single or multiple choice.</p><p>Write any details about the options in the details field, then enter the name of the option and click + to add.</p><p>Set the <strong>Minimum choices</strong> and <strong>Maximum choices</strong> a voter may choose. Leave the maximum choice as 1 for a single choice poll.</p><p>You can use the pencil icon alongside each option to add a <strong>meaning</strong> of the option, a further elaborate on the option to help people when voting.</p><p><a target="_blank"  href="https://help.loomio.com/en/user_manual/polls/proposal_types/index.html#simple-poll">Read more about Simple poll</a>.</p>',title:"Where should the focus of our strategic direction be?",details:'<h3 id="what-is-this-poll-about"><strong>What is this poll about?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-people-to-do"><strong>What are you asking people to do?</strong></h3><p></p><p>Choose the option(s) you favor.</p>'},score_poll:{process_subtitle:"Measure the degree of support for each option",process_introduction:"<p>Use Score poll when you want to survey people for their desire, preference or interest in each option.</p><p><span>Participants are asked to evaluate each option and assign a score by moving a slider along a scale.</span></p><p><span>Results are displayed graphically along with a table for each option showing total points, mean points and the number of voters.</span></p><p>Advanced Settings include 'Votes are anonymous' and 'Show options in random order' - commonly used for Score poll to reduce any voting bias.</p><p><a target=\"_blank\"  href=\"https://help.loomio.com/en/user_manual/polls/proposal_types/index.html#score-poll\">Read more about Score poll</a>.</p>",title:"Assessing how decisions are made in our organization",details:'<h3 id="what-is-this-poll-about"><strong>What is this poll about?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-people-to-do"><strong>What are you asking people to do?</strong></h3><p></p><p>Choose the option(s) you favor.</p>'},dot_vote:{process_subtitle:"Allocate a budget of points to reveal priorities",process_introduction:'<p>Dot vote is useful for groups trying to allocate a limited resource to a number of options. It goes beyond a simple poll by helping participants appreciate there is a constraint when selecting options.</p><p>Participants are each given a set number of dots. You decide how many.</p><p>They place dots next to options presented that they like. Participants can place all their dots on a single option or spread over multiple options.</p><p>As participants allocate dots, they may exceed the dot budget limit and so are encouraged to consider how they spend their dots carefully.</p><p>Options with the most dots â€œwinâ€. The results table provides additional data to help you analyse results.</p><ul><li><p>% of points</p></li><li><p>Points</p></li><li><p>Mean</p></li><li><p>Voters</p></li></ul><p><a target="_blank"  href="https://help.loomio.com/en/user_manual/polls/proposal_types/index.html#dot-vote">Read more about Dot vote</a>.</p>',title:"Choosing themes for our conference",details:'<h3 id="what-is-this-poll-about"><strong>What is this poll about?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-people-to-do"><strong>What are you asking people to do?</strong></h3><p></p><p>In this poll you have a budget of 8 dots to allocate to the options you prefer. You can place all dots on one option or spread them out.</p>'},ranked_choice:{process_subtitle:"Understand the ordered preference of options",process_introduction:"<p>Ranked choice is useful when you have a large number of options, or are holding an election.</p><p>This poll template offers a series of options for people to vote in their preferred order.</p> <p>You can set the number of choices the voter gets.</p> <p><span>Voters drag and drop options in order of preference (#1 being your most preferred option).</span></p><p><span>Advanced Settings include 'Votes are anonymous' and 'Show options in random order' - commonly used for R</span>anked choice to reduce any voting bias.</p><p>Results are showed in ranked order. The results table provides additional data to help you analyse results.</p><ul><li><p>Rank</p></li><li><p>% of points</p></li><li><p>Points</p></li><li><p>Mean</p></li></ul><p><a target=\"_blank\"  href=\"https://help.loomio.com/en/user_manual/polls/proposal_types/index.html#ranked-choice\">Read more about Ranked choice</a>.</p>",title:"Elect directors to governance board",details:'<h3 id="what-is-this-poll-about"><strong>What is this poll about?</strong></h3><p></p><h3 id="why-is-this-important"><strong>Why is this important?</strong></h3><p></p><h3 id="what-are-you-asking-people-to-do"><strong>What are you asking people to do?</strong></h3><p></p><p>Vote by ranking the options in order of your preference.  The option that ranks first in the results wins.</p>'},time_poll:{process_subtitle:"Find when people are available to meet",process_introduction:'<p><span>Save time arranging a date for your meeting or event.</span></p><p>Time poll makes it easy to see everyone\'s availability and find the best time.</p> <p>Give your Time poll a title and details. Enter a list of date and time options in your time zone.</p><p>When setting timeslots, consider people in different time zones. Participants will see times localized in their time zone.</p><p>Set a meeting duration.</p><p>When the Time poll closes, set an outcome with the best time and any instructions for the meeting.</p><p><span>Loomio will include a calendar invitation with the outcome notification email, so participants can add to their calendar.</span></p> <p><a target="_blank" href="https://help.loomio.com/en/user_manual/polls/meeting_polls/index.html#time-poll">Read more about Time poll</a>.</p>',title:"Let's find a date for our next meeting",details:"<p><strong>What is the meeting or event?</strong></p><p></p><p><strong>Why is this important?</strong></p><p></p><p><strong>What are you asking people to do?</strong></p><p></p><p><span>Mark the timeslots you are available with the green 'thumbs up' icon or leave the red 'thumbs down' in place when unavailable. </span></p><p><span>Use the 'thumbs sideways' icon to say you are available 'if need be'.</span></p>",reason_prompt:"Is there anything you can say to help the organizer find a suitable time?"},opt_in:{process_subtitle:"Find volunteers or ask for participants",process_introduction:'<p>Use Opt-in to invite people to a join a team, committee or working group, or to participate in an event.&nbsp;&nbsp;</p><p>â€˜Opt-inâ€™ has two voting options: Accept or Decline.&nbsp;</p><p>You can define a target number of people you are looking for, say 3 people to join your working group.</p> <p><a target="_blank"   href="https://help.loomio.com/en/user_manual/polls/meeting_polls/index.html#opt-in">Read more about Opt-in</a>.</p> ',title:"Working group to draft our new sustainability policy",details:"<p><strong>What is the team, working group or event you are inviting people to?</strong></p><p></p><p><strong>Why is this important?</strong></p><p></p><p><strong>What are you asking people to do?</strong></p><p></p><p>Select 'Accept' to participate!</p>",accept_meaning:"I'm willing to participate",accept_prompt:"Why are you volunteering for this?",decline_meaning:"I'm unable to participate",decline_prompt:"Is there anything you'd like to say?"}},thread_item:{removed:"Item removed",deleted_group:"Deleted group",invite_only_thread:"Invite only thread",comment_replied_to:"<a class='actor-link' href='/u/{username}'>{author}</a> in reply to <strong>{title}</strong>",discussion_title_edited:"<a class='actor-link' href='/u/{username}'>{author}</a> edited the thread title",discussion_context_edited:"<a class='actor-link' href='/u/{username}'>{author}</a> edited the thread context",discussion_privacy_edited:"<a class='actor-link' href='/u/{username}'>{author}</a> changed the thread privacy",discussion_edited:"<a class='actor-link' href='/u/{username}'>{author}</a> edited the thread",discussion_moved:"<a class='actor-link' href='/u/{username}'>{author}</a> moved the thread from <strong>{title}</strong>",discussion_closed:"<a class='actor-link' href='/u/{username}'>{author}</a> closed the thread",discussion_reopened:"<a class='actor-link' href='/u/{username}'>{author}</a> reopened the thread",discussion_forked:"<a class='actor-link' href='/u/{username}'>{author}</a> created a fork of this thread: <strong><a href='d/{key}'>{title}</a></strong>",new_comment:"<a class='actor-link' href='/u/{username}'>{author}</a>",outcome_created:"<a class='actor-link' href='/u/{username}'>{author}</a> shared an outcome",poll_reopened:"<a class='actor-link' href='/u/{username}'>{author}</a> reopened the {polltype}",poll_closed_by_user:"<a class='actor-link' href='/u/{username}'>{author}</a> closed the {polltype}",poll_created:"<a class='actor-link' href='/u/{username}'>{author}</a> started a {polltype}",poll_edited:"<a class='actor-link' href='/u/{username}'>{author}</a> edited the {polltype}",poll_option_added:"<a class='actor-link' href='/u/{username}'>{author}</a> added options to the {polltype}",poll_expired:"{polltype} closed",stance_created:"<a class='actor-link' href='/u/{username}'>{author}</a> voted on: <strong>{title}</strong>",stance_updated:"<a class='actor-link' href='/u/{username}'>{author}</a> updated their vote on: <strong>{title}</strong>",event_removed:"Removed from thread"},add_poll_to_thread_modal:{success:"Success, {pollType} added to thread!"},auth_form:{code:"000000",youre_invited:"You have been invited to join {group_name}.",youre_invited_discussion:"You have been invited to join the discussion.",youre_invited_poll:"You have been invited to vote.",existing_account_can_sign_in:"If you are already a {site_name} user, sign in with your existing account",sign_up_or_log_in:"Create account or sign in to {site_name}",sign_in_to_loomio:"Sign in to {site_name}",sign_in_help:"Trouble signing in?",sign_in:"Sign in",continue:"Continue",create_account:"Create account",sign_up_as:"Create account as {email}",sign_in_as:"Sign in as {name}",continue_with_provider:"Continue with {provider}",continue_with_email:"Continue with email",or_enter_your_email:"Or, enter your email address",enter_your_name:"Enter your name",invitation_required:"You need an invitation to create an account. Follow the link from your invitation email to continue.",more_providers:"More",email_not_present:"An email address is required",invalid_email:"Sorry, that doesn't look like a valid email address",invalid_password:"Sorry, that password doesn't match the one we have on file",invalid_token:"Sorry, we weren't able to use that token to log you in. Click below to send another one.",account_locked:"Your account has been locked after too many failed login attempts. Check your email for an unlock link",email_not_found:"Sorry, we couldn't find an account with that email address",email_taken:"Email address is already registered",email_placeholder:"you@example.com",login_with_token:"You're all set! Click the link below to continue.",login_link_helptext:"Click the button below and we'll send you a link to sign in.",enter_your_password:"Enter your password to continue",check_spam_folder:"If the email does not arrive soon, check your spam folder.",sign_up_helptext:"Please complete this form to create a user account",i_accept_all:"I accept the {termsLink} and {privacyLink}",newsletter_label:"I want to receive the {link}",name_placeholder:"Your name",name_required:"Please enter a name",terms_required:"You must agree to the Terms of Service",account_inactive:"Uh-oh, it looks like the account for {email} has been deactivated!",privacy_notice:"We will never sell your data. <br><a href='{privacyUrl}' target='_blank'>Privacy policy</a>",welcome:"New to {siteName}?",welcome_back:"Welcome back, {name}!",forgot_password:"Forgot password",login_link:"Send sign in email",sign_in_via_email:"Sign in via email",set_password:"Set password",set_password_helptext:"Want to use a password next time?",hello:"Hello, {name}!",new_to_loomio:"First time on {site_name}?",already_a_user:"Already have an account?",email_address_of_existing_account:"Enter email address of your existing account",link_accounts:"Link accounts",check_your_email:"Check your email!",login_link_sent:"We've sent an email to {email}.",instructions:"Click the link to sign in, or enter the code below:",instructions_code:"Enter the code from that email:",too_many_attempts:"Too many attempts; try clicking the link in the email to sign in.",invalid_code:"Sorry, that code didn't match. Check the email and try again.",password_link_sent:"We've sent an email to {email} with instructions on how to set your password.",reactivate_link_sent:"We've sent you an email with instructions to reactivate your account",signed_in:"Signed in successfully",email_verified:"Email verified successfully",name:"Name",email:"Email",password:"Password",reactivate:"Reactivate account"},chatbot:{configure_chatbot:"Configure chatbot",test_connection:"Test connection",test_connection_ok:"Looks good! You should see a message in the channel",test_connection_bad:"Something is wrong with the settings",name:"Chatbot name",connection_test_successful:"Loomio bot connection test successful!",chatbot:"Chatbot",chatbots:"Chatbots",saved:"Chatbot saved!",webhook_url:"Webhook URL",homeserver_url:"Homeserver URL",channel:"Channel",username:"Username",password:"Password",access_token:"Access Token",add_chatbot:"Add chatbot",matrix:"Matrix",slack:"Slack",discord:"Discord",mattermost:"Mattermost",microsoft_teams:"Microsoft Teams",event_kind_helptext:"Select events the bot will always be notified about. If you're not sure, just leave them all off.",notification_only_label:"Send notification headline only",check_for_test_message:"Check your chatroom for a message from the bot!"},webhook:{integrations:"Integrations",api_keys:"API keys",webhooks:"Webhooks",webhook:"Webhook",add_api_key:"Add API key",edit_api_key:"Edit API key",api:"API",format:"Format",formats:{markdown:"Markdown (for Mattermost, Zapier and others)",microsoft:"Microsoft Teams",slack:"Slack",discord:"Discord"},subtitle:"Connect to Loomio to the rest of your tools with our API",we_have_guides:'See our <a href="{url}" target="_blank">webhook setup guides</a> for help connecting your service.\n',add_webhook:"Add webhook",show_docs:"See API usage",save_to_show_docs:"After you save, return here to find your API key",edit_integration:"Edit integration",add_integration:"Add integration",success:"Integration added!",remove:"Remove integration",confirm_remove:"Are you sure you want to remove the integration: {name}?",removed:"Integration removed",url_label:"Webhook URL",url_placeholder:"https://hooks.example.com/...",name_label:"Name",name_placeholder:"Give this integration a name so you can identify it",event_kind_helptext:"Which events do you want the webhook to be notified of?",event_kinds:{new_discussion:"A thread is started",discussion_edited:"A thread is edited",poll_edited:"A poll is edited",new_comment:"A comment is made",poll_created:"A poll is started",stance_created:"A vote is cast",stance_updated:"A vote is changed",poll_closing_soon:"A poll is closing soon",poll_expired:"A poll expires",poll_closed_by_user:"A poll is closed manually",poll_reopened:"A poll is re-opened for voting",outcome_created:"An outcome is shared",outcome_updated:"An outcome is updated",outcome_review_due:"An outcome review is due"},permissions_explaination:"Select which actions can be performed by this integration",permissions:{show_discussion:"show discussion",create_discussion:"create discussion",create_poll:"create poll",show_poll:"show poll",read_memberships:"read memberships",manage_memberships:"manage memberships (add or remove group members)"},include_body_label:"Include message body with notification"},powered_by:{this_is_loomio_md:"Loomio is an app for making decisions together. [Try for free](https://www.loomio.com)",slogan:"Better decisions together",powered_by_loomio:"Powered by Loomio",privacy_policy:"Privacy policy",terms_of_service:"Terms of service",front_page:"Front page"},group_survey:{describe_other:"What category would you give your group?",categories:{party:"Political party",coop:"Cooperative",union:"Union",board:"Board or committee",nonprofit:"Nonprofit or NGO",professional:"Professional service company",community:"Community group",government:"Government/Local Government",other:"Other"}}}}];e.exports=t.length<=1?t[0]:t}},t={};function o(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,function(){var e=[];o.O=function(t,s,n,i){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],i=e[u][2];for(var a=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every((function(e){return o.O[e](s[l])}))?s.splice(l--,1):(a=!1,i<r&&(r=i));if(a){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,n,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};o.t=function(s,n){if(1&n&&(s=this(s)),8&n)return s;if("object"===typeof s&&s){if(4&n&&s.__esModule)return s;if(16&n&&"function"===typeof s.then)return s}var i=Object.create(null);o.r(i);var r={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&s;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){r[e]=function(){return s[e]}}));return r["default"]=function(){return s},o.d(i,r),i}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,s){return o.f[s](e,t),t}),[]))}}(),function(){o.u=function(e){return"../../blient/vue/js/"+e+"."+{389:"b19bc2e8",523:"a360423b",564:"95abc9d3",619:"1c48a074",1057:"f0b17c27",1139:"a3c69266",1144:"ab6c6a16",1395:"db6c46cb",1634:"f48f9cdf",1824:"974691cc",2527:"d8329fcd",2536:"1abc8569",2647:"b0654213",2666:"63453b64",2698:"6d2c474c",3003:"eba64cf1",3381:"2100ef45",3393:"34df2e02",3501:"cac1ebb8",3557:"167aea04",3610:"ec5d52e8",3824:"26afbf41",4128:"b0984087",5093:"38c3751c",5552:"2d0e3120",5574:"ab200bf6",5895:"1471de53",5966:"f4d3f308",5979:"3b56ed0e",6042:"a5a5f059",6222:"a4f8f776",6666:"dc52cade",6737:"c8467690",6749:"eb584a70",6890:"51b7e58e",6915:"53e2358a",7161:"8d183b03",7325:"bb36d1d9",7438:"1a05a327",7649:"b25da542",7768:"ab5d08fb",7916:"592f29c0",8440:"4d8195ba",8624:"a7e6320b",8848:"a3d6c45d",9042:"64bb44e0",9273:"1f19fb30",9430:"8aa861e6",9480:"f2d0d025",9572:"43832541",9624:"673f0fee",10063:"6757b68b",10258:"756b67d0",10556:"d9a25e45",10562:"60b99f68",10755:"bc4516bd",10798:"c3d6b2ba",11398:"d9a7ce44",12264:"c7e864b3",12324:"29acb15e",12642:"03f6385d",12674:"d0afdced",12820:"0609e1fc",12885:"344d50b1",12923:"7f7a5072",13062:"ce040af6",13238:"1848f0c1",13533:"64c72803",13537:"c5722000",13550:"c836fd19",13653:"c70b1ee7",14179:"bdb33c2c",14301:"e40b7848",14333:"38f5a29f",14396:"6abd6a76",14661:"ebd2d509",14812:"61f65415",14893:"9900f6e1",15009:"8c70ccef",15430:"a11a5ffd",15525:"32c52229",15561:"4a813c86",15919:"e77a64ea",15927:"d31bf2ec",16078:"b32713af",16274:"e5cb10fa",16309:"ff7b0561",16372:"9e5cd697",16436:"85ab9ab4",16686:"cc90b197",16687:"7aec8615",16798:"899a823e",16925:"97f3ebe0",17156:"11b27284",17308:"0be69834",17863:"a3e38f93",18092:"0e1504e4",18137:"638ef13a",18201:"d2809fd6",18336:"028e2c18",19048:"07ea0dfe",19232:"fa9d0768",19266:"13c4465d",19400:"8709f755",19758:"a3c31691",19798:"127d7e48",19962:"a2b64c17",19983:"66a8f3c2",20022:"bef8713a",20174:"5b67719e",20303:"44f84ceb",20320:"b62cbb6b",20371:"33800352",20379:"494913e8",20658:"43351a11",20941:"4629d28d",20942:"7780fa1b",21154:"ce3c4035",21185:"7650cba7",21831:"783f05e9",22041:"fe20a680",22162:"eeff7e70",22523:"b66f4772",22598:"54214e62",22623:"31039323",22709:"c3fbf299",22739:"0ca835b3",22761:"7578e6b5",22933:"64dbc413",22952:"bea28604",23003:"166e8299",23180:"089a69ad",23283:"62391fc3",23654:"a98f6d26",23903:"1304570c",24602:"f8cdc3ae",25490:"6b55223a",25494:"ce8770fd",25711:"21e7fc17",25778:"a67e3ddc",26261:"86cf8324",26466:"93199d7b",27166:"f897b22b",27177:"5b18a0c1",27211:"1350a573",27355:"52b2615f",27475:"c8be795c",27530:"479544a3",28039:"858b46d5",28113:"9487d7ba",28206:"6b99c499",28677:"6d74720d",28739:"e37d7a9d",29011:"ab2ac5de",29226:"e4f8ccf7",29479:"c417656c",29633:"9cdc4173",29750:"5da639c5",29779:"a7348f4c",29983:"43d8a2f5",30005:"9f8619f7",30221:"2f7a4afa",30299:"739aed1a",31002:"19b92612",31044:"7af723ff",31310:"192aae19",31379:"9dbfb0ce",31398:"894bf32f",31526:"3fde2352",31814:"ef6bd909",31882:"33206a4a",31914:"76296c18",31959:"c2bf1f22",31976:"9033df5a",32076:"5d9171cc",32132:"d28b195f",32181:"caeed775",32195:"5b202df1",32397:"de5aa353",32592:"23027db9",32718:"a565d7cc",33185:"efa11a48",34044:"6adb9b93",34308:"5cbf0067",34325:"b9155d65",34357:"08709eea",34833:"e99b958c",34996:"a81c40c5",35458:"3b0e0244",35920:"98f15b6e",36136:"9222aa39",36501:"10cf980c",36520:"79ccc53a",36794:"386fcd72",36945:"a0caf423",37056:"29c8f7fd",37233:"27f6172d",37281:"b5009e8f",37284:"135506c5",37650:"7eec849a",37961:"2336f8f1",38384:"088ff170",38558:"c02c1634",38684:"c31b4115",38803:"64486138",38877:"f490ce1a",38897:"52c05e95",39408:"b07d41ef",39803:"79e25532",40214:"2043f53a",40601:"c0d68810",40714:"9feed940",41062:"684300df",41146:"40ee0953",41340:"d0fb8471",41544:"f617c284",41839:"d888385a",41897:"81430ca5",42067:"ec7a2cf1",42180:"bede27e9",42958:"6a654e47",43043:"2d29ae6a",43373:"cc02b676",43434:"95937982",43852:"31e1b127",44017:"acd0be0d",44306:"e34aea18",44374:"ba3c22b5",44649:"bc3ee808",44732:"49bc8b3e",44818:"bb2d1da1",45152:"543f0eb6",45161:"30aae0b8",45195:"cc78f749",45218:"473ba3c7",45339:"485a29dd",45515:"e60657ce",45603:"53169c84",45604:"3f687092",45625:"169938bf",45853:"cc640557",45930:"3974a167",45973:"9b8b9fe2",46028:"bfe7160d",46050:"81ec0dda",46304:"f0a9e174",46341:"a38f2393",46732:"21eb374a",46815:"a0153af3",46840:"0e621b71",46945:"09b4d9b5",46946:"16b3d00c",47076:"d32b0b8e",47090:"b4d3287b",47483:"c09ad2be",48125:"f1531835",48637:"e9cc015b",48793:"a39b3b19",48867:"d769a62d",49280:"44f46e49",49324:"ac97bb79",49505:"0be386e9",49714:"3eda27f3",49810:"52887e5f",50036:"760a2530",50248:"b0173538",50363:"332b6187",50560:"1da8fa0e",50683:"627126a8",50776:"bd9ee107",50794:"b6eba6f2",50807:"dfe22403",50996:"3002441a",51140:"912b5014",51549:"6fa74ca4",51573:"c5ec03ec",51730:"dbd7cdbc",51734:"ff3e3b52",51872:"cd59e8a2",51971:"b678940a",52016:"e917804a",52071:"ba3957e7",52275:"07474a89",52358:"6a2b8fef",52400:"1d4a5029",52593:"c4426531",52646:"1efbce8a",52970:"a1113a71",53082:"686739d3",53162:"1ff71822",53336:"a89deeee",53372:"7d32842a",53463:"2bcb80fc",53494:"f05fa3c4",53561:"ea571466",53566:"1c95b087",53860:"cc28af98",54011:"dd8e5d69",54470:"d625f998",54550:"4f8cb4d8",54727:"f3b46c17",54914:"c5b34f5e",55389:"9368dc3f",55578:"3560b900",55585:"b06a119e",55827:"f1fa5e50",55965:"a6a50fba",56071:"8896364d",56105:"8d67c63e",56183:"6bf08d5d",56209:"53856a90",56224:"d22f7f84",56379:"943013f5",56443:"166c1253",56523:"1dd091ee",56635:"e1a56e63",56683:"e4661b63",56716:"feeb0db1",57238:"167d36d6",57507:"8dd83ff9",57669:"7a53fed6",57930:"daf8e006",58113:"6ce5e0e6",58170:"786279bd",58213:"e90a1a46",58628:"e3503c72",58923:"2338cacc",59074:"4c8e0e13",59137:"8e09fcc5",59555:"f13c5ba3",59606:"a536adb9",59629:"3dfc5fdf",59893:"ae7c98c4",60084:"70e1c363",60333:"999224aa",60358:"1dbede67",60509:"a28bf188",60663:"4bdfba34",61245:"7a6c6bdd",61505:"134afe7f",61622:"a88283df",61709:"dc1305f0",62185:"7376716b",62394:"b06af8e0",62624:"1cd562f8",63086:"26fe91c0",63106:"34b09fb5",63126:"34ba34e9",63618:"38fe010b",63626:"c0cd2fd2",63747:"bba05892",63963:"0e2037c1",64094:"1d5bd904",64125:"4d0d9053",64216:"0c397572",64402:"bb862a25",64778:"a82b899d",65047:"d75b4f9e",65282:"9441602f",65283:"e50094fa",65534:"698a85cb",65673:"a504aa61",66002:"7d866ea1",66075:"656e2ee1",66088:"f644aa3a",66355:"6cecf13f",66460:"2b01d0c6",66522:"8e70c5b9",66754:"757e6dde",67125:"2e13bc2b",67380:"d63adffc",67527:"6f8e313c",67580:"feacf8eb",67737:"3cf2a0bc",67835:"bd1e126c",68154:"318ba7d4",68310:"d285c7e1",68527:"de686012",68846:"e7d9bc95",69353:"328fe7e1",69682:"628777b8",69683:"2f2251d5",69866:"3cde606e",70065:"9f9323b2",70091:"2fe14e67",70218:"314500b6",70390:"54d6dbca",70405:"c3db47d6",71365:"1f5f7df4",71511:"907472b2",71636:"1ee62683",71682:"fb17ad57",71831:"c9cdc50e",72198:"2c3b1a32",72449:"7ac411f5",72495:"f4a7bd2f",72561:"33914d91",72890:"f201bb32",73003:"145b7f22",73146:"3408a019",73210:"1131f0b8",73448:"6eae881f",73691:"e0754894",73815:"15997e8f",74156:"31ca459c",74212:"23569612",74390:"5076f288",74391:"23ee273e",74403:"a4aab36e",74501:"d706535c",74639:"134e78fb",74890:"a38493bc",75101:"7828a0a1",75108:"64a384ac",75440:"b0ceb7d3",75509:"e0ea2d77",75618:"26c483a4",75736:"4b0af31c",76105:"643d741f",76119:"11d30868",76297:"769a3b02",76880:"f5098cb9",76930:"c85eaf82",77237:"1162a679",77356:"a47fdf94",77390:"8e152958",77553:"23f5ca46",77677:"3496a93c",77910:"060debf2",77973:"f89a1d4a",78076:"e7d976be",78241:"feadaea2",78259:"ef303c12",78505:"ca3e84c3",79302:"7a22beb2",79307:"dd19d07b",79329:"41d91ad3",79434:"31793e5e",79522:"3b115e5d",79557:"2dd1f41c",79675:"603a4b1f",79681:"ae9a0076",79884:"bbc73cd5",79919:"11a4915f",80385:"29e15668",80507:"087fbbd6",80528:"ad440a01",80925:"ceb6c842",81235:"9a1f47d3",81281:"0ca0f3ad",81333:"a963a0bf",81348:"4e905bcf",81590:"86c66606",81632:"dd26edf5",81884:"a896fb53",82182:"7e4aa0e5",82376:"d458262b",82513:"f484f424",82580:"6fb45eeb",82713:"9a3978b1",82714:"994c4570",82930:"beeedc03",83070:"4aa92661",83101:"6daf9b90",83148:"35e0f3c5",83233:"33ec78cf",83296:"461bbffe",83350:"637ee583",83419:"edc19752",83573:"7c2398c7",83996:"dca16441",84048:"60076082",84165:"dd75cb07",84231:"32949f8e",84511:"13c699e3",84817:"1e682364",84905:"d059ec6e",85071:"cacf8c56",85370:"da451920",85454:"79295d02",85459:"d06d033f",85598:"73c0eb8e",86354:"6c5abbb6",87201:"b9fd635c",87335:"799cfc19",87414:"d1ca0abd",87563:"dc58555a",87601:"f4b59696",87682:"02f142ff",87969:"7ec9cb9f",88030:"f9991db3",88357:"d4b70229",88574:"5db64ae2",88624:"75dff1c1",88738:"20b91dc5",88770:"0e9df90f",88845:"1db3beaa",89105:"e5eb79a4",89618:"939ea013",89717:"56057e27",89718:"f4eb7e3d",90046:"6a627a5b",90125:"60400165",90305:"e40c0018",90384:"63a4b75d",91257:"90ebffd3",91402:"04896e22",91423:"61a5ecd3",91641:"d2677e5d",91699:"b118e130",91742:"7b833729",91805:"7c81148f",91898:"2ea8e5f2",91912:"340a73f1",92086:"70283d8e",92252:"71a54fb2",93283:"2316a48c",93509:"ea961356",93558:"c523b219",93698:"2c520427",93757:"38e689c1",94237:"d16a076d",94305:"4023fff3",94476:"3bd07234",94719:"f7b567e6",94963:"879c55a9",95223:"77ac759b",95454:"8d5a148d",95963:"2135fcf4",95999:"376b5108",96065:"14dbde79",96170:"609063dc",96227:"61081448",96427:"51cebdb5",96569:"bad814ec",96665:"79ddb764",96714:"befaecc8",96835:"88424e11",97004:"56eb2e3d",97031:"ceb851ec",97118:"d11c07b5",97188:"bb54e408",97263:"1b8b347a",97276:"ee31313d",97695:"8fb5d20b",97948:"092b5aec",98036:"5f5593c9",98045:"37253144",98347:"1fbe6cd3",98492:"093c7611",98528:"75bf5728",98562:"3ab0000c",98756:"67efb041",98818:"4be006b4",99273:"e662b657",99466:"01bf6c4f",99532:"3ba1c8ad",99726:"d44c30e2"}[e]+".js"}}(),function(){o.miniCssF=function(e){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue:";o.l=function(s,n,i,r){if(e[s])e[s].push(n);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",t+i),a.src=s),e[s]=[n];var p=function(t,o){a.onerror=a.onload=null,clearTimeout(m);var n=e[s];if(delete e[s],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((function(e){return e(o)})),t)return t(o)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/"}(),function(){var e={32143:0};o.f.j=function(t,s){var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var i=new Promise((function(o,s){n=e[t]=[o,s]}));s.push(n[2]=i);var r=o.p+o.u(t),a=new Error,l=function(s){if(o.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var i=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",a.name="ChunkLoadError",a.type=i,a.request=r,n[1](a)}};o.l(r,l,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,i,r=s[0],a=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(l)var u=l(o)}for(t&&t(s);c<r.length;c++)i=r[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},s=self["webpackChunkvue"]=self["webpackChunkvue"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[94998],(function(){return o(63787)}));s=o.O(s)})();
//# sourceMappingURL=app.e152b7a5.js.map